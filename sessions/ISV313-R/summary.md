# AWS re:Invent 2025 技术会议总结：使用AI增强可观测性故障排除

## 会议概述

本次Level 300技术会议重点介绍了如何利用人工智能技术来提升分布式系统的故障排除效率。演讲者Ulie（柏林解决方案架构师）和Ruben（高级解决方案架构师）展示了在Amazon OpenSearch Service环境中集成AI功能的实际应用。

会议以一个多租户SaaS应用为演示背景，该应用基于OpenTelemetry演示项目构建，部署在Amazon EKS上。演讲者模拟了真实的生产环境故障场景：客户无法完成购买操作，出现504网关超时错误。通过这个实际案例，展示了AI如何帮助运维团队更快速地定位根本原因并解决问题。

整个演示涵盖了从传统日志分析到AI驱动的智能故障排除的完整流程，强调了在现代云原生环境中，AI技术对于提升运维效率的重要价值。

## 详细时间线与关键要点

### 00:00-05:00 会议介绍与架构概述
- **00:30** - 介绍会议目标：展示AI如何加速故障排除和根本原因分析
- **01:15** - 说明这是Level 300代码演示会议，重点展示实际操作而非深入代码细节
- **02:00** - 承诺提供完整的GitHub gist，包含所有代码片段和参考资料
- **02:30** - 演讲者自我介绍：Ulie（柏林SA，专注SaaS客户）和Ruben（高级SA，专注云运维和可观测性）
- **03:00** - 介绍演示应用：基于OpenTelemetry演示的多租户网店应用
- **04:00** - 展示应用架构：10个租户（动物名称标识）+ 共享服务模式

### 05:00-10:00 技术架构深入解析
- **05:30** - 详细说明Kubernetes部署架构和OpenTelemetry Collector配置
- **06:00** - 介绍数据流：应用→OpenTelemetry Collector→OpenSearch Ingestion→OpenSearch Service
- **07:00** - 解释OpenSearch生态组件：索引、OpenSearch Ingestion（ETL工具）、OpenSearch Dashboards
- **08:00** - 概述三个AI用例：自然语言查询生成、语义日志搜索、MCP集成
- **09:00** - 展示实际Kubernetes环境：命名空间、Pod状态检查

### 10:00-15:00 问题复现与初步分析
- **10:30** - 模拟CEO投诉：所有租户网店无法完成购买
- **11:00** - 使用kubectl port-forward访问Falcon租户应用
- **11:30** - 在浏览器中复现问题：点击"下单"按钮无响应
- **12:00** - 通过开发者控制台发现504网关超时错误
- **12:30** - 分析504错误含义：网关超时，表明分布式系统中某处处理时间过长
- **13:00** - 决定使用OpenSearch Dashboards进行深入分析

### 15:00-25:00 AI驱动的自然语言查询
- **15:30** - 进入OpenSearch Dashboards界面，展示日志数据概览
- **16:00** - 说明传统日志分析的挑战：大量信息中寻找关键线索
- **17:00** - 演示AI自然语言查询功能的价值主张
- **18:00** - 输入AI提示："寻找可能导致超时的日志，特别是速率限制相关"
- **19:00** - AI成功识别关键日志："Rate limit exceeded"在共享shipping服务中
- **20:00** - AI自动生成PPL查询语句，提供可重用的查询模板
- **21:00** - AI总结分析结果：shipping服务速率限制器可能是问题根源
- **22:00** - 创建可视化图表，展示各租户活动模式
- **23:00** - 发现Eagle租户异常活跃，确认"嘈杂邻居"问题

### 25:00-35:00 语义搜索技术深入
- **25:30** - 解释语义搜索与传统词汇搜索的区别
- **26:00** - 介绍向量嵌入模型和Amazon Bedrock集成
- **27:00** - 选择Amazon Titan Text Embeddings v2作为成本效益最优方案
- **28:00** - 分析日志数据的两个特点：大容量和语义相似性
- **29:00** - 介绍采样技术：每秒每服务仅处理10条日志
- **30:00** - 展示OpenSearch Ingestion管道配置
- **31:00** - 配置速率限制器实现日志采样
- **32:00** - 创建sampled-logs索引存储采样数据

### 35:00-45:00 语义搜索配置实战
- **35:30** - 使用OpenSearch Dev Tools进行配置
- **36:00** - 步骤1：创建到Amazon Bedrock的连接器
- **37:00** - 步骤2：注册和部署嵌入模型
- **38:00** - 测试模型：输入"生命的意义是什么？"获得向量嵌入
- **39:00** - 展示嵌入结果：长串浮点数数组编码语义信息
- **40:00** - 步骤3：配置索引自动嵌入功能
- **41:00** - 创建ingest pipeline处理日志嵌入
- **42:00** - 设置索引模板和向量字段配置
- **43:00** - 重建索引以应用新配置
- **44:00** - 验证配置：确认body_embedding字段存在

### 45:00-50:00 语义搜索实际应用
- **45:30** - 演示场景：仅知道"某些东西处理时间太长"
- **46:00** - 执行语义搜索："something is taking too long"
- **47:00** - 成功找到相关日志："rate limit exceeded request queued"
- **48:00** - 验证语义匹配：词汇上不相关但语义上高度相似
- **49:00** - 展示从空白问题到精确定位的完整过程

### 50:00-55:00 MCP集成与智能代理
- **50:30** - 介绍Model Context Protocol (MCP)和代理框架概念
- **51:00** - 展示Kiro CLI作为MCP客户端的配置
- **52:00** - 演示Python MCP服务器代码结构
- **53:00** - 配置OpenSearch连接：端点、区域、认证
- **54:00** - 集成boto3和FastMCP框架
- **54:30** - 会议因时间限制在MCP服务器配置部分结束

### 关键技术要点总结
- **自然语言查询**：将复杂的日志查询简化为自然语言描述
- **语义搜索**：基于含义而非关键词的智能日志检索
- **采样策略**：平衡成本和效果的大规模日志处理方案
- **多租户架构**：共享服务模式下的"嘈杂邻居"问题识别
- **AI集成**：OpenSearch与Amazon Bedrock的无缝协作