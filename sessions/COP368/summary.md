# AWS re:Invent 2025 多云环境可观测性会议总结

## 会议概述

本次会议由AWS高级解决方案架构师Nilo Bustani和Santosh Muanti主讲,重点探讨了在多云环境中实现可观测性的关键模式和最佳实践。会议首先明确了AWS对多云的定义——使用至少两个云服务提供商来运营IT解决方案和工作负载。AWS致力于帮助客户在多云战略中取得成功,基于开放联盟云采用的开放标准云成熟度模型,从人员、流程和技术三个维度提供支持。

演讲者深入分析了多云环境下可观测性面临的三大核心挑战:复杂性(多个仪表板之间切换导致故障排查困难)、流程开销(多个服务需要插桩,团队学习曲线陡峭)以及规模问题(多个遥测数据流带来的数据量、延迟和成本挑战)。为应对这些挑战,会议详细介绍了两种主要架构模式:集中式收集模式和联邦查询模式,并提供了基于开源工具和云原生服务的具体实现方案。会议还分享了Phillips 66能源公司的成功案例,展示了如何通过采用集中式收集模式和OpenTelemetry将平均解决时间缩短30%。

## 详细时间线

[00:00-01:30] 开场介绍
- 演讲者自我介绍:Nilo Bustani和Santosh Muanti,AWS高级解决方案架构师
- 会议主题:多云环境中的可观测性实现模式

[01:30-03:45] 多云定义与AWS方法论
- AWS多云定义:使用至少两个云服务提供商运营IT解决方案
- 客户选择多云的三大原因:差异化能力、并购整合、合规要求
- AWS多云方法基于开放联盟云采用的开放标准云成熟度模型
- 强调多云不仅是技术决策,更是战略决策,涵盖人员、流程、技术三大支柱

[03:45-06:15] 可观测性基础
- 可观测性核心目标:检测、调查、修复问题,降低平均解决时间(MTTR)
- 三大信号类型:指标(Metrics)、日志(Logs)、追踪(Traces)
- 可观测性策略的四个关键问题:
  - 如何跨云一致地收集遥测数据
  - 如何处理原始数据并确定优先级
  - 如何实现成本有效的存储策略
  - 使用什么可视化工具

[06:15-08:30] 多云可观测性的三大挑战
- **复杂性**:多个工具和服务依赖,团队需要在多个仪表板间切换才能找到根本原因
- **流程开销**:多个云意味着多个服务需要插桩,团队成员需要学习不同工具,整合所有工具可能需要数月时间
- **规模问题**:多个遥测数据流增加数据量,需要处理摄取延迟、查询性能和数据出口费用控制

[08:30-12:00] 集中式收集模式架构
- 以AWS和Google Cloud为例展示架构
- **收集层**:使用收集代理从计算工作负载收集信号
- **摄取层**:提供缓冲、路由和背压处理,确保信号可靠传输
- **规范化层**:将所有数据转换为标准格式,便于查询
- **存储层**:保存完整请求上下文
- **可视化层**:构建应用程序全局视图

[12:00-15:30] 集中式模式的开源实现
- **收集器**:OpenTelemetry Collector(CNCF标准,供应商中立,支持多语言和自动插桩)
- **摄取层**:Kong作为API网关和路由器,Kafka作为持久缓冲区
- **规范化**:OpenSearch Data Prepper标准化时间戳和服务名称
- **存储**:OpenSearch用于日志和追踪索引,Prometheus用于时间序列指标
- **可视化**:Grafana关联所有数据并提供全局视图

[15:30-17:00] 集中式模式的托管服务实现
- Amazon Managed Service for Prometheus
- Amazon OpenSearch Service
- Amazon Managed Grafana
- 优势:开箱即用的安全性和扩展能力(支持10亿时间序列),无需单独的摄取层

[17:00-19:00] 集中式模式的云原生实现
- 使用Amazon CloudWatch作为中心化存储
- AWS工作负载:基础设施遥测自动进入CloudWatch,使用CloudWatch Agent收集计算工作负载数据
- Google Cloud工作负载:使用CloudWatch Agent收集应用数据,通过Google Pub/Sub和AWS Lambda构建管道导出基础设施遥测
- CloudWatch提供仪表板、故障排查、异常检测和自动修复

[19:00-20:30] 集中式模式总结
- 通过标准收集器和数据规范化降低复杂性
- 减少流程开销,团队需要学习的工具更少
- 提供多云应用的全局统一视图

[20:30-23:30] 联邦查询模式介绍
- 适用场景:由于合规或成本原因需要将数据保留在原始位置
- 核心理念:跨多个数据源查询数据,同时保持数据在原始位置
- 架构组件:
  - 数据保留在AWS和GCP本地存储
  - **联邦层**:接收查询并拆分为多个子查询
  - **元数据目录**:存储模式信息用于查询规划
  - 结果聚合后呈现给可视化工具

[23:30-26:00] 联邦查询模式的开源实现
- **存储**:AWS遥测数据存储在Amazon S3,GCP遥测数据存储在GCP Storage
- **联邦层**:Trino作为查询协调器
- **元数据目录**:Hive Metastore存储模式信息
- **可视化**:Grafana
- 工作流程:Grafana发送查询→Trino拆分为子查询→使用连接器在各云执行→聚合结果→返回Grafana

[26:00-28:00] 联邦查询模式的云原生实现
- **存储**:保持相同(S3和GCP Storage)
- **联邦层**:Amazon Athena作为查询协调器
- **元数据目录**:AWS Glue帮助规划和处理查询
- **可视化**:Amazon Managed Grafana
- 工作流程:Managed Grafana→Athena→拆分子查询→检索数据→聚合→返回可视化

[28:00-31:00] 两种模式的决策要点
- **选择集中式收集模式的场景**:
  - 需要单一真实数据源
  - 追求更快的分析和更好的治理
  - 优化速度和简单性,查询更快,治理更容易
  - 权衡:存储成本增加

- **选择联邦查询模式的场景**:
  - 有合规或数据驻留要求
  - 需要灵活性和数据新鲜度
  - 数据保持原位,存储成本优化,始终使用最新数据
  - 权衡:引入查询延迟和更复杂的编排

- 决策考虑因素:合规要求、数据新鲜度需求、成本敏感度
- 可以根据用例采用混合解决方案

[31:00-32:30] 客户案例:Phillips 66
- 全球能源公司,管理跨多个云提供商的数千个应用
- 70%工作负载在AWS,同时在多个云和本地环境有部署
- 解决方案:实施集中式收集模式,采用OpenTelemetry进行数据收集,使用Amazon Managed Service for Prometheus和Amazon Managed Grafana
- 成果:平均解决时间(MTTR)缩短30%

[32:30-34:00] 后续步骤与资源
- 推荐参加re:Invent 2025其他多云相关分会场(会议录像将在活动后提供)
- 访问Village的多云展台:观看现场演示,深入了解特定用例,与专家交流
- 提供资源工具包,帮助制定多云架构战略、创建新架构或优化现有架构

[34:00-34:30] 会议结束
- 感谢参会者,希望会议内容对大家有所帮助