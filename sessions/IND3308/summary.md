# AWS re:Invent 2025 - Capital One 高可靠性平台构建实践

## 会议概述

本次会议由AWS战略客户解决方案经理Enrique Bastante主持，邀请了Capital One企业平台组织的两位领导者Sobhan和Arun分享他们在构建高可靠性业务关键应用平台方面的经验。Capital One被AWS视为在可靠性实践方面的世界级组织，本次分享重点介绍了他们如何构建大规模高可靠性平台的架构策略、最佳实践和经验教训。

会议内容涵盖了Capital One从2019年转型为平台化组织的历程，展示了他们如何通过现代化平台架构解决业务线重复建设、数据冗余等问题。演讲者详细阐述了可靠性作为平台信任基础的重要性，以及他们在架构设计、无服务器采用、零停机部署、基础设施即代码等方面的创新实践。

## 详细时间线与关键要点

### 0:00-5:00 开场介绍与背景
- Enrique Bastante介绍会议背景，强调Capital One在可靠性方面的世界级地位
- Sobhan开始演讲，询问现场观众使用Capital One应用的情况
- 介绍平台化转型的必要性：解决业务线间重复建设问题

### 5:00-10:00 平台化转型历程
- 2019年前的挑战：业务线间能力重复、架构模式不标准、数据重复存储
- 2019年宣布成为平台化组织，重点投资可重用、可扩展、可信赖的基础平台
- 介绍三类平台：开发者平台（CI/CD）、核心业务平台（交易处理、支付处理）、客户交互平台（身份认证、消息传递）

### 10:00-15:00 现代平台七大支柱
- 重点关注第一支柱：可靠性（Reliability）
- 可靠性三要素：可用性（Availability）、弹性（Resiliency）、可靠性（Reliability）
- 可用性通过正常运行时间和成功率衡量，使用"几个九"的行业标准
- 弹性关注故障恢复能力和平均恢复时间（MTTR）

### 15:00-25:00 架构反模式分析
- Arun接手演讲，介绍架构策略和反模式
- "一体化方法"反模式：单体应用、单区域、单可用区部署
- 微服务增殖反模式：紧耦合的微服务导致级联故障
- 部署反模式：实时和批处理流量共享集群
- 数据库反模式：分析负载和实时负载共享数据库

### 25:00-35:00 企业架构标准
- 双区域部署标准：所有服务部署到两个区域
- 区域亲和性：避免跨区域依赖
- 领域驱动设计（DDD）：模块化、高度解耦、容错的服务架构
- 最小部署要求：双区域、多可用区、DDD边界上下文、自动扩展、数据库自动复制

### 35:00-45:00 高级可靠性模式
- 毒丸请求问题：能够持续导致服务崩溃的特殊请求
- 熔断器模式：在路由层实现客户级别的熔断保护
- 标准分片技术：将客户分组到不同分片，减少爆炸半径
- 洗牌分片（Shuffle Sharding）：为每个客户创建唯一的分片组合，进一步降低故障影响范围

### 45:00-50:00 无服务器采用
- 从EC2迁移到无服务器的原因：实例类型不可用、IP耗尽、扩展时间长、运维负担重
- 关键任务平台使用ECS Fargate服务
- Lambda函数用于非关键异步路径，需要设置最大并发限制避免账户级并发耗尽

### 50:00-57:00 故障模式与最佳实践
- 六种故障模式：云提供商故障、内部平台依赖故障、外部供应商故障、客户毒丸请求、平台工程师错误、不可信代码
- 沙箱安全模型：为不可信代码创建隔离的微JVM环境
- 基础设施即代码：使用AWS CDK替代YAML配置，支持测试驱动的基础设施开发
- 零停机部署：使用CodeDeploy实现渐进式发布和自动回滚