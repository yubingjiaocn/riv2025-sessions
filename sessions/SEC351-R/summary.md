# AWS re:Invent 2025 - IAM Policy Autopilot 会议总结

## 会议概述 (Session Overview)

本次会议由AWS Identity团队的首席产品经理Kevin Luo和首席工程师Luke Kennedy主讲，重点介绍了AWS新推出的IAM Policy Autopilot工具。这是一个300级别的技术会议，主要面向有一定AWS经验的开发者。会议通过构建一个多租户微服务的实际场景，演示了传统IAM策略创建方法的挑战，以及IAM Policy Autopilot如何通过静态代码分析自动生成精确的IAM策略来解决这些问题。

演讲者首先展示了开发者在创建IAM策略时面临的常见困境：使用管理员权限过于宽泛、AWS托管策略仍然过度授权、手工编写策略耗时且容易出错、AI编程助手生成的策略经常包含不存在的权限。随后详细介绍了IAM Policy Autopilot的工作原理，包括静态代码分析、操作到权限的映射，以及与编程助手的集成。整个演示过程展现了该工具如何实现确定性的策略生成，并支持自动修复访问拒绝错误。

## 详细时间线与关键要点 (Detailed Timeline)

### 0:00-5:00 会议开场与场景介绍
- Kevin Luo和Luke Kennedy自我介绍，确认听众的AWS经验水平
- 介绍演示场景：构建一个为多租户服务创建和加密S3存储桶的微服务
- 架构说明：Lambda函数接收客户ID和名称，创建专用KMS密钥，创建存储桶并配置加密

### 5:00-15:00 代码演示与权限问题
- 展示Python Lambda函数代码，使用BOTO3 SDK调用AWS服务
- 演示Lambda函数部署过程，遇到权限不足错误
- 解释IAM基础概念：身份与访问管理、执行角色、IAM策略
- 讨论开发者常用的权限配置方法：管理员访问权限的利弊

### 15:00-25:00 传统解决方案的局限性
- 演示AWS托管策略的使用，如S3FullAccess和KMS相关策略
- 遇到"malformed policy document exception"错误，解释KMS put key policy权限缺失问题
- 展示手动创建内联策略的复杂性
- 介绍编程助手生成IAM策略的尝试，发现生成的策略包含不存在的权限（如S3:HeadBucket）

### 25:00-30:00 IAM Policy Autopilot介绍
- 解释为什么AI编程助手在AWS IAM方面表现不佳：基于公开信息训练、无法理解隐藏依赖、命名不一致等问题
- 正式介绍IAM Policy Autopilot：周日刚发布的开源命令行工具
- 工作原理说明：静态代码分析、操作到IAM权限的映射、基于AWS IAM服务参考数据生成策略

### 30:00-35:00 工具优势与限制
- 三大核心优势：确定性（相同代码生成相同策略）、实时更新（使用最新服务参考数据）、可靠性（基于真实服务数据）
- 当前限制：仅支持身份策略、非最小权限、静态分析无法自动识别资源名称、某些复杂跨服务依赖可能缺失
- 内部数据显示：该工具生成的权限数量仅为开发者实际使用权限的3%

### 35:00-42:00 实际演示与集成
- Luke Kennedy演示IAM Policy Autopilot的安装和配置过程
- 展示作为MCP服务器与Kiro编程助手的集成
- 演示自动生成正确的IAM策略，包含所有必需权限且无不存在的权限
- 使用CloudFormation进行基础设施即代码部署
- 演示代码迭代场景：添加SQS通知功能
- 展示自动修复访问拒绝错误的功能，实现完全自动化的权限管理流程