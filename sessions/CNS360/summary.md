# AWS re:Invent 2025 无服务器应用安全最佳实践会议总结

## 会议概述

本次会议由AWS解决方案架构师Heeki Park和Chris McPeak主讲，重点讨论无服务器应用的安全最佳实践。Heeki Park在AWS工作9年多，专注于无服务器和代理应用程序，Chris McPeak在AWS工作7年半，专注于无服务器应用开发。会议采用健身追踪器应用作为实际案例，展示了从基础安全概念到现代代理应用程序的完整安全架构。

会议分为两个主要部分：Chris首先介绍无服务器应用安全的基础概念和最佳实践，包括账户边界、加密、IAM策略、API保护等；随后Heeki深入探讨身份感知应用程序，详细讲解OAuth2流程、Amazon Verified Permissions以及新发布的AgentCore服务如何简化代理应用程序的安全实现。

## 详细时间线与关键要点

### 00:00-05:00 会议开场与架构介绍
- 演讲者自我介绍和会议互动环节
- 引入健身追踪器应用案例：运动员数据通过API Gateway收集，触发Lambda函数写入DynamoDB
- 基本架构：健身追踪器 → API Gateway → Lambda → DynamoDB

### 05:00-15:00 基础安全概念
- **账户边界**：开发者沙盒环境与生产环境分离，通过结构化部署管道确保安全
- **加密**：Lambda环境变量使用KMS加密，API Gateway缓存加密，所有无服务器服务默认传输加密
- **IAM策略**：区分控制平面和数据平面安全，组织级SCP策略vs资源策略

### 15:00-25:00 Lambda安全与权限管理
- **Lambda资源策略vs执行角色**：资源策略控制谁可以调用Lambda，执行角色控制Lambda可以访问什么
- **最小权限原则**：避免通配符权限，采用迭代方式设置权限
- **权限边界**：开发者可以创建策略但受权限边界限制，有效权限是策略和权限边界的交集

### 25:00-35:00 组织级安全控制
- **SCP (Service Control Policies)**：组织级策略应用于所有账户
- **API Gateway私有端点**：通过SCP限制只能创建私有端点，流量通过VPC进行安全验证
- **数据库集成**：DynamoDB支持IAM，其他数据库使用Secrets Manager管理凭证

### 35:00-40:00 开发生命周期安全
- **源代码分析**：Amazon Inspector检查依赖项问题，新发布的安全代理分析源代码
- **运行时异常检测**：Amazon GuardDuty分析VPC流日志检测应用异常
- **事件负载验证**：Power Tools进行严格类型验证，API Gateway输入验证
- **端点保护**：AWS WAF基于IP、地理位置保护，支持第三方规则集

### 40:00-50:00 身份感知应用与OAuth2
- **OAuth2核心概念**：资源所有者、用户代理、客户端应用、受保护资源、授权服务器
- **授权流程**：代码授权流程（用户交互）和客户端凭证流程（机器对机器）
- **令牌类型**：ID令牌（身份识别）、访问令牌（权限范围）、刷新令牌（自动更新）
- **Amazon Verified Permissions**：使用Cedar策略语言定义细粒度权限
- **AgentCore服务**：简化代理应用程序安全实现，包括运行时、网关、身份管理等组件

### 关键安全建议
- 实施最小权限策略，避免通配符权限
- 采用深度防御策略，应用多层安全机制
- 利用AWS服务间的深度集成
- 自动化安全保护机制，包括运行时保护和CI/CD管道检查