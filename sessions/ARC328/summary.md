# AWS re:Invent 2025 - ARC328: 隐私保护AI基础组件 - 受监管行业的构建模块

## 会议概述

本次会议由AWS首席解决方案架构师Robin Mertz和AWS计算与机器学习服务组织的首席架构师JD Bean共同主讲，重点探讨了在受监管行业中构建AI/ML系统时如何保护敏感数据。随着AI对数据需求的增长和监管要求的不断加强，数据保护变得前所未有的重要。演讲者基于与受监管客户的实际合作经验，分享了三大核心构建模块：加密、令牌化和机密计算技术。

会议强调了AWS共享责任模型下的数据保护策略，提供了从数据传输加密、静态加密到使用中数据保护的完整解决方案。演讲者特别指出，这些构建模块适用于从简单统计模型到大型基础模型的各种AI/ML场景，并且可以在不同的部署模式下使用，包括EC2实例、无服务器架构和托管AI服务。通过结合AWS KMS、客户端加密SDK、Nitro系统等技术，客户可以在保持云计算敏捷性的同时，满足严格的合规要求并获得可验证的安全保证。

## 详细时间线

### 开场与背景介绍
- **00:00:00** - 会议开始，Robin Mertz介绍会议主题ARC328：隐私保护AI基础组件
- **00:00:30** - JD Bean自我介绍，说明其在AWS工程和产品团队中的角色
- **00:01:00** - Robin强调在受监管行业工作多年的经验，指出AI时代数据保护的重要性
- **00:01:30** - 说明会议目标：提供保护数据的基本构建模块，帮助客户理解如何开始实施

### 监管环境与合规要求
- **00:02:00** - 介绍会议为300级别，假设观众熟悉核心服务、KMS、加密等概念
- **00:02:30** - 现场调查：询问有多少人在受监管行业工作
- **00:03:00** - 讨论当前监管环境：网络安全、数据保护、业务连续性和AI系统监管
- **00:03:30** - 强调数据隐私和数据保护已成为跨行业的核心关注点
- **00:04:00** - 说明合规要求的三大核心能力：可见性、安全访问和数据控制

### 共享责任模型与保证机制
- **00:04:30** - 介绍AWS共享责任模型：AWS负责云的安全，客户负责云中的安全
- **00:05:00** - 第一原则：提供具有保证的控制措施和可验证证据
- **00:05:30** - AWS提供的保证：合同承诺、140多项认证和第三方审计
- **00:06:00** - 客户侧：许多受监管客户使用开源框架以获得完全控制和可见性

### AI/ML系统的心智模型
- **00:06:30** - 介绍AI/ML频谱：从数千参数的统计模型到数十亿参数的基础模型
- **00:07:00** - 第二原则：构建模块应广泛适用于各种场景
- **00:07:30** - 建立AI/ML系统的心智模型：训练和推理两个核心过程
- **00:08:00** - 强调每个组件都可能包含敏感数据：训练数据、代码、模型权重、推理提示和输出
- **00:08:30** - 引用生成式AI安全范围矩阵：从消费者应用到企业解决方案的五个实施模式

### 参考场景
- **00:09:00** - 介绍三种参考场景：EC2/EKS直接使用、Lambda无服务器推理、托管AI服务
- **00:09:30** - 说明所有场景都可以利用各种存储和数据库解决方案

## 构建模块一：加密

### AWS KMS基础
- **00:10:00** - 介绍AWS密钥管理服务(KMS)作为中央加密控制平面
- **00:10:30** - 密钥存储的四种选项：原生KMS、CloudHSM、外部密钥存储、导入外部密钥材料
- **00:11:00** - 原生KMS：FIPS 140-3 Level 3合规的共享HSM，适合大多数用例
- **00:11:30** - CloudHSM：为需要专用HSM的受监管场景提供
- **00:12:00** - 外部密钥存储：密钥存储在本地，可能增加延迟
- **00:12:30** - 强调KMS的核心原则：密钥永不以未加密形式离开KMS

### 静态加密
- **00:13:00** - 介绍三种静态加密方法：客户端加密、客户管理密钥、AWS拥有的密钥
- **00:13:30** - 客户端加密：数据在到达AWS之前加密
- **00:14:00** - 客户管理密钥：控制密钥策略和整个生命周期，包括轮换
- **00:14:30** - AWS拥有的密钥：提供透明加密、自动轮换、无存储费用
- **00:15:00** - 说明客户管理密钥可保护多种ML资产：Bedrock自定义模型、代理会话数据、S3中的模型工件

### 传输中加密
- **00:15:30** - 介绍多层加密保护：客户端加密、应用层TLS、VPC层、物理层
- **00:16:00** - 应用层：TLS 1.2/1.3与完美前向保密，保护Bedrock、SageMaker等服务
- **00:16:30** - VPC层：兼容EC2实例间由Nitro系统提供的自动加密
- **00:17:00** - 介绍VPC加密控制：提供集中的加密可见性和执行
- **00:17:30** - 物理层：区域边界、可用区之间以及对等连接的所有流量加密

### 分布式AI训练的特殊用例
- **00:18:00** - 介绍弹性网络适配器(EFA)：提供始终加密的高性能网络
- **00:18:30** - EFA特性：硬件加速加密、利用Nitro系统、无性能损失
- **00:19:00** - 提供GPU Direct RDMA访问和高达3.2TB/s的吞吐量

### 加密架构总览
- **00:19:30** - 展示高层架构图：TLS保护双向数据流
- **00:20:00** - Direct Connect使用MACSec，可在其上添加S2S VPN
- **00:20:30** - VPC内：Nitro系统为兼容EC2实例间的训练工作负载提供加密
- **00:21:00** - 存储服务使用KMS管理密钥的信封加密

### 信封加密详解
- **00:21:30** - 介绍信封加密：实现两层加密层次结构
- **00:22:00** - KMS管理主密钥，数据密钥处理实际加密操作
- **00:22:30** - 工作流程：调用generate_data_key获取明文和加密的数据密钥
- **00:23:00** - 使用明文密钥加密数据后立即丢弃，存储加密版本
- **00:23:30** - 解密时反向操作：调用KMS解密数据密钥，然后解密数据
- **00:24:00** - 优势：无状态架构、支持大数据集、启用数据密钥缓存以减少API调用

### 客户端加密实施
- **00:24:30** - 客户端加密在AI/ML工作负载中的应用场景
- **00:25:00** - 生产者可以在本地或云中加密训练数据集、模型工件或推理负载
- **00:25:30** - 数据可以持久化到S3/DynamoDB或直接传递给消费者
- **00:26:00** - 处理可以跨Lambda、EC2、本地环境进行，甚至可以使用Nitro Enclave
- **00:26:30** - 使用IAM范围权限精确控制谁可以解密数据
- **00:27:00** - 数据在整个ML生命周期中保持加密状态

### 客户端加密SDK选项
- **00:27:30** - 介绍三种客户端加密选项
- **00:28:00** - AWS加密SDK：跨平台SDK，支持通用加密操作
- **00:28:30** - AWS数据库加密SDK：提供记录级加密和字段级签名
- **00:29:00** - Amazon S3加密客户端：通过拦截put/get操作自动加密解密
- **00:29:30** - 所有解决方案都实现相同的信封加密原语，针对特定用例优化

### 加密SDK代码示例
- **00:30:00** - 展示Python示例：创建加密SDK客户端
- **00:30:30** - 获取KMS客户端并创建密钥环
- **00:31:00** - 设置加密上下文元数据：可选的非机密键值对
- **00:31:30** - 加密上下文用途：提供额外的认证数据，防止密文替换攻击
- **00:32:00** - 可以绑定模型版本或训练作业ID到加密的数据集和模型工件
- **00:32:30** - 每个对象生成唯一的数据密钥
- **00:33:00** - 提及数据密钥缓存和分层密钥环等高级选项

### 客户端加密架构回顾
- **00:33:30** - 重新审视参考架构：客户端加密提供额外的加密层
- **00:34:00** - 在EC2场景中保护来自本地或存储服务的数据
- **00:34:30** - KMS密钥策略提供精确的解密授权控制

### 加密总结
- **00:35:00** - AWS加密广泛保护训练数据集、推理数据和模型工件
- **00:35:30** - 使用客户管理密钥获得控制权
- **00:36:00** - 核心安全原则：确保所有服务中明文加密密钥材料无人工交互

## 构建模块二：令牌化

### 令牌化基础
- **00:36:30** - 介绍令牌化作为加密的补充技术
- **00:37:00** - 令牌化通过移除或替换敏感数据来减少合规范围
- **00:37:30** - 示例：信用卡号和电子邮件地址被令牌替换
- **00:38:00** - 令牌可以随机或伪随机生成
- **00:38:30** - 令牌和原始映射存储在令牌库中
- **00:39:00** - 令牌库作为控制谁有权恢复原始映射的中心点

### 令牌化架构
- **00:39:30** - 展示使用Lambda的无服务器实现
- **00:40:00** - 一个Lambda函数处理令牌化过程
- **00:40:30** - 另一个Lambda函数实现令牌化的业务逻辑
- **00:41:00** - 使用AWS数据库加密SDK实现客户端加密模式
- **00:41:30** - 在传输和静态加密之上添加额外保护层
- **00:42:00** - 令牌化通过从系统中移除敏感数据来减少合规范围

## 构建模块三：机密计算

### 机密计算介绍
- **00:42:30** - JD Bean接管演讲，介绍使用中数据保护
- **00:43:00** - 现场调查：询问有多少人听说过机密计算
- **00:43:30** - 定义机密计算：通过专用硬件、固件和软件保护敏感数据或代码免受外部未授权访问
- **00:44:00** - AWS的主要机密计算技术：AWS Nitro系统

### AWS Nitro系统
- **00:44:30** - Nitro系统是2018年以来所有虚拟化EC2实例的基础技术
- **00:45:00** - 开发历程：2012年开始，2017年11月在re:Invent正式发布
- **00:45:30** - 组成：专用硬件设备集合和为AWS构建的定制虚拟机监控程序
- **00:46:00** - 目前已是第六代定制芯片
- **00:46:30** - 为每个基于Nitro的EC2实例提供始终开启的机密计算
- **00:47:00** - 免费、无性能影响、默认提供

### Nitro系统的零操作员访问
- **00:47:30** - AWS在技术上无法访问客户Nitro EC2实例的内容
- **00:48:00** - 无法访问加密存储或加密传输流量
- **00:48:30** - 客户无需更改代码即可启用
- **00:49:00** - 机密计算的优势：无需大幅修改通用代码即可隔离敏感数据

### Nitro系统的保证机制
- **00:49:30** - 发布深度白皮书：概述Nitro系统各组件如何协同工作
- **00:50:00** - 第三方验证：NCC Group确认零操作员访问的安全声明
- **00:50:30** - 服务条款第96节：对每个AWS客户的零操作员访问承诺
- **00:51:00** - 保护范围包括CPU资源、内存和加速器设备

### 加速器保护
- **00:51:30** - Nitro保护扩展到所有关联的加速器设备
- **00:52:00** - 包括AWS Trainium芯片、Nvidia、Qualcomm、AMD、Intel加速器
- **00:52:30** - 列举支持的GPU实例类型
- **00:53:00** - 也适用于本周re:Invent发布的新实例

### AWS Nitro Enclaves
- **00:53:30** - 客户需求：构建类似排除外部未授权访问的系统
- **00:54:00** - 澄清：并非每个工作负载都需要这种机制
- **00:54:30** - 并非每个受监管工作负载都需要这种机制
- **00:55:00** - 但确实有客户寻求这些能力以满足合规、安全要求或建立信任
- **00:55:30** - 关键问题：要保护什么？要防范谁？
- **00:56:00** - 如果防范AWS操作员：无需更改代码，Nitro已提供保护
- **00:56:30** - 如果关注自己的操作员、管理员或供应链问题：需要其他技术

### Nitro Enclaves工作原理
- **00:57:00** - 将EC2实例划分为两个强隔离的计算域
- **00:57:30** - 技术上是在逻辑EC2实例内运行的两个纯虚拟机
- **00:58:00** - 第二个虚拟机称为Nitro Enclave
- **00:58:30** - Nitro Enclave特点：无本地存储、无TCP/IP网络连接、无SSH或远程交互访问
- **00:59:00** - 创建受限且降低的攻击面
- **00:59:30** - 可以使用可哈希的文件启动，生成单一加密值
- **01:00:00** - 该哈希值代表enclave内的整个执行上下文

### 可证明的EC2实例
- **01:00:30** - 客户反馈：希望将整个EC2实例变得类似Nitro Enclave
- **01:01:00** - 几个月前发布新功能：为EC2实例应用零操作员访问配置
- **01:01:30** - 实现方式：使用Amazon Linux副本、AWS提供的配方和客户的可信代码
- **01:02:00** - 使用Kiwi Next Generation工具组合
- **01:02:30** - 创建不包含SSH或串行控制台访问的AMI
- **01:03:00** - 只读文件系统创建不可变镜像
- **01:03:30** - 可以用单一加密哈希从头到尾捕获

### 加密证明
- **01:04:00** - Nitro TPM和Nitro Enclaves都能提供代码的加密证明
- **01:04:30** - 从Nitro虚拟机监控程序获取证明文档
- **01:05:00** - 证明环境的特定测量值
- **01:05:30** - 外部系统可以验证运行的代码是否被授权
- **01:06:00** - 特别有用的流程：与AWS KMS的交互

### KMS证明集成
- **01:06:30** - 工作流程：生成测量值，生成证明文档
- **01:07:00** - 使用Nitro虚拟机监控程序签名
- **01:07:30** - 环境向AWS KMS传递请求（如解密密钥值）
- **01:08:00** - KMS验证证明文档
- **01:08:30** - 基于内容做出授权决策
- **01:09:00** - 拒绝请求或返回密钥值给可信执行环境

### 证明文档详解
- **01:09:30** - 展示Nitro TPM证明文档示例
- **01:10:00** - PCR4：对应整个启动上下文的测量值
- **01:10:30** - 包括内核、启动代码和根文件系统
- **01:11:00** - 从技术层面看是执行身份的加密版本
- **01:11:30** - PCR7：链接到UEFI安全启动策略
- **01:12:00** - 对应代码是否由特定加密令牌签名
- **01:12:30** - 典型场景：CI/CD管道签名输出，授权处理敏感数据

### 测量值的权衡
- **01:13:00** - PCR4：非常具体的测量值，可能较脆弱
- **01:13:30** - PCR7：更具可扩展性但保证稍低
- **01:14:00** - 可以将这些值直接插入KMS密钥策略
- **01:14:30** - 展示KMS密钥策略示例：在条件部分查找特定PCR值

### 实际应用架构
- **01:15:00** - 展示简单架构图：终端用户设备使用KMS密钥加密数据
- **01:15:30** - 密钥策略仅允许带有可信测量值PCR的证明文档解密
- **01:16:00** - 加密用户数据发送到具有强大加速器访问权限的Nitro EC2实例
- **01:16:30** - AWS操作员无法访问此EC2实例
- **01:17:00** - 由于测量值和预验证，客户操作员也无法访问敏感数据
- **01:17:30** - 无法修改EC2实例内运行的系统
- **01:18:00** - 数据进入后调用KMS，KMS验证证明文档
- **01:18:30** - 解密数据，使用TLS发送回，执行推理请求

### 与令牌化集成
- **01:19:00** - 将机密计算技术集成到之前讨论的工作流程中
- **01:19:30** - 回到令牌化：敏感数据需要被令牌化和转换
- **01:20:00** - 最佳环境：Nitro Enclave或可证明的EC2实例
- **01:20:30** - 提供零操作员访问和强隔离边界
- **01:21:00** - 可以安全处理敏感数据并转换为不太敏感的数据
- **01:21:30** - 通过证明确保提供敏感数据的服务是适当的令牌化系统
- **01:22:00** - 确保系统将按其代码指示处理数据

### 会议结束
- **01:22:30** - 演讲内容结束（字幕在此处截断）

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


注： 本摘要基于提供的字幕文本生成，涵盖了会议的主要内容和关键技术点。时间戳为近似值，基于字幕中的时间标记。