# AWS Certificate Manager 导出证书自动化管理

## 会议概述

本次会议由AWS首席安全解决方案架构师Zach Miller和安全专家Pravin Nair主讲，重点介绍了AWS Certificate Manager (ACM)的新功能——可导出公共证书，以及如何实现证书管理的自动化。会议详细展示了一个开源解决方案，该方案能够自动化处理证书的导出、安装和续期，特别适用于EC2实例、防火墙、本地服务器等非ACM集成服务。

演讲者强调了传统证书管理面临的挑战，包括手动安装、续期提醒、多环境部署等问题，并展示了如何通过事件驱动架构实现完全自动化的证书生命周期管理。该解决方案支持跨账户部署，使用Systems Manager进行大规模证书安装，并通过标签和DynamoDB表进行证书追踪管理。

## 详细时间线与关键要点

### 00:00-05:00 会议开场与功能介绍
- 介绍可导出公共证书功能的背景和需求
- 传统ACM只能绑定到集成服务（ALB、API Gateway、CloudFront）
- 客户需要将证书部署到防火墙、EC2实例等非集成设备
- 新功能允许导出私钥，满足更广泛的使用场景

### 05:00-15:00 定价模式与技术细节
- 每个FQDN收费$15，仅在首次导出时收费
- 通配符证书定价$149
- 证书有效期13个月，私钥通过KMS加密保护
- 支持DNS验证和邮件验证，强烈推荐DNS验证
- 导出时需要设置密码短语加密私钥

### 15:00-25:00 使用场景与挑战分析
- 多云环境、本地系统、防火墙等使用场景
- 传统证书管理的痛点：手动流程、续期遗忘、环境复杂性
- 解决方案设计目标：事件驱动、自动化续期、私钥安全保护
- 支持手动触发和自动续期两种工作流程

### 25:00-35:00 架构深度解析
- API Gateway接收证书ARN和目标信息
- Step Functions协调三个Lambda函数执行流程
- 第一个Lambda导出证书并生成动态密码短语
- 密码短语存储在Secrets Manager中，私钥加密传输
- DynamoDB表记录证书元数据和安装位置

### 35:00-45:00 安全机制与跨账户支持
- 基于属性的访问控制(ABAC)，EC2实例标签必须匹配
- Systems Manager自动化文档执行证书安装
- 支持Linux和Windows系统，可扩展到其他应用
- 跨账户部署支持，密码短语存储在目标账户
- EventBridge规则监听证书续期事件

### 45:00-56:00 现场演示与问答
- 展示完整的证书导出和安装流程
- 演示跨账户证书部署过程
- DynamoDB表中的证书追踪信息展示
- 自动续期流程的EventBridge触发机制
- 开源代码库介绍和扩展可能性讨论