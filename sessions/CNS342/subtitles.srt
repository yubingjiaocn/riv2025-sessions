1
00:00:00,960 --> 00:00:03,390
- And I am, my name is Mats Lanner.

2
00:00:03,390 --> 00:00:06,000
I'm the director of engineering for ECS,

3
00:00:06,000 --> 00:00:09,960
so responsible for all
things ECS and related.

4
00:00:09,960 --> 00:00:12,330
With me I have Alexandr.

5
00:00:12,330 --> 00:00:13,230
- Hey folks, I'm Alex.

6
00:00:13,230 --> 00:00:16,443
I'm a product manager for
Amazon ECS focusing on Fargate.

7
00:00:17,670 --> 00:00:19,860
- And we also our
distinguished guest. Yeah.

8
00:00:19,860 --> 00:00:23,820
- Hi Reuben, quantitative
technologies at QRT.

9
00:00:23,820 --> 00:00:25,083
Nice to meet you.

10
00:00:26,580 --> 00:00:30,780
- Cool. So today we're gonna
talk a little bit about

11
00:00:30,780 --> 00:00:33,180
what Amazon ECS is or it works.

12
00:00:33,180 --> 00:00:34,470
This is a 300 session,

13
00:00:34,470 --> 00:00:37,320
so we assume that you
know the basics of ECS

14
00:00:37,320 --> 00:00:39,123
since you chose to join us.

15
00:00:40,290 --> 00:00:43,590
Then I'm gonna talk about
capacity provisioning with ECS,

16
00:00:43,590 --> 00:00:44,790
how you get the compute,

17
00:00:44,790 --> 00:00:47,670
you need to actually
run your applications.

18
00:00:47,670 --> 00:00:49,350
After that, Alexandr will take over

19
00:00:49,350 --> 00:00:51,870
and talk about security
and compliance aspects

20
00:00:51,870 --> 00:00:53,850
of running your applications on ECS

21
00:00:53,850 --> 00:00:55,410
and how we help you there.

22
00:00:55,410 --> 00:00:57,480
And also cost optimization,

23
00:00:57,480 --> 00:00:59,730
what we do to make it cheaper for you

24
00:00:59,730 --> 00:01:01,620
to run your applications.

25
00:01:01,620 --> 00:01:04,080
And then perhaps most interestingly,

26
00:01:04,080 --> 00:01:06,660
we'll have Ruben talk about the journey

27
00:01:06,660 --> 00:01:09,990
that cube research and
technologies have been on ECS,

28
00:01:09,990 --> 00:01:13,260
going from a reasonable scale application

29
00:01:13,260 --> 00:01:17,070
to a very large scale
workload on ECS and Fargate

30
00:01:17,070 --> 00:01:18,753
just been super exciting to see.

31
00:01:21,540 --> 00:01:23,463
So what is ECS?

32
00:01:24,600 --> 00:01:26,880
The simplest way of
thinking about it is that,

33
00:01:26,880 --> 00:01:29,700
ECS is a container orchestrator built

34
00:01:29,700 --> 00:01:32,310
for use on AWS,

35
00:01:32,310 --> 00:01:34,590
where the guiding principle is that

36
00:01:34,590 --> 00:01:38,580
we take on as much of the
operational chores as possible

37
00:01:38,580 --> 00:01:41,553
so that you can focus on
your application instead.

38
00:01:42,630 --> 00:01:44,250
There's no control plane to manage

39
00:01:44,250 --> 00:01:46,950
because we take care of that.

40
00:01:46,950 --> 00:01:50,130
If you use Fargate, there's
no compute to manage

41
00:01:50,130 --> 00:01:52,413
because we take care of things like that.

42
00:01:54,120 --> 00:01:56,670
So looking at ECS,

43
00:01:56,670 --> 00:01:59,290
there are four pillars we think about

44
00:02:00,504 --> 00:02:03,960
for how ECS works and
what we build it for.

45
00:02:03,960 --> 00:02:05,553
So the first one is that,

46
00:02:05,553 --> 00:02:08,550
it's to launch containers at scale.

47
00:02:08,550 --> 00:02:13,550
It doesn't matter if your
workload requires one task

48
00:02:13,560 --> 00:02:15,850
and runs at a fraction of a TPS

49
00:02:16,980 --> 00:02:19,140
or if it's a very large scale application

50
00:02:19,140 --> 00:02:21,210
with tens of thousands of tasks

51
00:02:21,210 --> 00:02:23,643
running at the hundreds
of thousands of TPS.

52
00:02:24,690 --> 00:02:27,930
ECS is there to support
you on that whole journey,

53
00:02:27,930 --> 00:02:30,300
giving you a consistent operating model

54
00:02:30,300 --> 00:02:32,043
regardless of what your scale is.

55
00:02:34,200 --> 00:02:38,040
Second is that you only
pay for what you use.

56
00:02:38,040 --> 00:02:40,320
And what that means is that

57
00:02:40,320 --> 00:02:43,233
there's no charge for using ECS itself.

58
00:02:44,490 --> 00:02:46,380
What you do pay for

59
00:02:46,380 --> 00:02:49,710
is the resources that
we provision for you.

60
00:02:49,710 --> 00:02:52,110
So if you launch EC2 instances,

61
00:02:52,110 --> 00:02:56,550
well you pay for the EC2
instances, EBS volumes,

62
00:02:56,550 --> 00:02:59,070
low balancers and things like that.

63
00:02:59,070 --> 00:03:00,780
But you only pay for the things that

64
00:03:00,780 --> 00:03:03,120
you actually need to run your application.

65
00:03:03,120 --> 00:03:05,340
If you're using Fargate, for example,

66
00:03:05,340 --> 00:03:07,170
if you're not running a task,

67
00:03:07,170 --> 00:03:10,410
there's no charge for Fargate, right?

68
00:03:10,410 --> 00:03:13,053
You only charge while
you run Fargate tasks.

69
00:03:14,760 --> 00:03:17,490
Going back to what I mentioned earlier,

70
00:03:17,490 --> 00:03:22,200
we're all about improving
speed and agility for you all.

71
00:03:22,200 --> 00:03:25,440
We want you to be able to
focus on your application,

72
00:03:25,440 --> 00:03:26,910
be able to reach scale

73
00:03:26,910 --> 00:03:30,120
and production with your
application as fast as possible,

74
00:03:30,120 --> 00:03:31,260
and not have to fiddle

75
00:03:31,260 --> 00:03:34,740
with a bunch of infrastructure mechanisms.

76
00:03:34,740 --> 00:03:36,390
That doesn't mean that we lock you down,

77
00:03:36,390 --> 00:03:39,660
so that you can't do advanced scenarios,

78
00:03:39,660 --> 00:03:43,170
but the default experience
is to get you up and running

79
00:03:43,170 --> 00:03:45,450
with AWS best practices.

80
00:03:45,450 --> 00:03:48,030
And then when your use case requires it,

81
00:03:48,030 --> 00:03:50,310
you can dig into more
advanced capabilities

82
00:03:50,310 --> 00:03:51,873
and take advantage of those.

83
00:03:53,310 --> 00:03:57,840
And finally, as I mentioned
a little bit earlier,

84
00:03:57,840 --> 00:04:00,510
we embody AWS security

85
00:04:00,510 --> 00:04:02,733
and operational best practices in AWS,

86
00:04:03,660 --> 00:04:06,180
we try to set you up for success.

87
00:04:06,180 --> 00:04:09,330
Part of that is that if you
use things like Fargate,

88
00:04:09,330 --> 00:04:10,410
you don't have to worry about

89
00:04:10,410 --> 00:04:14,010
how correctly configure an
instance to run your workload.

90
00:04:14,010 --> 00:04:15,513
We take care of all of that.

91
00:04:16,920 --> 00:04:19,080
With Fargate, you get task isolation.

92
00:04:19,080 --> 00:04:20,970
So every task you run,

93
00:04:20,970 --> 00:04:24,000
runs in its own EC2 instance.

94
00:04:24,000 --> 00:04:27,000
And in EC2 instance
that is never reused it.

95
00:04:27,000 --> 00:04:29,550
It's only used for the lifecycle the task,

96
00:04:29,550 --> 00:04:30,813
and then it's recycled.

97
00:04:34,680 --> 00:04:37,963
And to give a little
bit of context about ECS

98
00:04:38,907 --> 00:04:40,233
and how ECS is growing,

99
00:04:41,400 --> 00:04:45,033
so as of about two months ago,

100
00:04:45,930 --> 00:04:50,930
customers launched about 3
billion tasks on ECS every week.

101
00:04:51,300 --> 00:04:53,133
That's across all of our regions.

102
00:04:55,260 --> 00:04:58,980
And looking at new
customers who come to AWS,

103
00:04:58,980 --> 00:05:00,390
start running new workloads

104
00:05:00,390 --> 00:05:03,420
and choose to use containers
to run those workloads,

105
00:05:03,420 --> 00:05:08,310
we see about 65% of those
customers choose to use ECS.

106
00:05:08,310 --> 00:05:09,750
And the vast majority of them

107
00:05:09,750 --> 00:05:13,058
choose to use Fargate with ECS,

108
00:05:13,058 --> 00:05:15,008
'cause it just makes their life easier.

109
00:05:15,900 --> 00:05:20,673
Additionally, a lot of
Amazon also runs on ECS,

110
00:05:22,590 --> 00:05:27,590
both AWS services and
Amazon.com services run on ECS.

111
00:05:29,850 --> 00:05:33,660
And one specific example that
we can share here is that,

112
00:05:33,660 --> 00:05:36,480
during Prime Day this past summer,

113
00:05:36,480 --> 00:05:38,940
the team supporting Prime Day

114
00:05:38,940 --> 00:05:43,860
launched about 18 million
tasks on Fargate every day

115
00:05:43,860 --> 00:05:45,840
during Prime Day.

116
00:05:45,840 --> 00:05:48,390
Which doesn't quite include
everything they launched

117
00:05:48,390 --> 00:05:50,163
leading up to Prime Day, but still.

118
00:05:51,570 --> 00:05:55,290
So it is an indication of Fargate and ECS

119
00:05:55,290 --> 00:05:58,203
is ready to support the
biggest workloads out there.

120
00:06:00,870 --> 00:06:03,630
So why do customers choose to use ECS

121
00:06:03,630 --> 00:06:06,750
and trust ECS to run their applications?

122
00:06:06,750 --> 00:06:08,640
Part of this simplicity,

123
00:06:08,640 --> 00:06:12,390
not simplicity in the
sense that ECS is limited

124
00:06:12,390 --> 00:06:15,210
and only gives you a
limited set of capabilities,

125
00:06:15,210 --> 00:06:19,563
but simple because it simplifies
operations for customers.

126
00:06:22,200 --> 00:06:24,000
As I've said a few times now,

127
00:06:24,000 --> 00:06:27,210
we really want to focus our effort

128
00:06:27,210 --> 00:06:30,030
to help you focus on your application.

129
00:06:30,030 --> 00:06:33,243
We'll take care of the other
operational chores for you.

130
00:06:35,820 --> 00:06:39,930
Other thing is secure,
obviously we all want that.

131
00:06:39,930 --> 00:06:44,040
So we make use of AWS
security best practices.

132
00:06:44,040 --> 00:06:47,070
We set you up for success
with that from the beginning

133
00:06:47,070 --> 00:06:49,803
without you having to do
anything explicit about it.

134
00:06:50,760 --> 00:06:52,860
And finally, efficiency.

135
00:06:52,860 --> 00:06:57,860
So we're very focused on driving
high utilization for you,

136
00:06:58,010 --> 00:07:01,050
so that you can run your
application at scale

137
00:07:01,050 --> 00:07:05,553
with high availability at the
lowest possible cost to you.

138
00:07:06,450 --> 00:07:08,040
And we do that in a number of ways.

139
00:07:08,040 --> 00:07:10,443
So for example, with Fargate,

140
00:07:11,820 --> 00:07:14,070
you tell us that you need a two vCPU task

141
00:07:14,070 --> 00:07:15,480
with eight gigs of memory.

142
00:07:15,480 --> 00:07:17,070
Well that's what we provisioned for you

143
00:07:17,070 --> 00:07:18,663
and that's what you pay for.

144
00:07:20,160 --> 00:07:23,250
If there's any overhead
on our end on that,

145
00:07:23,250 --> 00:07:26,220
that's our problem to
solve, not your problem.

146
00:07:26,220 --> 00:07:29,910
You tell us you want two
vCPUs, we give you two vCPUs.

147
00:07:31,950 --> 00:07:33,870
All kinds of things like that we do,

148
00:07:33,870 --> 00:07:37,170
including scaling up when
you need to scale up,

149
00:07:37,170 --> 00:07:39,330
scale down when you need to scale down,

150
00:07:39,330 --> 00:07:42,330
things like that that will make it easier

151
00:07:42,330 --> 00:07:44,930
and lower cost for you to
operate your applications.

152
00:07:47,100 --> 00:07:50,280
So digging in a little bit
into capacity provisioning.

153
00:07:50,280 --> 00:07:52,440
So how do you get the compute you need

154
00:07:52,440 --> 00:07:54,813
to actually run your application tasks?

155
00:07:56,970 --> 00:07:59,943
I'm not gonna go through
everything in this slide,

156
00:08:00,780 --> 00:08:04,360
but I do want to give the context of

157
00:08:05,196 --> 00:08:08,883
AWS provides a wide range
of compute options, right?

158
00:08:09,780 --> 00:08:10,650
And at the end of the day,

159
00:08:10,650 --> 00:08:15,650
most of it relies on EC2
in one way or another.

160
00:08:15,960 --> 00:08:18,390
The exception would be
if you use ECS anywhere

161
00:08:18,390 --> 00:08:19,440
and you're run on premises,

162
00:08:19,440 --> 00:08:21,120
in which case you're on the hook

163
00:08:21,120 --> 00:08:23,613
for providing the actual compute.

164
00:08:25,440 --> 00:08:29,220
But you can use ECS to run
across all of these options,

165
00:08:29,220 --> 00:08:31,293
you get a consistent operating model.

166
00:08:32,850 --> 00:08:37,140
But we also see that the vast
majority of our customers

167
00:08:37,140 --> 00:08:40,413
use either EC2 or the use Fargate.

168
00:08:41,280 --> 00:08:44,280
So I'll dig in a little
bit to what trade-offs

169
00:08:44,280 --> 00:08:48,967
and benefits are between
using Fargate and EC2.

170
00:08:51,090 --> 00:08:55,320
So Fargate, which many of
you're probably familiar with,

171
00:08:55,320 --> 00:08:59,400
provides a fully managed
data plane for you.

172
00:08:59,400 --> 00:09:02,160
We abstract away the
compute to the point where

173
00:09:02,160 --> 00:09:04,440
the only thing you need to think about

174
00:09:04,440 --> 00:09:06,840
is the amount of vCPUs

175
00:09:06,840 --> 00:09:08,790
and the amount of memory that you need.

176
00:09:09,720 --> 00:09:11,610
There are a few other things
that you can control as well,

177
00:09:11,610 --> 00:09:14,130
you can request more storage
and things like that.

178
00:09:14,130 --> 00:09:17,790
But centrally it's CPU

179
00:09:17,790 --> 00:09:19,743
and memory that you think about.

180
00:09:21,300 --> 00:09:24,210
So we take care of everything else, right?

181
00:09:24,210 --> 00:09:26,040
If you need to launch two tasks,

182
00:09:26,040 --> 00:09:28,500
we'll provide a compute
that you can run two tasks.

183
00:09:28,500 --> 00:09:30,630
If you need to run 500 tasks,

184
00:09:30,630 --> 00:09:32,073
we'll provide that compute.

185
00:09:33,900 --> 00:09:36,960
We take care of providing
workload isolation

186
00:09:36,960 --> 00:09:38,940
by design in Fargate,

187
00:09:38,940 --> 00:09:40,470
as I mentioned earlier,

188
00:09:40,470 --> 00:09:43,890
every task runs on a
separate EC2 instance.

189
00:09:43,890 --> 00:09:46,710
That EC2 instance is
provisioned for that task.

190
00:09:46,710 --> 00:09:49,983
When the task stops, we
throw away the EC2 instance.

191
00:09:51,030 --> 00:09:52,620
So every time you launch a task,

192
00:09:52,620 --> 00:09:55,350
you know that I'm running
on a fresh compute.

193
00:09:55,350 --> 00:09:57,420
There's nothing left from previous tasks

194
00:09:57,420 --> 00:09:59,190
or anything like that.

195
00:09:59,190 --> 00:10:01,950
There can be no task crosstalk

196
00:10:01,950 --> 00:10:03,570
or anything like that,

197
00:10:03,570 --> 00:10:07,233
which for many customers is
a key feature in Fargate.

198
00:10:09,606 --> 00:10:10,530
And I mentioned already about

199
00:10:10,530 --> 00:10:12,555
how you only pay for Fargate tasks

200
00:10:12,555 --> 00:10:14,040
when they're running, right?

201
00:10:14,040 --> 00:10:15,720
As soon as the Fargate task stops,

202
00:10:15,720 --> 00:10:17,223
there's no more charge for it.

203
00:10:19,020 --> 00:10:21,720
So you get a lot of benefits with Fargate,

204
00:10:21,720 --> 00:10:24,660
but you also give up control of things.

205
00:10:24,660 --> 00:10:28,560
So if you choose to use
Amazon EC2 as you compute,

206
00:10:28,560 --> 00:10:30,540
you get a lot of control.

207
00:10:30,540 --> 00:10:33,510
You get to choose exactly
which EC2 instance types

208
00:10:33,510 --> 00:10:36,150
and sizes you use for your application.

209
00:10:36,150 --> 00:10:39,360
Whereas with Fargate we use
a wide range of application,

210
00:10:39,360 --> 00:10:43,713
or sorry, instance types
and sizes for your tasks.

211
00:10:44,940 --> 00:10:48,570
Depending on region, depending
on availability zone,

212
00:10:48,570 --> 00:10:53,340
you may see us use say an M8I for a task

213
00:10:53,340 --> 00:10:55,410
versus an M6I,

214
00:10:55,410 --> 00:10:57,810
depending on availability.

215
00:10:57,810 --> 00:11:01,413
We always focus on being able
to launch customer tasks,

216
00:11:03,210 --> 00:11:05,520
prioritizing that over consistency

217
00:11:05,520 --> 00:11:07,590
in the underlying compute,

218
00:11:07,590 --> 00:11:10,300
which is an important aspect of Fargate.

219
00:11:11,834 --> 00:11:14,190
For EC2, you control all of that.

220
00:11:14,190 --> 00:11:15,840
But that comes with a cost,

221
00:11:15,840 --> 00:11:18,060
'cause now you're also on the
hook for providing the army

222
00:11:18,060 --> 00:11:19,920
that we use for EC2 instance.

223
00:11:19,920 --> 00:11:22,350
So you have to make sure that that army

224
00:11:22,350 --> 00:11:25,890
and that instance is correctly
and securely configured.

225
00:11:25,890 --> 00:11:29,440
You need to make sure that
you patch your instances

226
00:11:30,420 --> 00:11:32,133
that's on you to take care of.

227
00:11:33,540 --> 00:11:36,030
But on the other hand, you
do get to take advantage

228
00:11:36,030 --> 00:11:38,910
of all the EC2 purchasing models.

229
00:11:38,910 --> 00:11:40,740
You can use reserve instances,

230
00:11:40,740 --> 00:11:43,380
you can use on demand
capacitor reservations,

231
00:11:43,380 --> 00:11:46,053
instant savings plans,
things of that nature.

232
00:11:47,520 --> 00:11:51,240
Both Fargate and EC2 supports
the compute savings plan.

233
00:11:51,240 --> 00:11:53,973
So you do have that option
available regardless.

234
00:11:55,650 --> 00:12:00,120
So there are few tensions
between using Fargate and EC2

235
00:12:00,120 --> 00:12:02,940
and we've had lots of
feedback from customers

236
00:12:02,940 --> 00:12:04,440
telling us that, you know,

237
00:12:04,440 --> 00:12:08,820
we love Fargate, we need
a little bit more control

238
00:12:08,820 --> 00:12:10,680
for our workloads.

239
00:12:10,680 --> 00:12:12,000
So in response to that,

240
00:12:12,000 --> 00:12:16,473
we launched ECS Managed
Instances about two months ago.

241
00:12:17,700 --> 00:12:21,360
And what we're trying to do
here is strike the right balance

242
00:12:21,360 --> 00:12:26,040
between managed compute
that we give with Fargate

243
00:12:26,040 --> 00:12:28,320
versus giving you all more control

244
00:12:28,320 --> 00:12:30,573
over what we use to run your workloads.

245
00:12:32,160 --> 00:12:35,470
So a couple of key differences is that

246
00:12:36,750 --> 00:12:38,490
with ECS Managed Instances,

247
00:12:38,490 --> 00:12:42,030
we launched EC2 instances in your account.

248
00:12:42,030 --> 00:12:44,610
So you will see these EC2 instances

249
00:12:44,610 --> 00:12:46,860
but you have no control over them.

250
00:12:46,860 --> 00:12:49,860
You can't take any mutating
actions on these instances,

251
00:12:49,860 --> 00:12:51,783
only we can do that for you.

252
00:12:53,610 --> 00:12:55,260
But that also means that

253
00:12:55,260 --> 00:12:58,353
we control the entire life
cycle of these instances.

254
00:12:59,670 --> 00:13:02,310
We make sure that we launch
them when they're needed

255
00:13:02,310 --> 00:13:03,990
because you need more compute capacity

256
00:13:03,990 --> 00:13:06,180
to run your applications.

257
00:13:06,180 --> 00:13:09,420
We make sure that after roughly two weeks,

258
00:13:09,420 --> 00:13:12,330
which is very similar
to how Fargate operates,

259
00:13:12,330 --> 00:13:14,220
we will retire the instance

260
00:13:14,220 --> 00:13:17,700
and we will shift your toss
over to a new instance.

261
00:13:17,700 --> 00:13:21,840
And we do this that we
can patch your instances

262
00:13:21,840 --> 00:13:24,483
and make sure that we
always meet patching SLAs.

263
00:13:26,130 --> 00:13:29,730
You have control over the instance types.

264
00:13:29,730 --> 00:13:33,270
So you can either choose
to say no AWS, I trust you,

265
00:13:33,270 --> 00:13:35,310
pick the most cost
optimized instance types

266
00:13:35,310 --> 00:13:36,840
from my application.

267
00:13:36,840 --> 00:13:39,483
Or you can say that, no, I
know exactly what I need.

268
00:13:40,350 --> 00:13:42,810
I need network optimized
Graviton instances

269
00:13:42,810 --> 00:13:44,340
from my workload.

270
00:13:44,340 --> 00:13:46,950
And you can choose to
use that or you can say,

271
00:13:46,950 --> 00:13:50,490
hey, I want GPUs for my workload.

272
00:13:50,490 --> 00:13:52,740
You can get those with
ECS Managed Instances.

273
00:13:54,450 --> 00:13:57,630
We have a more robust cost optimization

274
00:13:57,630 --> 00:13:59,490
in ECS Managed Instances.

275
00:13:59,490 --> 00:14:01,620
So one is that we've rebuilt

276
00:14:01,620 --> 00:14:04,890
how we scale up additional
compute for you.

277
00:14:04,890 --> 00:14:07,320
So we can scale up
additional compute faster

278
00:14:07,320 --> 00:14:09,690
with ECS Managed Instances

279
00:14:09,690 --> 00:14:14,043
than we can with both Fargate and EC2.

280
00:14:15,210 --> 00:14:18,090
But we also implemented cost optimization

281
00:14:18,090 --> 00:14:20,790
that continuously looks for idle instances

282
00:14:20,790 --> 00:14:23,040
or underutilized instances.

283
00:14:23,040 --> 00:14:25,050
And when we find underutilized instances,

284
00:14:25,050 --> 00:14:28,290
we will shift tasks
over to other instances

285
00:14:28,290 --> 00:14:30,570
and then be able to shut
down those instances

286
00:14:30,570 --> 00:14:32,853
and reducing your costs as a result.

287
00:14:33,780 --> 00:14:38,640
And finally we give you more control.

288
00:14:38,640 --> 00:14:42,730
So many of you who are
Fargate customers today

289
00:14:44,100 --> 00:14:46,590
will know that you can't
run privileged containers

290
00:14:46,590 --> 00:14:47,670
on Fargate, right?

291
00:14:47,670 --> 00:14:52,670
You can't make use of agents
that use eBPF for example.

292
00:14:52,710 --> 00:14:56,010
With managed instances,
we give you this ability.

293
00:14:56,010 --> 00:15:00,150
By default, nothing runs as privilege,

294
00:15:00,150 --> 00:15:02,520
but you can say in your trust definition,

295
00:15:02,520 --> 00:15:04,740
Hey I have this sidecar container,

296
00:15:04,740 --> 00:15:06,540
it needs privileged access

297
00:15:06,540 --> 00:15:09,423
because it requires eBPF
and you can do that.

298
00:15:11,070 --> 00:15:13,053
So going back to the earlier slide,

299
00:15:14,460 --> 00:15:17,310
where does managed instances
fit into the picture?

300
00:15:17,310 --> 00:15:20,167
So it's right in between Fargate and EC2,

301
00:15:21,720 --> 00:15:23,310
you get more capabilities.

302
00:15:23,310 --> 00:15:28,310
We still give you a fully
managed compute experience,

303
00:15:28,680 --> 00:15:30,900
but you need to be more aware of that.

304
00:15:30,900 --> 00:15:33,420
We actually provision
EC2 instances for you

305
00:15:33,420 --> 00:15:36,753
even though we completely
manage them on your behalf.

306
00:15:40,320 --> 00:15:43,860
So a core concept in ECS
is capacity providers.

307
00:15:43,860 --> 00:15:46,510
We introduced this back in 2019

308
00:15:47,820 --> 00:15:51,660
and originally we had the
Fargate capacity provider,

309
00:15:51,660 --> 00:15:53,370
which is actually two capacity providers,

310
00:15:53,370 --> 00:15:55,593
the Fargate on demand and Fargate Spot.

311
00:15:56,910 --> 00:16:00,990
And we introduced auto scaling
group capacity provider

312
00:16:00,990 --> 00:16:03,270
for EC2 use.

313
00:16:03,270 --> 00:16:04,980
So with managed instances,

314
00:16:04,980 --> 00:16:07,210
we've introduced a new capacity provider

315
00:16:08,700 --> 00:16:12,610
that works closely with
the whole task life cycle

316
00:16:15,166 --> 00:16:17,280
in ECS to make sure that

317
00:16:17,280 --> 00:16:19,050
you have instances available to you

318
00:16:19,050 --> 00:16:21,400
when you need them and
only when you need them.

319
00:16:24,360 --> 00:16:27,123
So looking at the Fargate
capacity provider,

320
00:16:28,350 --> 00:16:30,960
as I mentioned before, it's simple, right?

321
00:16:30,960 --> 00:16:33,510
You don't have to worry
about EC2 instances.

322
00:16:33,510 --> 00:16:37,230
You need not worry about configuration,

323
00:16:37,230 --> 00:16:38,853
patching, anything like that.

324
00:16:40,320 --> 00:16:42,030
When your workload increases

325
00:16:42,030 --> 00:16:44,730
and you need more tasks
to run your application,

326
00:16:44,730 --> 00:16:46,740
we will launch more tasks for you.

327
00:16:46,740 --> 00:16:48,180
When your workload decreases,

328
00:16:48,180 --> 00:16:50,073
we will scale down those tasks.

329
00:16:51,180 --> 00:16:52,440
And all you need to think about,

330
00:16:52,440 --> 00:16:54,627
as I mentioned before,
is the amount of CPU

331
00:16:54,627 --> 00:16:56,703
and the amount of memory that you need.

332
00:16:59,070 --> 00:17:00,513
For managed instances,

333
00:17:02,370 --> 00:17:04,563
I touched on some of these things already.

334
00:17:05,520 --> 00:17:09,390
So this new capacity provider
is tightly integrated

335
00:17:09,390 --> 00:17:11,340
with the rest of ECS to know

336
00:17:11,340 --> 00:17:14,190
when it needs to launch
additional EC2 instances

337
00:17:14,190 --> 00:17:17,250
and when it should shut
down EC2 instances.

338
00:17:17,250 --> 00:17:20,190
We launched these
instances in your account

339
00:17:20,190 --> 00:17:22,800
but they're fully managed by us.

340
00:17:22,800 --> 00:17:24,720
You can see them but you
can't terminate them,

341
00:17:24,720 --> 00:17:27,093
you can't take any
mutating actions on them.

342
00:17:28,920 --> 00:17:31,200
And we control everything about

343
00:17:31,200 --> 00:17:33,060
the management of these instances.

344
00:17:33,060 --> 00:17:34,740
So for example,

345
00:17:34,740 --> 00:17:38,370
we provide the army used
for these instances,

346
00:17:38,370 --> 00:17:40,350
you cannot control that.

347
00:17:40,350 --> 00:17:44,883
We use Bottlerocket as our
container operating system,

348
00:17:44,883 --> 00:17:48,240
'cause we think it's the
right Linux OS to use

349
00:17:48,240 --> 00:17:49,563
for container workloads.

350
00:17:51,570 --> 00:17:53,730
We make sure it's configured correctly

351
00:17:53,730 --> 00:17:54,810
and as I mentioned,

352
00:17:54,810 --> 00:17:58,140
we run for about two weeks
and then we replace instances,

353
00:17:58,140 --> 00:18:00,153
shifting your workloads transparently.

354
00:18:01,620 --> 00:18:04,860
One thing that you get
with ECS Managed Instances

355
00:18:04,860 --> 00:18:08,430
is that you get to use EC2 event windows.

356
00:18:08,430 --> 00:18:12,210
So if you want to control when
we replace your instances,

357
00:18:12,210 --> 00:18:14,490
you can create EC2 event windows

358
00:18:14,490 --> 00:18:17,400
and tell us, hey, use
this four hour time window

359
00:18:17,400 --> 00:18:20,760
on Sunday mornings between
1:00 AM and 5:00 AM

360
00:18:20,760 --> 00:18:22,110
and we'll make sure that

361
00:18:22,110 --> 00:18:24,903
we only initiate operations
in that event window.

362
00:18:27,720 --> 00:18:29,700
So with these assess managed instances,

363
00:18:29,700 --> 00:18:33,150
you have the option to
map the instance type

364
00:18:33,150 --> 00:18:36,180
to your workload needs, right?

365
00:18:36,180 --> 00:18:38,370
So you can use the
default capacity provider,

366
00:18:38,370 --> 00:18:39,960
then you don't have to do anything

367
00:18:39,960 --> 00:18:41,730
other than just selecting it

368
00:18:41,730 --> 00:18:44,490
and trust us to pick
the right instance types

369
00:18:44,490 --> 00:18:47,943
and we'll focus on cost when
we make those decisions.

370
00:18:48,900 --> 00:18:52,350
Obviously the tasks you run also matter.

371
00:18:52,350 --> 00:18:55,080
We try to bend pack tasks

372
00:18:55,080 --> 00:18:57,750
onto multiple tasks on an instance,

373
00:18:57,750 --> 00:19:00,050
so we'll take that into
consideration as well.

374
00:19:01,290 --> 00:19:04,560
But when you want to
explore more capabilities,

375
00:19:04,560 --> 00:19:07,050
you can use the custom capacity provider

376
00:19:07,050 --> 00:19:08,520
and then you get to use

377
00:19:08,520 --> 00:19:12,000
what we call attribute based
instance type selection.

378
00:19:12,000 --> 00:19:13,590
So you can define things like,

379
00:19:13,590 --> 00:19:15,269
hey, I need a GPU,

380
00:19:15,269 --> 00:19:17,370
I need a GPU of this particular type.

381
00:19:17,370 --> 00:19:20,790
I need at least this number
of vCPUs on the instance.

382
00:19:20,790 --> 00:19:23,760
I need it to be network optimized.

383
00:19:23,760 --> 00:19:26,340
Any number of attributes
like that you can control.

384
00:19:26,340 --> 00:19:29,070
So you don't have to pick
specific instance types,

385
00:19:29,070 --> 00:19:31,200
although you can if you really want to,

386
00:19:31,200 --> 00:19:34,677
instead focus on the
attributes of these instances

387
00:19:34,677 --> 00:19:37,203
that map to what you
need for your workload.

388
00:19:39,390 --> 00:19:43,140
So now we have EC2, we have Fargate

389
00:19:43,140 --> 00:19:45,060
and we have managed instances.

390
00:19:45,060 --> 00:19:47,310
So when should you use these?

391
00:19:47,310 --> 00:19:50,280
So we strongly recommend that

392
00:19:50,280 --> 00:19:52,860
if you're using ECS on EC2 today,

393
00:19:52,860 --> 00:19:54,780
you should go take a
look at managed instances

394
00:19:54,780 --> 00:19:58,020
because we think we can give
you much better experience

395
00:19:58,020 --> 00:19:59,643
using managed instances.

396
00:20:01,020 --> 00:20:01,950
For Fargate,

397
00:20:01,950 --> 00:20:05,040
Fargate is the default in ECS today.

398
00:20:05,040 --> 00:20:06,450
It will remain the default

399
00:20:06,450 --> 00:20:08,790
because we think that
is the best experience

400
00:20:08,790 --> 00:20:10,980
for the most customers.

401
00:20:10,980 --> 00:20:13,410
That said, if you're on Fargate today

402
00:20:13,410 --> 00:20:16,590
and you run into limitations on Fargate,

403
00:20:16,590 --> 00:20:19,410
then managed instances
is there to support you.

404
00:20:19,410 --> 00:20:24,060
So for example, if you
need to run a 48 BCPU task,

405
00:20:24,060 --> 00:20:25,890
well Fargate does not support that,

406
00:20:25,890 --> 00:20:27,543
but managed instances does.

407
00:20:28,740 --> 00:20:32,490
If you want to use a logging side card

408
00:20:32,490 --> 00:20:34,200
that requires eBPF,

409
00:20:34,200 --> 00:20:36,210
well Fargate does not support that,

410
00:20:36,210 --> 00:20:37,863
but managed instances does.

411
00:20:39,150 --> 00:20:42,240
If you want to be one of the cool kids

412
00:20:42,240 --> 00:20:44,220
and use a GPU workload,

413
00:20:44,220 --> 00:20:46,080
well Fargate does not support that,

414
00:20:46,080 --> 00:20:47,850
but managed instances does.

415
00:20:47,850 --> 00:20:49,530
So those are the kind of things

416
00:20:49,530 --> 00:20:50,820
that you should think about

417
00:20:50,820 --> 00:20:53,523
when you want to use managed instances.

418
00:20:54,570 --> 00:20:56,880
And with that I'm gonna
hand over to Alexandr

419
00:20:56,880 --> 00:20:59,730
who's gonna talk about
security and compliance.

420
00:20:59,730 --> 00:21:00,873
- Well thank you Matt.

421
00:21:02,730 --> 00:21:04,710
Security and compliance,

422
00:21:04,710 --> 00:21:06,690
what an exciting topic, right?

423
00:21:06,690 --> 00:21:10,983
So let's try to make it
more or less painless.

424
00:21:11,910 --> 00:21:13,920
When we talk about security,

425
00:21:13,920 --> 00:21:17,400
we usually start with looking at

426
00:21:17,400 --> 00:21:19,620
the shared responsibility model.

427
00:21:19,620 --> 00:21:22,800
And let's take a look at
the screens right now.

428
00:21:22,800 --> 00:21:26,853
That's the situation with
ECS and self-managed EC2.

429
00:21:27,900 --> 00:21:30,600
Well, AWS is responsible of course

430
00:21:30,600 --> 00:21:33,090
for the ECS control plane.

431
00:21:33,090 --> 00:21:37,140
It is responsible for all
the foundational services,

432
00:21:37,140 --> 00:21:40,350
storage compute network and all monitoring

433
00:21:40,350 --> 00:21:42,540
and of course the global infrastructure,

434
00:21:42,540 --> 00:21:45,740
basically regions, local zones,

435
00:21:45,740 --> 00:21:49,173
everything that is actually physical.

436
00:21:50,160 --> 00:21:52,450
But you have to worry about

437
00:21:53,370 --> 00:21:57,720
and secure all your compute capacity.

438
00:21:57,720 --> 00:22:01,020
You need to think about how
to provision that capacity,

439
00:22:01,020 --> 00:22:02,910
how to scale it up and down,

440
00:22:02,910 --> 00:22:05,910
how to distribute it across
different availability zones.

441
00:22:05,910 --> 00:22:08,280
You need to think about instant selection

442
00:22:08,280 --> 00:22:11,730
and more than that, each
time you launch an instance,

443
00:22:11,730 --> 00:22:15,300
you need to place the right army.

444
00:22:15,300 --> 00:22:16,410
You need to make sure that

445
00:22:16,410 --> 00:22:18,960
it has the right version of the agent,

446
00:22:18,960 --> 00:22:20,490
you need to patch it

447
00:22:20,490 --> 00:22:24,330
and of course you need to keep
monitoring all that stuff.

448
00:22:24,330 --> 00:22:26,970
On top of that, your application runs,

449
00:22:26,970 --> 00:22:29,490
yet another layer of complexity.

450
00:22:29,490 --> 00:22:34,490
So that becomes rather
complicated I would say.

451
00:22:35,340 --> 00:22:37,500
That's why with Fargate

452
00:22:37,500 --> 00:22:40,530
and now with ECS Managed Instances,

453
00:22:40,530 --> 00:22:43,650
AWS takes on more responsibilities.

454
00:22:43,650 --> 00:22:46,230
So you don't need to worry about things

455
00:22:46,230 --> 00:22:49,260
that you worried about
with self-managed stuff.

456
00:22:49,260 --> 00:22:52,290
Things like capacity
provisioning and EC2 instances.

457
00:22:52,290 --> 00:22:53,820
Everything that runs on them,

458
00:22:53,820 --> 00:22:58,820
it's fully managed by
AWS in different ways

459
00:22:59,850 --> 00:23:02,280
and I'm gonna talk about it in a minute.

460
00:23:02,280 --> 00:23:04,530
So the key point is that

461
00:23:04,530 --> 00:23:07,860
you're still responsible
for your application.

462
00:23:07,860 --> 00:23:10,320
How the load balancing happens,

463
00:23:10,320 --> 00:23:12,060
how the security groups are configured.

464
00:23:12,060 --> 00:23:13,800
So you can configure security groups,

465
00:23:13,800 --> 00:23:17,730
define firewall rules
and of course IAM roles.

466
00:23:17,730 --> 00:23:20,280
So basically this is your responsibility,

467
00:23:20,280 --> 00:23:23,130
Everything else is AWS.

468
00:23:23,130 --> 00:23:24,780
So as you can imagine

469
00:23:24,780 --> 00:23:29,370
that change in this shared
responsibility model

470
00:23:29,370 --> 00:23:33,990
gives you way more time to
focus on what actually matters

471
00:23:33,990 --> 00:23:36,690
to your business on
building the application,

472
00:23:36,690 --> 00:23:40,320
building the business logic,
serving your customers

473
00:23:40,320 --> 00:23:44,820
while AWS takes care of
pretty much the infrastructure

474
00:23:44,820 --> 00:23:45,903
and configuration.

475
00:23:47,310 --> 00:23:50,610
Now let's take a look at
the isolation boundaries

476
00:23:50,610 --> 00:23:54,683
and that's where we have a
difference between Fargate

477
00:23:54,683 --> 00:23:56,880
and ECS managed instances.

478
00:23:56,880 --> 00:23:58,920
As Mats already mentioned,

479
00:23:58,920 --> 00:24:03,540
Fargate provides a really
strong isolation boundary

480
00:24:03,540 --> 00:24:05,160
security model.

481
00:24:05,160 --> 00:24:07,248
Each task is launched on

482
00:24:07,248 --> 00:24:12,090
an separate EC2 instance
hidden in AWS account

483
00:24:12,090 --> 00:24:15,150
and we do not reuse these tasks.

484
00:24:15,150 --> 00:24:17,850
So we never place two
tasks in the same instance.

485
00:24:17,850 --> 00:24:21,180
We never reuse the same
instance for two tasks in a row,

486
00:24:21,180 --> 00:24:24,270
we always discarded scrap the memory,

487
00:24:24,270 --> 00:24:26,160
scrap the ephemeral storage.

488
00:24:26,160 --> 00:24:29,613
So there is absolutely no risk
of data cross contamination.

489
00:24:30,960 --> 00:24:32,400
With managed instances,

490
00:24:32,400 --> 00:24:35,730
we launch EC2 instances in your accounts

491
00:24:35,730 --> 00:24:38,880
and we do believe it's
the best option for you

492
00:24:38,880 --> 00:24:42,420
to actually launch multiple tasks.

493
00:24:42,420 --> 00:24:46,470
So we take care about of beam packing

494
00:24:46,470 --> 00:24:48,210
to optimize the infrastructure,

495
00:24:48,210 --> 00:24:50,880
to optimize the utilization.

496
00:24:50,880 --> 00:24:54,130
So with that approach
we can probably launch

497
00:24:55,080 --> 00:24:57,510
more tasks on less compute

498
00:24:57,510 --> 00:25:01,893
and really help you reduce your AWS build.

499
00:25:02,850 --> 00:25:04,560
And of course you have controls there,

500
00:25:04,560 --> 00:25:06,630
if you're not okay with launching,

501
00:25:06,630 --> 00:25:09,690
say tasks from different applications

502
00:25:09,690 --> 00:25:11,100
on the same instance,

503
00:25:11,100 --> 00:25:13,950
you can use different capacity providers.

504
00:25:13,950 --> 00:25:17,760
So you don't, you have
certain controls there

505
00:25:17,760 --> 00:25:21,660
and of course you can control
the size of your instances

506
00:25:21,660 --> 00:25:25,410
to pretty much simulate
this single task experience.

507
00:25:25,410 --> 00:25:27,750
But we will keep reusing,

508
00:25:27,750 --> 00:25:31,050
we will keep these
instances running for longer

509
00:25:31,050 --> 00:25:32,940
after they become it idle.

510
00:25:32,940 --> 00:25:34,620
For a very short period of time,

511
00:25:34,620 --> 00:25:36,210
it is now configurable.

512
00:25:36,210 --> 00:25:38,790
You can actually set it up to one hour,

513
00:25:38,790 --> 00:25:43,680
so we don't just release
that capacity. Why?

514
00:25:43,680 --> 00:25:46,290
Well because each next
task that is launched

515
00:25:46,290 --> 00:25:48,570
on an already running instance

516
00:25:48,570 --> 00:25:52,080
launches way faster,
like three times faster

517
00:25:52,080 --> 00:25:54,840
than a task on a brand new instance

518
00:25:54,840 --> 00:25:57,300
when we have to spin it up.

519
00:25:57,300 --> 00:26:00,963
So you have these controls
with managed instances.

520
00:26:02,370 --> 00:26:04,950
Let's take a look at the best practices

521
00:26:04,950 --> 00:26:06,577
that we use with Fargate.

522
00:26:06,577 --> 00:26:07,887
And they're very similar between Fargate

523
00:26:07,887 --> 00:26:10,080
and managed instances.

524
00:26:10,080 --> 00:26:13,200
Well except for the isolation point,

525
00:26:13,200 --> 00:26:14,943
task isolation is a key,

526
00:26:15,960 --> 00:26:18,213
probably the key feature of Fargate.

527
00:26:19,290 --> 00:26:21,183
We do reduce the attack surface,

528
00:26:22,080 --> 00:26:27,060
so we don't have access
to underlying OS hardware.

529
00:26:27,060 --> 00:26:27,930
You don't have access,

530
00:26:27,930 --> 00:26:30,000
we don't really have access to that.

531
00:26:30,000 --> 00:26:32,520
So we have access only to
logs that are important

532
00:26:32,520 --> 00:26:36,510
for telemetry for troubleshooting,

533
00:26:36,510 --> 00:26:37,920
but we don't have access

534
00:26:37,920 --> 00:26:40,890
and we don't give you access
to underlying hardware.

535
00:26:40,890 --> 00:26:43,590
We do run regular patching.

536
00:26:43,590 --> 00:26:47,370
And one very important thing
that is often overlooked,

537
00:26:47,370 --> 00:26:48,870
AWS VPC networking mode.

538
00:26:48,870 --> 00:26:50,430
Why it's so important?

539
00:26:50,430 --> 00:26:52,080
Well because now you can,

540
00:26:52,080 --> 00:26:54,870
each task gets an individual IP address

541
00:26:54,870 --> 00:26:58,020
and with that you can use VPC flow logs

542
00:26:58,020 --> 00:27:00,450
to understand what's going
on with your traffic.

543
00:27:00,450 --> 00:27:02,460
You can use security groups

544
00:27:02,460 --> 00:27:06,033
to have fine grain control
for each individual task.

545
00:27:06,960 --> 00:27:10,860
So you have really full control
over your network security

546
00:27:10,860 --> 00:27:12,150
and that's a major thing.

547
00:27:12,150 --> 00:27:13,650
Something that you cannot achieve

548
00:27:13,650 --> 00:27:15,660
with network address translation.

549
00:27:15,660 --> 00:27:17,070
If you're running for example,

550
00:27:17,070 --> 00:27:19,657
bridge mode with ECS EC2,

551
00:27:21,030 --> 00:27:22,890
you can't really do that.

552
00:27:22,890 --> 00:27:27,890
So it's a really strong
and very secure solution

553
00:27:28,020 --> 00:27:31,860
that follows pretty much all
AWS security best practices.

554
00:27:31,860 --> 00:27:33,450
Managed instances,

555
00:27:33,450 --> 00:27:34,900
look at the list of benefits,

556
00:27:36,780 --> 00:27:38,343
fully managed compute,

557
00:27:39,720 --> 00:27:42,630
compliance and patching every two weeks.

558
00:27:42,630 --> 00:27:44,760
So if you tell me it looks like Fargate

559
00:27:44,760 --> 00:27:45,930
that is launched,

560
00:27:45,930 --> 00:27:49,770
launches instances in your
accounts, you won't be wrong.

561
00:27:49,770 --> 00:27:52,200
Technically this is Fargate that

562
00:27:52,200 --> 00:27:53,670
is exposed to your accounts.

563
00:27:53,670 --> 00:27:56,670
You're getting the same experience

564
00:27:56,670 --> 00:27:58,290
with a couple of differences.

565
00:27:58,290 --> 00:28:01,020
Well, Bottlerocket, as Mats mentioned,

566
00:28:01,020 --> 00:28:05,670
it's a new OS that is developed by AWS.

567
00:28:05,670 --> 00:28:10,620
It's an open source project
that we believe is the best way

568
00:28:10,620 --> 00:28:12,810
to run containerized workloads.

569
00:28:12,810 --> 00:28:15,630
It has a very minimal
set of packages required

570
00:28:15,630 --> 00:28:17,160
for containerized workloads.

571
00:28:17,160 --> 00:28:19,230
We don't have anything extra

572
00:28:19,230 --> 00:28:23,550
resulting in a reduced attack surface.

573
00:28:23,550 --> 00:28:25,887
And of course all the instances

574
00:28:25,887 --> 00:28:27,030
that we launch in your accounts,

575
00:28:27,030 --> 00:28:28,950
you don't have access to them.

576
00:28:28,950 --> 00:28:30,693
You can still see them.

577
00:28:31,800 --> 00:28:33,363
Why you still see them?

578
00:28:34,740 --> 00:28:36,780
Well I can give you an example.

579
00:28:36,780 --> 00:28:40,167
Imagine if you don't see them and then,

580
00:28:40,167 --> 00:28:42,600
but they already exist
and run in your account

581
00:28:42,600 --> 00:28:46,950
and then you have to go and
for example, delete a subnet.

582
00:28:46,950 --> 00:28:47,820
What's gonna happen?

583
00:28:47,820 --> 00:28:49,590
You're gonna get an STRN message saying,

584
00:28:49,590 --> 00:28:53,280
hey, you have instances running
so you'd better see them.

585
00:28:53,280 --> 00:28:54,300
So you have visibility

586
00:28:54,300 --> 00:28:56,280
but you don't have control,

587
00:28:56,280 --> 00:28:58,650
you don't have a way to change them

588
00:28:58,650 --> 00:29:00,840
directly using key EC2 APIs.

589
00:29:00,840 --> 00:29:04,170
Again, everything goes through the ECS API

590
00:29:04,170 --> 00:29:06,390
and added layer of security.

591
00:29:06,390 --> 00:29:09,420
And of course Mats already
talked about event windows.

592
00:29:09,420 --> 00:29:11,853
It's really neat feature.

593
00:29:12,690 --> 00:29:17,520
Your EC2 instances have to go
through hardware replacement

594
00:29:17,520 --> 00:29:18,750
from time to time, et cetera.

595
00:29:18,750 --> 00:29:20,640
So you can define this windows.

596
00:29:20,640 --> 00:29:23,910
Now you can use the same concept

597
00:29:23,910 --> 00:29:27,750
to tell us when you
are okay with patching.

598
00:29:27,750 --> 00:29:30,570
So it's not going to
happen on a random day,

599
00:29:30,570 --> 00:29:32,520
is gonna happen in the interval time

600
00:29:32,520 --> 00:29:34,203
interval that you tell us too.

601
00:29:36,510 --> 00:29:41,073
Well compliance,

602
00:29:42,600 --> 00:29:43,473
really short.

603
00:29:44,760 --> 00:29:46,650
Fargate and managed
instances really help you

604
00:29:46,650 --> 00:29:49,590
achieve better compliance faster

605
00:29:49,590 --> 00:29:51,870
because now you can point to AWS and say,

606
00:29:51,870 --> 00:29:55,050
hey, AWS takes care of
pretty much everything

607
00:29:55,050 --> 00:29:56,730
but my application.

608
00:29:56,730 --> 00:29:58,230
And now to achieve compliance,

609
00:29:58,230 --> 00:30:01,980
you need to provide a much,
much shorter list of evidences

610
00:30:01,980 --> 00:30:05,520
that you actually have meet
these compliance requirements.

611
00:30:05,520 --> 00:30:07,440
Everything else is on AWS.

612
00:30:07,440 --> 00:30:10,290
So we have all this list of things

613
00:30:10,290 --> 00:30:12,000
that we provide as an evidence

614
00:30:12,000 --> 00:30:14,880
that we actually meet the
compliance requirements.

615
00:30:14,880 --> 00:30:18,000
So we help your workloads
achieve compliance faster.

616
00:30:18,000 --> 00:30:20,010
And of course you can
find the list of services

617
00:30:20,010 --> 00:30:24,060
and scope if you go to that page.

618
00:30:24,060 --> 00:30:26,490
It's a really neat website.

619
00:30:26,490 --> 00:30:28,830
Pretty much everything you can find there,

620
00:30:28,830 --> 00:30:30,150
Amazon is yes, will be there.

621
00:30:30,150 --> 00:30:32,910
So compliance is a great topic,

622
00:30:32,910 --> 00:30:35,070
but now let's chat about something

623
00:30:35,070 --> 00:30:37,350
that is very dear to my heart,

624
00:30:37,350 --> 00:30:41,880
how to save money, running
workloads on Amazon ECS.

625
00:30:41,880 --> 00:30:45,030
And of course we're gonna talk about

626
00:30:45,030 --> 00:30:47,370
cost optimization strategies.

627
00:30:47,370 --> 00:30:50,763
Four things, choosing the right hardware,

628
00:30:51,630 --> 00:30:53,700
choosing the purchasing options

629
00:30:53,700 --> 00:30:56,520
that work best for your workloads.

630
00:30:56,520 --> 00:31:00,540
Figuring out how to scale
and optimize your workloads

631
00:31:00,540 --> 00:31:02,190
and of course observing it

632
00:31:02,190 --> 00:31:03,180
and making sure that

633
00:31:03,180 --> 00:31:05,823
actually all that works to your benefit.

634
00:31:07,110 --> 00:31:10,740
Starting with hardware we have,

635
00:31:10,740 --> 00:31:15,480
today we offer the AWS
S3 different CPU options,

636
00:31:15,480 --> 00:31:19,110
Intel CPUs, AMD, and Graviton.

637
00:31:19,110 --> 00:31:22,110
And of course with Fargate

638
00:31:22,110 --> 00:31:27,110
you have controlled whether
you want to use X86, 64

639
00:31:28,830 --> 00:31:30,960
or ARM CPUs.

640
00:31:30,960 --> 00:31:32,970
So Gravitons or ARM.

641
00:31:32,970 --> 00:31:34,350
So that's your control.

642
00:31:34,350 --> 00:31:38,520
But you can't really choose
whether your tasks will land on

643
00:31:38,520 --> 00:31:39,933
Intel or AMG.

644
00:31:40,860 --> 00:31:45,860
And what if your application
takes a dependency on

645
00:31:46,140 --> 00:31:50,010
AVX five 12, for example, instruction sets

646
00:31:50,010 --> 00:31:52,740
that work really well on Intel.

647
00:31:52,740 --> 00:31:56,520
Or what if your application
benefits from a super strong

648
00:31:56,520 --> 00:32:00,420
single core performance of AMD CPUs?

649
00:32:00,420 --> 00:32:03,900
Well, that's where managed
instances come to play.

650
00:32:03,900 --> 00:32:06,210
You can choose the CPU type,

651
00:32:06,210 --> 00:32:08,130
you can choose exact instance types

652
00:32:08,130 --> 00:32:10,350
that are the best for your compute.

653
00:32:10,350 --> 00:32:11,580
And guess what?

654
00:32:11,580 --> 00:32:14,640
If you run something like tasks,

655
00:32:14,640 --> 00:32:18,813
tasks that are jobs, time bound jobs,

656
00:32:19,710 --> 00:32:22,380
if you finish your work
running your workloads faster,

657
00:32:22,380 --> 00:32:23,370
you pay less.

658
00:32:23,370 --> 00:32:26,940
So it's an excellent way
to choose the right CPU

659
00:32:26,940 --> 00:32:30,060
for your workload to actually pay less

660
00:32:30,060 --> 00:32:34,260
or just get the latest Graviton generation

661
00:32:34,260 --> 00:32:38,493
with just phenomenal price
to performance ratio.

662
00:32:40,080 --> 00:32:43,860
Switching to purchasing options on demand,

663
00:32:43,860 --> 00:32:45,180
that's the default.

664
00:32:45,180 --> 00:32:47,550
Excellent for spiky workloads.

665
00:32:47,550 --> 00:32:50,970
The most expensive saving plans

666
00:32:50,970 --> 00:32:53,970
when it comes to predictable workloads.

667
00:32:53,970 --> 00:32:56,880
And if you can commit to spending

668
00:32:56,880 --> 00:33:01,050
a certain amount of
money on AWS over a year

669
00:33:01,050 --> 00:33:02,220
or three years,

670
00:33:02,220 --> 00:33:05,130
you can get significant
discounts with that.

671
00:33:05,130 --> 00:33:06,930
So if you have predictable workloads,

672
00:33:06,930 --> 00:33:08,880
please, please, please use saving plans.

673
00:33:08,880 --> 00:33:13,080
It's a very powerful tool
that you have in your arsenal,

674
00:33:13,080 --> 00:33:14,700
something that you can use.

675
00:33:14,700 --> 00:33:17,190
And on top of that Spot,

676
00:33:17,190 --> 00:33:20,250
Spot is a great way if you to save,

677
00:33:20,250 --> 00:33:23,670
if you have fault tolerant applications,

678
00:33:23,670 --> 00:33:27,180
80% savings on compute easily.

679
00:33:27,180 --> 00:33:29,490
Well with a caveat that we
can reclaim this capacity

680
00:33:29,490 --> 00:33:30,323
at any time.

681
00:33:30,323 --> 00:33:34,470
So really for fault tolerant applications,

682
00:33:34,470 --> 00:33:37,020
this is actually something
that is not available

683
00:33:37,020 --> 00:33:39,483
with managed instances yet.

684
00:33:41,550 --> 00:33:43,012
Let's take a look at Fargate

685
00:33:43,012 --> 00:33:45,093
and how Fargate helps you optimize costs.

686
00:33:46,110 --> 00:33:48,870
So first of all, not really obvious,

687
00:33:48,870 --> 00:33:52,350
but you always get a
hundred percent utilization.

688
00:33:52,350 --> 00:33:53,703
Matt talked about it,

689
00:33:54,540 --> 00:33:57,960
but we give you exactly
what you asked for.

690
00:33:57,960 --> 00:34:00,780
You don't need to reason
about being packing your tasks

691
00:34:00,780 --> 00:34:03,000
on that instance and figuring out

692
00:34:03,000 --> 00:34:04,650
what happens when the task goes away,

693
00:34:04,650 --> 00:34:08,400
what to do with that empty
slot on the instance,

694
00:34:08,400 --> 00:34:09,873
what helps to place there.

695
00:34:11,220 --> 00:34:13,050
Another thing that is really important,

696
00:34:13,050 --> 00:34:16,920
you can speed up the
task launches on Fargate

697
00:34:16,920 --> 00:34:19,950
with Seekable OCI, lazy loading,

698
00:34:19,950 --> 00:34:22,170
the easier that we get the container

699
00:34:22,170 --> 00:34:24,840
and we started before it's fully loaded.

700
00:34:24,840 --> 00:34:26,310
It's an excellent feature.

701
00:34:26,310 --> 00:34:27,450
Please, please, please use it,

702
00:34:27,450 --> 00:34:30,393
it works better with large images.

703
00:34:31,230 --> 00:34:32,910
And of course we have compute optimizer.

704
00:34:32,910 --> 00:34:35,490
Now it looks at your workload and says,

705
00:34:35,490 --> 00:34:37,140
by the way, you can stop these instances,

706
00:34:37,140 --> 00:34:38,340
you're not using them

707
00:34:38,340 --> 00:34:40,320
or it's better to right size

708
00:34:40,320 --> 00:34:42,780
and just it suggests a better size.

709
00:34:42,780 --> 00:34:44,130
If you for example,

710
00:34:44,130 --> 00:34:47,910
run them at very low level
of CPU usage (indistinct)

711
00:34:47,910 --> 00:34:51,390
go down the size, you don't
need that much capacity,

712
00:34:51,390 --> 00:34:52,443
saving you money.

713
00:34:53,760 --> 00:34:55,050
On managed instances,

714
00:34:55,050 --> 00:34:56,760
the situation is slightly different.

715
00:34:56,760 --> 00:34:59,310
Remember multiple tasks,
there's be packing problem.

716
00:34:59,310 --> 00:35:01,530
What do we do with empty slots?

717
00:35:01,530 --> 00:35:03,330
Well now we actively fill them.

718
00:35:03,330 --> 00:35:05,430
We look at your entire cluster,

719
00:35:05,430 --> 00:35:07,410
we find an unutilized instances

720
00:35:07,410 --> 00:35:10,770
and we compact your tasks to better,

721
00:35:10,770 --> 00:35:12,360
to achieve better utilization.

722
00:35:12,360 --> 00:35:15,120
And we shut down stuff that recital,

723
00:35:15,120 --> 00:35:18,300
which is really powerful
active optimization

724
00:35:18,300 --> 00:35:20,163
that goes on all the time.

725
00:35:21,150 --> 00:35:24,240
You can tell us, nope, I don't want that.

726
00:35:24,240 --> 00:35:27,360
This particular tasks need
to run for a long time,

727
00:35:27,360 --> 00:35:29,700
I cannot interrupt that, we have this way.

728
00:35:29,700 --> 00:35:33,150
And you can actually disable
this feature completely,

729
00:35:33,150 --> 00:35:35,010
which is handy when you use something

730
00:35:35,010 --> 00:35:36,630
like reserved instances

731
00:35:36,630 --> 00:35:38,640
and on demand capacity reservations.

732
00:35:38,640 --> 00:35:41,010
You already paid for that hardware,

733
00:35:41,010 --> 00:35:42,450
you already paid for that stuff.

734
00:35:42,450 --> 00:35:46,290
Like why do you want
to stop this instances?

735
00:35:46,290 --> 00:35:49,140
Maybe you want to keep
them running all the time,

736
00:35:49,140 --> 00:35:50,880
so you can launch new tasks faster.

737
00:35:50,880 --> 00:35:54,180
So there are different
ways to think about it.

738
00:35:54,180 --> 00:35:55,013
And of course,

739
00:35:55,013 --> 00:35:58,290
since we have multiple
tasks on a single instance,

740
00:35:58,290 --> 00:36:01,560
now we can use container image cache.

741
00:36:01,560 --> 00:36:05,700
So instead of downloading
the container image

742
00:36:05,700 --> 00:36:08,460
from ECR every time,

743
00:36:08,460 --> 00:36:13,020
your tasks can just grab it
from that instance immediately.

744
00:36:13,020 --> 00:36:17,820
So to wrap up, you need
to think about Fargate

745
00:36:17,820 --> 00:36:19,050
and manage instances.

746
00:36:19,050 --> 00:36:21,720
And again, we believe that
Fargate is an excellent choice

747
00:36:21,720 --> 00:36:23,100
for the majority of workloads,

748
00:36:23,100 --> 00:36:26,010
but managed instances
come incredibly handy

749
00:36:26,010 --> 00:36:27,310
when you need things like,

750
00:36:28,770 --> 00:36:32,103
stuff that just does not work on Fargate.

751
00:36:32,103 --> 00:36:34,500
eBPF is one example of that.

752
00:36:34,500 --> 00:36:36,780
Another one is related to cost.

753
00:36:36,780 --> 00:36:40,290
When you have short-lived
tasks on Fargate,

754
00:36:40,290 --> 00:36:42,360
I'm sorry, it is not efficient.

755
00:36:42,360 --> 00:36:45,240
You're spending way too much money,

756
00:36:45,240 --> 00:36:46,920
'cause you're paying for the time,

757
00:36:46,920 --> 00:36:49,203
the images being downloaded from ECR.

758
00:36:50,040 --> 00:36:51,840
Managed instances,

759
00:36:51,840 --> 00:36:54,390
as I said, contain rematch cache

760
00:36:54,390 --> 00:36:57,960
and the ability to reuse
instances for new tasks,

761
00:36:57,960 --> 00:37:00,390
it helps you save money.

762
00:37:00,390 --> 00:37:03,030
So everything that runs 102 minutes,

763
00:37:03,030 --> 00:37:06,420
I'm confident it's gonna
be way more cost optimal

764
00:37:06,420 --> 00:37:08,070
on managed instances.

765
00:37:08,070 --> 00:37:10,110
Please consider that as an option.

766
00:37:10,110 --> 00:37:13,650
And of course if you have
your reserved instances,

767
00:37:13,650 --> 00:37:18,180
or you have instance saving plans,

768
00:37:18,180 --> 00:37:22,350
or DCR managed instances is a simple way

769
00:37:22,350 --> 00:37:24,660
to use that capacity

770
00:37:24,660 --> 00:37:29,610
and again, save money with ECS.

771
00:37:29,610 --> 00:37:32,490
Well, with that, we're coming
to the most exciting part

772
00:37:32,490 --> 00:37:33,930
of this presentation.

773
00:37:33,930 --> 00:37:38,310
Ruben, please come on stage
and chat about QRT journey.

774
00:37:38,310 --> 00:37:39,507
Thank you.

775
00:37:39,507 --> 00:37:41,557
- Thank you very much, Alex. Thanks Mats.

776
00:37:43,509 --> 00:37:44,592
Hello. Hello.

777
00:37:48,990 --> 00:37:51,780
Let's wait. Okay, we have it.

778
00:37:51,780 --> 00:37:53,850
Hello, I hope you're getting the best

779
00:37:53,850 --> 00:37:55,830
of the first day of the re:Invent.

780
00:37:55,830 --> 00:37:57,150
My name is Ruben

781
00:37:57,150 --> 00:38:00,180
and before like diving into the journey

782
00:38:00,180 --> 00:38:01,530
into the technical talk,

783
00:38:01,530 --> 00:38:04,140
I would like to introduce
myself a little bit.

784
00:38:04,140 --> 00:38:06,030
The first thing you need
to know about me is that

785
00:38:06,030 --> 00:38:09,870
I'm Italian and that's
important for one reason.

786
00:38:09,870 --> 00:38:11,610
I have a challenge with myself today

787
00:38:11,610 --> 00:38:14,580
to try to deliver at least half
of the volume of information

788
00:38:14,580 --> 00:38:17,100
I can do with my hands by using words.

789
00:38:17,100 --> 00:38:18,210
So you're gonna let me know if

790
00:38:18,210 --> 00:38:20,310
that works at the end of the presentation.

791
00:38:21,241 --> 00:38:22,590
And the second element is,

792
00:38:22,590 --> 00:38:24,630
I would like to talk
about my previous life

793
00:38:24,630 --> 00:38:26,850
before selling my soul to finance.

794
00:38:26,850 --> 00:38:28,920
I was actually a rocket scientist,

795
00:38:28,920 --> 00:38:32,040
like I have a PhD in applied mathematics

796
00:38:32,040 --> 00:38:35,160
and I was simulating rocketed engines.

797
00:38:35,160 --> 00:38:37,680
I must admit I don't regret
the choice to switch,

798
00:38:37,680 --> 00:38:39,810
but sometimes I miss the random explosion

799
00:38:39,810 --> 00:38:41,013
in the lab sometimes.

800
00:38:45,120 --> 00:38:45,953
What is QRT?

801
00:38:45,953 --> 00:38:47,910
After introduction by myself,

802
00:38:47,910 --> 00:38:49,260
I would like to talk about QRT.

803
00:38:49,260 --> 00:38:50,910
Qube Research and Technologies

804
00:38:50,910 --> 00:38:54,870
is a global systematic asset manager.

805
00:38:54,870 --> 00:38:57,480
Let's dissect that a little
bit in the right order,

806
00:38:57,480 --> 00:39:00,000
which means starting from the end.

807
00:39:00,000 --> 00:39:04,980
Asset manager means we get
money from our investor.

808
00:39:04,980 --> 00:39:09,933
So, and we put it on the market
to make more money with it.

809
00:39:11,490 --> 00:39:14,310
By systematic what we mean is,

810
00:39:14,310 --> 00:39:17,640
the vast majority of our
investment strategies are

811
00:39:17,640 --> 00:39:19,380
data-driven and automatic.

812
00:39:19,380 --> 00:39:22,260
So we have a lot of algorithms
which trade on the market

813
00:39:22,260 --> 00:39:24,423
in a daily basis in an automated way.

814
00:39:25,590 --> 00:39:30,300
By global means that QRT is
operating across the globe

815
00:39:30,300 --> 00:39:32,310
and across all the type of assets.

816
00:39:32,310 --> 00:39:34,443
Equity is futures, crypto, you name it.

817
00:39:36,060 --> 00:39:38,280
And what's the mission purity?

818
00:39:38,280 --> 00:39:40,920
Yeah, I already introduced
it a little bit,

819
00:39:40,920 --> 00:39:42,450
but it's to deliver results

820
00:39:42,450 --> 00:39:44,580
for our investor in our market condition.

821
00:39:44,580 --> 00:39:47,760
Is it to understand when
market go is bullish

822
00:39:47,760 --> 00:39:50,490
and it goes well, we want to do better.

823
00:39:50,490 --> 00:39:52,350
And when things are less,

824
00:39:52,350 --> 00:39:55,083
well then we try to mitigate that.

825
00:39:56,400 --> 00:39:59,160
All right, start.

826
00:39:59,160 --> 00:40:00,660
We are good with introductions

827
00:40:00,660 --> 00:40:03,513
now we wanna dive into the nerdy talk.

828
00:40:04,950 --> 00:40:09,480
When I joined QRT almost four years ago,

829
00:40:09,480 --> 00:40:12,210
there was already an
existing solution in place

830
00:40:12,210 --> 00:40:14,730
and it worked more or less like that.

831
00:40:14,730 --> 00:40:16,230
We have researchers,

832
00:40:16,230 --> 00:40:18,180
researchers are basically
the bright people

833
00:40:18,180 --> 00:40:21,750
which come up with ideas for
investment strategies, right?

834
00:40:21,750 --> 00:40:23,940
Most of them, especially in recent times,

835
00:40:23,940 --> 00:40:25,080
they're used to use,

836
00:40:25,080 --> 00:40:27,390
I mean they're used to do
their research with Python

837
00:40:27,390 --> 00:40:30,690
because of, you know, the
rich data science ecosystem

838
00:40:30,690 --> 00:40:32,220
or scientific computing.

839
00:40:32,220 --> 00:40:35,850
So they were used to do
their research with Python

840
00:40:35,850 --> 00:40:38,670
and then they had
somehow basically pair up

841
00:40:38,670 --> 00:40:40,800
with the quantitative developer

842
00:40:40,800 --> 00:40:45,240
and basically rewrite the
research in another language,

843
00:40:45,240 --> 00:40:47,610
compile that artifact,

844
00:40:47,610 --> 00:40:51,540
and then deploy it on an
existing on-prem infrastructure,

845
00:40:51,540 --> 00:40:54,946
sharing resources with other type,

846
00:40:54,946 --> 00:40:56,703
with other ideas, let's say.

847
00:40:57,630 --> 00:40:59,370
I mean that worked pretty,
pretty, pretty well.

848
00:40:59,370 --> 00:41:03,330
I mean, RT has been a
successful enterprise.

849
00:41:03,330 --> 00:41:04,830
But when I joined,

850
00:41:04,830 --> 00:41:07,860
we were tasked with
another task basically was,

851
00:41:07,860 --> 00:41:11,310
which was let's try to build something

852
00:41:11,310 --> 00:41:16,310
which is natively
scalable and cloud native.

853
00:41:16,560 --> 00:41:21,000
So what we said is, okay,
maybe we can skip the detour,

854
00:41:21,000 --> 00:41:22,290
let's keep what works.

855
00:41:22,290 --> 00:41:23,910
Researchers really like to work in Python,

856
00:41:23,910 --> 00:41:25,830
let's keep them working in Python.

857
00:41:25,830 --> 00:41:28,170
And then what we decide to do

858
00:41:28,170 --> 00:41:31,530
is containerize our Python workloads.

859
00:41:31,530 --> 00:41:33,690
Okay, now we have our container

860
00:41:33,690 --> 00:41:35,010
and we had to decide

861
00:41:35,010 --> 00:41:39,360
which kind of orchestration
system we wanted to use,

862
00:41:39,360 --> 00:41:42,660
I guess the fact that on this
sage is probably a spoiler,

863
00:41:42,660 --> 00:41:45,603
but we ended up using Fargate and ECS.

864
00:41:46,890 --> 00:41:47,723
Why?

865
00:41:48,750 --> 00:41:50,400
I will try to explain you

866
00:41:50,400 --> 00:41:55,047
why we chose Fargate as a
capacity provider in ECS

867
00:41:55,047 --> 00:41:56,610
and as an orchestrator.

868
00:41:56,610 --> 00:42:00,540
First of all, at that time
we were a very small team.

869
00:42:00,540 --> 00:42:02,700
We were four when I joined

870
00:42:02,700 --> 00:42:05,190
and we wanted to focus on the business.

871
00:42:05,190 --> 00:42:09,390
The team was not particularly
expert in cloud computing,

872
00:42:09,390 --> 00:42:10,980
but we were, I mean we had expertise

873
00:42:10,980 --> 00:42:14,469
in the financial part and the
standard engineering part.

874
00:42:14,469 --> 00:42:16,440
So we wanted to focus on our business.

875
00:42:16,440 --> 00:42:18,840
Fargate gave us that serverless vision,

876
00:42:18,840 --> 00:42:22,143
which made us focus on our core business.

877
00:42:24,150 --> 00:42:28,740
We tend to build things within the team,

878
00:42:28,740 --> 00:42:32,730
keeping the intellectual
impedance at the lowest we can.

879
00:42:32,730 --> 00:42:35,373
And again, Fargate really
helps you with that.

880
00:42:37,410 --> 00:42:40,143
At that time when we started our endeavor,

881
00:42:41,160 --> 00:42:43,710
we didn't know if it would've
been successful or not.

882
00:42:43,710 --> 00:42:45,780
So we were looking for
something which could help us

883
00:42:45,780 --> 00:42:48,483
start small but scale if we need it.

884
00:42:49,980 --> 00:42:51,570
And if we needed,

885
00:42:51,570 --> 00:42:54,543
we needed the capacity to
keep up with our growth.

886
00:42:56,850 --> 00:42:57,900
Last but not least,

887
00:42:57,900 --> 00:43:02,670
I mean financial industry is
a very regulated industry,

888
00:43:02,670 --> 00:43:07,350
so we needed a by default
compliant security posture.

889
00:43:07,350 --> 00:43:09,240
And the fact that in Fargate you can,

890
00:43:09,240 --> 00:43:11,100
everything is isolated, is encrypted,

891
00:43:11,100 --> 00:43:12,840
you cannot assess it in your machine,

892
00:43:12,840 --> 00:43:14,740
I mean that really played well for us.

893
00:43:16,380 --> 00:43:21,030
So these were the design
principles of our choice.

894
00:43:21,030 --> 00:43:23,400
Now let me try to explain

895
00:43:23,400 --> 00:43:25,980
how things work a little
bit more in details.

896
00:43:25,980 --> 00:43:29,463
Some schematic here, just
bear with me a little bit.

897
00:43:30,600 --> 00:43:34,323
In our system we have
two type of services.

898
00:43:35,160 --> 00:43:37,020
One type of services is called,

899
00:43:37,020 --> 00:43:39,420
we call it quant computational unit

900
00:43:39,420 --> 00:43:41,040
or compute units, QCUs

901
00:43:41,040 --> 00:43:43,350
that you see here on
the bottom of the slide.

902
00:43:43,350 --> 00:43:45,780
And then we have another type of service,

903
00:43:45,780 --> 00:43:47,340
which is kind of a server that here

904
00:43:47,340 --> 00:43:49,200
is marked logical server.

905
00:43:49,200 --> 00:43:50,583
We also call it head node.

906
00:43:53,100 --> 00:43:56,370
The role of the head node,
basically the QCs cannot talk.

907
00:43:56,370 --> 00:43:58,560
And then we have as you see
in the top of the slide,

908
00:43:58,560 --> 00:43:59,490
then we have our, you know,

909
00:43:59,490 --> 00:44:03,093
underlying firm wise
database told the data.

910
00:44:04,020 --> 00:44:07,950
Basically the QCUs are
designed to not talk directly

911
00:44:07,950 --> 00:44:10,170
to the database for performance reason.

912
00:44:10,170 --> 00:44:13,950
So the role of the head node is twofold.

913
00:44:13,950 --> 00:44:16,830
One is to aggregate requests.

914
00:44:16,830 --> 00:44:18,990
So imagine one of your units needs,

915
00:44:18,990 --> 00:44:23,220
I don't know, Amazon prices for the stock

916
00:44:23,220 --> 00:44:24,450
for the last 10 years

917
00:44:24,450 --> 00:44:27,210
and another one needs it
for the last five years.

918
00:44:27,210 --> 00:44:30,930
Basically the hand node
queries the database

919
00:44:30,930 --> 00:44:33,753
for just 10 years and then
it does the slicing locally.

920
00:44:34,650 --> 00:44:37,110
And the second one, as you
can imagine is caching.

921
00:44:37,110 --> 00:44:40,563
We cache some of the requests in memory.

922
00:44:42,750 --> 00:44:47,400
I talked about the fact that
this is a logical server. Why?

923
00:44:47,400 --> 00:44:49,950
Because in reality our
head node deployment

924
00:44:49,950 --> 00:44:53,070
is composed by several ECS services.

925
00:44:53,070 --> 00:44:56,250
Actually in the bigger deployments,

926
00:44:56,250 --> 00:44:58,860
several hundreds or
even several thousands,

927
00:44:58,860 --> 00:45:02,433
in this slide, each
square is an ECS service.

928
00:45:03,600 --> 00:45:06,030
And one particularity of this is that,

929
00:45:06,030 --> 00:45:09,960
each service has one task, only one task.

930
00:45:09,960 --> 00:45:11,580
This is a bit exotic with respect

931
00:45:11,580 --> 00:45:14,220
to the best practices AWS recommends

932
00:45:14,220 --> 00:45:16,950
while you have that again simplicity,

933
00:45:16,950 --> 00:45:19,800
if you have two units basically publishing

934
00:45:19,800 --> 00:45:20,670
almost the same thing,

935
00:45:20,670 --> 00:45:23,280
then you need to decide
which one is the right one.

936
00:45:23,280 --> 00:45:25,490
We decided to accommodate
a little bit of like,

937
00:45:25,490 --> 00:45:28,230
of less residency for simplicity.

938
00:45:28,230 --> 00:45:30,933
So they we're just one unit publishing.

939
00:45:32,850 --> 00:45:36,600
All right, and another
important element here is

940
00:45:36,600 --> 00:45:41,550
everything talks data
driven gRPC protocol.

941
00:45:41,550 --> 00:45:44,190
So the QCU talks, gRPC to the head node,

942
00:45:44,190 --> 00:45:47,040
which talks to gRPC to the shards

943
00:45:47,040 --> 00:45:50,523
and the shards talk gRPC with database.

944
00:45:51,390 --> 00:45:52,890
The shards here mean that obviously

945
00:45:52,890 --> 00:45:54,870
you cannot host the entire data

946
00:45:54,870 --> 00:45:56,640
you need in a single service.

947
00:45:56,640 --> 00:45:58,920
So basically the shards split this data

948
00:45:58,920 --> 00:46:00,180
based on several criteria

949
00:46:00,180 --> 00:46:03,993
to have and to have a
distributed deployment.

950
00:46:06,067 --> 00:46:08,700
Then as I told, like the QCUs then,

951
00:46:08,700 --> 00:46:11,100
when they finish elaborating
what they need to elaborate,

952
00:46:11,100 --> 00:46:12,450
they will publish the results

953
00:46:12,450 --> 00:46:15,363
of their computation
back into our database.

954
00:46:16,380 --> 00:46:20,520
Another important element here
is that service discovery.

955
00:46:20,520 --> 00:46:23,550
In our experience when we tried
other orchestrating systems,

956
00:46:23,550 --> 00:46:27,761
we realized that scaling DNS correctly

957
00:46:27,761 --> 00:46:28,680
is kind of challenging.

958
00:46:28,680 --> 00:46:31,230
So here we decided to use
cloud map, which is again,

959
00:46:31,230 --> 00:46:34,740
serverless and we basically,
when we deploy the head nodes,

960
00:46:34,740 --> 00:46:36,660
we register DNS entry in cloud map

961
00:46:36,660 --> 00:46:38,763
and that's it works trademark.

962
00:46:40,410 --> 00:46:44,760
All right, how did it go?

963
00:46:44,760 --> 00:46:46,560
I guess again, the fact I'm on this stage

964
00:46:46,560 --> 00:46:49,770
is probably a spoiler,
but it went very well.

965
00:46:49,770 --> 00:46:52,170
I would like to promise you, you know,

966
00:46:52,170 --> 00:46:54,930
to give you the reality things like,

967
00:46:54,930 --> 00:46:56,100
the scale we are at,

968
00:46:56,100 --> 00:46:58,800
unfortunately the compliance colleagues,

969
00:46:58,800 --> 00:46:59,820
they hide in shadows.

970
00:46:59,820 --> 00:47:02,940
So I cannot tell, I cannot
tell you the exact figures,

971
00:47:02,940 --> 00:47:06,660
but we had hundred X growth,

972
00:47:06,660 --> 00:47:09,000
which means everything and nothing.

973
00:47:09,000 --> 00:47:12,720
What I can tell you is that
we have right now deployed

974
00:47:12,720 --> 00:47:15,630
several tens of thousands of
services currently running

975
00:47:15,630 --> 00:47:18,600
where the several tens of
thousands is on the higher range

976
00:47:18,600 --> 00:47:20,160
of the tens of thousands.

977
00:47:20,160 --> 00:47:22,733
That's the word I could
negotiate, I could tell you.

978
00:47:24,150 --> 00:47:28,530
But based on the, you know,
the schematic I just presented,

979
00:47:28,530 --> 00:47:29,940
you I mean,

980
00:47:29,940 --> 00:47:34,230
you start facing some challenges
when you begin to scale.

981
00:47:34,230 --> 00:47:37,680
For example, quotas on the
number of service per cluster,

982
00:47:37,680 --> 00:47:41,160
number of CPUs per account,
et cetera, et cetera.

983
00:47:41,160 --> 00:47:45,150
So actually we had to
evolve our deployment.

984
00:47:45,150 --> 00:47:49,050
We actually tag team with AWS

985
00:47:49,050 --> 00:47:52,260
with a process engagement that
we ended up with an evolution

986
00:47:52,260 --> 00:47:54,810
of the architecture just presented,

987
00:47:54,810 --> 00:47:56,850
which is the following one.

988
00:47:56,850 --> 00:47:58,923
We already talked about head nodes,

989
00:48:00,240 --> 00:48:04,380
we started to put head
nodes in dedicated accounts.

990
00:48:04,380 --> 00:48:07,470
So we have some accounts for hand nodes,

991
00:48:07,470 --> 00:48:09,393
some accounts for the QCUs.

992
00:48:10,800 --> 00:48:15,390
All these accounts then
are within the same VPC,

993
00:48:15,390 --> 00:48:17,733
which is stretched
across all the accounts.

994
00:48:18,930 --> 00:48:21,120
A few caveats here.

995
00:48:21,120 --> 00:48:22,140
When you do this,

996
00:48:22,140 --> 00:48:26,850
you need to first define
the VPC in a single account

997
00:48:26,850 --> 00:48:28,170
and then when you did that,

998
00:48:28,170 --> 00:48:29,880
then you can stretch it.

999
00:48:29,880 --> 00:48:31,650
Which means a couple of things,

1000
00:48:31,650 --> 00:48:33,210
the most important one is,

1001
00:48:33,210 --> 00:48:37,770
you can define, you can register
your DNS service discovery

1002
00:48:37,770 --> 00:48:40,500
only on the accounts
where you have defined,

1003
00:48:40,500 --> 00:48:43,320
you have created the VPC initially

1004
00:48:43,320 --> 00:48:44,940
and which means in our case

1005
00:48:44,940 --> 00:48:48,240
we created the VPC in
the head nodes accounts

1006
00:48:48,240 --> 00:48:51,406
because the head nodes are
the thing we want to discover.

1007
00:48:51,406 --> 00:48:53,880
The QCUs want to discover and
then you stretch their arm.

1008
00:48:53,880 --> 00:48:58,440
If you wanna use API based
or not DNS query based,

1009
00:48:58,440 --> 00:49:00,330
but API based service discovery,

1010
00:49:00,330 --> 00:49:02,630
that works across the
VPC without any problem.

1011
00:49:04,080 --> 00:49:05,100
Second important element,

1012
00:49:05,100 --> 00:49:07,890
and this is really the secret
sauce to become a success,

1013
00:49:07,890 --> 00:49:09,630
a successful asset manager,

1014
00:49:09,630 --> 00:49:10,740
like systematic asset manager

1015
00:49:10,740 --> 00:49:14,040
is the naming system for the clusters.

1016
00:49:14,040 --> 00:49:15,660
As you can see here, we're using flowers.

1017
00:49:15,660 --> 00:49:19,020
It's really, really the secret
sauce for our deployment.

1018
00:49:19,020 --> 00:49:24,020
We recommend you to do
that, it's great, it's fun.

1019
00:49:25,620 --> 00:49:28,770
All right, let's make a lead pose.

1020
00:49:28,770 --> 00:49:30,633
A lot of diagrams of schematic,

1021
00:49:31,740 --> 00:49:33,750
I mean, we grew from few services

1022
00:49:33,750 --> 00:49:35,790
in a single account, single cluster,

1023
00:49:35,790 --> 00:49:37,170
single account, multi cluster,

1024
00:49:37,170 --> 00:49:38,460
which I didn't show.

1025
00:49:38,460 --> 00:49:41,310
And now we are multi
account, multi cluster.

1026
00:49:41,310 --> 00:49:43,650
You can realize now that this is kinda,

1027
00:49:43,650 --> 00:49:45,990
it becomes to be challenging to control.

1028
00:49:45,990 --> 00:49:48,400
So you're really required to have

1029
00:49:49,590 --> 00:49:51,090
the right observability posture.

1030
00:49:51,090 --> 00:49:54,000
You really want your system to ping you

1031
00:49:54,000 --> 00:49:57,333
instead of you pulling the
system that's much more scalable.

1032
00:49:58,590 --> 00:50:00,120
When you approach observability,

1033
00:50:00,120 --> 00:50:02,490
at least in our experience with ECS,

1034
00:50:02,490 --> 00:50:05,760
you have several options.

1035
00:50:05,760 --> 00:50:07,620
The one that which is most
documented is, you know,

1036
00:50:07,620 --> 00:50:10,650
you spin up a sidecar on your services

1037
00:50:10,650 --> 00:50:13,437
and with FireLens

1038
00:50:13,437 --> 00:50:17,700
and then you scrape your
telemetry for example.

1039
00:50:17,700 --> 00:50:19,200
Still within the tag team

1040
00:50:19,200 --> 00:50:20,850
with AWS in the preserve engagement,

1041
00:50:20,850 --> 00:50:22,440
we decided to go with a different way,

1042
00:50:22,440 --> 00:50:25,260
which is a little bit more
exotic but it works for us

1043
00:50:25,260 --> 00:50:27,300
and I will present that to you.

1044
00:50:27,300 --> 00:50:32,010
Again, single VPC really talk
single PC multiple accounts.

1045
00:50:32,010 --> 00:50:35,640
One for red, no I mean some
for red nodes, some for QCUs.

1046
00:50:35,640 --> 00:50:36,720
Those accounts,

1047
00:50:36,720 --> 00:50:41,430
they basically publish their
logs in a serverless way

1048
00:50:41,430 --> 00:50:45,150
using CloudWatch and they also publish

1049
00:50:45,150 --> 00:50:47,940
the metrics if you turn
on container insights

1050
00:50:47,940 --> 00:50:51,090
in a serverless way into
CloudWatch metrics, right?

1051
00:50:51,090 --> 00:50:52,710
Each account does that.

1052
00:50:52,710 --> 00:50:57,710
What we did is connect what
is called log subscriptions

1053
00:50:57,750 --> 00:51:00,390
and metrics streams.

1054
00:51:00,390 --> 00:51:02,790
Those are basically some,

1055
00:51:02,790 --> 00:51:05,610
again serverless mechanisms which react

1056
00:51:05,610 --> 00:51:08,490
when a new log appears in cloud
watching, whichever account

1057
00:51:08,490 --> 00:51:12,030
or when a new metric appears
in whichever account.

1058
00:51:12,030 --> 00:51:16,200
They react, you can
connect them to Firehose,

1059
00:51:16,200 --> 00:51:18,840
or Kinesis and to a Lambda.

1060
00:51:18,840 --> 00:51:23,790
And what we do, we use those
which are in a single account

1061
00:51:23,790 --> 00:51:25,920
and we use those to send our telemetry

1062
00:51:25,920 --> 00:51:28,083
to our third party observability vendor.

1063
00:51:29,610 --> 00:51:34,197
That's for infrastructure
related telemetry.

1064
00:51:37,800 --> 00:51:42,800
For what concerns your
application telemetry.

1065
00:51:43,710 --> 00:51:47,820
What we did was deploying
an open telemetry collector

1066
00:51:47,820 --> 00:51:52,110
within the VPC we just discussed
spanning across accounts

1067
00:51:52,110 --> 00:51:53,790
in a dedicated cluster.

1068
00:51:53,790 --> 00:51:55,080
And this open telemetry collector

1069
00:51:55,080 --> 00:51:57,813
has been configured to autoscale.

1070
00:51:58,680 --> 00:52:00,930
What's bit different with,
you know, standard practice,

1071
00:52:00,930 --> 00:52:02,640
at least based on our experience

1072
00:52:02,640 --> 00:52:03,570
is that normally what you do,

1073
00:52:03,570 --> 00:52:06,540
you configure collectors
to scrape your services.

1074
00:52:06,540 --> 00:52:09,870
In this case, our services
are pushing to the collector.

1075
00:52:09,870 --> 00:52:12,390
So why that, no sidecars,

1076
00:52:12,390 --> 00:52:15,423
you don't have the problem
of monitoring the monitor.

1077
00:52:16,380 --> 00:52:18,210
You don't have the problem to decide

1078
00:52:18,210 --> 00:52:21,270
how much compute you need
to allocate for the sidecar

1079
00:52:21,270 --> 00:52:23,610
and you have one single point of entry

1080
00:52:23,610 --> 00:52:25,050
to control everything,

1081
00:52:25,050 --> 00:52:27,870
which looked easier to
us at the scale we were.

1082
00:52:27,870 --> 00:52:30,000
And again the telemetry collector.

1083
00:52:30,000 --> 00:52:34,620
The telemetry collector then
pushes through a private link

1084
00:52:34,620 --> 00:52:36,600
again back to our observability vendor,

1085
00:52:36,600 --> 00:52:37,950
which then holds everything.

1086
00:52:37,950 --> 00:52:39,540
You have log, you have metrics

1087
00:52:39,540 --> 00:52:41,490
and you have traces if you're using it.

1088
00:52:43,860 --> 00:52:47,250
All right, where next? We want more.

1089
00:52:47,250 --> 00:52:50,370
We want more and we are still growing,

1090
00:52:50,370 --> 00:52:52,230
but right now we're at a certain scale

1091
00:52:52,230 --> 00:52:54,040
where we cannot afford

1092
00:52:54,930 --> 00:52:56,940
any more to just grow without thinking.

1093
00:52:56,940 --> 00:53:01,143
So we need to adopt a
sustainable growth approach.

1094
00:53:02,190 --> 00:53:04,140
There is a lot of appetite in the market

1095
00:53:04,140 --> 00:53:08,340
and also by extrapolation in the firm

1096
00:53:08,340 --> 00:53:10,320
to leverage hardware accelerators,

1097
00:53:10,320 --> 00:53:12,243
GPUs, but not only GPUs.

1098
00:53:14,370 --> 00:53:16,560
As you might know when you use Fargate

1099
00:53:16,560 --> 00:53:18,480
you are limited to 120 gigs

1100
00:53:18,480 --> 00:53:21,870
as the top memory level you could choose.

1101
00:53:21,870 --> 00:53:24,750
Some application, our site
require more than that.

1102
00:53:24,750 --> 00:53:26,730
And so we are looking at alternatives

1103
00:53:26,730 --> 00:53:28,890
and the alternative spoiler alert is,

1104
00:53:28,890 --> 00:53:31,350
we are already testing and
looking at managed distances,

1105
00:53:31,350 --> 00:53:33,750
which looks really the sweet,

1106
00:53:33,750 --> 00:53:35,250
like the sweet spot

1107
00:53:35,250 --> 00:53:37,440
where we can adopt all these elements

1108
00:53:37,440 --> 00:53:39,150
and make our business grow

1109
00:53:39,150 --> 00:53:40,533
and our deployment grow.

1110
00:53:41,490 --> 00:53:46,417
Orthogonally this, we wanna keep

1111
00:53:48,900 --> 00:53:51,150
the resiliency posture we already have.

1112
00:53:51,150 --> 00:53:53,700
We increased it going multi account

1113
00:53:53,700 --> 00:53:58,020
and now we are starting to
think to go multi region,

1114
00:53:58,020 --> 00:53:59,160
'cause right now we were,

1115
00:53:59,160 --> 00:54:00,480
all the accounts were deployed,

1116
00:54:00,480 --> 00:54:04,200
I mean we're initialized
in a single region.

1117
00:54:04,200 --> 00:54:05,730
So we started to think how to do that

1118
00:54:05,730 --> 00:54:07,140
and take the unit.

1119
00:54:07,140 --> 00:54:08,130
I already discussed, you know,

1120
00:54:08,130 --> 00:54:10,050
the VPC unit with all the accounts,

1121
00:54:10,050 --> 00:54:12,390
take it and move it into another region,

1122
00:54:12,390 --> 00:54:14,550
have a multi-region deployment,

1123
00:54:14,550 --> 00:54:18,600
which will give us advantages
on flexibility for compute,

1124
00:54:18,600 --> 00:54:21,513
but also, you know, residency,
a high residency posture.

1125
00:54:23,070 --> 00:54:26,220
And that was it for me.

1126
00:54:26,220 --> 00:54:30,030
Thank you for your
attention. And back to Alex.

1127
00:54:30,030 --> 00:54:34,103
Thank you very much.
(audience applauding)

