# AWS re:Invent 2025 灾难恢复会议总结

## 会议概述

本次AWS re:Invent 2025分会场由AWS解决方案架构师Siddh主讲，重点介绍了AWS弹性灾难恢复服务(AWS DRS)，并邀请全球制药巨头Zidus公司的首席财务官Ravi和企业架构师Ashish分享了他们的实际实施案例。

会议深入探讨了现代企业如何从传统的磁带备份方式转向云端灾难恢复解决方案。Zidus作为一家成立于1952年、总部位于印度古吉拉特邦艾哈迈达巴德的全球制药公司，拥有超过29,000名员工，业务遍及印度、美国、欧洲、巴西和墨西哥等多个国家和地区。该公司面临着复杂的IT基础设施挑战：10个关键制药应用程序运行在60多台物理和虚拟服务器上，数据量超过80TB，分布在8个工厂位置。

通过采用AWS DRS解决方案，Zidus成功将恢复点目标(RPO)从24小时降低到15分钟，恢复时间目标(RTO)从24-48小时降低到3小时以内，同时显著降低了运营成本和复杂性。整个解决方案在6个月内完成实施和验证，符合GXP合规要求，展示了云端灾难恢复在制药行业的强大能力。

## 详细时间线与关键要点

### 00:00:00 - 会议开场与互动
- **演讲者介绍**：Siddh作为AWS解决方案架构师开场
- **现场互动调查**：询问参会者关于生产应用、灾难恢复计划和测试频率的问题
- **会议主题确立**：聚焦业务韧性和灾难恢复(DR)

### 00:01:30 - 会议议程介绍
- **传统DR方式回顾**：从磁带备份时代到现代云解决方案的演进
- **现代架构模式**：介绍主动-主动、多可用区部署等不同DR策略
- **成本效益分析**：DRS提供接近实时的RPO和分钟级RTO，成本低于主动-主动架构

### 00:03:00 - Zidus公司介绍
- **公司背景**：Ravi介绍Zidus作为全球制药公司的规模和业务范围
- **全球布局**：29,000名员工，业务遍及多个国家
- **制造能力**：41个制造工厂，其中16个获得美国FDA批准
- **研发实力**：8个研发中心，专注于创新药物开发

### 00:05:00 - Zidus的研发创新
- **研发团队**：超过1,500名科研人员在19个站点工作
- **研发重点**：新化学实体(NCE)、生物类似药、疫苗和利基技术
- **重大突破**：Soretaz药物在PBC治疗的2b/3期临床试验中取得积极结果
- **上市计划**：预计2027年初推出首个自主研发的NCE产品

### 00:07:00 - 现有DR解决方案的挑战
- **高RPO/RTO问题**：RPO达24小时，RTO超过24-48小时，导致数据丢失风险和生产延迟
- **成本和运营负担**：本地DR站点需要大量基础设施投资和持续运营成本
- **安全和人才问题**：本地站点易受网络威胁，需要专业技能人员维护

### 00:09:00 - 项目需求和范围
- **应用复杂性**：10个关键制药应用(LIMS、QMS、DMS、WES、WMS、MES等)
- **基础设施规模**：60多台服务器，运行Windows和Linux系统，使用SQL和Oracle数据库
- **数据量**：中央数据中心和8个工厂位置共80+TB实时交易数据
- **目标指标**：RPO 15分钟，RTO少于3小时
- **合规要求**：必须符合GXP法规要求，可验证、可记录、可审计

### 00:12:00 - 业务需求总结
- **最小化RPO/RTO**：15分钟RPO和3小时以内RTO的严格要求
- **成本效益**：在80+TB数据规模下保持成本效率
- **技术多样性**：支持物理服务器、虚拟服务器、多种操作系统和技术栈
- **网络架构**：在多个工厂位置和AWS区域之间建立安全、弹性的网络连接
- **合规性**：整个解决方案必须符合制药行业GXP合规要求

### 00:14:00 - RPO和RTO概念解释
- **RPO定义**：恢复点目标，即企业可承受的数据丢失量
- **RTO定义**：恢复时间目标，即企业可承受的应用停机时间
- **成本权衡**：更低的RPO/RTO需要更高的成本投入
- **DRS优势**：在秒级RPO和分钟级RTO之间取得平衡，无需主动-主动架构的高昂成本

### 00:16:00 - AWS DRS核心功能
- **账户隔离**：暂存环境与主环境完全隔离，确保灾难时数据安全
- **不可变快照**：数据快照无法被覆盖，有效防御勒索软件和网络攻击
- **测试演练**：支持定期DR演练和验证，满足最佳实践和合规要求
- **时间点恢复**：可恢复到攻击或灾难发生前的特定时间点

### 00:18:00 - AWS DRS服务特性
- **灵活性**：支持本地、云端、混合环境，物理或虚拟服务器
- **广泛兼容**：支持多种操作系统和技术栈
- **可靠性**：非中断式操作，可在不影响生产环境的情况下进行演练
- **高度自动化**：易于使用，通过启动模板自动化灾难恢复流程
- **降低TCO**：显著降低灾难恢复解决方案的总拥有成本

### 00:20:00 - 共同责任模型
- **AWS责任**：云的安全性，包括传输和静态数据加密、物理安全
- **客户责任**：云中的安全性，包括监控、可观测性、安全协议、备份和DR策略测试
- **合规就绪**：底层基础设施符合合规要求，支持医疗保健和GXP应用

### 00:22:00 - DR生命周期：设置阶段
- **复制代理安装**：在应用服务器上安装复制代理
- **数据备份启动**：通过块级复制将数据备份到暂存环境
- **设置完成**：所有数据复制到暂存环境后，准备进行测试

### 00:24:00 - DR生命周期：测试阶段
- **灾难模拟**：在恢复环境中模拟灾难场景
- **恢复实例创建**：通过启动模板在独立的恢复环境中创建恢复EC2实例
- **数据完整性验证**：测试恢复工作负载是否正常运行，数据完整性是否保持

### 00:26:00 - DR生命周期：运营阶段
- **持续复制**：复制代理持续进行块级数据复制
- **成本优化**：仅支付块级存储费用，无需主动-主动架构的全部成本
- **实时准备**：系统随时准备应对实际灾难

### 00:28:00 - DR生命周期：故障转移阶段
- **灾难触发**：自然灾害、网络攻击或人为错误导致的灾难
- **自动恢复**：使用暂存数据创建恢复实例
- **业务切换**：业务从主站点切换到暂存环境运行

### 00:30:00 - DR生命周期：故障回切阶段
- **主站点恢复**：灾难后主站点恢复正常
- **数据回传**：将恢复环境的数据复制回主环境
- **业务恢复**：业务恢复到主站点运行

### 00:32:00 - 技术架构：本地到AWS
- **源环境**：本地虚拟机安装复制代理
- **复制服务器**：在AWS暂存子网中压缩、加密并通过TCP发送数据
- **EBS卷存储**：数据存储在EBS卷中
- **成本结构**：仅支付低成本复制服务器和EBS卷费用

### 00:34:00 - 技术架构：灾难恢复流程
- **主站点故障**：主站点发生故障
- **数据完整性检查**：验证所有数据已复制到EBS卷
- **快照创建**：快速创建EBS快照
- **恢复环境启动**：使用启动模板和快照在恢复子网创建新环境
- **DNS切换**：将网络DNS指向恢复子网

### 00:36:00 - 技术架构：故障回切流程
- **主站点恢复**：主站点恢复正常运行
- **故障回切客户端**：在主站点安装故障回切客户端
- **数据同步**：将AWS环境数据复制回源环境
- **完成回切**：数据同步后执行故障回切，恢复正常运营

### 00:38:00 - 演示介绍
- **演示目标**：验证应用级RPO和RTO
- **测试场景**：Windows应用服务器和SQL Server数据库
- **测试内容**：创建突发故障场景，恢复到数千公里外的不同区域，测量RPO、RTO和数据完整性
- **演示时长**：约20-25分钟，采用预录制方式

### 00:40:00 - 演示：源环境验证
- **区域设置**：源区域为孟买，复制到新加坡区域(距离超过4,000公里)
- **CMS应用**：80GB服务器，运行.NET 5应用
- **数据库服务器**：约150GB SQL Server数据库
- **RPO测量脚本**：创建每秒修改日期表的脚本以测量RPO

### 00:42:00 - 演示：灾难模拟
- **博客文章创建**：创建博客文章以测量应用级RPO和RTO
- **突发故障模拟**：跳过操作系统关闭，模拟可能导致数据损坏的真实灾难场景
- **同时恢复**：同时恢复应用服务器和数据库服务器
- **快照选择**：使用最新快照测量RPO

### 00:44:00 - 演示：恢复过程
- **CloudTrail审计**：从CloudTrail API服务测量灾难的确切时间
- **转换过程**：关键步骤，修改引导加载程序使源服务器能在AWS上本地启动
- **支持多种虚拟化**：支持物理服务器、虚拟服务器、Hyper-V、VMware等
- **恢复完成**：临时转换服务器完成工作

### 00:46:00 - 演示：数据完整性验证
- **应用服务器检查**：Windows关闭事件跟踪器显示突发关闭
- **IIS服务器启动**：启动IIS服务器
- **SQL数据库检查**：验证数据库服务器状态
- **日期脚本查询**：查询日期表验证数据恢复程度

### 00:48:00 - 演示：应用级验证
- **时间戳验证**：日期表显示11:45:48的时间戳
- **博客文章验证**：确认灾难前创建的博客文章已恢复
- **数据完整性确认**：应用处于灾难前的原始状态

### 00:50:00 - 演示结果总结
- **成功恢复**：成功从突发故障中恢复Windows应用和SQL Server数据库
- **RPO成果**：实现9秒RPO
- **RTO成果**：实现少于25分钟RTO(21分钟恢复作业 + IIS启动时间)
- **距离因素**：孟买到新加坡4,000公里距离，距离对RPO有影响

### 00:52:00 - 网络架构的重要性
- **降低RPO的关键**：网络架构是实现更低RPO的核心
- **Zidus规模挑战**：数据中心和多个工厂位置分布全国
- **架构优化方向**：通过优化网络架构进一步降低RPO

### 00:54:00 - Zidus网络架构基础
- **现有连接**：数据中心与所有工厂之间已有主动-被动网络连接
- **双网络提供商**：使用不同网络服务提供商实现冗余
- **流量路由**：所有工厂流量通过中央数据中心
- **AWS扩展**：将现有弹性网络架构扩展到AWS Direct Connect

### 00:56:00 - AWS Direct Connect配置
- **服务特性**：提供本地与云环境之间的安全私有连接
- **冗余设计**：连接到不同的AWS Direct Connect位置
- **主动-被动模式**：与现有网络模式保持一致
- **关键设计决策**：DR复制流量直接从工厂到AWS，避免数据中心带宽瓶颈

### 00:58:00 - 流量路由优化
- **DR流量路径**：DR复制流量直接从工厂位置到AWS Direct Connect
- **常规流量路径**：其他工厂流量继续通过Zidus企业数据中心
- **带宽优化**：避免数据中心带宽问题
- **可扩展性**：新增工厂时不会造成指数级带宽压力

### 01:00:00 - AWS云内服务
- **Direct Connect Gateway**：连接多个AWS区域的服务
- **区域灵活性**：单一弹性连接即可访问任何AWS区域
- **成本效益**：无需为每个区域复制相同连接
- **Transit Gateway**：中央路由器和网络分段服务

### 01:02:00 - Transit Gateway架构
- **Hub-Spoke拓扑**：实现网络分段
- **工作负载隔离**：将关键工作负载隔离到独立的AWS账户和VPC
- **多账户支持**：网络账户、DR生产账户等
- **多VPC隔离**：暂存子网、恢复子网等都实现网络隔离，提升安全性

### 01:04:00 - 完整DR解决方案架构
- **复制代理**：在每台源服务器上安装AWS DRS代理
- **加密压缩传输**：块级数据加密压缩后传输到暂存子网
- **Direct Connect集成**：通过网络服务实现连接
- **恢复子网特点**：无7x24运行的工作负载，仅在DR演练或故障转移时使用

### 01:06:00 - 三阶段恢复策略
- **第一阶段**：恢复主Active Directory和第三方防火墙实例(使用预配置AMI)
- **第二阶段**：恢复和配置所有数据库服务器
- **第三阶段**：恢复和配置所有应用服务器
- **顺序原因**：确保数据稳定可用后应用才能连接

### 01:08:00 - 实施方法：阶段化方法
- **结构化实施**：Zidus采用结构化分阶段方法
- **第一阶段**：建立安全弹性的AWS云基础
- **按应用和位置复制**：逐步将数据复制到云端
- **测试验证**：完成复制后进行广泛配置测试

### 01:10:00 - 实施方法：超级关怀阶段
- **第二阶段完成**：所有服务器复制和配置测试完成
- **超级关怀定义**：临时阶段，提供密集支持解决意外问题
- **问题类型**：应用延迟、复制积压、恢复配置问题
- **团队协作**：AWS支持团队和合作伙伴团队共同解决问题

### 01:12:00 - 实施方法：监控和验证
- **第三阶段**：集中监控和自动化告警
- **关键指标**：复制延迟、复制积压、网络状态监控
- **RPO保障**：确保实现最小RPO
- **GXP验证**：按照GXP指南验证解决方案，确保数据完整性和可用性

### 01:14:00 - 实施方法：DR演练
- **最终阶段**：完整的DR演练
- **故障转移测试**：完整的故障转移和故障回切测试
- **实施周期**：6个月内完成企业级复杂解决方案实施和验证
- **团队成就**：Zidus IT和业务团队的杰出协作成果

### 01:16:00 - 关键经验教训一：云基础优先
- **优先级**：Zidus优先建立安全弹性的云基础
- **重要性原因**：确保DR环境稳定性，实现最小RPO
- **可扩展性**：支持基于网络和安全架构在隔离环境中启动新工作负载
- **长期价值**：为未来扩展奠定坚实基础

### 01:18:00 - 关键经验教训二：复制延迟问题
- **问题发现**：三台数据库服务器出现持续复制延迟
- **异常现象**：仅这三台服务器在高峰期出现问题，其他10多台关键数据库服务器正常
- **团队协作**：Zidus团队、AWS支持团队和合作伙伴团队共同深入诊断
- **根本原因**：这三台服务器存在极高的变更率

### 01:20:00 - 关键经验教训二：解决方案
- **分阶段解决**：配置防火墙QoS策略
- **专用复制服务器**：为这些服务器配置专用复制服务器
- **性能优化**：增加数据库服务器的IOPS和吞吐量
- **块级复制特性**：复制相同磁盘时需考虑变更率影响

### 01:22:00 - 会议总结
- **解决方案价值**：AWS DRS为企业级灾难恢复提供经济高效的解决方案
- **实际案例验证**：Zidus成功案例展示了在复杂制药环境中的可行性
- **合规性支持**：满足严格的GXP法规要求
- **最佳实践**：强调云基础、网络架构和持续测试的重要性