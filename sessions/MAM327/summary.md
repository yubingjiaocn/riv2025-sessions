# AWS re:Invent 2025 会议总结：事件驱动架构中的 AI 代理集成

## 会议概述

本次会议由 Maren（应用产品负责人）和 Jeff（资深软件开发工程师）共同主持，他们来自虚构的 Unicorn Gaming Shop 公司。会议的核心主题是如何在现有的事件驱动架构中集成 AI 代理（Agents）来应对业务快速增长带来的挑战。

Maren 为公司签订了 10 个新合作协议，预计将带来 50 倍的用户增长。面对这一巨大挑战，Jeff 需要在有限的团队、时间和预算下，利用 Amazon EventBridge 和 Amazon Bedrock Agent Core 来实现系统的智能化扩展。会议详细展示了两个核心应用场景：一是通过 AI 代理为客户提供游戏推荐服务，实现客户服务的自动化和个性化；二是利用 AI 代理进行站点可靠性工程（SRE），自动处理系统告警和故障排查，减轻工程师负担。

整个解决方案基于无服务器架构，采用异步事件处理模式，通过 EventBridge 触发 AI 代理和 AI 代理触发 EventBridge 事件这两种模式，实现了系统的高度自动化和智能化。会议包含了长达 22 分钟的实际演示，展示了从本地开发到 AWS 部署的完整流程，以及如何通过 Agent Core 的内存管理、身份控制和可观测性功能来构建生产级的 AI 代理系统。

## 详细时间线

### 开场介绍（0:00-5:30）

0:00 - 会议开始，主持人感谢参会者

0:15 - 介绍会议主题：在事件驱动架构中集成 AI 和代理以满足业务需求

0:45 - Maren 自我介绍：应用产品负责人，拥有 20 多年经验，负责定义新功能以提升客户满意度

1:20 - Maren 阐述目标：自动化客户交互、帮助后端工程师快速解决问题、降低故障响应时间

2:00 - Jeff 自我介绍：资深软件开发工程师，一直在使用事件驱动架构和 EventBridge 现代化应用

2:30 - Maren 宣布重大消息：签订了 10 个新合作协议，将带来 50 倍的用户增长

3:15 - Jeff 表达担忧：团队负载过重、运营可见性不足、AI 经验有限、资源受限

### 技术架构讲解（5:30-15:00）

5:30 - Jeff 介绍 EventBridge 的三个核心组件：事件生产者、事件总线（默认/自定义/SaaS）、规则

6:45 - 讲解 Strangler Fig 模式：在遗留系统旁边构建新功能，使用 EventBridge 处理业务事务

8:00 - 分析现有系统的局限性：虽然是无服务器和异步的，但只能扩展到客户助理层面，响应速度慢

9:20 - 介绍 Amazon Bedrock：提供 API 访问 AWS 第一方和第三方 AI 模型，支持模型切换和微调

10:30 - 展示研究助手聊天功能：集成 Bedrock 后速度有所提升，但仍然只能扩展到客户助理层面

11:45 - 引入 AI 代理概念：能够理解请求、做出决策并自主执行任务的自治系统

12:30 - 讲解三种代理类型：
- 部门级代理：处理简单任务，数据范围较小
- 组织级代理：跨系统边界工作，需要更强的安全控制
- 外部代理：与第三方 API 交互，需要严格的访问控制

13:50 - 介绍 Amazon Bedrock Agent Core 的三大功能：
- 工具和内存管理（支持长期记忆）
- 运行时环境和身份管理
- 可观测性和审计能力

### 集成模式讲解（15:00-22:00）

15:00 - 介绍第一种模式：EventBridge 触发代理
- 事件从多种来源（S3、Lambda、Web 应用）进入 EventBridge
- EventBridge 调用 Bedrock 代理执行研究和推荐任务

16:30 - 介绍第二种模式：代理触发 EventBridge 事件
- 代理执行研究和决策后生成事件
- 事件发布到 EventBridge 实现扇出模式

18:00 - 应用场景一：AI 驱动的游戏推荐
- 代理首先分析客户情绪（积极/中性/消极）
- 根据情绪决定是自动处理还是转接人工客服
- 利用 Agent Core 的内存功能实现上下文连续对话
- 节省时间和成本，避免重复分析

20:30 - 应用场景二：站点可靠性工程（SRE）
- CloudWatch 日志随着 50 倍增长呈指数级增加
- CloudWatch 告警触发 SRE 代理
- 代理理解告警、分析根本原因、判断严重程度
- 低/中严重度问题由代理自动修复（重新部署代码、关闭故障服务器）
- 高严重度问题通过 SNS 通知工程师

### 实际演示（22:00-44:00）

22:00 - 开始演示环节，说明使用录制视频以确保稳定性

22:30 - 演示分为两部分：客户代理游戏推荐和 SRE 自动化

23:00 - 展示项目文件夹结构，包含指令文件和配置文件

23:30 - 激活 Python 环境，安装依赖包

24:00 - 启动应用程序，加载指令文件（包含提示工程和情绪分析规则）

25:00 - 部署 Amplify 前端（基于 React）

25:45 - 展示前端界面，介绍 AI 助手 "Gus"

26:30 - 演示客户交互：询问 "Hi Gus, how are you?"

27:00 - 输入游戏偏好信息（故意包含拼写错误以测试 AI 理解能力）

28:00 - Gus 首次查询返回 0 条记录

28:30 - Gus 自动重新迭代，调整查询关键词（添加 "action"、"adventure"），找到 15 条记录

29:00 - Gus 再次优化查询，缩小结果范围到 5 条

29:45 - 输入负面情绪："I don't like Resident Evil, I scare easily"（包含拼写错误）

30:30 - 展示情绪分析结果：第一次查询为中性（无情绪），第二次查询识别为负面情绪

31:30 - 展示代码结构：指令文件包含提示工程和情绪监控规则

33:00 - 展示 Python 应用代码：定义多个工具（数据库查询工具、SQL 生成工具、情绪分析工具）

34:30 - 强调代码中没有硬编码的 SQL 查询，完全由代理动态生成

35:30 - 展示会话 ID、用户 ID 等配置，说明需要 AWS 凭证访问后端

36:30 - 展示情绪分析定义和 EventBridge 输出配置

38:00 - 第一部分演示总结：展示了如何通过简短代码实现客户交互自动化

### SRE 自动化演示（38:00-结束）

38:00 - 开始第二部分演示：SRE 自动化，组件更多、更复杂

38:45 - 展示架构流程：CloudWatch 告警 → EventBridge → Agent Core → LLM 分析 → 自动修复或人工升级

39:30 - 展示 CloudWatch 告警配置：每 1 个数据点触发告警（演示用，非生产配置）

40:00 - 展示 EventBridge 规则：监听告警状态变化，目标为 Agent Core

40:45 - 说明告警不仅发送通知，还指示代理回溯 CloudWatch 日志收集额外信息

41:30 - 展示 Bedrock Agent Runtime 配置，提及其他选项（内置工具、API 网关、内存、身份管理）

42:30 - 强调可观测性的重要性：监控调用次数、优化资源和成本

43:00 - 展示告警触发流程：假 Lambda → EventBridge → Agent Core → 分析情绪 → 决策行动

44:00 - 展示代理版本管理：当前版本 7，多次运行后将升级到版本 9

45:00 - 展示代理调用代码（Python），非常简洁

45:45 - 展示代理元数据：版本、端点、标签、创建时间、状态

46:30 - 重点展示可观测性仪表板：
- 可查看端点数量、会话数、追踪、错误率
- 可调整时间范围（演示中设置为 4 周）
- 显示会话调用、调用次数等详细指标

48:00 - 展示如何在 Bedrock 中启用模型调用日志记录

48:45 - 进入 Amazon Bedrock 设置页面

49:30 - 展示模型调用日志配置：
- 需要手动开启
- 可选择记录类型（文本、图像、嵌入、视频）
- 可选择存储位置（S3、CloudWatch Logs）
- 演示中仅使用 CloudWatch Logs

50:30 - 进入 CloudFormation 查看已部署资源

51:30 - 展示部署的资源：Lambda、EventBridge、Agent Core

52:00 - 说明架构流程：EventBridge 调用 Lambda，Lambda 与 Agent Core 通信

52:30 - 展示 Lambda 错误生成器（用于演示的假错误触发器）

53:00 - 演示继续进行中...

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


注： 由于字幕在此处截断，完整的演示可能还包含实际触发告警、查看代理响应和自动修复过程的内容。整个会议强调了事件驱动架构与 AI 代理的深度集成，展示了如何通过 AWS 托管服务构建可扩展、智能化的现代应用系统。