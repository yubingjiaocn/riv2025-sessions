1
00:00:00,210 --> 00:00:01,530
- [Pat] Welcome.

2
00:00:01,530 --> 00:00:05,850
We are here today to
talk about Nova 2.0 Lite.

3
00:00:05,850 --> 00:00:07,526
How many folks here have tried out

4
00:00:07,526 --> 00:00:11,853
Nova 2.0 Lite since its launch
less than seven hours ago?

5
00:00:13,140 --> 00:00:13,973
Okay.

6
00:00:13,973 --> 00:00:15,987
- [Jean] You didn't leave the
keynote and do it immediately?

7
00:00:15,987 --> 00:00:16,950
(Pat and Jean laughing)

8
00:00:16,950 --> 00:00:20,250
- [Pat] This might be the first
workshop where we do that.

9
00:00:20,250 --> 00:00:21,083
I'm Pat.

10
00:00:21,083 --> 00:00:22,110
I'm a solutions architect

11
00:00:22,110 --> 00:00:26,820
with the WWSO Bedrock go-to market team,

12
00:00:26,820 --> 00:00:30,810
and I've been working for the
last year with Jean on Nova.

13
00:00:30,810 --> 00:00:31,830
- [Jean] And my name is Jean.

14
00:00:31,830 --> 00:00:34,140
So I'm on the Amazon AGI team.

15
00:00:34,140 --> 00:00:36,780
I am a senior solutions architect.

16
00:00:36,780 --> 00:00:39,930
So happy to be here with you guys today.

17
00:00:39,930 --> 00:00:41,700
- [Pat] Yeah, and I'm
glad the badges work too.

18
00:00:41,700 --> 00:00:43,503
So congrats on getting in.

19
00:00:44,640 --> 00:00:46,740
We're gonna cover a lot today

20
00:00:46,740 --> 00:00:48,960
and we have a rough agenda,

21
00:00:48,960 --> 00:00:51,060
but if we're doing this the right way,

22
00:00:51,060 --> 00:00:53,100
we're gonna be doing a lot of coding.

23
00:00:53,100 --> 00:00:55,260
And unfortunately, some
of it will be mostly

24
00:00:55,260 --> 00:00:57,570
code review given the difficulties here,

25
00:00:57,570 --> 00:00:59,820
but we're gonna go through a lot.

26
00:00:59,820 --> 00:01:02,130
When Jean and I were first planning this,

27
00:01:02,130 --> 00:01:06,450
we had a very tangible bite-size idea

28
00:01:06,450 --> 00:01:10,380
and we quickly realized
this is a huge problem.

29
00:01:10,380 --> 00:01:12,090
So to solve this at scale,

30
00:01:12,090 --> 00:01:14,910
to build a fully autonomous coding agent

31
00:01:14,910 --> 00:01:16,440
has a lot of nuts and bolts.

32
00:01:16,440 --> 00:01:17,700
We're gonna talk about all of that,

33
00:01:17,700 --> 00:01:19,710
but I want to set the
right expectations here

34
00:01:19,710 --> 00:01:22,590
that we may not get through all of it,

35
00:01:22,590 --> 00:01:23,820
but what we want you to see

36
00:01:23,820 --> 00:01:26,640
is how you can prompt Nova 2.0 Lite,

37
00:01:26,640 --> 00:01:28,410
the major considerations to make

38
00:01:28,410 --> 00:01:30,870
if you're gonna do this at scale,

39
00:01:30,870 --> 00:01:35,280
and any of the stuff Jean's going through

40
00:01:35,280 --> 00:01:37,740
or I'm going through, make
sure you ask questions.

41
00:01:37,740 --> 00:01:39,480
We want everyone engaged.

42
00:01:39,480 --> 00:01:40,740
I know it's a large audience,

43
00:01:40,740 --> 00:01:43,080
but that's always the best way to do this.

44
00:01:43,080 --> 00:01:43,913
- [Jean] Yeah. A question.

45
00:01:43,913 --> 00:01:44,746
Show of hands,

46
00:01:44,746 --> 00:01:47,403
how many people have actually
done a code talk before?

47
00:01:48,402 --> 00:01:50,940
Are we familiar with the format?

48
00:01:50,940 --> 00:01:53,880
The goal for this is
we're gonna be in the code

49
00:01:53,880 --> 00:01:55,890
and we're gonna be very interactive.

50
00:01:55,890 --> 00:01:56,820
We wanna be talking.

51
00:01:56,820 --> 00:02:01,410
We wanna hear the questions
that you have as you have them.

52
00:02:01,410 --> 00:02:03,930
This is not 10 minutes at the end Q&A.

53
00:02:03,930 --> 00:02:06,270
This is a conversation

54
00:02:06,270 --> 00:02:07,920
we wanna have with everybody.

55
00:02:07,920 --> 00:02:08,940
So it might be a little bit different

56
00:02:08,940 --> 00:02:10,440
than all the breakout
sessions you've gone today.

57
00:02:10,440 --> 00:02:11,520
It's really, really scrappy.

58
00:02:11,520 --> 00:02:12,353
We're gonna be in the code

59
00:02:12,353 --> 00:02:14,390
and we're gonna be
talking about the model.

60
00:02:15,270 --> 00:02:16,103
- [Pat] Cool.

61
00:02:16,103 --> 00:02:18,660
And I have Leon and
Caesar who I've volun-told

62
00:02:18,660 --> 00:02:21,180
I can call on, which is great.

63
00:02:21,180 --> 00:02:22,980
Does anyone else wanna be called on?

64
00:02:24,090 --> 00:02:25,110
I figured that was the answer.

65
00:02:25,110 --> 00:02:27,300
- [Jean] We'll get you talking
in a second. Don't worry.

66
00:02:27,300 --> 00:02:28,953
- [Pat] So let's talk about Nova,

67
00:02:29,910 --> 00:02:31,650
Nova 2.0 Lite.

68
00:02:31,650 --> 00:02:34,110
So Nova 2.0 Lite was announced today.

69
00:02:34,110 --> 00:02:37,830
It's a large context
window reasoning model.

70
00:02:37,830 --> 00:02:41,070
It comes with built-in
support for our system tools.

71
00:02:41,070 --> 00:02:43,200
You'll get to see some
of that at work here.

72
00:02:43,200 --> 00:02:46,260
It's our next generation of Lite.

73
00:02:46,260 --> 00:02:49,260
We've also announced Pro 2.0 and Omni

74
00:02:49,260 --> 00:02:51,120
that are on the horizon and preview.

75
00:02:51,120 --> 00:02:54,405
But today we're using
Nova 2.0 Lite exclusively

76
00:02:54,405 --> 00:02:57,240
and we're gonna walk you
through how to use reasoning,

77
00:02:57,240 --> 00:03:00,090
how to set budgets, and how
that impacts code generation.

78
00:03:01,470 --> 00:03:02,764
Anything you wanna add there?

79
00:03:02,764 --> 00:03:03,764
- [Jean] No.

80
00:03:06,750 --> 00:03:09,870
- [Pat] So where in Amazon
Nova 2.0 Lite fits in,

81
00:03:09,870 --> 00:03:12,480
like I said, it's got a
1 million context window.

82
00:03:12,480 --> 00:03:15,780
It's actually got 64,000 token output.

83
00:03:15,780 --> 00:03:17,790
So if you are using reasoning,

84
00:03:17,790 --> 00:03:19,236
you will eat through some of that.

85
00:03:19,236 --> 00:03:23,820
But the output of the model,
we've seen perform really well.

86
00:03:23,820 --> 00:03:25,893
Oh sorry, I'm on the wrong screen here.

87
00:03:28,440 --> 00:03:32,370
And it supports all the languages
we've supported thus far.

88
00:03:32,370 --> 00:03:35,220
We're seeing it do really
well at translation tasks.

89
00:03:35,220 --> 00:03:36,450
You can use it to fine tune.

90
00:03:36,450 --> 00:03:39,060
We'll talk about why
you might wanna do that

91
00:03:39,060 --> 00:03:41,073
for code generation use cases.

92
00:03:42,090 --> 00:03:45,540
And yeah, we'll go ahead
and get started in the code.

93
00:03:45,540 --> 00:03:48,960
Jean's gonna get started on
building out this coding agent.

94
00:03:48,960 --> 00:03:52,020
Feel free to follow along in
your notebooks if you want.

95
00:03:52,020 --> 00:03:53,340
- [Jean] Awesome. Yeah, you
wanna switch me over to...

96
00:03:53,340 --> 00:03:54,930
- [Pat] Yeah, okay, okay.

97
00:03:54,930 --> 00:03:55,763
- [Jean] Thanks.

98
00:03:55,763 --> 00:03:57,180
- [Pat] We'll walk through
some of that today, yeah.

99
00:03:57,180 --> 00:03:58,710
- [Jean] Another question.

100
00:03:58,710 --> 00:04:00,930
This can just be a show of hands.

101
00:04:00,930 --> 00:04:03,213
Is everyone familiar with Strands?

102
00:04:04,980 --> 00:04:06,270
Okay, some people are.

103
00:04:06,270 --> 00:04:08,640
I'll give a little bit of
an overview, but I won't...

104
00:04:08,640 --> 00:04:10,440
I'll make sure to cover
what's important here.

105
00:04:10,440 --> 00:04:11,883
What about MCP?

106
00:04:12,840 --> 00:04:14,220
Model context protocol?

107
00:04:14,220 --> 00:04:15,180
Nice.

108
00:04:15,180 --> 00:04:16,230
That's a good amount of the group.

109
00:04:16,230 --> 00:04:17,160
Everybody's...

110
00:04:17,160 --> 00:04:20,403
Has anyone built an agent
using an MCP server before?

111
00:04:21,660 --> 00:04:22,650
Okay, pretty good.

112
00:04:22,650 --> 00:04:25,920
So we're gonna be using MCP today

113
00:04:25,920 --> 00:04:27,810
as well to talk through this.

114
00:04:27,810 --> 00:04:31,350
So to set the scene for where
we're kind of gonna start

115
00:04:31,350 --> 00:04:32,703
and how we're gonna build,

116
00:04:34,140 --> 00:04:37,710
we are gonna have a GitHub issue

117
00:04:37,710 --> 00:04:38,670
that we're working with.

118
00:04:38,670 --> 00:04:42,480
The problem, it's a little
bit meta, but we're...

119
00:04:42,480 --> 00:04:43,353
Yes, question.

120
00:04:44,460 --> 00:04:46,710
Yes, I absolutely can.

121
00:04:46,710 --> 00:04:48,940
Okay, so I am in

122
00:04:50,760 --> 00:04:55,020
a repository, so LangChain AWS.

123
00:04:55,020 --> 00:04:58,380
So LangChain, we have our own dedicated

124
00:04:58,380 --> 00:05:02,250
kind of sub-repository
for the AWS integration.

125
00:05:02,250 --> 00:05:03,690
New model was released.

126
00:05:03,690 --> 00:05:05,760
We wanna make sure we're integrated well

127
00:05:05,760 --> 00:05:07,530
and that we support all the
new features of the model.

128
00:05:07,530 --> 00:05:09,690
This is kind of our meta problem

129
00:05:09,690 --> 00:05:11,700
we're gonna talk through today.

130
00:05:11,700 --> 00:05:15,210
So starting with an actual
kind of GitHub issue

131
00:05:15,210 --> 00:05:18,300
in using a real repository, right?

132
00:05:18,300 --> 00:05:20,670
We're not one-shotting
an entire application.

133
00:05:20,670 --> 00:05:22,680
We're in a real repository with real code

134
00:05:22,680 --> 00:05:24,990
that serves a real business function.

135
00:05:24,990 --> 00:05:28,500
And we're gonna start kind of iterating on

136
00:05:28,500 --> 00:05:30,150
what it looks like to
actually interact with that.

137
00:05:30,150 --> 00:05:33,030
How do we get the model
to understand the context

138
00:05:33,030 --> 00:05:34,740
of the space it's working in?

139
00:05:34,740 --> 00:05:38,160
How do we get it to solve real
business problems in a space

140
00:05:38,160 --> 00:05:40,260
that has been around for a while?

141
00:05:40,260 --> 00:05:41,943
It's a real code app.

142
00:05:43,290 --> 00:05:45,150
So I'm gonna be using Strands,

143
00:05:45,150 --> 00:05:49,020
the kind of high level if
you're not as familiar,

144
00:05:49,020 --> 00:05:49,920
it's kind of like LangChain,

145
00:05:49,920 --> 00:05:52,860
except it's our version and
has really great integration

146
00:05:52,860 --> 00:05:54,900
with AWS services and tools.

147
00:05:54,900 --> 00:05:56,027
So it means that our models

148
00:05:56,027 --> 00:05:59,790
and kind of other things that
we've been building on AWS,

149
00:05:59,790 --> 00:06:01,800
they all really play very nicely together.

150
00:06:01,800 --> 00:06:05,790
And so I'm gonna be using that today to

151
00:06:05,790 --> 00:06:08,823
supercharge really get started
with building this agent.

152
00:06:09,960 --> 00:06:11,640
The nice thing is you see with like a lot

153
00:06:11,640 --> 00:06:15,150
of these agentic kind of
frameworks that you can use,

154
00:06:15,150 --> 00:06:18,480
they do a lot of the code pieces for you.

155
00:06:18,480 --> 00:06:21,660
So I can get an agent going
in a couple lines of code

156
00:06:21,660 --> 00:06:22,740
and what I wanna start with

157
00:06:22,740 --> 00:06:25,830
is just what happens

158
00:06:25,830 --> 00:06:29,250
if I prompt the model, right?

159
00:06:29,250 --> 00:06:31,620
With look at this issue

160
00:06:31,620 --> 00:06:35,550
and comment on the issue with
your implementation plan.

161
00:06:35,550 --> 00:06:39,840
This is extremely vague. I'm
not giving any context at all.

162
00:06:39,840 --> 00:06:43,593
All it has is the GitHub MCP client.

163
00:06:44,490 --> 00:06:48,070
Now we're gonna clear this out

164
00:06:49,573 --> 00:06:51,300
and I'm going to...

165
00:06:51,300 --> 00:06:54,090
Spoiler, I will be going
to a different script

166
00:06:54,090 --> 00:06:55,743
to show you a little bit later,

167
00:06:57,420 --> 00:07:00,720
but we're gonna run this and
we're gonna see what happens.

168
00:07:00,720 --> 00:07:03,550
And I have some boiler
plate code that should be

169
00:07:06,570 --> 00:07:08,220
making this a little bit
nicer and I'm gonna zoom in

170
00:07:08,220 --> 00:07:09,570
'cause I'm sure you can't see it.

171
00:07:09,570 --> 00:07:11,920
It's not as pretty when
I do that. I apologize.

172
00:07:13,290 --> 00:07:14,610
But what's happening here is the model

173
00:07:14,610 --> 00:07:16,020
is starting to call tools.

174
00:07:16,020 --> 00:07:19,203
So the GitHub MCP client,

175
00:07:20,970 --> 00:07:23,580
if I go

176
00:07:23,580 --> 00:07:26,943
and just open up my Python,

177
00:07:27,870 --> 00:07:30,450
I wanna make sure you can see it.

178
00:07:30,450 --> 00:07:31,930
I'm going to

179
00:07:35,390 --> 00:07:38,610
import the client

180
00:07:38,610 --> 00:07:42,270
and we're gonna initialize it
just in a Python execution.

181
00:07:42,270 --> 00:07:44,110
And the goal here

182
00:07:45,030 --> 00:07:48,210
is to show you what the model is seeing

183
00:07:48,210 --> 00:07:49,653
behind the scenes.

184
00:07:51,120 --> 00:07:56,120
So we put a one line prompt

185
00:07:56,820 --> 00:07:59,490
and I initialized a GitHub MCP client.

186
00:07:59,490 --> 00:08:00,323
So GitHub, right?

187
00:08:00,323 --> 00:08:01,290
They provide a couple ways

188
00:08:01,290 --> 00:08:03,240
that you can use their MCP server.

189
00:08:03,240 --> 00:08:05,980
We're just using their remote URL one

190
00:08:06,960 --> 00:08:09,819
and we are-

191
00:08:09,819 --> 00:08:11,550
- [Audience Member 1] Could
you take one 15 seconds

192
00:08:11,550 --> 00:08:14,247
to explain what the MCP is?

193
00:08:14,247 --> 00:08:16,530
I'm still (indistinct)

194
00:08:16,530 --> 00:08:18,150
- [Jean] Yes.
- [Pat] Absolutely. Yeah.

195
00:08:18,150 --> 00:08:22,020
- [Jean] Yeah, so MCP stands
for model context protocol.

196
00:08:22,020 --> 00:08:26,760
It provides a uniform of
standardized way to interact

197
00:08:26,760 --> 00:08:30,690
with arbitrary servers
and things like that

198
00:08:30,690 --> 00:08:33,930
and to allow agents to really
build with them very easily.

199
00:08:33,930 --> 00:08:35,250
So instead of you having to go

200
00:08:35,250 --> 00:08:36,900
and implement every single API

201
00:08:36,900 --> 00:08:38,640
that's gonna interact with GitHub,

202
00:08:38,640 --> 00:08:40,860
you can use their GitHub MCP server

203
00:08:40,860 --> 00:08:43,290
and now I can go get issues,

204
00:08:43,290 --> 00:08:46,380
I can make changes to files,
I can create a branch.

205
00:08:46,380 --> 00:08:48,180
I don't have to implement
any of that myself.

206
00:08:48,180 --> 00:08:51,130
They've kind of created this
standardized interface for me.

207
00:08:53,273 --> 00:08:54,106
And-

208
00:08:54,106 --> 00:08:56,670
- [Pat] And GitHub released their own MCP.

209
00:08:56,670 --> 00:08:57,933
Many companies are.

210
00:08:59,280 --> 00:09:00,450
We're gonna see how you can use it,

211
00:09:00,450 --> 00:09:01,830
how you cannot use it,

212
00:09:01,830 --> 00:09:04,650
but it's gonna be one of the
first tools you're gonna want

213
00:09:04,650 --> 00:09:07,080
to consider when you're
rolling out a coding agent

214
00:09:07,080 --> 00:09:07,913
of any sort.

215
00:09:10,650 --> 00:09:13,560
AWS also has MCP servers for like

216
00:09:13,560 --> 00:09:16,170
all the announcements today
will go into our MCP server.

217
00:09:16,170 --> 00:09:18,090
So if you're building agents that need

218
00:09:18,090 --> 00:09:19,350
to use the latest and greatest,

219
00:09:19,350 --> 00:09:22,000
you can make a tool to go
look that stuff up for you.

220
00:09:26,070 --> 00:09:27,240
- [Jean] Okay.

221
00:09:27,240 --> 00:09:28,680
And you watch...

222
00:09:28,680 --> 00:09:31,140
Okay, so basically if anyone
was really watching me

223
00:09:31,140 --> 00:09:33,120
stumble for a second,

224
00:09:33,120 --> 00:09:36,330
when I am interacting
with a GitHub MCP client,

225
00:09:36,330 --> 00:09:38,250
it took me a couple lines of code

226
00:09:38,250 --> 00:09:42,270
and this is all of the tools
that become available to me.

227
00:09:42,270 --> 00:09:45,510
I can get a comment, add a
comment to a pending review.

228
00:09:45,510 --> 00:09:46,890
I can get team members.

229
00:09:46,890 --> 00:09:48,750
I can get a commit.

230
00:09:48,750 --> 00:09:50,820
I can assign a co-pilot to an issue.

231
00:09:50,820 --> 00:09:52,410
Maybe we don't even wanna
do this code talk today

232
00:09:52,410 --> 00:09:53,243
and we'll just say,

233
00:09:53,243 --> 00:09:55,350
"GitHub Copilot, go do
this for me," right?

234
00:09:55,350 --> 00:09:57,540
And so you have these standardized ways

235
00:09:57,540 --> 00:10:02,447
that you can start
interacting with GitHub,

236
00:10:03,300 --> 00:10:05,460
but what's kind of tricky
here is this is really nice

237
00:10:05,460 --> 00:10:07,830
and this is really easy
for me to get started,

238
00:10:07,830 --> 00:10:09,600
but I did a couple lines of code

239
00:10:09,600 --> 00:10:12,810
and now I'm passing my
model 40 different tools

240
00:10:12,810 --> 00:10:14,040
it has to choose from.

241
00:10:14,040 --> 00:10:18,420
That is a lot of context
the model immediately has

242
00:10:18,420 --> 00:10:21,510
and has to decide what tool to use.

243
00:10:21,510 --> 00:10:25,860
And there's a lot of kind of
things that come into play here

244
00:10:25,860 --> 00:10:28,560
where it's important to be intentional.

245
00:10:28,560 --> 00:10:29,790
It's a very nice thing,

246
00:10:29,790 --> 00:10:34,790
but it's easy to get things

247
00:10:34,800 --> 00:10:37,500
a little out of hand just to begin with.

248
00:10:37,500 --> 00:10:39,540
- [Pat] 'Cause remember
the model gets passed

249
00:10:39,540 --> 00:10:41,160
like a giant tool config, right?

250
00:10:41,160 --> 00:10:43,440
And the model has to
decide of these tools,

251
00:10:43,440 --> 00:10:45,510
which is the most relevant
for what I'm trying to do.

252
00:10:45,510 --> 00:10:49,110
So if you give it five
very well selected tools,

253
00:10:49,110 --> 00:10:50,280
it's gonna have a better chance.

254
00:10:50,280 --> 00:10:52,350
You're not gonna eat
as much context window.

255
00:10:52,350 --> 00:10:54,420
If you give it 20 or 30,

256
00:10:54,420 --> 00:10:57,120
you're really making a big
bet on the model's ability

257
00:10:57,120 --> 00:11:00,000
to traverse long context
and pick the right one.

258
00:11:00,000 --> 00:11:02,880
Nova 2.0 Lite does it
wrong, just gonna say.

259
00:11:02,880 --> 00:11:04,440
But what she's trying to say here

260
00:11:04,440 --> 00:11:06,690
is that's a consideration to make.

261
00:11:06,690 --> 00:11:08,520
- [Jean] Yeah, and I think
you'll see a lot of guidance

262
00:11:08,520 --> 00:11:10,440
for all model families,

263
00:11:10,440 --> 00:11:12,180
and once you get above 20 tools,

264
00:11:12,180 --> 00:11:14,910
they usually recommend breaking
things into sub-agents,

265
00:11:14,910 --> 00:11:16,470
exploring multi-agent architectures.

266
00:11:16,470 --> 00:11:17,303
It's just...

267
00:11:17,303 --> 00:11:19,590
It's a kind of a really
important consideration

268
00:11:19,590 --> 00:11:20,880
that you wanna make.

269
00:11:20,880 --> 00:11:23,040
And what you definitely need,
if you're gonna do that,

270
00:11:23,040 --> 00:11:25,170
is a good system prompt to
give some guidance, right?

271
00:11:25,170 --> 00:11:26,670
I didn't have any system prompt.

272
00:11:26,670 --> 00:11:28,770
I just said, "Go analyze the issue,"

273
00:11:28,770 --> 00:11:32,700
and I am not gonna lie to
you, it did okay, right?

274
00:11:32,700 --> 00:11:36,840
It read the issue, it added a comment.

275
00:11:36,840 --> 00:11:39,490
It made an implementation plan

276
00:11:40,980 --> 00:11:41,820
and I'm gonna even...

277
00:11:41,820 --> 00:11:46,230
I would like to pull up the issue,

278
00:11:46,230 --> 00:11:47,640
make sure my internet,

279
00:11:47,640 --> 00:11:50,010
let's see what it said, right?

280
00:11:50,010 --> 00:11:51,360
I'll implement support for this.

281
00:11:51,360 --> 00:11:55,020
So I'm gonna make a couple steps.

282
00:11:55,020 --> 00:11:57,420
This is all pretty reasonable, right?

283
00:11:57,420 --> 00:11:58,440
With no instructions,

284
00:11:58,440 --> 00:12:00,480
just providing the context of the tools.

285
00:12:00,480 --> 00:12:02,970
It did something that
I think is pretty fair.

286
00:12:02,970 --> 00:12:06,783
What might stand out to you
is, this is all very vague.

287
00:12:07,950 --> 00:12:10,650
It didn't actually read
any of the files, right?

288
00:12:10,650 --> 00:12:12,750
It didn't actually go and
start exploring the repository.

289
00:12:12,750 --> 00:12:15,840
It read the issue, made
a comment, decent plan,

290
00:12:15,840 --> 00:12:17,880
but it's not what I wanted to do, right?

291
00:12:17,880 --> 00:12:18,840
If I'm gonna build a real agent,

292
00:12:18,840 --> 00:12:20,130
I want it to look at the files.

293
00:12:20,130 --> 00:12:23,223
I want it to actually be
interacting with what's real.

294
00:12:24,060 --> 00:12:27,753
So what we can do next,

295
00:12:28,710 --> 00:12:32,490
so if I go back to my Strands agent,

296
00:12:32,490 --> 00:12:33,810
I wanna use this new template

297
00:12:33,810 --> 00:12:36,360
and I'm gonna take a
second here to talk through

298
00:12:36,360 --> 00:12:39,960
just some best practices with Nova 2.0,

299
00:12:39,960 --> 00:12:42,690
and I think a lot of kind
of complex agent prompts

300
00:12:42,690 --> 00:12:44,760
that you'll wanna build overall.

301
00:12:44,760 --> 00:12:45,693
And I'll zoom in.

302
00:12:46,980 --> 00:12:49,470
You need more than just a simple prompt.

303
00:12:49,470 --> 00:12:52,380
And the first line might
look pretty familiar.

304
00:12:52,380 --> 00:12:53,610
We're providing a role.

305
00:12:53,610 --> 00:12:57,300
You do this for like
every agentic application

306
00:12:57,300 --> 00:12:59,643
or any LLM application,

307
00:13:00,570 --> 00:13:02,310
but we need to take it a step further.

308
00:13:02,310 --> 00:13:05,490
So a couple things that you
know we have trained our models

309
00:13:05,490 --> 00:13:09,660
to be good at are these specific
sections that you can use

310
00:13:09,660 --> 00:13:11,250
to draw attention to specific pieces

311
00:13:11,250 --> 00:13:13,080
and workflows and business processes.

312
00:13:13,080 --> 00:13:15,180
So the first one is core mandates.

313
00:13:15,180 --> 00:13:17,070
This is the important business rules

314
00:13:17,070 --> 00:13:19,920
that you need the model to follow.

315
00:13:19,920 --> 00:13:21,750
So one, right?

316
00:13:21,750 --> 00:13:23,130
I don't want you to
update the original issue,

317
00:13:23,130 --> 00:13:26,193
don't edit it, just add a new comment.

318
00:13:29,190 --> 00:13:32,340
Another one is the actual
workflow you want the model

319
00:13:32,340 --> 00:13:33,750
to follow, right?

320
00:13:33,750 --> 00:13:36,180
I want you to get the issue,
but I want you to explore it.

321
00:13:36,180 --> 00:13:40,380
I want you to go and look at the files.

322
00:13:40,380 --> 00:13:43,380
Nova does really well when
we pass the tool names

323
00:13:43,380 --> 00:13:45,180
that we want it to use.

324
00:13:45,180 --> 00:13:46,470
It really draws attention, right?

325
00:13:46,470 --> 00:13:50,193
It links to the tool
configuration it's seeing,

326
00:13:51,090 --> 00:13:55,260
and then I'm having it return
the plan in a specific format,

327
00:13:55,260 --> 00:13:56,790
I have in the output formatting.

328
00:13:56,790 --> 00:13:57,960
Output formatting does really well

329
00:13:57,960 --> 00:14:00,360
when it's at the end of the prompt.

330
00:14:00,360 --> 00:14:01,950
The next section is tool usage.

331
00:14:01,950 --> 00:14:04,290
So you might wonder,
okay, we're passing it,

332
00:14:04,290 --> 00:14:07,590
the tool configuration
is gonna go to the model,

333
00:14:07,590 --> 00:14:10,500
what else would we really have to specify?

334
00:14:10,500 --> 00:14:12,920
And tool usage is where we want

335
00:14:12,920 --> 00:14:15,840
to put the important business rules for us

336
00:14:15,840 --> 00:14:17,880
for how we call the tools.

337
00:14:17,880 --> 00:14:21,720
So MCP is great, it provides
a standardized interface,

338
00:14:21,720 --> 00:14:22,860
but how we...

339
00:14:22,860 --> 00:14:25,050
Sorry, how we want to use the tools

340
00:14:25,050 --> 00:14:27,180
is gonna change based on every single

341
00:14:27,180 --> 00:14:28,920
use case that you're gonna have.

342
00:14:28,920 --> 00:14:31,350
So this is where you kind of bring into

343
00:14:31,350 --> 00:14:33,930
some of the specific things

344
00:14:33,930 --> 00:14:35,580
that are the most important for you.

345
00:14:35,580 --> 00:14:38,880
I always wanna make sure
that we're reading the issue,

346
00:14:38,880 --> 00:14:41,490
providing some kind of
tips around how to interact

347
00:14:41,490 --> 00:14:42,690
with the file paths.

348
00:14:42,690 --> 00:14:44,940
I'm encouraging parallel tool calling.

349
00:14:44,940 --> 00:14:48,060
Parallel tool calling is
when we want the model

350
00:14:48,060 --> 00:14:50,310
to call multiple tools in
parallel instead of waiting

351
00:14:50,310 --> 00:14:53,463
for one after, so kind of
encouraging that behavior.

352
00:14:55,170 --> 00:14:57,876
- [Pat] Actually, I wanna
pause there for parallelism.

353
00:14:57,876 --> 00:15:00,690
Is this a parallel invocation of the model

354
00:15:00,690 --> 00:15:02,580
that's occurring when
you're asking it to do that?

355
00:15:02,580 --> 00:15:03,413
Or is it-

356
00:15:03,413 --> 00:15:05,100
- [Jean] So what'll happen is the model

357
00:15:05,100 --> 00:15:08,700
will in one single assistant response,

358
00:15:08,700 --> 00:15:11,700
it will have two tool calls in it.

359
00:15:11,700 --> 00:15:13,410
And so this might come up

360
00:15:13,410 --> 00:15:17,890
and where I would hope to
see it if it's necessary is

361
00:15:18,750 --> 00:15:21,810
let's see the contents of
multiple files at the same time.

362
00:15:21,810 --> 00:15:22,830
- [Pat] Awesome.

363
00:15:22,830 --> 00:15:24,060
- [Jean] So that's kind of a behavior

364
00:15:24,060 --> 00:15:26,040
that I'd like to encourage,

365
00:15:26,040 --> 00:15:30,810
and then the next thing is
around error handling, right?

366
00:15:30,810 --> 00:15:32,400
It's very nice to assume

367
00:15:32,400 --> 00:15:34,170
that everything will work
perfectly all the time.

368
00:15:34,170 --> 00:15:36,030
But when you're using MCP servers,

369
00:15:36,030 --> 00:15:38,010
when you're using tools
and agented workflows,

370
00:15:38,010 --> 00:15:39,690
things break a lot, right?

371
00:15:39,690 --> 00:15:41,040
Something's gonna time out.

372
00:15:42,270 --> 00:15:45,510
I might do, I don't know,
something else wrong, right?

373
00:15:45,510 --> 00:15:48,510
And so you just wanna start to kind of...

374
00:15:48,510 --> 00:15:49,890
That's the focus of that section

375
00:15:49,890 --> 00:15:51,570
is how do we want it to respond?

376
00:15:51,570 --> 00:15:55,890
If I time out, do I want
the model to try again?

377
00:15:55,890 --> 00:15:58,380
Do I want it to respond gracefully

378
00:15:58,380 --> 00:15:59,910
and give up, fail quickly, right?

379
00:15:59,910 --> 00:16:01,170
So this is kind of where we would start

380
00:16:01,170 --> 00:16:02,643
to think about that section.

381
00:16:03,660 --> 00:16:06,420
So I am going to now

382
00:16:06,420 --> 00:16:09,120
run this again.

383
00:16:09,120 --> 00:16:12,690
I'm just gonna pass it in
the system prompt here.

384
00:16:12,690 --> 00:16:14,280
No other changes necessary, right?

385
00:16:14,280 --> 00:16:18,790
I'm gonna keep the prompt exactly the same

386
00:16:20,580 --> 00:16:24,360
and we're gonna run it
again and we're gonna look

387
00:16:24,360 --> 00:16:27,933
and see how the model changes.

388
00:16:29,280 --> 00:16:30,210
What I'm hoping to see,

389
00:16:30,210 --> 00:16:32,100
we still should read the issue.

390
00:16:32,100 --> 00:16:34,170
I'm hoping the model will start actually

391
00:16:34,170 --> 00:16:35,520
looking at the files, right?

392
00:16:35,520 --> 00:16:38,100
I'm hoping it's going to actually start

393
00:16:38,100 --> 00:16:39,990
kind of exploring the repository,

394
00:16:39,990 --> 00:16:43,770
and fortunately, that is what I'm seeing.

395
00:16:43,770 --> 00:16:46,050
Something you might notice though,

396
00:16:46,050 --> 00:16:47,070
it's gonna be a little bit slower

397
00:16:47,070 --> 00:16:49,110
than it was the first time.

398
00:16:49,110 --> 00:16:50,010
Why is that, right?

399
00:16:50,010 --> 00:16:52,410
It's gonna have to make
a lot of tool calls

400
00:16:52,410 --> 00:16:54,210
because it doesn't have any context about

401
00:16:54,210 --> 00:16:56,430
what this repository looks like at all.

402
00:16:56,430 --> 00:16:57,600
It has no idea.

403
00:16:57,600 --> 00:16:58,433
So what is it gonna do?

404
00:16:58,433 --> 00:17:02,160
It's gonna guess and then
try to like start exploring

405
00:17:02,160 --> 00:17:03,270
and figuring this out.

406
00:17:03,270 --> 00:17:06,510
And a lot of models are very good at that

407
00:17:06,510 --> 00:17:10,050
and it's something that
if I am doing my own

408
00:17:10,050 --> 00:17:10,890
kind of day-to-day job

409
00:17:10,890 --> 00:17:14,130
and I wanna connect to
arbitrary repos, that's fine.

410
00:17:14,130 --> 00:17:18,690
But if I am building a
coding agent for a repository

411
00:17:18,690 --> 00:17:22,230
I know it's mine, we can take
advantage of that, right?

412
00:17:22,230 --> 00:17:24,900
We don't have to make the model explore

413
00:17:24,900 --> 00:17:26,940
by itself all the time.

414
00:17:26,940 --> 00:17:29,640
We can see this is just slow

415
00:17:29,640 --> 00:17:31,140
and I don't blame the model at all.

416
00:17:31,140 --> 00:17:32,700
It's gonna be searching for a repository

417
00:17:32,700 --> 00:17:34,500
and exploring and iterating.

418
00:17:34,500 --> 00:17:35,520
It's fine.

419
00:17:35,520 --> 00:17:38,280
So this is where we get into

420
00:17:38,280 --> 00:17:41,730
this optimization opportunity for context.

421
00:17:41,730 --> 00:17:46,730
So the Nova models, like
Pat mentioned earlier,

422
00:17:47,040 --> 00:17:50,430
support 1 million token context length.

423
00:17:50,430 --> 00:17:54,240
So I wouldn't blame you if the
first thing you thought about

424
00:17:54,240 --> 00:17:56,400
was why don't we just
dump the entire code base

425
00:17:56,400 --> 00:17:57,690
into the model context?

426
00:17:57,690 --> 00:17:58,863
That seems easy, right?

427
00:18:00,810 --> 00:18:03,090
I'll pause here 'cause we got the output,

428
00:18:03,090 --> 00:18:06,663
but you can see eight
tool calls, it did great.

429
00:18:06,663 --> 00:18:09,480
It read the issue.

430
00:18:09,480 --> 00:18:13,290
It explored a lot of different
files, it added the comment.

431
00:18:13,290 --> 00:18:14,123
And I can even...

432
00:18:14,123 --> 00:18:16,380
We can see here the quality

433
00:18:16,380 --> 00:18:20,520
that has improved just
on our system prompt.

434
00:18:20,520 --> 00:18:23,160
We're actually looking
at specific code changes

435
00:18:23,160 --> 00:18:24,780
we want to see happening.

436
00:18:24,780 --> 00:18:27,390
It took a long time to get
there, but it got there,

437
00:18:27,390 --> 00:18:31,290
and now we have real code that
is actually gonna be usable

438
00:18:31,290 --> 00:18:34,263
and relevant to our own repository.

439
00:18:36,000 --> 00:18:37,530
But I wanna improve on this

440
00:18:37,530 --> 00:18:40,230
because I'm not a very patient person

441
00:18:40,230 --> 00:18:42,180
and I think that we could do it better.

442
00:18:43,926 --> 00:18:45,000
- [Pat] Real quick though,

443
00:18:45,000 --> 00:18:47,673
any questions on what Jean
just went through there?

444
00:18:49,837 --> 00:18:50,670
Yeah.

445
00:18:50,670 --> 00:18:51,520
- [Audience Member 2] Yeah.

446
00:18:51,520 --> 00:18:54,570
So when you got (indistinct)
your agent, right?

447
00:18:54,570 --> 00:18:55,593
- [Jean] Yeah.

448
00:18:56,508 --> 00:18:57,341
- [Audience Member 2]
I might have missed it.

449
00:18:57,341 --> 00:19:00,930
Did you specify (indistinct)
because you said (indistinct)

450
00:19:00,930 --> 00:19:03,600
- [Jean] So that's a great question

451
00:19:03,600 --> 00:19:06,240
and it's actually gonna be
one of the optimizations

452
00:19:06,240 --> 00:19:07,950
we're gonna make a
little bit down the line.

453
00:19:07,950 --> 00:19:10,590
At first, I am just
passing all of the tools

454
00:19:10,590 --> 00:19:12,510
and passing all 40 of them,

455
00:19:12,510 --> 00:19:14,998
and you can see like Pat mentioned,

456
00:19:14,998 --> 00:19:18,000
the Nova models, we tuned them for agents,

457
00:19:18,000 --> 00:19:21,810
it does well with 40 tools,
did the right tool calls.

458
00:19:21,810 --> 00:19:24,750
I'm happy with the
decisions it was making,

459
00:19:24,750 --> 00:19:27,420
but that's a lot of tool calls.

460
00:19:27,420 --> 00:19:31,260
And I think the first prompt

461
00:19:31,260 --> 00:19:34,410
where I just have one
line in all of the tools,

462
00:19:34,410 --> 00:19:37,590
it adds immediately over 8,000 tokens

463
00:19:37,590 --> 00:19:40,470
just in the tool config,
which is helpful context,

464
00:19:40,470 --> 00:19:42,330
but it's a lot and it's unnecessary.

465
00:19:42,330 --> 00:19:44,220
And so that's one of the steps we'll take

466
00:19:44,220 --> 00:19:48,360
is kind of short cutting that
and being really intentional.

467
00:19:48,360 --> 00:19:50,910
- [Pat] Yeah, and the quantity of tools

468
00:19:50,910 --> 00:19:52,920
is actually a good place
to start if you're trying

469
00:19:52,920 --> 00:19:55,260
to now make multiple agents

470
00:19:55,260 --> 00:19:57,150
because then you can compartmentalize.

471
00:19:57,150 --> 00:19:58,560
Your tool use is associated

472
00:19:58,560 --> 00:20:01,170
with a behavior you want out of the agent.

473
00:20:01,170 --> 00:20:03,660
So it's a good place to
start if you're moving into

474
00:20:03,660 --> 00:20:05,310
multi-agent architectures.

475
00:20:05,310 --> 00:20:07,125
Did someone else have their hand up?

476
00:20:07,125 --> 00:20:08,430
Yeah.

477
00:20:08,430 --> 00:20:10,590
- [Audience Member 2] The SP
server is running (indistinct)

478
00:20:10,590 --> 00:20:13,680
- [Jean] So I'm using
GitHub's hosted MCP server,

479
00:20:13,680 --> 00:20:14,700
which everybody...

480
00:20:14,700 --> 00:20:16,080
So they have one that you can self-host.

481
00:20:16,080 --> 00:20:16,980
It's just a docker container,

482
00:20:16,980 --> 00:20:18,240
you can run it locally,

483
00:20:18,240 --> 00:20:20,640
but they also have one that's available

484
00:20:20,640 --> 00:20:22,560
just through an API endpoint.

485
00:20:22,560 --> 00:20:25,020
So that's what I'm using today.

486
00:20:25,020 --> 00:20:26,940
Definitely recommend
if you try this at home

487
00:20:26,940 --> 00:20:28,110
and you make your GitHub token,

488
00:20:28,110 --> 00:20:30,390
be smart about the permissions
you put on your GitHub token.

489
00:20:30,390 --> 00:20:34,533
I've done some crazy
things, so learn from me.

490
00:20:36,404 --> 00:20:39,721
- [Pat] We're gonna push to the
LangChain repo today, right?

491
00:20:39,721 --> 00:20:40,893
Just kidding, we're not gonna do that.

492
00:20:40,893 --> 00:20:42,584
(Jean laughing)

493
00:20:42,584 --> 00:20:44,609
- [Jean] So I...

494
00:20:44,609 --> 00:20:46,034
- [Audience Member 3]
Yeah, you look suspicious

495
00:20:46,034 --> 00:20:49,413
when asking (indistinct)

496
00:20:49,413 --> 00:20:50,280
- [Jean] Yes, I did.

497
00:20:50,280 --> 00:20:51,280
You caught me there.

498
00:20:52,680 --> 00:20:55,080
And then one time I
wasn't following my own...

499
00:20:55,080 --> 00:20:56,700
Our own security best practices

500
00:20:56,700 --> 00:20:58,650
and it was starting to push

501
00:20:58,650 --> 00:21:01,680
to the main repo and I was like, no.

502
00:21:01,680 --> 00:21:02,850
And so I made a protected branch

503
00:21:02,850 --> 00:21:04,413
and then I was intelligent.

504
00:21:06,030 --> 00:21:07,020
But it's fun to play with this stuff

505
00:21:07,020 --> 00:21:08,160
and sees what happens.

506
00:21:08,160 --> 00:21:10,089
It's fun to break things.

507
00:21:10,089 --> 00:21:12,060
- [Pat] And tools are an
implicit security boundary too.

508
00:21:12,060 --> 00:21:12,900
Sorry, I know you wanna move on.

509
00:21:12,900 --> 00:21:13,950
- [Jean] Yeah.

510
00:21:13,950 --> 00:21:14,970
- [Pat] If you don't want an agent

511
00:21:14,970 --> 00:21:17,730
to ever do anything
associated with the tool,

512
00:21:17,730 --> 00:21:19,680
you don't give it the tool.

513
00:21:19,680 --> 00:21:21,360
And when you're first iterating on things

514
00:21:21,360 --> 00:21:22,290
like we're doing here,

515
00:21:22,290 --> 00:21:24,270
you'll find those rough
edges really quickly.

516
00:21:24,270 --> 00:21:25,103
- [Jean] Yeah.

517
00:21:26,640 --> 00:21:29,610
So I think there's some...

518
00:21:29,610 --> 00:21:31,800
I guess I went a little
bit on a tangent there

519
00:21:31,800 --> 00:21:34,530
with the tools and everything
that was happening,

520
00:21:34,530 --> 00:21:37,653
going back to how we take
advantage of the context length.

521
00:21:39,030 --> 00:21:41,460
I do wanna show what happens

522
00:21:41,460 --> 00:21:43,080
when we pass the entire code base.

523
00:21:43,080 --> 00:21:46,980
I think it's a very
natural path to take it on,

524
00:21:46,980 --> 00:21:50,370
especially when we have
repositories that can handle

525
00:21:50,370 --> 00:21:51,837
that much context.

526
00:21:51,837 --> 00:21:53,550
And so I have a formatted...

527
00:21:53,550 --> 00:21:54,690
I wrote some a script.

528
00:21:54,690 --> 00:21:57,030
I dumped all of the files.

529
00:21:57,030 --> 00:21:57,863
I'll call out.

530
00:21:57,863 --> 00:21:59,520
I'm using some of our
best practices we have

531
00:21:59,520 --> 00:22:01,410
for how to format for long context.

532
00:22:01,410 --> 00:22:02,760
So I'm gonna be breaking up

533
00:22:03,930 --> 00:22:08,160
the documents in a specific structure.

534
00:22:08,160 --> 00:22:09,210
I will call out,

535
00:22:09,210 --> 00:22:13,350
I did not do something
very nice to the model,

536
00:22:13,350 --> 00:22:14,730
which is instead of passing the path

537
00:22:14,730 --> 00:22:16,350
that is gonna be in the GitHub repository,

538
00:22:16,350 --> 00:22:17,640
I used my local file path.

539
00:22:17,640 --> 00:22:19,500
So not really making it easier,

540
00:22:19,500 --> 00:22:24,060
but at least providing some
context right to the files

541
00:22:24,060 --> 00:22:27,450
and the content in the repository.

542
00:22:27,450 --> 00:22:31,360
So what we're gonna try
to do now is I'm gonna

543
00:22:32,820 --> 00:22:36,780
actually put this in the
prompt, and I believe I...

544
00:22:36,780 --> 00:22:38,080
Yeah, I called it

545
00:22:39,030 --> 00:22:42,243
code base and text.

546
00:22:45,893 --> 00:22:50,893
And I'm gonna say format repo content.

547
00:22:51,300 --> 00:22:55,923
And we're gonna just
put this now at the top,

548
00:22:57,630 --> 00:22:59,640
which is another best
practice for long context.

549
00:22:59,640 --> 00:23:02,820
You'll wanna put that at
the top of your prompt.

550
00:23:02,820 --> 00:23:07,330
And we're going to now run it

551
00:23:08,190 --> 00:23:09,720
and we're gonna see what happens.

552
00:23:09,720 --> 00:23:11,610
And I'm gonna call something out

553
00:23:11,610 --> 00:23:14,760
that you might pick up on really fast.

554
00:23:14,760 --> 00:23:16,833
One, it is a lot slower.

555
00:23:17,730 --> 00:23:22,200
We're passing a absurd
amount of tokens through.

556
00:23:22,200 --> 00:23:24,270
I was smart, I ditched the UV lock

557
00:23:24,270 --> 00:23:26,280
and some other stuff that just threw it

558
00:23:26,280 --> 00:23:27,330
right to the context length.

559
00:23:27,330 --> 00:23:30,030
It's gonna be about 500,000 tokens,

560
00:23:30,030 --> 00:23:32,550
but that's gonna be on
the higher end, right?

561
00:23:32,550 --> 00:23:34,323
Of our token context length.

562
00:23:35,940 --> 00:23:40,260
And there's a lot of
papers around this topic

563
00:23:40,260 --> 00:23:43,413
so we can take advantage
of the context length.

564
00:23:44,760 --> 00:23:47,490
We train for long context,

565
00:23:47,490 --> 00:23:49,050
but something that is kind of seen

566
00:23:49,050 --> 00:23:51,240
across all models is performance

567
00:23:51,240 --> 00:23:55,800
of the model degrades
as the context increases

568
00:23:55,800 --> 00:23:57,540
and a lot aligned with that.

569
00:23:57,540 --> 00:23:58,710
When we do a long context,

570
00:23:58,710 --> 00:24:01,770
a lot of times it's usually
best when we're looking

571
00:24:01,770 --> 00:24:02,880
for something very specific, right?

572
00:24:02,880 --> 00:24:03,870
It's a needle in a haystack.

573
00:24:03,870 --> 00:24:04,890
I want to go search for something

574
00:24:04,890 --> 00:24:08,730
in this long, huge amount of context.

575
00:24:08,730 --> 00:24:09,690
Models are very good at that.

576
00:24:09,690 --> 00:24:11,790
But what's important for
when we're doing code

577
00:24:11,790 --> 00:24:16,110
is semantic connections and
how are things playing together

578
00:24:16,110 --> 00:24:17,820
and that you don't get

579
00:24:17,820 --> 00:24:19,290
as much when you're
just dumping everything

580
00:24:19,290 --> 00:24:20,490
into the context.

581
00:24:20,490 --> 00:24:25,490
And so the benefit doesn't really...

582
00:24:26,040 --> 00:24:30,150
Of having all of it, it's
a little bit tough, right?

583
00:24:30,150 --> 00:24:34,440
What we're probably gonna see
is still very good outputs.

584
00:24:34,440 --> 00:24:36,423
It's probably gonna call less tools,

585
00:24:37,260 --> 00:24:41,700
but it's lot slower and
it's gonna cost a lot more.

586
00:24:41,700 --> 00:24:44,460
- [Pat] And we've seen customers now with

587
00:24:44,460 --> 00:24:48,330
navigating the dependency
of a software project.

588
00:24:48,330 --> 00:24:51,240
Take this in a a whole
direction unto itself,

589
00:24:51,240 --> 00:24:53,670
building a graph of dependencies.

590
00:24:53,670 --> 00:24:58,560
So you can look up
dependencies using a query.

591
00:24:58,560 --> 00:25:00,180
There's a bunch of rag efforts

592
00:25:00,180 --> 00:25:02,280
that can go into making this specific part

593
00:25:02,280 --> 00:25:04,680
of a coding agent more efficient.

594
00:25:04,680 --> 00:25:06,240
But yeah, hopefully you've
got the results so I don't-

595
00:25:06,240 --> 00:25:08,940
- [Jean] Yeah, we'll notice
a couple things, right?

596
00:25:08,940 --> 00:25:09,840
Less tool calls.

597
00:25:09,840 --> 00:25:10,770
So that's kind of nice.

598
00:25:10,770 --> 00:25:12,750
I had to do less steps.

599
00:25:12,750 --> 00:25:14,940
Maybe that saves us a little cost,

600
00:25:14,940 --> 00:25:17,400
but I'll call out what stands out to me

601
00:25:17,400 --> 00:25:20,250
when I see this immediately is
that it didn't add a comment

602
00:25:20,250 --> 00:25:21,690
like I asked it to, right?

603
00:25:21,690 --> 00:25:25,800
The performance of the agent
decreased with all of it,

604
00:25:25,800 --> 00:25:27,357
with all of that context.

605
00:25:27,357 --> 00:25:31,050
And the quality of the
code is still great,

606
00:25:31,050 --> 00:25:33,270
but for agentic workflows,

607
00:25:33,270 --> 00:25:34,500
there is a big trade off here

608
00:25:34,500 --> 00:25:37,230
and you wanna be really intentional

609
00:25:37,230 --> 00:25:39,030
because of this about
managing the context.

610
00:25:39,030 --> 00:25:41,790
And what we see a lot with coding agents

611
00:25:41,790 --> 00:25:46,080
is you can run through
your context so fast

612
00:25:46,080 --> 00:25:50,340
and you don't want to
basically shortcut that

613
00:25:50,340 --> 00:25:52,440
by adding a bunch of
context at the beginning.

614
00:25:52,440 --> 00:25:55,590
You want to allow for the
context to build up naturally

615
00:25:55,590 --> 00:25:58,590
and have more proactive
compaction strategies throughout

616
00:25:58,590 --> 00:26:01,200
the period of the agentic workflow, right?

617
00:26:01,200 --> 00:26:04,890
We don't wanna just kind of
basically handicap, right?

618
00:26:04,890 --> 00:26:09,003
Put the model at a disadvantage
just from the beginning.

619
00:26:10,170 --> 00:26:13,440
- [Pat] How many folks are
using Code Assist in their IDs?

620
00:26:13,440 --> 00:26:14,940
Just any sort of...

621
00:26:14,940 --> 00:26:15,780
Oh, you're willing to admit it.

622
00:26:15,780 --> 00:26:17,790
That's awesome. I do too.

623
00:26:17,790 --> 00:26:19,920
So which you noticed a lot with Kiro,

624
00:26:19,920 --> 00:26:23,130
with like continue, with
any of these plugins,

625
00:26:23,130 --> 00:26:25,650
they're very surgical about
how they look at files.

626
00:26:25,650 --> 00:26:28,380
So they'll go search
for something in a file

627
00:26:28,380 --> 00:26:29,790
and they'll take the line numbers

628
00:26:29,790 --> 00:26:32,280
and they'll put that into the context.

629
00:26:32,280 --> 00:26:34,762
And so just to highlight
what Jean's explaining here,

630
00:26:34,762 --> 00:26:36,870
that's for context management.

631
00:26:36,870 --> 00:26:39,630
They're getting very
specific about the things

632
00:26:39,630 --> 00:26:41,157
they put into the context window.

633
00:26:41,157 --> 00:26:41,990
Yeah.

634
00:26:41,990 --> 00:26:44,879
- [Audience Member 4] I'd
like to come ask about that,

635
00:26:44,879 --> 00:26:45,910
so how does it not have

636
00:26:49,466 --> 00:26:52,085
the copies of a full file
and whole code basis?

637
00:26:52,085 --> 00:26:56,356
How is it able to search
and look for a file?

638
00:26:56,356 --> 00:26:59,917
Specific line or does it have
that full context already?

639
00:26:59,917 --> 00:27:03,360
- [Jean] So my proposal to you all to do

640
00:27:03,360 --> 00:27:05,640
and what you'll see if you
really get into the nitty gritty

641
00:27:05,640 --> 00:27:08,733
of how a lot of these like
coding assistants will do, is,

642
00:27:10,530 --> 00:27:13,980
well, they will use the
repository structure

643
00:27:13,980 --> 00:27:15,870
in the context instead.

644
00:27:15,870 --> 00:27:18,700
So one of the benefits, right, of the fact

645
00:27:19,714 --> 00:27:21,450
that we, as humans, have
been working in code bases

646
00:27:21,450 --> 00:27:23,730
for so long is we try hopefully

647
00:27:23,730 --> 00:27:25,830
to design them in a way it's intuitive

648
00:27:25,830 --> 00:27:28,230
and easy for us to navigate.

649
00:27:28,230 --> 00:27:31,560
So now we have the ability to
just take advantage of that.

650
00:27:31,560 --> 00:27:33,270
It's designed for us to
be able to navigate it.

651
00:27:33,270 --> 00:27:35,730
I hope if you're lucky,
you've been at companies

652
00:27:35,730 --> 00:27:37,020
where maybe we're not as good about that,

653
00:27:37,020 --> 00:27:42,000
but you have human
preference tuned file pass

654
00:27:42,000 --> 00:27:43,710
that provide context out of the box for

655
00:27:43,710 --> 00:27:46,020
what is probably gonna
be happening in the file.

656
00:27:46,020 --> 00:27:48,060
And you can provide that to the model

657
00:27:48,060 --> 00:27:51,090
and it gives it a starting
point of where to look.

658
00:27:51,090 --> 00:27:55,960
And so what I have now is a separate

659
00:27:57,660 --> 00:28:01,620
text file that has all of the file paths

660
00:28:01,620 --> 00:28:03,177
in the entire repository.

661
00:28:03,177 --> 00:28:04,680
I'm not at this moment providing

662
00:28:04,680 --> 00:28:06,360
any additional context to it,

663
00:28:06,360 --> 00:28:08,100
but I'm providing the file pass.

664
00:28:08,100 --> 00:28:09,993
And you can see here,

665
00:28:11,550 --> 00:28:14,100
I think the thing I called
out in the issue itself

666
00:28:14,100 --> 00:28:17,463
is add something to the
Chat Bedrock Converse class.

667
00:28:18,720 --> 00:28:20,490
We can see here we have this file path

668
00:28:20,490 --> 00:28:21,540
that says Bedrock Converse.

669
00:28:21,540 --> 00:28:23,460
It probably is gonna give a
hint to the model that, oh,

670
00:28:23,460 --> 00:28:25,973
that might be a really good
place for me to start looking.

671
00:28:27,180 --> 00:28:31,140
And so if we switch this out now

672
00:28:31,140 --> 00:28:35,400
and we just instead
pass this new text file

673
00:28:35,400 --> 00:28:36,850
that has the file list

674
00:28:37,860 --> 00:28:41,820
and try to run that, we
should see a couple things.

675
00:28:41,820 --> 00:28:44,130
Ideally, the wifi holds up, right?

676
00:28:44,130 --> 00:28:46,050
It's just going a bit faster.

677
00:28:46,050 --> 00:28:48,150
We should still see a pretty high quality

678
00:28:48,150 --> 00:28:50,220
output from the model.

679
00:28:50,220 --> 00:28:54,720
And so this kind of really
easy tuning, to be honest,

680
00:28:54,720 --> 00:28:57,390
it wasn't a very hard script to write.

681
00:28:57,390 --> 00:28:59,610
And so this helps us

682
00:28:59,610 --> 00:29:02,490
kind of very easily provide
context to the model.

683
00:29:02,490 --> 00:29:03,630
And while that's running,

684
00:29:03,630 --> 00:29:06,390
I will show the fact...

685
00:29:06,390 --> 00:29:09,120
Te next step that you can take it

686
00:29:09,120 --> 00:29:12,240
is actually sorting the
file paths and stuff.

687
00:29:12,240 --> 00:29:14,943
And if you are willing to put the time in,

688
00:29:14,943 --> 00:29:16,290
this is another way

689
00:29:16,290 --> 00:29:18,570
that you can be a little
bit more intentional

690
00:29:18,570 --> 00:29:20,853
about providing the context of the model.

691
00:29:21,780 --> 00:29:23,040
And a lot of...

692
00:29:23,040 --> 00:29:25,140
I think what I've noticed,

693
00:29:25,140 --> 00:29:27,630
a lot of repositories that
want to be really easy

694
00:29:27,630 --> 00:29:29,130
for agents to work in,

695
00:29:29,130 --> 00:29:33,177
they'll provide this kind of
stuff in the agent MD file

696
00:29:33,177 --> 00:29:34,323
and things like that.

697
00:29:35,640 --> 00:29:38,040
And so it's being a little slow.

698
00:29:38,040 --> 00:29:42,150
I will say I'm gonna blame the wifi,

699
00:29:42,150 --> 00:29:44,158
but so far we've only
had two different tools

700
00:29:44,158 --> 00:29:45,543
that are gonna be called.

701
00:29:47,130 --> 00:29:48,330
We're getting another file contents,

702
00:29:48,330 --> 00:29:49,860
and so we'll see what
the output looks like.

703
00:29:49,860 --> 00:29:51,030
And what I'm hoping for, right,

704
00:29:51,030 --> 00:29:52,840
is we'll get a high quality output

705
00:29:53,730 --> 00:29:55,710
with the implementation plan.

706
00:29:55,710 --> 00:29:58,110
- [Pat] And so one thing
that to keep in mind,

707
00:29:58,110 --> 00:30:01,530
because agents, in particular,
are token hogs, right?

708
00:30:01,530 --> 00:30:03,810
We know they use a lot of tokens.

709
00:30:03,810 --> 00:30:07,200
Code bases will eat
through those tokens faster

710
00:30:07,200 --> 00:30:08,160
than you can blink in eye.

711
00:30:08,160 --> 00:30:11,730
So the other reason to be conscious about

712
00:30:11,730 --> 00:30:14,220
how many tokens you're using
in your time to this window,

713
00:30:14,220 --> 00:30:15,810
how good your tools are is

714
00:30:15,810 --> 00:30:18,060
because that's a measure
of cost in the long run.

715
00:30:18,060 --> 00:30:19,440
So if you're running this agent

716
00:30:19,440 --> 00:30:22,410
for every single issue that gets submitted

717
00:30:22,410 --> 00:30:24,136
and it's running autonomously,

718
00:30:24,136 --> 00:30:26,820
there's a consideration for cost.

719
00:30:26,820 --> 00:30:29,580
We'll see the output tokens
here, but it's considerable.

720
00:30:29,580 --> 00:30:32,120
We're only doing a
pretty straightforward...

721
00:30:33,180 --> 00:30:34,013
- [Jean] Yeah.

722
00:30:34,013 --> 00:30:38,280
Yeah, and so we can see the output now.

723
00:30:38,280 --> 00:30:40,620
We had a significant reduction
in the tool calls from

724
00:30:40,620 --> 00:30:42,990
the first one where we provide no context

725
00:30:42,990 --> 00:30:44,820
to the repository.

726
00:30:44,820 --> 00:30:47,500
We also, in comparison to the one

727
00:30:47,500 --> 00:30:49,830
where we're passing the
entire code base, right?

728
00:30:49,830 --> 00:30:52,620
This is a lot more reasonable
on the input tokens

729
00:30:52,620 --> 00:30:55,170
that are going into the model.

730
00:30:55,170 --> 00:30:58,800
And then the quality still of the output

731
00:30:58,800 --> 00:31:01,410
that we're getting is still very high.

732
00:31:01,410 --> 00:31:05,520
We're still going to be making
very specific code changes

733
00:31:05,520 --> 00:31:07,590
that were targeted for the files

734
00:31:07,590 --> 00:31:11,673
that will have the impact that
we want for the GitHub issue.

735
00:31:15,240 --> 00:31:20,010
So this is all good things

736
00:31:20,010 --> 00:31:22,650
if we're thinking about
a autonomous coding agent

737
00:31:22,650 --> 00:31:24,390
in terms of planning, right?

738
00:31:24,390 --> 00:31:26,850
We're gonna do a long horizon coding task.

739
00:31:26,850 --> 00:31:29,430
We want high quality planning
at the beginning, right?

740
00:31:29,430 --> 00:31:30,945
If you're using a coding tool,

741
00:31:30,945 --> 00:31:32,460
you wanna plan and then you act.

742
00:31:32,460 --> 00:31:35,070
It's the same when you're
building it yourself.

743
00:31:35,070 --> 00:31:38,820
We put a lot of time into
building a high quality plan.

744
00:31:38,820 --> 00:31:40,710
This is only so helpful

745
00:31:40,710 --> 00:31:43,950
because at this point, nothing's
actually writing any code.

746
00:31:43,950 --> 00:31:45,690
I still have to go
implement the plan, right?

747
00:31:45,690 --> 00:31:46,800
We want to build on this

748
00:31:46,800 --> 00:31:48,480
and we want to actually build something

749
00:31:48,480 --> 00:31:52,320
that can take actions in the code base.

750
00:31:52,320 --> 00:31:56,481
So the option for us,

751
00:31:56,481 --> 00:31:58,680
we have two basically.

752
00:31:58,680 --> 00:32:01,680
We can either continue to
build on the current agent

753
00:32:01,680 --> 00:32:05,130
that we have or we can start to expand

754
00:32:05,130 --> 00:32:10,130
upon a multi-agent
implementation strategy.

755
00:32:10,380 --> 00:32:14,310
Now there are a lot of cons

756
00:32:14,310 --> 00:32:17,940
with a mono agent architecture here.

757
00:32:17,940 --> 00:32:19,620
And we're being really repetitive,

758
00:32:19,620 --> 00:32:22,020
but a lot of it comes to the context.

759
00:32:22,020 --> 00:32:24,120
We're gonna put all of these tool calls

760
00:32:24,120 --> 00:32:27,120
and context just to create the plan.

761
00:32:27,120 --> 00:32:28,650
All that really matters from the plan

762
00:32:28,650 --> 00:32:30,063
is the output of the plan.

763
00:32:30,900 --> 00:32:32,370
And then if we build on top of that,

764
00:32:32,370 --> 00:32:35,550
we're still tracking all of
the tokens that we use to get

765
00:32:35,550 --> 00:32:39,330
to the plan to then act
and actually build it.

766
00:32:39,330 --> 00:32:41,340
So what you'll see in a
lot of the coding agents

767
00:32:41,340 --> 00:32:42,690
and kind of the direction we want

768
00:32:42,690 --> 00:32:47,160
to go now is a multi-agent architecture.

769
00:32:47,160 --> 00:32:50,350
And we will start with

770
00:32:51,210 --> 00:32:53,732
using Strands still and
we're gonna implement it

771
00:32:53,732 --> 00:32:57,000
using a graph-based approach

772
00:32:57,000 --> 00:33:02,000
where we will have a planning agent

773
00:33:02,100 --> 00:33:04,320
and then an act agent.

774
00:33:04,320 --> 00:33:06,120
Our plan agent, right?

775
00:33:06,120 --> 00:33:09,030
It will do all the tool
calls to look at the files

776
00:33:09,030 --> 00:33:12,060
and determine what needs to happen.

777
00:33:12,060 --> 00:33:15,240
And then that output
will go to our act agent.

778
00:33:15,240 --> 00:33:18,780
The act agent will take
the implementation plan

779
00:33:18,780 --> 00:33:21,580
and it'll actually start
iterating and writing the code.

780
00:33:22,860 --> 00:33:27,450
So where the direction we've
been going so far, we might...

781
00:33:27,450 --> 00:33:32,280
You might assume we're
going to use the GitHub MCP.

782
00:33:32,280 --> 00:33:34,770
So one thing you might pick up on

783
00:33:34,770 --> 00:33:38,490
and I'll call out is when we
use the GitHub MTP server,

784
00:33:38,490 --> 00:33:41,490
every single file, every single tool call

785
00:33:41,490 --> 00:33:44,040
where I'm getting the file contents,

786
00:33:44,040 --> 00:33:47,610
I am getting the entire file
contents from their API.

787
00:33:47,610 --> 00:33:49,713
It's a lot. It's quite slow.

788
00:33:50,580 --> 00:33:54,510
And then if we do the
create update changes,

789
00:33:54,510 --> 00:33:57,840
we're also outputting the entire file

790
00:33:57,840 --> 00:34:00,150
through a tool call back to the server.

791
00:34:00,150 --> 00:34:01,930
So it's very, very slow

792
00:34:02,850 --> 00:34:07,380
and not necessarily the most practical

793
00:34:07,380 --> 00:34:08,763
way to do it.

794
00:34:09,720 --> 00:34:11,970
But we'll get to that a little bit later.

795
00:34:11,970 --> 00:34:15,840
A little bit of a teaser.
So we'll try it out.

796
00:34:15,840 --> 00:34:18,840
So I have two agents, like I said.

797
00:34:18,840 --> 00:34:22,830
I'll just show very quickly in Strands,

798
00:34:22,830 --> 00:34:26,370
if you've done a graph approach before,

799
00:34:26,370 --> 00:34:29,670
what you'll do is you'll
create this graph builder,

800
00:34:29,670 --> 00:34:33,120
you'll add your nodes
and that's really it.

801
00:34:33,120 --> 00:34:34,320
It's quite easy.

802
00:34:34,320 --> 00:34:35,490
- [Pat] Is everyone familiar with

803
00:34:35,490 --> 00:34:39,600
the basic agent orchestration patterns?

804
00:34:39,600 --> 00:34:42,097
I'll go over those really
quick if that helps.

805
00:34:42,097 --> 00:34:44,820
So the most ubiquitous
pattern right now in agents

806
00:34:44,820 --> 00:34:46,770
is the manager agent and the subagents.

807
00:34:46,770 --> 00:34:48,360
The manager agent dictates

808
00:34:48,360 --> 00:34:50,490
when and who it calls to get work done

809
00:34:50,490 --> 00:34:53,070
and it decides when the work is done.

810
00:34:53,070 --> 00:34:54,750
Absolutely a thing.

811
00:34:54,750 --> 00:34:56,580
There's also graph agents.

812
00:34:56,580 --> 00:35:00,390
You can think of it as a left
to right graph in our case,

813
00:35:00,390 --> 00:35:04,050
for coding where every
agent is a dependent

814
00:35:04,050 --> 00:35:05,220
on the previous node.

815
00:35:05,220 --> 00:35:06,273
They call them nodes.

816
00:35:07,140 --> 00:35:08,850
That's also...

817
00:35:08,850 --> 00:35:10,210
There's different names for it.

818
00:35:10,210 --> 00:35:11,043
Kiro AI has its own terminology.

819
00:35:11,043 --> 00:35:12,000
Strands has its own terminology.

820
00:35:12,000 --> 00:35:14,430
But the idea is that the
agents are moving left to right

821
00:35:14,430 --> 00:35:15,570
and once they move to the right,

822
00:35:15,570 --> 00:35:17,070
they don't come back.

823
00:35:17,070 --> 00:35:20,670
So in code projects,
you typically have that.

824
00:35:20,670 --> 00:35:21,963
If you've used Kiro,

825
00:35:22,920 --> 00:35:24,930
it feels like a left to
right process, right?

826
00:35:24,930 --> 00:35:28,260
They have a requirement doc
or design doc requirements

827
00:35:28,260 --> 00:35:30,690
and then implementation
and then unleash the agents

828
00:35:30,690 --> 00:35:32,430
and do the things.

829
00:35:32,430 --> 00:35:36,375
So those are the two most
ubiquitous orchestration patterns.

830
00:35:36,375 --> 00:35:37,635
Yeah.

831
00:35:37,635 --> 00:35:40,479
- [Audience Member 5] So are
all the agents in a group chat

832
00:35:40,479 --> 00:35:42,062
and based on the annotation,

833
00:35:42,062 --> 00:35:44,670
the manager will know how to assign?

834
00:35:44,670 --> 00:35:46,073
- [Pat] I'm sorry, I missed that.

835
00:35:47,026 --> 00:35:49,500
- [Audience Member 5] So is
Strands doing like a group chat

836
00:35:49,500 --> 00:35:51,250
of the agents behind the scene

837
00:35:51,250 --> 00:35:53,160
or are they talking to each other?

838
00:35:53,160 --> 00:35:55,713
- [Pat] A group chat? That'd be cool.

839
00:35:56,790 --> 00:35:59,340
No, essentially what's happening

840
00:35:59,340 --> 00:36:01,020
in a graph agent orchestration

841
00:36:01,020 --> 00:36:04,800
is when the agent's done,

842
00:36:04,800 --> 00:36:08,250
you can send the result of
that agent to the next one

843
00:36:08,250 --> 00:36:10,230
and then it picks up where it left off.

844
00:36:10,230 --> 00:36:12,420
You can send state to it.

845
00:36:12,420 --> 00:36:15,600
You can propagate the input
from the original all the way

846
00:36:15,600 --> 00:36:16,803
to the last agent.

847
00:36:17,670 --> 00:36:20,670
But no, they're not commingling
and talking about things.

848
00:36:20,670 --> 00:36:23,730
That would be more of the
manager agent orchestration.

849
00:36:23,730 --> 00:36:25,590
You can ask it to do a
whiteboarding session,

850
00:36:25,590 --> 00:36:27,810
update a markdown file with your ideas,

851
00:36:27,810 --> 00:36:30,720
let's take votes based on what you think

852
00:36:30,720 --> 00:36:33,375
of what's been proposed, stuff like that.

853
00:36:33,375 --> 00:36:34,811
- [Audience Member 5]
And the manager assigns

854
00:36:34,811 --> 00:36:37,350
based on the annotation?

855
00:36:37,350 --> 00:36:39,150
- [Pat] Yeah, the manager agent says,

856
00:36:39,150 --> 00:36:40,440
and this would go in your prompt, right?

857
00:36:40,440 --> 00:36:41,970
You'd say you are a manager agent,

858
00:36:41,970 --> 00:36:43,710
you're assessing the work.

859
00:36:43,710 --> 00:36:46,380
You have a implementation agent.

860
00:36:46,380 --> 00:36:47,490
It's responsible for this.

861
00:36:47,490 --> 00:36:49,110
You have a coding agent.
It's responsible for this.

862
00:36:49,110 --> 00:36:52,080
And you're relying on the
reasoning ability of the model

863
00:36:52,080 --> 00:36:54,360
to decide which agent to work with.

864
00:36:54,360 --> 00:36:56,933
So you're leaving that completely
up to the manager agent.

865
00:36:58,410 --> 00:36:59,880
- [Jean] So I have it running.

866
00:36:59,880 --> 00:37:01,050
I'm actually not even gonna let it

867
00:37:01,050 --> 00:37:02,250
kind of continue all the way

868
00:37:02,250 --> 00:37:03,600
just 'cause we only have 20 minutes left

869
00:37:03,600 --> 00:37:05,670
and we're gonna get to
some really cool stuff.

870
00:37:05,670 --> 00:37:08,430
But the message I wanna
give here is we're able

871
00:37:08,430 --> 00:37:11,490
to switch into this
multi-agent architecture.

872
00:37:11,490 --> 00:37:15,960
We still have a disadvantage
because it's still really slow.

873
00:37:15,960 --> 00:37:20,940
And so the path that we
wanna talk through now

874
00:37:20,940 --> 00:37:23,340
that Pat's gonna take over a bit,

875
00:37:23,340 --> 00:37:26,370
is how can we build this
more locally centric?

876
00:37:26,370 --> 00:37:27,870
How do we create an environment

877
00:37:27,870 --> 00:37:29,370
that we can actually make the code change

878
00:37:29,370 --> 00:37:31,800
and test the code changes?

879
00:37:31,800 --> 00:37:33,890
Because that's gonna
be a lot more practical

880
00:37:33,890 --> 00:37:36,093
for these kinds of applications.

881
00:37:38,580 --> 00:37:40,080
- [Pat] Let's do it.
- [Jean] Let's do it.

882
00:37:40,080 --> 00:37:41,850
- [Pat] I'll have to
show you what I wrote,

883
00:37:41,850 --> 00:37:44,280
which I know isn't as
exciting, but we've had some...

884
00:37:44,280 --> 00:37:45,570
My laptop doesn't connect well,

885
00:37:45,570 --> 00:37:48,450
so I've neglected this side of the room.

886
00:37:48,450 --> 00:37:50,430
I hope you're all getting
as much out of this

887
00:37:50,430 --> 00:37:51,603
as I hope you are.

888
00:37:52,500 --> 00:37:54,330
So let's talk about a
couple quick concepts.

889
00:37:54,330 --> 00:37:57,660
So when you write code,
you never just write it

890
00:37:57,660 --> 00:37:59,430
and then send a...

891
00:37:59,430 --> 00:38:00,263
And then push it.

892
00:38:00,263 --> 00:38:02,130
I mean, some of you might be
that good at writing code,

893
00:38:02,130 --> 00:38:05,370
but you've got to make
sure it actually executes

894
00:38:05,370 --> 00:38:07,470
and it actually does
what it's supposed to do.

895
00:38:07,470 --> 00:38:09,000
And we take that for granted.

896
00:38:09,000 --> 00:38:12,090
As developers, we run the
code, we write a test,

897
00:38:12,090 --> 00:38:13,470
and if it works, it works.

898
00:38:13,470 --> 00:38:15,090
If it doesn't, you write more unit tests

899
00:38:15,090 --> 00:38:17,010
and you keep iterating until it's done.

900
00:38:17,010 --> 00:38:20,910
So how do you get an agent
to do that on its own

901
00:38:20,910 --> 00:38:23,130
'cause it doesn't have a workspace?

902
00:38:23,130 --> 00:38:25,233
Well, you give it a workspace.

903
00:38:26,220 --> 00:38:27,420
What I wanna talk about now

904
00:38:27,420 --> 00:38:30,930
is how to maybe do that
with code execution.

905
00:38:30,930 --> 00:38:34,410
How can you use Docker to create
a workspace for this agent

906
00:38:34,410 --> 00:38:36,990
to put some files in it,

907
00:38:36,990 --> 00:38:39,840
mount it to the image or
the container, run it,

908
00:38:39,840 --> 00:38:40,710
see what happens,

909
00:38:40,710 --> 00:38:43,140
get the exception and keep iterating.

910
00:38:43,140 --> 00:38:46,860
And this is something that
we're seeing a lot of folks do.

911
00:38:46,860 --> 00:38:49,560
They might have a container
image that they've baked

912
00:38:49,560 --> 00:38:52,110
for their pipeline that they want to use.

913
00:38:52,110 --> 00:38:54,270
Those are great candidates, by the way.

914
00:38:54,270 --> 00:38:57,510
We're gonna show you a really
simple example on Docker.

915
00:38:57,510 --> 00:38:59,163
Before I go there,

916
00:39:01,320 --> 00:39:04,383
let's take a look at that tool.

917
00:39:06,870 --> 00:39:09,180
So I called it the code execution tool.

918
00:39:09,180 --> 00:39:11,670
By the way, in Strands,

919
00:39:11,670 --> 00:39:14,310
as long as you're doing things
and following the rules,

920
00:39:14,310 --> 00:39:16,710
anything you put in the tools
directory can be sucked up

921
00:39:16,710 --> 00:39:18,660
by the agent without question, right?

922
00:39:18,660 --> 00:39:19,560
That's good and bad,

923
00:39:19,560 --> 00:39:21,330
'cause if you've got hundreds of tools,

924
00:39:21,330 --> 00:39:23,160
that gets to be a problem.

925
00:39:23,160 --> 00:39:25,260
But if you're building
agents for the first time,

926
00:39:25,260 --> 00:39:27,480
it's a good way to get started.

927
00:39:27,480 --> 00:39:28,683
Code execution.

928
00:39:30,690 --> 00:39:32,910
I'll walk through a few things here.

929
00:39:32,910 --> 00:39:34,380
Oh, you have your scroll reverse.

930
00:39:34,380 --> 00:39:36,330
Okay, not reverse, it's the right way.

931
00:39:36,330 --> 00:39:38,130
It's the right way to scroll.

932
00:39:38,130 --> 00:39:39,180
So what I've done here,

933
00:39:39,180 --> 00:39:42,420
and I've just hard coded
a default workspace path.

934
00:39:42,420 --> 00:39:44,520
But what's gonna happen
here is I'm gonna tell it,

935
00:39:44,520 --> 00:39:46,980
put all your work in
this docker workspace.

936
00:39:46,980 --> 00:39:48,780
If you're gonna clone anything,

937
00:39:48,780 --> 00:39:51,450
if you're gonna write any code,
make sure it goes in there

938
00:39:51,450 --> 00:39:52,770
and put your tests somewhere else.

939
00:39:52,770 --> 00:39:53,820
And you make sure

940
00:39:53,820 --> 00:39:55,920
that we're keeping these things separate.

941
00:39:55,920 --> 00:39:57,390
File system security

942
00:39:57,390 --> 00:40:00,480
and network security
are also a thing, right?

943
00:40:00,480 --> 00:40:01,440
You don't wanna...

944
00:40:01,440 --> 00:40:04,770
If you go deploy this and
you let it ping the internet,

945
00:40:04,770 --> 00:40:06,360
go pull down any library it wants,

946
00:40:06,360 --> 00:40:08,910
completely unvetted by your security team.

947
00:40:08,910 --> 00:40:11,640
These are all super important
considerations to make.

948
00:40:11,640 --> 00:40:16,640
Anthropic in late October
released Sandbox Runtime.

949
00:40:16,740 --> 00:40:19,080
I would highly suggest
taking a look at it.

950
00:40:19,080 --> 00:40:22,383
They have, I think in
a very thoughtful way,

951
00:40:23,250 --> 00:40:25,260
offered a great tool for solving that.

952
00:40:25,260 --> 00:40:27,930
You can send all your traffic
to a proxy if you want.

953
00:40:27,930 --> 00:40:30,270
If you don't want this
agent doing anything else,

954
00:40:30,270 --> 00:40:32,160
you can lock down the files

955
00:40:32,160 --> 00:40:33,810
or the directories it has access to.

956
00:40:33,810 --> 00:40:34,860
We're not gonna get into that today,

957
00:40:34,860 --> 00:40:36,540
but I wanted to put that out there.

958
00:40:36,540 --> 00:40:40,020
There's also agent core code interpreter

959
00:40:40,020 --> 00:40:42,420
that is designed specifically
for this use case.

960
00:40:43,500 --> 00:40:46,833
So my execute docker
tool, just like all tools,

961
00:40:48,090 --> 00:40:49,860
you want to give it good descriptions.

962
00:40:49,860 --> 00:40:51,300
Again, remember the context.

963
00:40:51,300 --> 00:40:52,830
All of that goes into the context.

964
00:40:52,830 --> 00:40:54,630
Like when Strands picks up the tool,

965
00:40:54,630 --> 00:40:56,310
it's picking up the description

966
00:40:56,310 --> 00:40:57,990
to help it decide what it's doing.

967
00:40:57,990 --> 00:41:00,240
I got a little carried away here,

968
00:41:00,240 --> 00:41:02,193
but it's important to remember that.

969
00:41:04,260 --> 00:41:07,860
I'm sending it back a return error

970
00:41:07,860 --> 00:41:12,120
if I don't have the right information.

971
00:41:12,120 --> 00:41:13,050
Dependencies.

972
00:41:13,050 --> 00:41:16,080
So how are you gonna tell the agent to...

973
00:41:16,080 --> 00:41:17,340
If it needs to do a PIP install

974
00:41:17,340 --> 00:41:19,200
or it needs to like get
the environment ready

975
00:41:19,200 --> 00:41:21,000
before it executes the code,

976
00:41:21,000 --> 00:41:22,860
you need to tell it where to put it.

977
00:41:22,860 --> 00:41:25,830
So requirements text is gonna
be a really important thing.

978
00:41:25,830 --> 00:41:27,000
I'm using Python,

979
00:41:27,000 --> 00:41:30,090
so of course, if you're using
node or some other language,

980
00:41:30,090 --> 00:41:34,143
that's gonna be N number of
steps to complete, as we know.

981
00:41:35,190 --> 00:41:38,130
But here we just got a
simple docker command.

982
00:41:38,130 --> 00:41:39,720
So if I have all the requirements,

983
00:41:39,720 --> 00:41:42,180
I'm gonna include the requirements dock.

984
00:41:42,180 --> 00:41:44,400
If I don't, then I don't.

985
00:41:44,400 --> 00:41:47,400
But I've pulled down a container image,

986
00:41:47,400 --> 00:41:49,410
I'm telling it the workspace to use

987
00:41:49,410 --> 00:41:51,000
and I'm gonna pip install everything

988
00:41:51,000 --> 00:41:53,370
before I do a single thing,
before any code runs.

989
00:41:53,370 --> 00:41:56,280
So I have parody with my test environment,

990
00:41:56,280 --> 00:41:57,300
my prod environment.

991
00:41:57,300 --> 00:41:58,500
So you can imagine,

992
00:41:58,500 --> 00:42:00,270
you probably wouldn't do this for reels.

993
00:42:00,270 --> 00:42:01,200
You'd probably have a container

994
00:42:01,200 --> 00:42:03,480
that's hardened and everything.

995
00:42:03,480 --> 00:42:05,670
But we're moving fast here.

996
00:42:05,670 --> 00:42:08,373
Any questions on this approach?

997
00:42:11,160 --> 00:42:14,373
Any worries about doing this, this way?

998
00:42:15,270 --> 00:42:18,227
Leon's like, "Yeah, what do you think?"

999
00:42:19,567 --> 00:42:21,210
- [Audience Member 6] I'm
interested in the results.

1000
00:42:21,210 --> 00:42:23,210
- [Pat] You wanna watch it just explode?

1001
00:42:25,290 --> 00:42:27,270
Yeah, so files-

1002
00:42:27,270 --> 00:42:29,930
Yeah, go ahead. Oh yeah.

1003
00:42:29,930 --> 00:42:32,809
- [Audience Member 7] So do you prevent

1004
00:42:32,809 --> 00:42:35,025
from downloading any packages,

1005
00:42:35,025 --> 00:42:36,416
which might have (indistinct)

1006
00:42:36,416 --> 00:42:38,730
or you're not considering
this at this point?

1007
00:42:38,730 --> 00:42:39,600
- [Pat] Yep.

1008
00:42:39,600 --> 00:42:41,520
The question was how do
you prevent the agent

1009
00:42:41,520 --> 00:42:44,520
from downloading packages
that are either not approved

1010
00:42:44,520 --> 00:42:47,430
or are not from your artifact repository,

1011
00:42:47,430 --> 00:42:50,250
which is what most enterprises are doing.

1012
00:42:50,250 --> 00:42:52,500
That's where you'd want
to give a lot of thought

1013
00:42:52,500 --> 00:42:55,920
to locking down which
addresses it's allowed to use.

1014
00:42:55,920 --> 00:42:59,100
And that's why using a proxy is good.

1015
00:42:59,100 --> 00:43:01,800
Sandbox Runtime lets you say only allow

1016
00:43:01,800 --> 00:43:03,393
anything to this domain.

1017
00:43:04,230 --> 00:43:08,463
If it's going anywhere, it has
to go through this address.

1018
00:43:09,390 --> 00:43:10,503
That's one way.

1019
00:43:11,490 --> 00:43:13,680
You could create a separate tool

1020
00:43:13,680 --> 00:43:16,350
or a separate agent to
prepare the dependencies.

1021
00:43:16,350 --> 00:43:18,360
Do it in a secured manner,

1022
00:43:18,360 --> 00:43:20,490
get the trust of your security department

1023
00:43:20,490 --> 00:43:22,113
and maybe they manage it,

1024
00:43:22,993 --> 00:43:25,230
and that's a way to do it.

1025
00:43:25,230 --> 00:43:26,610
There's a lot of angles you could take,

1026
00:43:26,610 --> 00:43:29,103
but yeah, it's worth thinking about.

1027
00:43:30,480 --> 00:43:31,313
Yeah.

1028
00:43:31,313 --> 00:43:33,730
- [Audience Member 8] (indistinct)

1029
00:43:40,860 --> 00:43:42,750
- [Pat] Yeah, it's just in Docker,

1030
00:43:42,750 --> 00:43:44,160
it's probably not gonna go anywhere.

1031
00:43:44,160 --> 00:43:45,540
No, it's probably not.

1032
00:43:45,540 --> 00:43:48,090
But Docker is leveraging
my network hardware, right?

1033
00:43:48,090 --> 00:43:51,960
So we get to hand wave that, yeah.

1034
00:43:51,960 --> 00:43:53,850
But if you're launching
or spawning a container

1035
00:43:53,850 --> 00:43:58,740
in an ECS cluster, that's gonna
be managed for good reason,

1036
00:43:58,740 --> 00:44:00,030
but you wouldn't want it reaching out

1037
00:44:00,030 --> 00:44:01,950
through your NAT gateway
and just like PIP installing

1038
00:44:01,950 --> 00:44:03,210
whatever it feels like pip installing,

1039
00:44:03,210 --> 00:44:05,250
'cause I can tell you, it'll end poorly.

1040
00:44:05,250 --> 00:44:06,570
Did you have a question?

1041
00:44:06,570 --> 00:44:07,403
Okay.

1042
00:44:08,670 --> 00:44:09,503
Cool.

1043
00:44:11,310 --> 00:44:16,170
And so this executes
runs the Docker command

1044
00:44:16,170 --> 00:44:17,610
and then returns.

1045
00:44:17,610 --> 00:44:19,260
And again, I'm sorry we
had this while working,

1046
00:44:19,260 --> 00:44:21,333
but we can't get this laptop working.

1047
00:44:23,580 --> 00:44:25,050
It returns errors if it doesn't work.

1048
00:44:25,050 --> 00:44:27,210
Okay, so code execution,

1049
00:44:27,210 --> 00:44:30,250
I'll show you the Docker
file I've written for this

1050
00:44:32,220 --> 00:44:33,993
if that helps clarify.

1051
00:44:36,390 --> 00:44:38,553
It's roughly what you would expect.

1052
00:44:39,510 --> 00:44:42,870
You're setting the work
directory to Docker workspace.

1053
00:44:42,870 --> 00:44:46,710
If your code has to create things

1054
00:44:46,710 --> 00:44:51,270
and has to persist things,
that's a consideration too.

1055
00:44:51,270 --> 00:44:54,210
If its task is to
actually output more code

1056
00:44:54,210 --> 00:44:57,480
or output artifacts you
need for some other process,

1057
00:44:57,480 --> 00:44:59,850
telling it where to put
it is also important.

1058
00:44:59,850 --> 00:45:01,170
Go put it in S3.

1059
00:45:01,170 --> 00:45:02,070
You could put it locally,

1060
00:45:02,070 --> 00:45:04,770
but then when the container
dies, you lose it.

1061
00:45:04,770 --> 00:45:06,690
So these are the same
considerations you'd make

1062
00:45:06,690 --> 00:45:08,100
in any surveillance architecture.

1063
00:45:08,100 --> 00:45:10,110
But yeah, in our case,

1064
00:45:10,110 --> 00:45:12,783
a very simple docker file.

1065
00:45:14,790 --> 00:45:19,110
Okay, I'm gonna show
you how we've proposed,

1066
00:45:19,110 --> 00:45:20,190
in this case at least.

1067
00:45:20,190 --> 00:45:23,430
You build a multi-agent that does this.

1068
00:45:23,430 --> 00:45:24,780
Is this multi-agent one mine?

1069
00:45:24,780 --> 00:45:27,240
The red one? The one with errors?

1070
00:45:27,240 --> 00:45:28,753
- [Jean] No, no, I cleared them.

1071
00:45:28,753 --> 00:45:29,970
I staged the commit.

1072
00:45:29,970 --> 00:45:31,420
- [Pat] Got it, got it. Okay.

1073
00:45:33,000 --> 00:45:34,500
And I don't know if you've seen this yet,

1074
00:45:34,500 --> 00:45:36,903
and actually, why don't
we go through this?

1075
00:45:40,178 --> 00:45:41,011
Oops.

1076
00:45:41,011 --> 00:45:41,844
- [Audience Member 9] Question.

1077
00:45:41,844 --> 00:45:42,677
- [Pat] Yeah.

1078
00:45:42,677 --> 00:45:44,251
- [Audience Member 9]
Is all this gonna run

1079
00:45:44,251 --> 00:45:46,620
on our local machine?

1080
00:45:46,620 --> 00:45:48,690
Or is this running (indistinct).

1081
00:45:48,690 --> 00:45:51,236
Sometimes running VS Code.

1082
00:45:51,236 --> 00:45:53,895
This is the coding agent using,

1083
00:45:53,895 --> 00:45:56,758
is this gonna create a
container locally on a laptop

1084
00:45:56,758 --> 00:45:58,290
or this (indistinct)

1085
00:45:58,290 --> 00:46:01,110
- [Pat] Yes, for this very
trivial coding agent example,

1086
00:46:01,110 --> 00:46:05,100
we're just using the Docker
Runtime on your desktop.

1087
00:46:05,100 --> 00:46:06,930
Yeah, but-

1088
00:46:06,930 --> 00:46:08,580
- [Jean] Where might you
wanna host it, on AWS?

1089
00:46:08,580 --> 00:46:11,520
- [Pat] Yeah, you might wanna
host it on ECS or Fargate

1090
00:46:11,520 --> 00:46:14,853
or whatever favorite container
platform you're using.

1091
00:46:16,950 --> 00:46:18,750
Remember that when the agents...

1092
00:46:18,750 --> 00:46:21,120
When this is running in a CICD pipeline

1093
00:46:21,120 --> 00:46:23,670
or it's running in GitHub actions,

1094
00:46:23,670 --> 00:46:24,690
you've got to orchestrate

1095
00:46:24,690 --> 00:46:27,213
where that compute and
that runtime occurs.

1096
00:46:28,260 --> 00:46:30,345
Yeah. Does that answer your question?

1097
00:46:30,345 --> 00:46:31,178
Okay.

1098
00:46:31,178 --> 00:46:32,670
- [Jean] Yeah, 'cause
I think when I imagine

1099
00:46:32,670 --> 00:46:34,290
kind of some practical applications

1100
00:46:34,290 --> 00:46:35,550
of this kind of use case, right?

1101
00:46:35,550 --> 00:46:36,630
We have coding agents that run

1102
00:46:36,630 --> 00:46:37,740
locally all the time, right?

1103
00:46:37,740 --> 00:46:39,660
So it's why would I wanna do this?

1104
00:46:39,660 --> 00:46:41,130
I see the benefit here,

1105
00:46:41,130 --> 00:46:42,630
actually running in your...

1106
00:46:42,630 --> 00:46:44,400
Like a GitHub Action or things like that,

1107
00:46:44,400 --> 00:46:48,000
you want it to be able to
kind of spawn in a place

1108
00:46:48,000 --> 00:46:49,320
that's not local all the time.

1109
00:46:49,320 --> 00:46:51,570
Obviously we have one hour.

1110
00:46:51,570 --> 00:46:52,830
That would be crazy cool if we could talk

1111
00:46:52,830 --> 00:46:54,890
through all of this in one hour but...

1112
00:46:56,190 --> 00:46:58,429
- [Pat] Yeah, we're gonna try.

1113
00:46:58,429 --> 00:46:59,262
(Pat and Jean laughing)

1114
00:46:59,262 --> 00:47:01,980
But we have 10 minutes left
so I'm gonna keep going

1115
00:47:01,980 --> 00:47:04,323
and please raise your hand for questions.

1116
00:47:05,520 --> 00:47:07,950
I want to show you how to actually...

1117
00:47:07,950 --> 00:47:09,240
I don't think we've gone through

1118
00:47:09,240 --> 00:47:11,340
how to actually make
a request to Nova yet.

1119
00:47:11,340 --> 00:47:15,030
So we have a model helper here

1120
00:47:15,030 --> 00:47:18,030
where we're wrapping the
Strands Bedrock model class

1121
00:47:18,030 --> 00:47:20,770
and putting Nova 2.0 Lite in there

1122
00:47:21,930 --> 00:47:24,510
for a lot of heavy reasoning tasks.

1123
00:47:24,510 --> 00:47:26,730
If you're traversing a big context,

1124
00:47:26,730 --> 00:47:30,780
you're gonna want to actually
use reasoning on high.

1125
00:47:30,780 --> 00:47:31,613
- [Jean] Right, 'cause I mentioned this

1126
00:47:31,613 --> 00:47:32,880
in the keynote session today.

1127
00:47:32,880 --> 00:47:35,640
The Nova 2.0 Lite model we're
specifically talking about

1128
00:47:35,640 --> 00:47:39,180
in Pro and Omni that are
announced in preview,

1129
00:47:39,180 --> 00:47:40,620
there are extended reasoning models.

1130
00:47:40,620 --> 00:47:43,560
So you can turn reasoning on or off.

1131
00:47:43,560 --> 00:47:45,900
It defaults to off and then you might...

1132
00:47:45,900 --> 00:47:47,310
If you're familiar with using

1133
00:47:47,310 --> 00:47:48,900
other extended reasoning models,

1134
00:47:48,900 --> 00:47:50,400
you might be used to setting budget tokens

1135
00:47:50,400 --> 00:47:51,510
or something like that.

1136
00:47:51,510 --> 00:47:53,130
We do it a little bit differently.

1137
00:47:53,130 --> 00:47:56,700
So we have reasoning budgets

1138
00:47:56,700 --> 00:47:59,070
and so we group them
into three categories,

1139
00:47:59,070 --> 00:48:00,510
low, medium, and high.

1140
00:48:00,510 --> 00:48:02,370
And so they'll use different amount

1141
00:48:02,370 --> 00:48:04,740
of tokens in their reasoning.

1142
00:48:04,740 --> 00:48:06,900
And so this is kind of T-shirt
sizing that you can use

1143
00:48:06,900 --> 00:48:09,250
to control the amount of
reasoning that's done.

1144
00:48:10,920 --> 00:48:13,440
And don't always think that
more reasoning is better,

1145
00:48:13,440 --> 00:48:14,610
for obvious reasons.

1146
00:48:14,610 --> 00:48:16,170
Output tokens.

1147
00:48:16,170 --> 00:48:19,470
Reasoning high can use up
to 32,000 output tokens.

1148
00:48:19,470 --> 00:48:22,350
So we can imagine really complex problems.

1149
00:48:22,350 --> 00:48:27,330
It's a really cool thing,
but it's cost and time.

1150
00:48:27,330 --> 00:48:28,549
- [Pat] Yeah, and we've actually found

1151
00:48:28,549 --> 00:48:29,793
if you use too much reasoning,

1152
00:48:29,793 --> 00:48:34,500
that is a possibility and
the outputs can degrade.

1153
00:48:34,500 --> 00:48:35,950
So something to keep in mind.

1154
00:48:36,858 --> 00:48:38,590
- [Jean] Yeah, question.

1155
00:48:38,590 --> 00:48:41,286
- [Audience Member 10] We
have just one model deployment

1156
00:48:41,286 --> 00:48:43,619
for all the previous agents.

1157
00:48:45,797 --> 00:48:49,140
So now you have to show four models?

1158
00:48:49,140 --> 00:48:51,630
- [Jean] Yeah, these are
just different configurations

1159
00:48:51,630 --> 00:48:54,120
of the same model for helper.

1160
00:48:54,120 --> 00:48:55,230
Just to make things a little bit easier.

1161
00:48:55,230 --> 00:48:56,790
The question was just if we had four.

1162
00:48:56,790 --> 00:48:59,740
Previously, I was just
re-using reasoning medium

1163
00:49:00,720 --> 00:49:02,973
and so I was using the same model.

1164
00:49:02,973 --> 00:49:04,500
- [Audience Member 10] And
all the agents use that?

1165
00:49:04,500 --> 00:49:06,360
- [Jean] Right.
- [Pat] Yeah.

1166
00:49:06,360 --> 00:49:08,280
- [Jean] And now you can also...

1167
00:49:08,280 --> 00:49:09,300
I think it's a really good question too

1168
00:49:09,300 --> 00:49:10,710
when we think about multi-agent,

1169
00:49:10,710 --> 00:49:12,480
'cause you can tune it
for the actual task.

1170
00:49:12,480 --> 00:49:15,810
Maybe you wanna have
more complex reasoning

1171
00:49:15,810 --> 00:49:16,940
for the initial planning
phase that you want

1172
00:49:16,940 --> 00:49:20,220
to do less reasoning for
the act or the validation.

1173
00:49:20,220 --> 00:49:21,450
You don't need that much reasoning

1174
00:49:21,450 --> 00:49:23,450
if you wanna add that at the end, right?

1175
00:49:25,320 --> 00:49:27,570
- [Pat] Sorry, I'm trying to
make sure I get all the hands.

1176
00:49:27,570 --> 00:49:30,810
Okay, let's talk about...

1177
00:49:30,810 --> 00:49:33,783
Where was I with the actual agent here?

1178
00:49:37,500 --> 00:49:42,180
Yeah, so we understand roughly

1179
00:49:42,180 --> 00:49:44,640
how the tool would be orchestrated

1180
00:49:44,640 --> 00:49:46,890
so you can get code execution.

1181
00:49:46,890 --> 00:49:50,519
In this example, I've taken
the liberty to make a...

1182
00:49:50,519 --> 00:49:52,650
Create enhanced plan agent.

1183
00:49:52,650 --> 00:49:56,730
So some of the bottlenecks
that Jean's example ran into

1184
00:49:56,730 --> 00:49:58,920
was how does the model even know

1185
00:49:58,920 --> 00:50:00,570
what the repost structure is like?

1186
00:50:00,570 --> 00:50:02,880
Well, now we're getting into

1187
00:50:02,880 --> 00:50:04,350
basic file system tools, right?

1188
00:50:04,350 --> 00:50:07,410
So any of these IDE tools
that you're working with,

1189
00:50:07,410 --> 00:50:10,350
they have show me a directory tree.

1190
00:50:10,350 --> 00:50:11,910
Show me the first three files,

1191
00:50:11,910 --> 00:50:13,710
show me the first 100 rows of the file.

1192
00:50:13,710 --> 00:50:16,680
Look for anything in the
file that has this in it.

1193
00:50:16,680 --> 00:50:17,760
Then expand and give me

1194
00:50:17,760 --> 00:50:21,090
like the previous in following 20 lines.

1195
00:50:21,090 --> 00:50:23,040
So you very quickly
find yourself building.

1196
00:50:23,040 --> 00:50:26,280
You have to build those
tools for the agent to use.

1197
00:50:26,280 --> 00:50:28,500
Because like we said, you can't just dump

1198
00:50:28,500 --> 00:50:32,370
the 15,000 line Python
files into the context

1199
00:50:32,370 --> 00:50:33,600
and expect it to perform well.

1200
00:50:33,600 --> 00:50:37,290
It's gonna be expensive and
it's just not gonna be accurate.

1201
00:50:37,290 --> 00:50:40,620
So you very quickly find
yourself building tools

1202
00:50:40,620 --> 00:50:41,943
that the agent can use.

1203
00:50:42,990 --> 00:50:46,500
And so what we show here is
we have some file system tools

1204
00:50:46,500 --> 00:50:50,880
called show directory tree,
GIT directory summary.

1205
00:50:50,880 --> 00:50:53,550
Like how many files are in this thing?

1206
00:50:53,550 --> 00:50:55,860
We are using some GIT tools.

1207
00:50:55,860 --> 00:51:00,860
So as you move off of GitHub MCP

1208
00:51:00,914 --> 00:51:02,790
to your local workspace,

1209
00:51:02,790 --> 00:51:04,680
like any developer actually does,

1210
00:51:04,680 --> 00:51:07,140
you're gonna want GIT
tools and that's scary

1211
00:51:07,140 --> 00:51:09,390
'cause you can do
dangerous things with GIT,

1212
00:51:09,390 --> 00:51:11,850
but in this case, all
we're doing is clone.

1213
00:51:11,850 --> 00:51:13,623
So we're just cloning the repo.

1214
00:51:15,510 --> 00:51:16,710
We're cloning the repo down

1215
00:51:16,710 --> 00:51:17,543
and then we're telling it,

1216
00:51:17,543 --> 00:51:19,468
"Hey, use these tools to explore,

1217
00:51:19,468 --> 00:51:21,420
do a code analysis.

1218
00:51:21,420 --> 00:51:22,890
Read the issue and tell me

1219
00:51:22,890 --> 00:51:25,227
where I should be making changes and how."

1220
00:51:26,460 --> 00:51:27,293
We're all-

1221
00:51:27,293 --> 00:51:28,680
- [Jean] One question
I'll throw in there too.

1222
00:51:28,680 --> 00:51:31,557
I think it's worthwhile to explore

1223
00:51:31,557 --> 00:51:32,970
and I'm just gonna call
it out there, right?

1224
00:51:32,970 --> 00:51:36,180
We're no longer passing

1225
00:51:36,180 --> 00:51:39,900
the entire GitHub MCP
tool config, all 40 files.

1226
00:51:39,900 --> 00:51:41,220
We're narrowing it down, right?

1227
00:51:41,220 --> 00:51:44,040
You can see he's saying issue
read, add issue comment,

1228
00:51:44,040 --> 00:51:46,710
there are still value
to using the MCP server.

1229
00:51:46,710 --> 00:51:49,620
Those tools provide a lot of utility,

1230
00:51:49,620 --> 00:51:52,599
but the ones that are
gonna require a lot of data

1231
00:51:52,599 --> 00:51:54,000
and everything that's passing through

1232
00:51:54,000 --> 00:51:56,430
and can have this benefit
we can take advantage

1233
00:51:56,430 --> 00:51:58,470
of the local code environment, right?

1234
00:51:58,470 --> 00:52:00,540
It's better to use the tools, right?

1235
00:52:00,540 --> 00:52:01,840
That Pat is talking about.

1236
00:52:03,420 --> 00:52:05,430
- [Pat] How many have
built file system tools

1237
00:52:05,430 --> 00:52:08,130
or anything for their
agents and gone that far?

1238
00:52:08,130 --> 00:52:09,003
How has it gone?

1239
00:52:10,188 --> 00:52:11,172
Yeah.

1240
00:52:11,172 --> 00:52:13,620
- [Audience Member 11]
We never thought about

1241
00:52:13,620 --> 00:52:14,760
doing everything in (indistinct).

1242
00:52:14,760 --> 00:52:17,801
So the first step was always (indistinct)

1243
00:52:17,801 --> 00:52:21,353
I didn't even think about
(indistinct) specific parts

1244
00:52:21,353 --> 00:52:25,323
because I saw the model
wouldn't give any context.

1245
00:52:25,323 --> 00:52:27,734
- [Pat] Yeah, yeah.

1246
00:52:27,734 --> 00:52:29,910
Yeah, and even...

1247
00:52:29,910 --> 00:52:32,370
So the other step you could
take is we were talking before,

1248
00:52:32,370 --> 00:52:35,412
like a lot of repos
have a contributing MD.

1249
00:52:35,412 --> 00:52:37,413
Tell the agent to take a look at that.

1250
00:52:37,413 --> 00:52:39,780
Until super intelligence is here,

1251
00:52:39,780 --> 00:52:41,801
all of these agents will
be coupled very tightly

1252
00:52:41,801 --> 00:52:44,010
to the repository they're associated with.

1253
00:52:44,010 --> 00:52:45,530
That's just inevitable.

1254
00:52:45,530 --> 00:52:47,214
You're gonna have to prompt it

1255
00:52:47,214 --> 00:52:49,290
on guidelines for contributing.

1256
00:52:49,290 --> 00:52:50,970
You'll probably have more information

1257
00:52:50,970 --> 00:52:52,983
on where to find things in the prompt.

1258
00:52:54,150 --> 00:52:56,430
You're gonna have to
couple this agent tightly

1259
00:52:56,430 --> 00:53:00,230
to your repo unless you've completely...

1260
00:53:01,350 --> 00:53:03,660
Your development practices are
completely ubiquitous across

1261
00:53:03,660 --> 00:53:06,183
all code bases, which is rarely the case.

1262
00:53:07,650 --> 00:53:10,860
Okay. I'm gonna quickly get through here.

1263
00:53:10,860 --> 00:53:13,530
Lastly, I guess I'll show you

1264
00:53:13,530 --> 00:53:15,330
the agent prompt if that would help.

1265
00:53:15,330 --> 00:53:17,550
But we're creating a Strands agent.

1266
00:53:17,550 --> 00:53:19,590
We're using reasoning low.

1267
00:53:19,590 --> 00:53:22,088
You could use high. High
is gonna take a while.

1268
00:53:22,088 --> 00:53:24,900
It's also gonna be
generally more expensive

1269
00:53:24,900 --> 00:53:28,260
'cause you're using more
tokens to arrive at the answer.

1270
00:53:28,260 --> 00:53:29,701
So let's take a look at the prompt

1271
00:53:29,701 --> 00:53:31,770
and then we're at just
under four minutes left.

1272
00:53:31,770 --> 00:53:34,923
So I'll try and go through this quickly.

1273
00:53:36,946 --> 00:53:40,650
And I'll do word wrap here
so we can actually see.

1274
00:53:40,650 --> 00:53:44,910
Yeah, so you are an
enhanced planning agent

1275
00:53:44,910 --> 00:53:47,130
with GitHub issue validation capabilities.

1276
00:53:47,130 --> 00:53:49,533
I'm sort of telling it what an issue is,

1277
00:53:51,090 --> 00:53:53,070
determine whether it's
a bug or a user error,

1278
00:53:53,070 --> 00:53:55,297
'cause right, a lot of issues are like,

1279
00:53:55,297 --> 00:53:57,870
"Yo, go check the read me."

1280
00:53:57,870 --> 00:53:59,490
This is the wrong way to use it.

1281
00:53:59,490 --> 00:54:02,070
So validating whether
this is a legitimate issue

1282
00:54:02,070 --> 00:54:03,210
or if it's a feature.

1283
00:54:03,210 --> 00:54:06,750
You can imagine too, these
are tracks you might go down

1284
00:54:06,750 --> 00:54:09,060
where you're gonna handle
features completely differently.

1285
00:54:09,060 --> 00:54:09,893
Right?

1286
00:54:09,893 --> 00:54:12,060
Or you're gonna handle
bug fixes with some level

1287
00:54:12,060 --> 00:54:15,600
of urgency in assessing
the urgency of the issue.

1288
00:54:15,600 --> 00:54:16,433
But again-

1289
00:54:16,433 --> 00:54:17,328
- [Jean] And I don't...

1290
00:54:17,328 --> 00:54:18,600
Yeah, I wanna call this out too.

1291
00:54:18,600 --> 00:54:23,040
We might notice models
really love the users, right?

1292
00:54:23,040 --> 00:54:24,900
And if we have an agent
that's just gonna go

1293
00:54:24,900 --> 00:54:26,970
and change the repository
every single time the user

1294
00:54:26,970 --> 00:54:30,360
makes a mistake and it's just
not using things correctly,

1295
00:54:30,360 --> 00:54:31,290
that'd be way out of hand, right?

1296
00:54:31,290 --> 00:54:32,580
We don't want it to do that.

1297
00:54:32,580 --> 00:54:35,790
And so it is an important consideration

1298
00:54:35,790 --> 00:54:37,698
because a lot of times people...

1299
00:54:37,698 --> 00:54:39,810
I don't know if you guys are
managing any open source repos,

1300
00:54:39,810 --> 00:54:41,250
but they might be commenting
things all the time

1301
00:54:41,250 --> 00:54:43,560
that are just like, that's
not how you do this.

1302
00:54:43,560 --> 00:54:44,940
- [Pat] Yeah.

1303
00:54:44,940 --> 00:54:47,370
And we have some repositories
from SaaS at Amazon

1304
00:54:47,370 --> 00:54:50,490
who are already managing their
repository in this manner.

1305
00:54:50,490 --> 00:54:53,220
So I can send you an example.

1306
00:54:53,220 --> 00:54:54,179
- [Jean] Wait, we had a question too.

1307
00:54:54,179 --> 00:54:55,785
- [Pat] Oh yeah.

1308
00:54:55,785 --> 00:54:58,800
- [Audience Member 12] Basically
what you're doing is coding

1309
00:54:58,800 --> 00:55:00,780
another team member of your team,

1310
00:55:00,780 --> 00:55:04,624
which will be responsible for
resolving some specific task

1311
00:55:04,624 --> 00:55:09,102
that you're assigning to it.

1312
00:55:09,102 --> 00:55:10,352
- [Jean] Right.

1313
00:55:11,541 --> 00:55:13,055
- [Audience Member 12]
Perfect for the night.

1314
00:55:13,055 --> 00:55:14,910
(Pat and Jean laughing)

1315
00:55:14,910 --> 00:55:17,910
- [Pat] Yeah, there's
some dynamism here though

1316
00:55:17,910 --> 00:55:19,350
that changes over time, right?

1317
00:55:19,350 --> 00:55:21,240
If the things that you
bake into your prompt,

1318
00:55:21,240 --> 00:55:22,440
you're gonna have to keep revisiting this.

1319
00:55:22,440 --> 00:55:24,960
We haven't even talked
about agent evaluation,

1320
00:55:24,960 --> 00:55:25,793
which is analogous

1321
00:55:25,793 --> 00:55:27,390
to employee performance evaluation, right?

1322
00:55:27,390 --> 00:55:30,180
So not sidestepping all that,

1323
00:55:30,180 --> 00:55:33,630
but yeah, a lot of it is
very analogous to that.

1324
00:55:33,630 --> 00:55:34,463
Yeah.

1325
00:55:35,617 --> 00:55:36,450
- [Audience Member 13] Can you do this

1326
00:55:37,825 --> 00:55:39,742
when a PR is submitted?

1327
00:55:41,491 --> 00:55:43,908
(indistinct)

1328
00:55:45,421 --> 00:55:46,680
- [Jean] So the question
is if you can do this

1329
00:55:46,680 --> 00:55:48,570
when a PR is submitted.

1330
00:55:48,570 --> 00:55:50,700
I think I would see a
different application maybe

1331
00:55:50,700 --> 00:55:52,680
when a PR is submitted doing a code review

1332
00:55:52,680 --> 00:55:54,030
or things of that nature.

1333
00:55:54,030 --> 00:55:55,920
I think what we're looking at here

1334
00:55:55,920 --> 00:55:59,040
is almost reactive to specific issues

1335
00:55:59,040 --> 00:56:00,300
that are opened on our repository.

1336
00:56:00,300 --> 00:56:02,520
Something is reported as a failure.

1337
00:56:02,520 --> 00:56:05,250
How can we go and create the PR

1338
00:56:05,250 --> 00:56:07,860
that would have the fix
and then have the human go

1339
00:56:07,860 --> 00:56:10,650
and kind of do the review and emerge it.

1340
00:56:10,650 --> 00:56:12,930
- [Pat] Yep. Yep.

1341
00:56:12,930 --> 00:56:15,120
- [Jean] Okay. We are out of time.

1342
00:56:15,120 --> 00:56:16,800
- [Pat] Yeah, we're more or
less out of time I think.

1343
00:56:16,800 --> 00:56:18,693
Probably a good place to stop.

1344
00:56:19,950 --> 00:56:21,457
Any questions? Yeah, go ahead.

1345
00:56:21,457 --> 00:56:23,850
- [Audience Member 14] (indistinct)

1346
00:56:23,850 --> 00:56:25,064
- [Pat] Sorry, say that again?

1347
00:56:25,064 --> 00:56:26,330
- [Audience Member 14] Is the
(indistinct) for this code?

1348
00:56:27,270 --> 00:56:29,219
- [Pat] Yeah, we'll publish
the repo for this code.

1349
00:56:29,219 --> 00:56:31,113
Yeah, yeah. We'll make it available.

1350
00:56:32,011 --> 00:56:33,840
- [Audience Member 15] (indistinct)

1351
00:56:33,840 --> 00:56:36,469
- [Jean] Yes. Yeah, we can do all of that.

1352
00:56:36,469 --> 00:56:38,283
We'll do that.

1353
00:56:38,283 --> 00:56:39,116
- [Pat] We're just gonna push it

1354
00:56:39,116 --> 00:56:41,639
to the LangChain repo and just...

1355
00:56:41,639 --> 00:56:43,041
- [Jean] No, just kidding.

1356
00:56:43,041 --> 00:56:44,520
- [Pat] Kidding.

1357
00:56:44,520 --> 00:56:46,500
Yeah. Well, thank you
for joining, everybody.

1358
00:56:46,500 --> 00:56:47,670
It's been an absolute pleasure.

1359
00:56:47,670 --> 00:56:50,250
I'm sorry we had the
technology issues, but...

1360
00:56:50,250 --> 00:56:51,330
- [Jean] If you have...

1361
00:56:51,330 --> 00:56:54,300
The point of this wasn't to
go too much into the features

1362
00:56:54,300 --> 00:56:55,410
of the Nova models, right?

1363
00:56:55,410 --> 00:56:57,420
It's not a breakout session,
it's talking about the code.

1364
00:56:57,420 --> 00:57:00,450
If you have questions about
any of the new releases,

1365
00:57:00,450 --> 00:57:03,600
the quick PSA, we have
a booth at the expo.

1366
00:57:03,600 --> 00:57:06,780
People there all the time
that can answer questions.

1367
00:57:06,780 --> 00:57:09,570
But yeah, I hope that you got some value

1368
00:57:09,570 --> 00:57:11,190
out of this and had a good time.

1369
00:57:11,190 --> 00:57:12,512
I appreciate it.

1370
00:57:12,512 --> 00:57:14,408
(audience applauding)

