# AWS re:Invent 2025 技术会议总结

## 会议概述

本次会议分享了一个基于AWS IoT服务构建的养老院跌倒检测系统的创业项目。演讲者的灵感来源于10年前祖母在独立生活设施中跌倒后无人发现长达6-8小时的经历，导致肩部骨折并从此一蹶不振。传统养老设施虽然配备了压力地垫、床边警报器和红外开关等设备，但这些技术陈旧、易损坏且成本高昂。演讲者提出使用毫米波雷达设备来解决这一问题，该设备安装在天花板上，可以通过雷达波反射识别房间内人员的XY坐标和Z轴质心位置，并通过机器学习判断是否发生跌倒。

该项目针对两类用户角色：养老院管理者需要报告、护理优先级排序和合规记录功能（可通过批处理实现）；护士则需要实时了解跌倒事件并进行护理优先级排序（需要近实时处理）。演讲者详细介绍了从最小可行产品(MVP)到最小可爱产品(MLP)的演进过程，展示了如何利用AWS IoT Core、Lambda、Kinesis Firehose、S3、Athena、CloudWatch等服务构建可扩展的多租户架构，并实现了实时跌倒警报升级机制。

## 详细时间线与关键要点

00:00 - 02:30 | 项目背景与问题陈述
- 分享祖母跌倒事故的个人经历，引出养老院跌倒检测的痛点
- 传统养老设施配备压力地垫、床边警报和红外开关，但设备陈旧、昂贵且易损坏
- 大多数跌倒发生在夜间，是60岁以上老年人受伤的主要原因

02:30 - 04:00 | 技术解决方案介绍
- 采用毫米波雷达设备，外形类似烟雾报警器，安装在天花板
- 设备发射雷达波并通过反射识别人体和物体的XY坐标及Z轴质心
- 内置机器学习模型可判断是否发生跌倒并发送事件通知

04:00 - 05:30 | 用户角色分析
- 养老院管理者：需要报告、护理优先级排序、跌倒合规记录（批处理需求）
- 护士：需要实时跌倒通知和护理优先级排序（近实时需求）

05:30 - 07:00 | AWS IoT Core架构
- IoT Core提供托管的MQTT/WebSocket端点
- IoT设备发布事件到端点，通过规则配置处理事件，并通过操作处理这些事件
- 事件负载包含：设备ID、房间位置(XYZ坐标)、事件名称、时间戳和事件类型

07:00 - 09:30 | 最小可行产品(MVP)开发
- 使用Grafana仪表板连接Athena和CloudWatch快速验证概念
- 制作演示视频展示跌倒检测功能
- MVP架构：设备→IoT端点→Lambda转换函数→警报发送
- 同时将JSON负载发送到CloudWatch Logs，利用CloudWatch日志指标过滤器创建自定义指标
- 通过Kinesis Firehose将事件持久化到S3供Athena查询

09:30 - 11:00 | MVP的优势与局限
- 优势：理解数据、智能查询、回答业务问题、促进客户对话
- 局限：仅支持单租户、无法扩展Grafana仪表板

11:00 - 13:30 | 事件丰富化与多租户支持
- 设备本身不理解租户概念，需要通过Lambda函数丰富事件负载
- 将租户信息添加到MQTT主题路径开头
- 为每个租户创建独立的Firehose传输流，保持数据隔离
- 通过SNS实现关键事件的实时处理
- 在事件中添加元数据(meta key)，包括丰富化时间戳和追踪ID

13:30 - 16:00 | S3数据分区策略
- Hive风格分区：使用标签(如year=2025)，需要手动添加新分区
- 非Hive分区投影：AWS服务(如CloudTrail、ALB日志)常用方法
- 分区投影优势：Athena自动识别分区，无需手动添加，避免遗漏数据
- Firehose支持动态分区，可从JSON负载中提取年、月、日、设备ID等信息
- 分区路径示例：presence-alerts/日期/设备ID/数据文件

16:00 - 18:30 | 跌倒警报升级机制
- 跌倒警报发送到SNS主题
- SQS队列通过过滤策略仅接收跌倒类型事件
- 事件流：SNS→SQS→Lambda→DynamoDB表
- 使用EventBridge Pipes监听DynamoDB流(替代传统Lambda方式)
- Pipes触发Step Functions工作流实现多级升级

18:30 - 20:00 | Step Functions升级流程
- AWS在6个月前更新了Step Functions控制台，提供更好的数据可视化
- 升级流程：第一级通知→延迟→第二级通知→延迟→第三级通知
- 每个级别前检查是否有人已确认警报，如已确认则终止流程

20:00 - 22:00 | 最小可爱产品(MLP)展示
- 从Grafana仪表板演进到完整的Web应用程序
- 设置界面：展示升级流程的前端用户界面
- 活动时间线报告：显示居民在床上、椅子上的时间，追踪移动模式
- 仪表板功能：帮助识别异常行为模式并发送预警

22:00 - 24:00 | 关键经验总结
- MVP证明可行性，MLP使产品不可或缺
- 低代码方式快速获得认可，人人都喜欢仪表板和数据
- 利用CloudWatch指标过滤器创建自定义指标，被低估但非常实用
- 区分批处理和实时需求，实时处理增加复杂性，仅在必要时使用
- 保持简单，仅在需要时增加复杂性
- 可视化事件流至关重要
- 丰富事件负载，添加时间戳和系统追踪信息，便于后期调试

24:00 - 25:00 | 结束语
- 引用格言："MVP证明它有效，MLP使它不可或缺"
- 提及播客项目和联合创始人Georgia的贡献
- 邀请听众会后交流