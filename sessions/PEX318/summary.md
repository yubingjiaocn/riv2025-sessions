# AWS re:Invent 2025 会议总结：AI Agent 在 MSP 中的应用

## 会议概述

本次会议由 AWS MSP 合作伙伴项目全球技术负责人 Bapadita (Bapa) 和 AWS 合作伙伴解决方案架构师 Jen Jing Nying 共同主持，重点探讨了 Agent AI 和生成式 AI 如何变革托管服务提供商 (MSP) 的运营模式。

会议展示了 MSP 行业正处于关键转型期。从 1990 年代的标准化运维，到 2000-2010 年代的 DevOps，MSP 一直依赖人工驱动的运营模式。而现在，随着生成式 AI 和 Agent AI 的出现，行业迎来了新的 S 曲线增长点。这次变革的核心不是用 AI 替代人类，而是建立人机协作的策略，让 AI 处理重复性工作，使技术人员能够专注于更复杂的问题解决。

早期数据显示，已实施 AI 解决方案的 MSP 合作伙伴取得了显著成效：需要人工干预的工单减少了 45%，客户报告的平均成本降低了 30%，平均故障解决时间 (MTTR) 改善了 60%。这些改进不仅提升了运营效率，还显著提高了客户满意度和留存率。

会议通过实际代码演示和现场操作，详细展示了一个 AI Ops 自动化解决方案。该方案使用 Amazon Bedrock、多 Agent 协作架构、知识库集成和 MCP (Model Context Protocol) 服务器，实现了从故障检测、根因分析、修复计划生成到自动执行的全流程自动化。演示场景模拟了 API Gateway 访问被拒绝的真实故障，展示了 AI Agent 如何在无人工干预的情况下自动诊断问题、生成修复方案、执行修复并关闭工单。

## 详细时间线与关键要点

[00:00 - 02:30] 开场与背景介绍
- 演讲者自我介绍：Bapadita (全球 MSP 技术负责人) 和 Jen Jing Nying (合作伙伴解决方案架构师)
- 现场调查：了解参会者背景，包括 MSP 合作伙伴数量和 AI 使用情况
- 极少数参会者已在 MSP 场景中使用 Agent AI

[02:30 - 05:00] MSP 演进历史
- 展示 MSP 30 年演进的双 S 曲线模型
- 第一条曲线：1990 年代标准化 → 2000 年代 LinOps → 2010 年代 DevOps（人工驱动）
- 第二条曲线：2015 年 RPA/流程挖掘 → 当前生成式 AI 和 Agent AI（智能驱动）
- 强调目标是人机协作而非替代人类

[05:00 - 07:30] AI 在 MSP 中的应用场景
- AI Ops：动态 Runbook 生成、根因分析、自动化故障处理
- 知识库管理：打破团队孤岛，整合分散的流程和工具知识
- 智能助手：赋能一线支持人员，减少向二线/三线升级的工单数量
- 所有案例均来自已投产的合作伙伴实际应用

[07:30 - 09:00] 早期成果数据
- 45% 的工单不再需要人工干预
- 客户成本平均降低 30%（通过智能资源和成本管理）
- MTTR 改善 60%，显著提升客户满意度
- 技术人员可专注于更高价值的复杂工作

[09:00 - 11:30] AI Ops 用例介绍
- 聚焦事件管理、事件响应和问题管理的自动化
- 传统模式：客户呼叫 → 服务台记录 → 创建工单 → 转给二线/三线
- AI 驱动模式：通过 Agent AI 层赋能一线团队，直接解决问题
- 演示场景：Web 应用故障的自动化处理流程

[11:30 - 14:00] 解决方案架构概览
- 用户通过 UI 界面查询问题（如"我的应用无法访问"）
- Supervisor Agent 理解意图并协调多个专业 Agent
- 专业 Agent 分工：故障排查、CloudWatch 告警检查、Jira 工单创建、修复执行、工单关闭
- 所有 Agent 由 Amazon Bedrock 和知识库提供支持
- 架构强调路由、编排和修复的智能化

[14:00 - 18:00] 演示环境准备
- 展示静态网站托管的宠物图片应用（通过 API Gateway 从 S3 获取随机图片）
- 当前状态：无资源策略限制，无告警
- 手动添加 API Gateway 拒绝策略模拟故障
- 刷新页面后出现 403 访问拒绝错误
- 通过终端发送大量请求触发 CloudWatch 告警

[18:00 - 20:30] 传统方法 vs AI 方法对比
- 传统方法：静态自动化脚本，针对特定错误硬编码，脆弱且不可扩展
- 问题：API 变更后失效、无法处理新问题、系统孤立、不安全
- AI 方法：智能化、自适应、可扩展、安全的自动化运维
- 展示 Streamlit UI 界面，准备全自动化演示

[20:30 - 25:00] 代码深度解析 - Supervisor Agent
- 使用 Strands 框架（AWS 开源 SDK）部署 Agent
- 支持内置工具和 MCP 原生集成
- 使用 Anthropic Claude Sonnet 模型
- Supervisor Agent 作为入口点，协调所有子 Agent
- 分析查询意图，确定需要哪些专业 Agent（成本、安全、监控等）
- 支持多 Agent 协作：合并多个 Agent 响应，生成综合结果

[25:00 - 28:00] AI 理解层 - 查询意图分析
- 将非结构化文本转换为结构化 JSON 格式
- 提取关键信息：AWS 服务、操作类型、参数、意图类别、优先级
- 强制 JSON 格式输出，减少错误
- 内置容错机制：JSON 解析失败时回退到关键词分析
- 适配 MSP 大规模运营场景（多客户账户、不同安全级别）

[28:00 - 32:00] 多 Agent 协调与上下文增强
- Supervisor Agent 不仅做简单路由，还增强上下文信息
- 示例：成本查询时自动提取和传递时间参数
- 为专业 Agent 提供实时 AWS 文档支持
- 使用 MCP 服务器获取最新 API 文档，确保准确性
- 多租户环境下的凭证隔离：客户凭证 vs MSP 凭证（如 Jira）

[32:00 - 36:00] 知识集成层 - 文档访问策略
- 分层文档访问策略：优先使用 MCP 客户端获取实时 AWS 文档
- 备用方案：本地缓存的文档助手（S3 或本地存储）
- 确保 Agent 始终获得正确的知识支持
- 推荐使用 AWS Labs MCP 服务器（github.com/awslabs/mcp）
- 演示中使用文档 MCP 服务器

[36:00 - 41:00] 修复计划生成 - 安全防护机制
- 基于知识库结果和告警上下文生成修复计划
- 关键安全措施 1：仅执行知识库中明确提到的操作（防止幻觉）
- 关键安全措施 2：限制允许的服务和资源（如 API Gateway、EC2、RDS）
- 可按客户定制允许的自动化范围
- 知识库置信度阈值（如 >0.5），低于阈值则转人工处理
- 仅允许可逆操作，禁止删除操作

[41:00 - 44:00] 执行层 - 多层验证机制
- 每个步骤都经过验证
- 每个操作都被记录
- 出现问题立即停止
- Supervisor Agent 在执行前进行最终验证
- 验证被拒绝时创建 Jira 工单转人工处理
- 完整的审计跟踪，记录所有 Agent 操作

[44:00 - 47:00] 工作流协调 - 状态共享
- 使用 Strands 的 Workflow Graph 协调多步骤流程
- 节点包括：Jira 创建、知识库搜索、修复执行、工单关闭
- Agent 之间共享内存和状态
- 确保跨多客户账户的上下文连续性
- 避免混淆不同客户的工单和修复步骤

[47:00 - 50:00] 现场演示准备
- 代码将发布到 AWS GitHub Samples（年底前）
- 提供早期访问机会（联系演讲者）
- 代码库约 7900 行，接近生产级别
- 重新触发告警以确保演示环境就绪
- 准备展示 Streamlit UI 和终端后台日志

[50:00+] 演示总结
- 完整展示从告警检测到自动修复的端到端流程
- 强调零人工干预的全自动化能力
- 展示所有代码函数的实际执行过程
- 验证 AI Agent 协作的实际效果