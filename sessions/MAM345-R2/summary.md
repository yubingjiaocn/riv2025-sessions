# AWS re:Invent 2025 - 使用 Amazon Bedrock AgentCore 构建智能代理系统

## 会议概述

本次技术会议由 Deepali Talande、Franz Stefan 和 Jan Thewes 三位 AWS 专家主讲，重点演示如何使用 Amazon Bedrock AgentCore 为现有遗留应用程序创建智能 AI 代理，而无需重写任何现有代码。会议采用实践编程的方式，展示了从零开始构建 AI 代理到部署云端的完整流程。

演讲者首先介绍了智能代理循环（Agentic Loop）的核心概念，包括提示（Prompt）、代理（Agent）、模型（Model）和工具（Tools）之间的交互机制。随后详细讲解了三个关键技术组件：Strands SDK（用于定义代理能力）、AgentCore（提供可扩展的运行时环境）和 MCP（模型上下文协议，用于连接外部服务）。整个会议通过构建独角兽商店的遗留应用集成案例，生动展示了如何在不修改原有系统的情况下，为其添加智能对话能力。

## 详细时间线与关键要点

### 00:00-10:00 理论基础与概念介绍
- **智能代理循环机制**：用户提示 → 代理控制器 → 模型推理 → 工具调用 → 任务完成的循环过程
- **Strands SDK 特性**：开源 Python SDK，支持模型无关的智能代理构建方法
- **AgentCore 核心功能**：AWS 托管的运行时基础设施，提供自动扩展、会话沙箱、多用户访问等企业级特性
- **MCP 协议作用**：开放标准协议，定义代理与外部应用和服务的通信方式，提供工具、资源和提示三大核心能力

### 10:00-25:00 基础代理开发实践
- **环境搭建**：安装 strands、strands-tools、bedrock-agentcore 三个核心 Python 包
- **最简代理实现**：仅需 4 行代码创建基本代理 - 导入 Agent 类、实例化、获取用户输入、传递给代理
- **工具集成演示**：添加 HTTP 请求工具获取实时天气信息，展示代理如何通过工具扩展能力
- **系统提示配置**：设置代理人格和行为边界，限制只使用无需认证的公开 API

### 25:00-35:00 云端部署与 AgentCore 集成
- **本地到云端转换**：导入 BedrockAgentCoreApp 类，添加 @app.entry_point 装饰器
- **HTTP 服务器启动**：代理在 8080 端口监听，提供 /ping 健康检查和 /invocations 调用端点
- **AgentCore CLI 工具**：使用 bedrock-agentcore-starter-toolkit 简化部署配置过程
- **部署配置选项**：Python 环境部署 vs Docker 容器部署，执行角色、S3 存储桶、认证方式等配置

### 35:00-45:00 遗留应用集成案例
- **独角兽商店应用**：基于 Java 的 ECS 遗留电商应用，包含数据库和 Web 界面
- **Amazon Q Developer 应用**：自动生成遗留应用的 OpenAPI 规范文档
- **AgentCore Gateway 配置**：将 OpenAPI 规范作为 REST API 目标添加到网关
- **代理增强实现**：添加网关客户端、OAuth 认证、MCP 工具获取等功能

### 45:00-56:00 高级功能与可观测性
- **会话管理机制**：实现多用户会话隔离，确保代理状态正确维护
- **内存功能集成**：添加 AgentCore 内存配置，支持跨会话的上下文记忆
- **完整购物流程**：演示用户通过对话完成商品查询、账户创建、购物车添加的全流程
- **分布式追踪展示**：通过应用程序映射可视化代理、网关、内存、LLM 之间的调用关系和性能指标