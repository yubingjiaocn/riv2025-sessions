# AWS re:Invent 2025 - .NET 应用现代化实战会议总结

## 会议概述

本次会议是一场代码实战演示(Code Talk),重点展示如何使用 AWS 的 AI 工具将传统的 .NET Framework 应用程序现代化为 .NET 8 应用。两位演讲者 Alex(来自斯德哥尔摩)和 Prasad(来自伦敦)通过现场编码演示,展示了完整的应用现代化流程。

会议选择了一个开源的大学管理系统 Contoso University 作为示例应用,这是一个典型的 .NET Framework 4.8 应用,使用了 ASP.NET MVC、Entity Framework、SQL Server 和 MSMQ 等传统 Windows 技术栈。演讲者通过七个步骤的现代化流程,展示了如何将这个传统应用转换为云原生的 .NET 8 应用,包括代码移植、数据库迁移、消息队列替换、微服务提取、UI 重构以及最终部署到 AWS。

整个演示强调了使用 AWS Transform 和 Amazon Q Developer(Kira)这两个 AI 驱动工具来自动化和加速现代化过程,大幅减少了手动工作量。会议特别突出了 Kira 的规格驱动开发(Spec-driven Development)功能,这是区别于其他 AI 编码工具的关键特性。

## 详细时间线与关键要点

### 开场介绍 (00:00 - 03:30)
- **00:00** - 会议开始,演讲者自我介绍:Alex 来自斯德哥尔摩,Prasad 来自伦敦
- **01:15** - 确认听众背景:几乎所有参会者都在管理 .NET Framework 遗留应用
- **02:30** - 介绍会议目标:使用 Agentic AI 工具(AWS Transform 和 Kira)现代化 .NET Framework 应用

### 现代化三大维度 (03:30 - 06:00)
- **03:30** - 讲解现代化的三个组成部分:
  - 框架现代化:从 .NET Framework 迁移到 .NET 8/10
  - 架构现代化:从单体应用转向微服务和事件驱动架构
  - 基础设施现代化:从 Windows/IIS 迁移到 Linux/容器/无服务器
- **05:00** - 介绍示例应用 Contoso University:包含学生注册、课程管理、教师分配等功能

### 示例应用架构分析 (06:00 - 08:30)
- **06:00** - 展示当前技术栈:MSMQ(消息队列)、SQL Server(数据库)、Razor Views + MVC Controller(表示层)
- **07:00** - 查看代码库:典型的 .NET Framework 4.8 项目,包含大量配置文件(web.config)和传统项目结构
- **08:00** - 说明这不是简单的 Hello World 应用,而是具有实际业务逻辑的应用

### 现代化七步流程介绍 (08:30 - 10:30)
- **08:30** - 展示完整的七步现代化计划:
  1. 使用 AWS Transform 自动移植代码到 .NET 8
  2. 使用 Kira 修复编译错误并本地构建
  3. 将 SQL Server 替换为 PostgreSQL
  4. 将 MSMQ 替换为 Amazon SQS
  5. 从单体中提取微服务
  6. 将 UI 重构为 React 应用
  7. 使用 CDK 部署到 AWS

### 步骤一:AWS Transform 代码移植 (10:30 - 18:00)
- **10:30** - 介绍 AWS Transform 服务:昨天刚更新了全新 UI
- **11:00** - 演示创建工作空间和配置 GitHub 连接器
- **12:00** - 选择 Windows 现代化 → .NET 现代化(新功能还支持 SQL Server 数据库现代化)
- **13:00** - 展示 Agentic AI 体验:需要开发者参与循环,而非完全自动化
- **14:00** - 配置源代码位置:支持 GitHub、GitLab、Azure DevOps 或 S3
- **15:00** - 发现阶段:自动识别仓库中的 .NET Framework 项目
- **15:30** - 强调可以同时转换多个项目(大规模移植)
- **16:00** - 评估阶段:分析项目依赖、NuGet 包、第三方库等
- **17:00** - 展示已完成的转换结果:创建新分支,转换了 3000 行代码

### 步骤二:Kira 修复编译错误 (18:00 - 23:00)
- **18:00** - 介绍 Amazon Q Developer(Kira):几周前刚 GA 的 AI IDE
- **18:30** - 切换到转换后的分支,查看 .NET 8 项目结构
- **19:00** - 发现构建错误:NuGet 包版本冲突
- **19:30** - 使用 Kira 的 VIP 编码模式:"我遇到构建错误,请修复"
- **20:00** - Kira 自动执行调试流程:构建项目 → 识别错误 → 修改代码 → 重新构建
- **21:00** - 修复多个错误:包版本冲突、命名空间问题、Razor 视图错误、构建任务错误
- **22:00** - 最终成功:零错误、零警告,整个过程仅用 1-2 分钟

### Kira 功能深入讲解 (23:00 - 26:00)
- **23:00** - 介绍 Kira 的两种编码模式:
  - VIP 编码:适合快速原型、错误修复、故障排除
  - 规格驱动开发:适合复杂任务和生产级应用
- **24:00** - 说明 Kira 是 VS Code 的分支,可独立安装使用
- **25:00** - 支持多种 AI 模型:Claude 3.5 Sonnet、Claude Opus、Haiku 等
- **25:30** - 回答观众问题:与 GitHub Copilot、Cursor 的区别在于与 AWS 服务的深度集成

### 步骤三:迁移到 PostgreSQL (26:00 - 35:00)
- **26:00** - 开始数据库迁移:从 SQL Server 迁移到 PostgreSQL
- **27:00** - 创建本地 PostgreSQL 数据库实例(Contoso99)
- **28:00** - 使用 Kira VIP 编码:"切换到 PostgreSQL,本地实例,数据库名 Contoso99"
- **29:00** - Kira 自动检查当前配置并进行必要更改:项目文件、应用设置、数据库上下文、启动文件
- **30:00** - 执行 dotnet restore 恢复依赖
- **31:00** - 遇到运行时错误:DateTime2 类型不支持(PostgreSQL 特有问题)
- **32:00** - 复制堆栈跟踪给 Kira,自动修复所有模型中的 DateTime2 引用
- **33:00** - 修复数据种子问题:需要指定 UTC 或本地时间
- **34:00** - 应用成功运行:在 macOS 上运行 .NET 8 应用,使用 PostgreSQL
- **34:30** - 整个迁移过程约 20 分钟

### 步骤四:MSMQ 迁移到 Amazon SQS (35:00 - 45:00)
- **35:00** - 开始消息队列迁移:从 MSMQ 迁移到 Amazon SQS
- **36:00** - 切换到规格驱动开发模式(Spec-driven Development)
- **37:00** - 输入意图:"当前应用使用 MSMQ 通知,想切换到 SQS,只需基础功能,无需扩展错误处理、单元测试"
- **38:00** - 需求阶段:Kira 自动生成需求文档
  - 管理员需求:通知发送到 SQS 而非内存队列
  - 开发者需求:使用 AWS SDK for .NET
  - 配置需求:队列 URL 可配置
  - API 需求:保持现有通知 API 不变
- **40:00** - 设计阶段:将通用需求应用到具体项目
  - 分析当前架构:NotificationService、BaseController、NotificationController
  - 设计目标架构:展示代码片段、接口、配置、依赖项
- **42:00** - 实现计划阶段:创建任务列表
  - 添加 AWS SDK 依赖
  - 添加配置到 appsettings
  - 更新 NotificationService 使用 SQS
  - 实现序列化和消息发送
- **43:30** - 开始执行第一个任务:添加 SDK 依赖和配置
- **44:00** - 由于时间限制,切换到预先准备的分支展示完成结果

### 规格驱动开发总结 (45:00 - 47:00)
- **45:00** - 强调规格驱动开发是 Kira 的主要差异化特性
- **45:30** - 说明完整的 SDLC 流程:需求 → 设计 → 任务 → 实现
- **46:00** - 这种方法遵循开发者的思维模型,适合生产级项目
- **46:30** - VIP 编码适合快速任务,规格驱动开发适合复杂项目

### 后续步骤预告 (47:00 - 48:00)
- **47:00** - 回顾已完成的步骤:代码移植、错误修复、PostgreSQL 迁移、SQS 迁移
- **47:30** - 预告下一步:从单体中提取通知微服务
- **48:00** - 字幕在此处截断,会议继续进行后续演示

### 关键技术要点总结
- **AWS Transform for .NET**:支持大规模移植,可通过 Web 控制台或 Visual Studio 扩展使用
- **Amazon Q Developer (Kira)**:AI IDE,支持 VIP 编码和规格驱动开发两种模式
- **现代化收益**:从 Windows 专有技术栈迁移到跨平台、云原生架构
- **开发效率**:原本需要数小时甚至数天的工作,通过 AI 工具缩短到几分钟
- **开发者参与**:强调"人在循环中"(human-in-the-loop),AI 作为配对程序员而非完全自动化