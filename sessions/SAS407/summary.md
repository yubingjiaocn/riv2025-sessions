# AWS re:Invent 2025 - 构建多租户SaaS代理的Amazon Bedrock AgentCore会议总结

## 会议概述

本次会议由AWS首席合作伙伴解决方案架构师Bill Tarr和高级首席合作伙伴解决方案架构师Ujwal Bukka主讲，重点介绍如何使用Amazon Bedrock AgentCore构建多租户SaaS代理。这是一个400级技术会议，深入探讨了将传统SaaS最佳实践应用到代理解决方案中的方法。

会议围绕五个核心SaaS架构挑战展开：租户入驻、SaaS身份管理、数据分区、租户隔离和SaaS可观测性。演讲者通过实际代码示例和架构模式，展示了如何在AgentCore环境中解决这些挑战。会议还提供了相应的实践工作坊，包含完整的代码库和可工作的解决方案。

## 详细时间线与关键要点

### 00:00-05:00 会议开场与背景介绍
- 介绍生成式AI和代理革命的背景
- 演讲者自我介绍：Bill Tarr（首席合作伙伴解决方案架构师）和Ujwal Bukka（高级首席合作伙伴解决方案架构师）
- 强调这是400级会议，将包含代码示例和实际演示
- 介绍相关工作坊，提供GitHub代码库访问

### 05:00-10:00 示例架构概览
- 展示完整的示例架构，包含AgentCore运行时
- 介绍多个代理：编排代理、知识库代理、日志分析代理和编码代理
- 说明AgentCore Gateway中的工具管理
- 概述AgentCore身份管理和可观测性组件

### 10:00-15:00 SaaS架构挑战
- 详细阐述五个主要SaaS架构挑战：
  - 租户入驻：快速让客户从了解产品到获得价值
  - SaaS身份：用户授权认证和租户上下文传播
  - 数据分区：租户数据的逻辑或物理分离
  - 租户隔离：定义租户访问权限的策略
  - SaaS可观测性：监控租户健康状况的能力

### 15:00-20:00 AgentCore基础概念
- 定义代理的核心组件：代码、计算环境、大语言模型配置
- 介绍工具代码和外部资源访问
- 说明入站和出站调用的授权需求
- 介绍内存管理和可观测性组件
- 展示Amazon Bedrock AgentCore如何解决这些架构挑战

### 20:00-25:00 多租户部署模型
- 对比孤岛（Silo）模型和池化（Pooled）模型
- 孤岛模型：每个租户独立的完整架构栈
- 池化模型：共享基础设施，运行时决策授权
- 讨论混合/桥接架构的权衡考虑
- 分析不同模型的复杂性和效率差异

### 25:00-30:00 多租户代理实现
- 展示孤岛代理：专用AgentCore运行时、内存和网关
- 展示池化代理：共享AgentCore组件
- 介绍AgentCore内存的短期和长期存储概念
- 短期内存：存储会话级原始事件
- 长期内存：存储跨会话的对话摘要和用户偏好

### 30:00-35:00 租户入驻解决方案
- 介绍SaaS控制平面概念和相关服务
- 展示租户入驻流程和架构部署
- 说明如何通过层级（基础层/高级层）映射到不同模型
- 演示孤岛模型的按需资源配置
- 展示池化模型的预配置共享资源

### 35:00-40:00 SaaS身份管理深入
- 使用Amazon Cognito作为身份提供商
- 实现每租户用户池的租户边界
- 介绍自定义声明和JWT令牌结构
- 区分身份令牌和访问令牌的用途
- 使用预令牌生成Lambda触发器复制自定义声明

### 40:00-45:00 AgentCore身份集成
- 详细说明入站授权流程
- 配置AgentCore身份与身份提供商的集成
- 介绍工作负载身份概念
- 实现人工参与循环的授权机制
- 展示出站授权和访问令牌生成流程
- 介绍Gateway拦截器功能

### 45:00-50:00 数据分区、租户隔离与可观测性
- AgentCore内存的数据分区策略
- AWS资源（知识库、DynamoDB、S3）的分区方法
- 使用IAM和ABAC角色实现租户隔离
- 知识库元数据过滤实现
- 强调可观测性在多租户解决方案中的重要性
- 介绍令牌使用跟踪和成本分析
- 展示CloudWatch集成和自定义仪表板创建
- 最终架构回顾和所有概念的综合应用