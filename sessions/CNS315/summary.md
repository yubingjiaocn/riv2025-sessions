# AWS re:Invent 2025 ECS 高级部署策略会议总结

## 会议概述

本次技术会议由 AWS 的 Kevin Gibbs 和 Mike Rizzo 主讲，深入探讨了 Amazon ECS（Elastic Container Service）的高级部署策略。会议重点介绍了 ECS 在 2025 年推出的新型部署功能，包括蓝绿部署、金丝雀部署和线性部署等高级策略，以及如何从传统的滚动部署迁移到这些新的部署方式。

演讲者通过一个虚构的独角兽观察公司（Unicorn Watch）的实际案例，详细展示了如何在不同的服务暴露模式下实施高级部署策略。会议涵盖了 Application Load Balancer (ALB)、Service Connect、无头服务和 Network Load Balancer (NLB) 等多种场景下的部署实践，为开发者提供了全面的部署策略选择指南。

## 详细时间线与关键要点

### 00:00-05:00 会议开场与 ECS 服务基础
- Kevin Gibbs 介绍会议议程和 ECS 服务的基本概念
- 解释任务定义（Task Definition）和服务配置的关系
- 介绍服务修订版本（Service Revision）的概念
- 说明 ECS 部署的基本流程

### 05:00-10:00 部署控制器与策略概述
- 介绍三种部署控制器：ECS 原生控制器、Code Deploy 和外部控制器
- 详细说明四种部署策略：滚动部署、蓝绿部署、金丝雀部署和线性部署
- 对比传统滚动部署与高级部署在任务容量和流量转移方面的差异
- 解释高级部署中的双倍任务容量特性

### 10:00-15:00 部署配置参数详解
- 介绍生命周期钩子（Lifecycle Hooks）的新功能
- 说明烘焙时间（Bake Time）在基于告警回滚中的作用
- 详细配置参数：滚动部署的最大和最小容量设置
- 金丝雀和线性部署的流量百分比控制选项

### 15:00-20:00 Mike Rizzo 接手与独角兽观察案例介绍
- Mike Rizzo 介绍独角兽观察公司的业务背景
- 展示公司原有架构：UI 前端、订单履行流程、流媒体服务
- 说明公司面临的挑战：在保持高可用性的同时提升交付速度
- 介绍 Service Connect 在服务间通信中的作用

### 20:00-25:00 高级部署生命周期详解
- 详细解释高级部署的状态机流程
- 介绍各个阶段：预扩容、扩容、后扩容、测试流量转移等
- 说明生命周期钩子的具体应用场景
- 解释蓝绿环境中的流量路由机制

### 25:00-30:00 金丝雀和线性部署流程
- 详细说明金丝雀部署的两阶段流程
- 介绍线性部署的多步骤渐进式流量转移
- 解释不同策略的适用场景和优势
- 说明生产流量转移钩子的多次调用机制

### 30:00-35:00 故障检测与回滚机制
- 介绍三种故障检测机制：断路器、CloudWatch 告警、自定义监控
- 详细说明 CloudWatch 告警的配置方法和指标选择
- 解释自定义任务和流量监控的实现方式
- 强调在金丝雀和线性部署中考虑混合环境的重要性

### 35:00-40:00 Application Load Balancer 集成
- 详细说明 ALB 与高级部署的集成方式
- 介绍监听器规则权重操作的工作原理
- 展示路径基础路由和高级请求路由的支持
- 演示独角兽观察公司 UI 服务的蓝绿部署实践

### 40:00-45:00 Service Connect 和无头服务
- 解释 Service Connect 中的流量路由机制
- 介绍测试流量标识和路由规则配置
- 详细说明无头服务的部署策略
- 展示消息队列服务的蓝绿部署实现方法

### 45:00-48:00 迁移策略与会议总结
- Kevin Gibbs 回归，总结部署策略选择指南
- 介绍从 Code Deploy 到 ECS 高级部署的迁移方法
- 说明不同部署策略间的灵活切换
- 提供后续学习资源和相关会议信息