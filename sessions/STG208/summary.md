# AWS re:Invent 2025 - STG208: 利用 Amazon S3 Glacier 存储类最大化冷数据价值

## 会议概述

本次会议深入探讨了如何利用 Amazon S3 Glacier 存储类来管理和优化冷数据（归档数据）。演讲者 Gayla 和 Natisha 来自 S3 服务团队，她们强调了一个重要趋势：冷数据不再仅仅是被存储后遗忘的数据，而是正在成为企业创新和差异化竞争的催化剂。随着 AI 和机器学习技术的发展，历史归档数据正在被重新激活，用于训练模型、生成洞察和构建新应用。会议涵盖了 S3 Glacier 的三个存储类别（Instant Retrieval、Flexible Retrieval 和 Deep Archive）的特点和使用场景，详细讲解了如何通过生命周期策略将数据迁移到归档层，以及如何高效地恢复归档数据。

此外，会议还介绍了两项新功能：计算校验和（Compute Checksum）操作和 S3 元数据（S3 Metadata）服务。计算校验和功能允许客户在不下载对象的情况下验证归档数据的完整性，大幅降低了数据验证的成本和时间。S3 元数据服务则通过自动提取对象元数据并存储在可查询的 Apache Iceberg 表中，使客户能够使用 SQL 或自然语言快速查询和分析海量归档数据。演讲最后通过一个实际演示展示了如何结合这些新功能来验证太空项目训练数据的完整性。

## 详细时间线

### 开场与冷数据的重要性
- **00:00:00** - 会议开始，Gayla 介绍会议主题：利用 Amazon S3 Glacier 存储类最大化冷数据价值
- **00:01:30** - 通过举手了解现场观众对 Glacier 的使用情况
- **00:02:15** - 说明会议面向三类人群：Glacier 新手、偶尔使用者和归档存储专家
- **00:03:00** - 介绍会议三部分结构：Glacier 基础、新功能介绍、实际演示
- **00:04:00** - 强调 S3 存储了数百万亿个对象，其中 70-80% 是冷数据
- **00:05:30** - 阐述冷数据价值正在增长的趋势：从休眠数据转变为创新催化剂
- **00:06:45** - 举例说明冷数据的新用途：训练手写识别模型、金融数据分析等

### S3 Glacier 存储类详解
- **00:08:00** - 展示 S3 存储类连续体：从频繁访问到归档存储的平衡
- **00:09:30** - 详细介绍 Glacier Instant Retrieval：毫秒级访问的归档存储
- **00:10:15** - 使用场景：医疗记录、广播媒体片段、合规要求等
- **00:11:00** - 介绍 Glacier Flexible Retrieval：提供免费批量检索选项
- **00:12:00** - 介绍 Glacier Deep Archive：云中成本最低的存储选项
- **00:13:00** - 强调 Deep Archive 适用于长期保留（以年和十年计）的数据

### 数据迁移与生命周期策略
- **00:14:30** - 介绍 S3 生命周期策略：自动将数据转换到归档存储类
- **00:15:45** - 举例说明生命周期策略：90 天后转到 Instant Retrieval，180 天后转到 Deep Archive
- **00:17:00** - 介绍生命周期策略的过滤器：前缀、对象标签、对象大小、版本数量
- **00:18:30** - 引入 S3 Intelligent-Tiering：针对未知或不可预测访问模式的存储类
- **00:19:45** - 说明 Intelligent-Tiering 的五个层级和自动优化机制

### 数据恢复与检索
- **00:21:00** - 讨论客户恢复归档数据的原因：内容再利用、合规审计、机器学习训练
- **00:22:30** - 举例：自动驾驶汽车训练需要检索特定场景的历史数据
- **00:23:45** - 介绍 Glacier Instant Retrieval 的访问方式：与标准存储相同的 API
- **00:25:00** - 详细说明 Flexible Retrieval 和 Deep Archive 的三步恢复流程
- **00:26:30** - 解释 Glacier 支持每秒 1000 个事务的请求速率
- **00:27:45** - 计算示例：1000 TPS 下可在 3 小时内提交 1000 万个恢复请求
- **00:29:00** - 介绍使用 EventBridge 和 SNS 监控恢复请求状态
- **00:30:30** - 说明恢复后的数据访问方式和临时副本的概念
- **00:31:45** - 提示：通过复制操作将数据永久移出 Glacier

### S3 批量操作优化
- **00:33:00** - 强调批量操作的重要性：Glacier 像货运列车一样适合批量处理
- **00:34:15** - 警告：低于 1000 TPS 会导致恢复时间增加 40 倍
- **00:35:30** - 介绍 S3 批量操作的优势：自动最大化请求速率、自动重试、完成报告
- **00:36:45** - 说明如何创建清单并提交批量操作作业

### 新功能：计算校验和操作
- **00:38:00** - Natisha 接手演讲，介绍两项新的归档相关功能
- **00:39:00** - 引入第一个功能：S3 中的计算校验和操作
- **00:40:15** - 解释客户需求：定期验证归档数据完整性（媒体、生命科学、司法等领域）
- **00:41:30** - 强调这是可选功能，S3 本身已执行数十亿次校验和操作
- **00:42:45** - 解释校验和概念：对象的数字指纹
- **00:44:00** - 说明传统验证方法的问题：需要下载对象并本地计算，成本高且耗时
- **00:45:30** - 介绍新的计算校验和操作：原地读取数据并计算校验和
- **00:46:45** - 强调该功能适用于所有存储类和任意大小的对象
- **00:48:00** - 展示创建校验和作业的三个组件：对象清单、校验和算法、校验和类型
- **00:49:30** - 解释完整对象校验和与复合校验和的区别和使用场景
- **00:51:00** - 展示完成报告的格式和字段内容
- **00:52:15** - 强调定价优势：无需恢复费用，统一定价 $4/TB

### 新功能：S3 元数据
- **00:53:30** - 介绍第二个功能：S3 元数据服务的改进
- **00:54:45** - 说明问题场景：如何快速了解特定项目在 Glacier 中的数据量
- **00:56:00** - 介绍 S3 元数据：自动捕获对象元数据并存储在可查询的 Iceberg 表中
- **00:57:30** - 说明两种表类型：日志表（近实时变更）和实时清单表（每小时刷新）
- **00:59:00** - 展示查询方式：SQL 查询（Athena、Redshift）和自然语言（Amazon Q）
- **01:00:30** - 举例：查询存储使用情况、识别未标记对象、审计删除操作
- **01:02:00** - 介绍 MCP 服务器支持：允许 AI 助手直接查询元数据表

### 实际演示
- **01:03:30** - 开始演示：假设场景为太空科技初创公司训练自主太空飞行器
- **01:04:45** - 展示演示桶中的 NASA 图像和视频数据
- **01:05:30** - 查看对象属性：标签包含 SHA-256 校验和、项目名称等
- **01:06:45** - 使用 SageMaker Unified Studio 查询实时清单表
- **01:08:00** - 编写 SQL 查询筛选项目 Odin 的对象，获得 25 个文件
- **01:09:15** - 下载 CSV 并准备作为批量操作的清单文件
- **01:10:30** - 上传清单到 S3 批量操作专用桶
- **01:11:45** - 创建计算校验和作业：选择 SHA-256 算法和完整对象类型
- **01:13:00** - 提交并运行作业，等待完成
- **01:14:15** - 作业完成，查看完成报告中的校验和值
- **01:15:30** - 使用 Kiro CLI 验证批量操作输出与对象标签中的校验和是否匹配
- **01:16:45** - 验证成功：所有 25 个对象的校验和均匹配

### 总结
- **01:17:30** - 总结三个关键要点：AI 时代归档数据成为差异化因素
- **01:18:15** - S3 提供多种存储选项满足不同业务需求
- **01:18:45** - 新功能（计算校验和和 S3 元数据）帮助更好地管理和提取归档数据价值
- **01:19:30** - 会议结束，提醒观众完成会议评价