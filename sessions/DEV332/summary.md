# AWS re:Invent 2025 Breakout Session 总结

## 会议概述

本次会议由AWS Agentic AI Foundation团队的高级技术项目经理Joy Chakraotti和开发者倡导者Elizabeth Leoni主讲，重点介绍了如何使用AWS开源SDK Strands构建和部署AI代理。

会议针对企业级AI代理开发中的常见痛点，展示了Strands框架如何简化代理构建过程。传统框架需要编写大量样板代码，调试困难，且代码模块化程度低。Strands通过模型驱动设计方法解决了这些问题，让开发者专注于业务逻辑，而由LLM决定最佳执行策略。这种设计理念特别适合快速演进的AI模型生态系统。

整个演示采用Python和Jupyter Notebook进行代码演练，涵盖了从基础代理创建、工具集成、MCP（模型上下文协议）工具使用，到会话管理和状态持久化的完整开发流程。演讲者强调了Strands的核心优势：简单易用、代码模块化、可测试性强，以及已获得超过300万次下载的社区认可。

## 详细时间线与关键要点

### **00:00 - 开场介绍**
- 演讲者自我介绍：Joy Chakraotti（高级技术项目经理）和Elizabeth Leoni（开发者倡导者）
- 询问现场有多少开发者已在生产环境部署AI代理
- 说明会议将展示如何使用Strands构建代理并通过AWS服务提高可靠性

### **02:30 - 客户痛点分析**
- 传统框架需要编写过多样板代码来构建最简单的代理（如聊天机器人）
- 难以了解代理内部运行机制，调试困难
- 代码模块化程度低，难以进行单元测试
- 这些痛点促使AWS设计了Strands代理框架

### **04:15 - Strands框架核心优势**
- 提高开发者生产力：简单的事情应该简单实现
- 代码模块化和可测试性强，适合企业级应用
- 采用模型驱动设计方法，让LLM决定执行策略
- 已有超过300万次下载

### **06:00 - AI代理三大核心组件**
- **Prompt（提示词）**：用户和代理提供给模型的指令和上下文
- **Tool（工具）**：执行特定任务的函数库
- **Model（模型）**：代理的"大脑"，分析请求并构建执行策略
- 代理作为协调器，使用这些组件循环执行任务

### **08:30 - 代理执行流程**
1. 模型接收提示词、上下文和可用工具文档
2. 模型分析并决定是用自然语言回应、执行步骤序列还是使用工具
3. 如果使用工具，代理运行工具并将结果返回给模型
4. 模型与代理之间的循环（agentic loop）持续进行直到任务完成

### **10:00 - 代码演示：创建基础代理**
- 展示环境设置和GitHub仓库访问方式
- 创建代理只需从Strands SDK的Agent类实例化一个对象
- 默认使用Bedrock模型提供商和Anthropic Claude 4模型
- 演示提问"第一届re:Invent何时举办"，代理回答2012年

### **13:45 - 自定义模型配置**
- 创建boto session设置AWS配置（区域、密钥等）
- 创建自定义模型提供商实例并设置首选模型
- 更新代理使用新的模型提供商
- Strands支持多种模型提供商：Bedrock、Anthropic、OpenAI、Gemini等

### **16:20 - 系统提示词（System Prompt）**
- 系统提示词用于设置代理的角色定位
- 演示将代理设置为"数学问题讲故事者"
- 提问"斐波那契数列中2之后是什么数字"，代理以讲故事方式解释答案
- 演示创建AWS解决方案架构专家代理，提供无服务器API设计方案

### **19:00 - 工具（Tools）介绍**
- 工具使模型能够与现实世界交互，访问实时信息
- 工具分类：基础工具、处理工具、集成工具等
- 工具本质上是执行特定任务的函数（如读写文件、访问内存）
- LLM本身不知道当前信息（如拉斯维加斯当前温度），需要工具支持

### **21:30 - 代码演示：创建和使用工具**
- 展示简单的计算器Python函数
- 使用@tool装饰器将函数转换为工具
- 在创建代理时将计算器设置为工具参数
- 演示代理使用计算器工具执行156×23的乘法运算

### **24:00 - 预构建工具**
- Strands SDK包含由开源社区维护的预构建工具
- 演示混合使用预构建工具和自定义Python工具
- **Image Reader**：读取和分析图像内容
- **File Reader**：读取PDF等文本文件并分析
- **Video Reader**：逐场景分析视频文件

### **26:45 - 多模态代理演示**
- 设置系统提示词定义多模态代理能力
- 演示分析架构图图像，代理识别出AWS服务和组件
- 演示分析Strands README文档，提供内容摘要
- 演示分析6分钟登山视频，逐场景提供摘要

### **30:00 - 直接工具调用**
- Strands支持不通过模型直接调用工具
- 直接调用函数名并传递参数即可
- 适用于明确知道需要使用特定工具的场景

### **31:15 - 观众问答环节**
- 观众提问为何图像处理使用工具而非直接导入库
- 解释：工具机制让模型动态决定何时使用哪个工具
- 使用@tool装饰器告知云端模型可以使用该功能

### **35:00 - MCP工具介绍**
- **MCP（Model Context Protocol）**：开放标准协议
- 使代理能够与远程服务和数据通信，无需为每个服务定制集成
- 本地通信使用标准IO协议，远程通信使用Streamable HTTP
- MCP包含两个组件：MCP服务器和MCP客户端

### **37:30 - MCP服务器代码演示**
- 展示包含三个函数的Python文件：计算器、视频分析、获取当前时间
- 从MCP SDK导入FastMCP
- 使用@mcp.tool()装饰器将函数转换为MCP工具
- 配置MCP服务器使用Streamable HTTP协议
- 在命令行运行Python文件启动MCP服务器

### **41:00 - MCP客户端配置**
- 创建MCP客户端实例，指定服务器位置和协议
- 创建代理时将MCP客户端作为工具参数传递
- MCP客户端自动与远程服务器通信，获取可用工具列表
- 演示复杂任务：分析视频、提供分析时间、计算风险分数

### **44:30 - MCP工具使用建议**
- 本地进程运行的工具建议使用常规工具（避免协议开销）
- 远程服务建议使用MCP工具
- MCP优势：工具可打包后灵活部署（本地或远程）
- MCP提供状态管理、身份管理等额外功能

### **46:00 - 会话和状态管理介绍（Elizabeth接手）**
- Strands提供多种方式维护对话状态
- **Agent State（代理状态）**：跨多个请求的有状态信息
- **Request State（请求状态）**：单个请求内的上下文信息
- **Conversation History（对话历史）**：最重要的会话管理机制

### **48:15 - 对话历史演示**
- 对话历史记录每次与代理的交互
- 演示："你好，我叫Elizabeth" → "你好Elizabeth" → "我叫什么名字？"
- 代理能记住之前的对话内容
- 展示多模态代理分析架构图的对话示例

### **51:00 - 对话管理器（Conversation Manager）**
- 解决上下文窗口限制问题
- **Window Size**：设置保存的对话对数（如10对用户-代理交互）
- 超过窗口大小后，最早的对话会被丢弃
- 避免将所有历史对话发送给模型

### **53:30 - 对话摘要功能**
- **Summary Ratio**：设置摘要比例（如30%）
- 保留最近的N条消息（如5条）
- 其余对话生成摘要
- 可将摘要保存到系统提示词中

### **55:45 - 会话持久化：文件系统**
- 使用**File Session Manager**将会话保存到本地文件夹
- 设置session_id和storage_directory
- 演示在本地创建sessions文件夹，包含多个代理会话
- 每个会话保存用户请求和代理响应

### **58:00 - 多代理会话共享**
- 多个代理可以共享同一个会话
- 后续代理能访问前面代理的对话历史
- 适用于多代理协作场景

### **59:30 - 会话持久化：S3存储**
- 使用**S3 Session Manager**将会话保存到S3存储桶
- 只需更改导入语句和配置参数
- 提供session_id、bucket_name、prefix和region_name
- 适合生产环境的持久化方案

### **01:01:00 - 会议结束提示**
- 演讲者表示还有Vector Store内容未涵盖
- 由于时间限制，建议参会者查看GitHub仓库中的完整示例
- 演讲者整周都在会场，欢迎进一步交流

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


注意：本总结基于会议字幕生成，涵盖了Strands框架的核心功能、代码示例和最佳实践。完整代码示例可通过扫描会议中的二维码或访问GitHub仓库获取。