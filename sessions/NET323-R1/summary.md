# NET323: 大规模网络自动化运维

## 会议概述

本次AWS re:Invent 2025分会场会议由AWS高级网络专家解决方案架构师Pablo Sanchez和高级解决方案架构师Claudia Izquierdo主讲，重点探讨如何通过自动化、测试和策略驱动部署来解决大规模网络运维中的三大挑战：无法扩展的手动流程、造成安全风险的不一致部署，以及过晚的验证。会议采用代码演示形式，展示如何使用AWS Organizations、AWS Cloud WAN和AWS Step Functions等服务构建可扩展的网络架构。

演讲者通过实际编码演示，展示了如何实现VPC IPAM作为唯一IP分配源、构建易于管理的全球网络，以及通过组织单元自动执行路由域分配。整个解决方案强调了基础设施即代码、模块化设计和持续迭代的重要性，帮助网络工程师从传统的手动配置转向自动化运维模式。

## 详细时间线与关键要点

### 0:00-10:00 会议开场与挑战分析
- Pablo和Claudia介绍会议议程，强调这是一个代码密集型的互动会话
- 分析网络规模化的三大挑战：手动流程、不一致部署、验证滞后
- 描述企业网络增长场景：从小规模VPC到指数级增长带来的配置漂移问题
- 介绍解决方案框架：多账户环境、AWS托管网络服务、无服务器架构

### 10:00-20:00 解决方案架构概述
- Claudia详细介绍AWS Organizations、AWS Cloud WAN和AWS Step Functions的作用
- Pablo展示用例架构：VPC IPAM控制IP地址管理、按环境进行流量分段、流量检查自动化
- 演示现有环境设置：组织结构、IPAM池配置、Cloud WAN初始网络拓扑
- 介绍服务插入概念和检查VPC的预配置

### 20:00-30:00 第一个需求：VPC IPAM合规性
- Pablo开始编码演示，使用Kiro IDE和Terraform
- 创建不合规VPC示例，展示默认情况下可以使用非IPAM IP范围
- 实施服务控制策略(SCP)，阻止创建未使用IPAM池的VPC
- 观众互动：讨论IPAM使用情况、动态账户创建中的IP分段管理

### 30:00-40:00 SCP实施与VPC创建
- 部署SCP到开发组织单元，演示策略生效过程
- 尝试创建不合规VPC被拒绝，验证SCP有效性
- 创建符合IPAM要求的VPC配置，支持双栈(IPv4/IPv6)
- 配置多区域VPC：北弗吉尼亚、俄勒冈、西班牙区域

### 40:00-50:00 第二个需求：AWS Cloud WAN全球网络
- Claudia解释Cloud WAN中的"send to"和"send via"概念
- Pablo编码Cloud WAN策略文档，使用Terraform动态块
- 配置路由域间检查、出口检查、跨区域检查
- 实施附件策略：基于标签和附件类型的自动关联逻辑
- 演示策略版本管理和部署过程

### 50:00-59:00 第三个需求：路由域自动化与总结
- 实施第二个SCP，阻止spoke账户创建domain标签
- 配置EventBridge规则捕获Network Manager事件
- 创建Step Functions工作流：等待VPC附件创建、获取OU信息、自动标记
- 演示完整自动化流程：VPC创建、附件关联、自动移动到正确分段
- 总结关键要点：按用例架构、业务成果导向、超越网络的编排