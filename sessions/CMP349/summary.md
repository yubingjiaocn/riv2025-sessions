# AWS re:Invent 2025 会议总结：Duolingo 的 Graviton 迁移之旅

## 会议概述

本次 AWS re:Invent 2025 分会场主要讲述了 Duolingo 如何通过采用 AWS Graviton 处理器实现成本优化和性能提升的成功案例。会议由 AWS 技术团队和 Duolingo 工程团队共同呈现，展示了技术客户经理（TAM）如何与客户紧密合作，推动云基础设施的现代化转型。

Duolingo 作为一家拥有超过 5 亿用户的语言学习平台，面临着随业务增长而不断攀升的云成本压力。通过与 AWS 企业支持团队的深度合作，Duolingo 不仅成功控制了成本，还提升了系统性能和可持续性。整个项目涵盖了从托管服务迁移、容器平台升级（ECS 到 EKS）、到全面的 Graviton 处理器采用等多个维度。

会议强调了 AWS Graviton 处理器的三大核心优势：卓越的性价比（相比传统处理器节省显著成本）、更好的能源效率（减少 60% 的能耗）、以及基于 AWS Nitro 系统的增强安全性。通过系统化的迁移方法论和 TAM 的专业指导，Duolingo 实现了基础设施的全面优化，为持续增长奠定了坚实基础。

## 详细时间线与关键要点

### 开场与背景介绍（0:00-5:30）
- **互动调查**：主持人通过现场提问了解听众背景，包括云账单优化需求、与技术客户经理合作经验、Graviton 处理器认知度等
- **Duolingo 背景**：介绍 Duolingo 作为拥有 5 亿用户的语言学习平台，面临着业务增长带来的基础设施成本压力
- **会议主题**：如何通过 AWS Graviton 处理器和 TAM 合作将成本约束转化为创新机遇

### AWS Graviton 技术介绍（5:30-15:00）
- **自研芯片的原因**：专业化定制、加速创新、安全优先（基于 Nitro 安全芯片发展而来）
- **Nitro 系统架构**：将虚拟化开销从 20% 降至接近 0%，将几乎 100% 的 CPU 资源提供给客户
- **Graviton 发展历程**：
  - 2018 年：Graviton 1 发布，与 ISV 密切合作
  - 2019 年：Graviton 2 发布，性能大幅提升，开始广泛采用
  - 2021 年：Graviton 3 发布，改进浮点运算性能
  - 2023 年：Graviton 4 发布，性能提升 30%，增加核心数和内存带宽
- **实例命名规则解析**：以 C8GN.2xlarge 为例，详细说明了实例系列、代数、处理器类型、特殊功能和规格的命名含义

### Graviton 应用场景（15:00-20:00）
- **EC2 实例类型**：通用型、计算优化型、内存优化型、加速计算型、存储优化型、HPC 优化型
- **托管服务支持**：RDS、ElastiCache、EMR、ECS、EKS、Fargate、Lambda、SageMaker 等
- **可持续性优势**：相同工作负载下能耗降低 60%，帮助企业实现可持续发展目标
- **Amazon 内部使用**：2024 年 Prime Day 期间，超过 40% 的 EC2 实例使用 Graviton，涉及 25 万颗芯片

### TAM 角色与价值（20:00-25:00）
- **TAM 的核心职责**：帮助客户实现业务目标、提供 AWS 服务教育、向服务团队传达客户声音、主动推动技术解决方案
- **企业支持计划**：TAM 是 AWS 企业支持计划的重要组成部分
- **合作模式**：TAM 作为客户团队的延伸，深度参与客户的技术决策和实施过程

### 案例一：Super Bowl 广告活动（25:00-32:00）
- **挑战**：2024 年 Super Bowl 期间，Duolingo 需要在广告播出后 5 秒内发送 400 万条推送通知
- **AWS Countdown 方法**：采用结构化方法规划和执行高流量事件
- **准备工作**：架构审查、风险识别、每周工程会议、EC2 容量预留、故障回退计划制定
- **测试验证**：在万圣节和感恩节进行测试活动，每次测试都发现改进点
- **执行结果**：成功在 5 秒内发送 400 万条通知，活动在社交媒体上引发病毒式传播
- **业务影响**：成功重新激活流失用户，支持用户增长的业务目标

### 案例二：合规认证与账户迁移（32:00-38:00）
- **业务需求**：Duolingo English Test（DET）需要获得合规认证以拓展市场
- **技术挑战**：作为云原生初创公司，所有资源运行在单一 AWS 账户（后成为组织管理账户），阻碍合规认证
- **解决方案**：迁移到全新 AWS 组织，将 DET 工作负载隔离到独立账户
- **安全改进**：实施服务控制策略（SCP）等安全最佳实践
- **迁移结果**：零生产中断完成迁移，成功获得合规认证，为 DET 产品增长打开市场

### 案例三：ECS 到 EKS 迁移（38:00-48:00）
- **迁移动机**：随着规模增长，需要更多定制化功能和平台控制能力
- **初期挑战**：工程师缺乏 Kubernetes 经验，对迁移存在顾虑
- **赋能培训**：
  - 举办 EKS 沉浸式培训日，提供实践操作机会
  - 在 Duolingo 内部工程峰会上由 AWS Kubernetes 专家演讲
  - 工程师从怀疑转变为积极支持，主动要求成为首批迁移服务
- **技术深潜**：针对 Argo CD、Karpenter 等工具进行专项深度培训
- **架构优化**：
  - 设计多集群平台，支持工作负载迁移和零停机维护
  - 优化可观测性和 CoreDNS 配置
  - 采用 IPv6 网络架构，避免 IP 地址耗尽问题
- **迁移进展**：2025 年开始迁移，已成功迁移关键核心服务，2026 年将完成全部迁移

### 案例四：云优化项目（48:00-58:00）

S3 Storage Lens 优化：
- **问题**：S3 成本持续增长，缺乏可见性
- **解决方案**：部署 S3 Storage Lens，提供组织级别和前缀级别的可见性
- **成果**：
  - 将一个存储桶迁移到智能分层，每月节省 $13,000
  - 发现并删除 1PB 未使用存储桶
  - 支持 DET 迁移过程中的数据验证

CloudFront 优化：
- **架构改进**：在移动应用和 ALB 之间引入 CloudFront
- **性能提升**：利用全球边缘节点降低用户延迟
- **后续计划**：2026 年实施 AWS WAF 阻止恶意机器人，优化缓存策略降低成本

DynamoDB 优化：
- **初始状态**：DynamoDB 是账单第二大项，工程师缺乏使用信心
- **赋能培训**：举办实践培训和内部峰会演讲（单表设计最佳实践）
- **针对性优化**：对高成本表进行深度分析和优化
- **显著成果**：
  - 3 个月内 DynamoDB 成本降低 50%
  - 优化预留容量配置
  - 将写多读少的表迁移到低频访问存储
  - DynamoDB 成为 Duolingo 首选数据库，使用量持续增长

### 案例五：Graviton 迁移实践（58:00-结束）

托管服务迁移：
- **ElastiCache**：迁移过程顺利，AWS 处理了所有兼容性问题
- **RDS**：需要制定详细迁移计划，确保零中断

EC2 实例池优化：
- 采用最新的 Graviton 4 处理器
- 将更多服务从 Intel 迁移到 Graviton
- 淘汰旧代次、性价比较低的实例类型
- 引入 EBS 支持的实例类型（之前仅使用 NVMe 实例）

微服务迁移策略：
- 系统化评估和迁移方法
- 持续优化实例组合
- 为未来的计算需求做好准备

未来展望：
- 继续扩大 Graviton 采用范围
- 探索更多计算优化机会
- 保持与 AWS 的紧密合作关系

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


总结：本次会议展示了 Duolingo 通过与 AWS TAM 的深度合作，系统性地实现了云基础设施现代化和成本优化。从高流量事件支持、合规迁移、容器平台升级到全面的 Graviton 采用，每个项目都体现了专业指导和最佳实践的价值。