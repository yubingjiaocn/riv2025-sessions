1
00:00:00,750 --> 00:00:02,250
- [Andy] Good morning.

2
00:00:02,250 --> 00:00:06,717
Thank you all for attending NET331,

3
00:00:06,717 --> 00:00:09,003
AWS Cloud WAN MCP server.

4
00:00:10,980 --> 00:00:13,776
I'm Andy, you can probably
guess with a photos,

5
00:00:13,776 --> 00:00:16,623
who's who with Jose.

6
00:00:18,570 --> 00:00:23,400
We really want to try and make
this an interactive session.

7
00:00:23,400 --> 00:00:26,070
Rather than just fly through slides,

8
00:00:26,070 --> 00:00:29,126
I'd like to try and take opportunities to,

9
00:00:29,126 --> 00:00:31,620
for you to ask questions.

10
00:00:31,620 --> 00:00:34,833
But you're not gonna escape,
we've got questions too.

11
00:00:36,810 --> 00:00:39,483
So just before we kind of get into this,

12
00:00:40,440 --> 00:00:42,657
I'd be really interested to know,

13
00:00:42,657 --> 00:00:45,750
just with a quick show of hands,

14
00:00:45,750 --> 00:00:49,680
from an audience perspective, who is into,

15
00:00:49,680 --> 00:00:53,103
or is doing like core
networking, core AWS networking?

16
00:00:56,680 --> 00:01:01,143
Okay, and then who's doing
more sort of DevOps work?

17
00:01:04,860 --> 00:01:08,250
Now obviously my mass is
terrible and trying to gauge it.

18
00:01:08,250 --> 00:01:09,363
Who's doing both?

19
00:01:10,980 --> 00:01:12,330
Okay, all right.

20
00:01:12,330 --> 00:01:14,760
So what's really nice to
see is over the last couple

21
00:01:14,760 --> 00:01:18,840
of WAN events that who's
doing both is really changing.

22
00:01:18,840 --> 00:01:20,550
We're getting more and more people now

23
00:01:20,550 --> 00:01:22,170
starting to get involved in both sides,

24
00:01:22,170 --> 00:01:24,483
which is a massive win.

25
00:01:28,740 --> 00:01:30,243
So how did we get here?

26
00:01:35,310 --> 00:01:36,990
What actually happened with this.

27
00:01:36,990 --> 00:01:40,080
I'm gonna go forward a slide
and then go back a slide,

28
00:01:40,080 --> 00:01:44,760
is I ended up having a
network similar to this,

29
00:01:44,760 --> 00:01:47,800
very similar to this that I
was trying to troubleshoot

30
00:01:49,110 --> 00:01:52,563
and as you can tell,
it's a complex network.

31
00:01:54,060 --> 00:01:59,060
Dual core networks, multiple regions,

32
00:01:59,250 --> 00:02:03,270
inspection VPCs, network function groups,

33
00:02:03,270 --> 00:02:05,163
you name it, it's got it.

34
00:02:09,570 --> 00:02:14,570
And going through this
meant that it was very,

35
00:02:16,590 --> 00:02:19,800
very time consuming, and
going through each element

36
00:02:19,800 --> 00:02:23,823
was very error prone just to
work out how do they get to be.

37
00:02:25,860 --> 00:02:27,810
What tools did I have to hand?

38
00:02:27,810 --> 00:02:30,930
Well, for my sins,

39
00:02:30,930 --> 00:02:34,800
I'm far too stubborn to
have an idea about something

40
00:02:34,800 --> 00:02:37,530
and then not at least try
and get to the end of it

41
00:02:37,530 --> 00:02:38,733
and make it work.

42
00:02:39,690 --> 00:02:44,690
Plenty of coffee and maybe
a little help from Gen AI.

43
00:02:46,710 --> 00:02:48,780
I think the other thing
which became really,

44
00:02:48,780 --> 00:02:53,430
really helpful is collaboration.

45
00:02:53,430 --> 00:02:55,710
So I was very lucky to
be able to collaborate

46
00:02:55,710 --> 00:03:00,000
with Jose on this rather than
doing it all on your own.

47
00:03:00,000 --> 00:03:02,700
It's really good to get
a different perspective

48
00:03:02,700 --> 00:03:04,530
and just someone else
to say, hey, hang on,

49
00:03:04,530 --> 00:03:06,123
have you thought of this?

50
00:03:06,123 --> 00:03:08,723
And I think that made a
massive, massive difference.

51
00:03:10,541 --> 00:03:13,650
Of course we've been
through the network of hell,

52
00:03:13,650 --> 00:03:14,700
which I will call it.

53
00:03:17,610 --> 00:03:20,790
What options did I have initially

54
00:03:20,790 --> 00:03:25,500
to try to put all these
pieces of the puzzle together

55
00:03:25,500 --> 00:03:30,500
so I could quite easily work
out paths between A and B?

56
00:03:31,620 --> 00:03:36,620
Well, AWS console, you
know, clickops are fine

57
00:03:37,830 --> 00:03:40,290
but unfortunately I've
got a terrible memory

58
00:03:40,290 --> 00:03:42,900
so I'll never remember where things are.

59
00:03:42,900 --> 00:03:45,330
And also, it's very hard to repeat.

60
00:03:45,330 --> 00:03:48,630
I think the console and clickops are great

61
00:03:48,630 --> 00:03:50,283
to learn a new service.

62
00:03:51,888 --> 00:03:56,888
AWS CLI, if you start
scripting the AWS CLI,

63
00:03:57,030 --> 00:03:59,040
it can be quite powerful.

64
00:03:59,040 --> 00:04:02,280
But again, I tended to end up having lots

65
00:04:02,280 --> 00:04:07,280
and lots of more complex AWS CLI commands

66
00:04:07,830 --> 00:04:11,310
now stitching together
with a a shell script,

67
00:04:11,310 --> 00:04:14,280
and it just became very brittle

68
00:04:14,280 --> 00:04:17,013
and not particularly pleasant.

69
00:04:18,330 --> 00:04:22,533
And then Python, using Boto3.

70
00:04:23,490 --> 00:04:27,047
I'm certainly no developer, but Gen AI,

71
00:04:29,003 --> 00:04:33,930
if you're using an augmented
agent to help you with coding,

72
00:04:33,930 --> 00:04:35,520
they're very good at coding.

73
00:04:35,520 --> 00:04:38,220
And one of the things
that I have found is that,

74
00:04:38,220 --> 00:04:40,710
if you make a good stab at something

75
00:04:40,710 --> 00:04:45,420
and then you will ask
your agent of choice,

76
00:04:45,420 --> 00:04:48,984
in this case it'll be Kiro to say, look,

77
00:04:48,984 --> 00:04:52,920
why is this not working
and why is yours working?

78
00:04:52,920 --> 00:04:54,030
And then gimme some output,

79
00:04:54,030 --> 00:04:57,660
actually provide some
markdown explaining it.

80
00:04:57,660 --> 00:04:59,580
And as you'll see later on in the slides,

81
00:04:59,580 --> 00:05:04,500
I'm a massive fan of markdown
together with mermaid diagrams

82
00:05:04,500 --> 00:05:07,350
and it really gives you some
good sort of study material.

83
00:05:08,520 --> 00:05:12,840
So the strategic goal
was to create something

84
00:05:12,840 --> 00:05:15,300
that all of those who put their hands up

85
00:05:15,300 --> 00:05:20,300
for being a kind of core network
engineer takes for granted

86
00:05:21,120 --> 00:05:22,830
is trace route.

87
00:05:22,830 --> 00:05:25,080
So I just really wanted to see, look,

88
00:05:25,080 --> 00:05:28,293
from A to B, how do I get
there, what's in the path?

89
00:05:29,160 --> 00:05:30,870
Not just from a routing perspective

90
00:05:30,870 --> 00:05:32,880
but also security controls

91
00:05:32,880 --> 00:05:35,493
that might stop that connectivity.

92
00:05:36,330 --> 00:05:40,233
But rather than try and eat
the proverbial elephant whole,

93
00:05:41,190 --> 00:05:44,100
break it down into some smaller tasks.

94
00:05:44,100 --> 00:05:46,230
For example, I'm not gonna
read them all out there,

95
00:05:46,230 --> 00:05:50,577
but break those out into
more manageable tasks.

96
00:05:50,577 --> 00:05:55,348
Use python scripts to
try and achieve that,

97
00:05:55,348 --> 00:05:58,581
get some help with an agentic coding agent

98
00:05:58,581 --> 00:06:03,360
and then start taking
these discreet scripts

99
00:06:03,360 --> 00:06:05,493
and then putting them towards an MCP.

100
00:06:06,446 --> 00:06:10,973
A good example for me was
creating a Python script

101
00:06:12,120 --> 00:06:16,500
that essentially found your
global networks in your account,

102
00:06:16,500 --> 00:06:21,450
your core networks, all
of your route tables.

103
00:06:21,450 --> 00:06:24,390
I am obsessed with the
rich library from Python.

104
00:06:24,390 --> 00:06:28,080
It's gotta be colorful and therefore,

105
00:06:28,080 --> 00:06:30,530
print out each of those route tables

106
00:06:30,530 --> 00:06:35,100
so I can really easily
see, look in each region,

107
00:06:35,100 --> 00:06:40,100
in each core network, these
are the route or the prefixes

108
00:06:42,180 --> 00:06:43,923
in each of those route tables.

109
00:06:45,930 --> 00:06:50,930
So from here I wanna pass over to Jose

110
00:06:51,510 --> 00:06:54,510
to start talking more about kind of agents

111
00:06:54,510 --> 00:06:59,510
and the delineation
between agents and scripts.

112
00:07:04,020 --> 00:07:05,100
- [Jose] Yes.

113
00:07:05,100 --> 00:07:07,830
Before we get to the
actual code demonstration,

114
00:07:07,830 --> 00:07:11,400
let's take a moment to talk
about AI agents and MCPs

115
00:07:11,400 --> 00:07:14,700
so that we all understand what those are.

116
00:07:14,700 --> 00:07:19,110
So AI agents are
applications that can reason

117
00:07:19,110 --> 00:07:22,470
and plan and try to accomplish a goal

118
00:07:22,470 --> 00:07:25,080
by leveraging LLM to do that.

119
00:07:25,080 --> 00:07:27,810
And they can also act
meaning that they can call

120
00:07:27,810 --> 00:07:32,130
for example, external APIs
to get more information

121
00:07:32,130 --> 00:07:34,353
to accomplish this particular goal.

122
00:07:36,480 --> 00:07:39,690
And these applications are
something that either you

123
00:07:39,690 --> 00:07:41,373
or someone else has created.

124
00:07:42,388 --> 00:07:44,520
If we look a little bit deeper,

125
00:07:44,520 --> 00:07:47,520
what actually happens in the application

126
00:07:47,520 --> 00:07:50,275
and there is something
we call agentic loop

127
00:07:50,275 --> 00:07:55,275
and this whole process
starts when it gets an input.

128
00:07:55,350 --> 00:07:58,170
So you invoke the agent
and you give it some prompt

129
00:07:58,170 --> 00:08:01,353
and this is the goal that
the agent tries to achieve.

130
00:08:02,610 --> 00:08:05,760
The agent takes this input or the goal

131
00:08:05,760 --> 00:08:07,470
and all of the information

132
00:08:07,470 --> 00:08:09,240
that was given to the agent beforehand,

133
00:08:09,240 --> 00:08:13,050
so this would be like the
persona or any other information,

134
00:08:13,050 --> 00:08:18,050
and also all of the tool
information that it has access to,

135
00:08:18,120 --> 00:08:19,743
two MCPs, for example.

136
00:08:20,970 --> 00:08:23,850
The agent sends all of
this information to LLM

137
00:08:23,850 --> 00:08:25,980
and then the LLM starts
the reasoning process

138
00:08:25,980 --> 00:08:28,170
that can it accomplish the goal

139
00:08:28,170 --> 00:08:30,333
with this information that it has.

140
00:08:31,410 --> 00:08:33,390
If the goal is something simple

141
00:08:33,390 --> 00:08:36,360
like what is an IPV four address,

142
00:08:36,360 --> 00:08:38,790
it most likely can find the information

143
00:08:38,790 --> 00:08:42,480
from its training data and
answer back immediately.

144
00:08:42,480 --> 00:08:45,755
If it is something that it
doesn't know, for example,

145
00:08:45,755 --> 00:08:50,460
where is this IP address
located in my AWS environment?

146
00:08:50,460 --> 00:08:51,910
It needs to do something else

147
00:08:52,800 --> 00:08:55,590
and it'll go to the tool information

148
00:08:55,590 --> 00:08:59,463
and try to find a tool that
can get this information to it.

149
00:09:00,690 --> 00:09:03,390
The LLM then sends the
control back to the agent

150
00:09:03,390 --> 00:09:05,160
with a specific syntax

151
00:09:05,160 --> 00:09:08,430
specifying that it wants to use a tool

152
00:09:08,430 --> 00:09:10,623
with particular augments.

153
00:09:13,020 --> 00:09:17,280
The agent, the application
calls for example the MCP

154
00:09:17,280 --> 00:09:19,847
and utilizes the tool
there with the augment

155
00:09:20,760 --> 00:09:23,673
and gets the results back
after it has finished,

156
00:09:25,350 --> 00:09:28,050
and then the loop starts again.

157
00:09:28,050 --> 00:09:30,690
So all of the information,
the previous information

158
00:09:30,690 --> 00:09:33,383
and now the new information
is sent back to the LLM

159
00:09:33,383 --> 00:09:35,370
and the LLM starts the reasoning again

160
00:09:35,370 --> 00:09:38,805
that does it now have enough
information to answer.

161
00:09:38,805 --> 00:09:42,911
If the IP address was not found,
it might continue the loop

162
00:09:42,911 --> 00:09:46,980
and for example, call the
tool again with different set

163
00:09:46,980 --> 00:09:50,310
of augments like another AWS region.

164
00:09:50,310 --> 00:09:52,226
Or if the IP address was found,

165
00:09:52,226 --> 00:09:55,110
it can generate the final answer

166
00:09:55,110 --> 00:09:57,420
and return back to the user that yeah,

167
00:09:57,420 --> 00:09:58,803
the IP address was found.

168
00:10:03,263 --> 00:10:07,470
And the MCP, which is short
for model context protocol,

169
00:10:07,470 --> 00:10:10,621
it is an open source protocol
developed by Anthropic

170
00:10:10,621 --> 00:10:13,110
and it provides a standardized way

171
00:10:13,110 --> 00:10:15,210
for us to connect AI models

172
00:10:15,210 --> 00:10:18,243
to external data sources and tools.

173
00:10:19,614 --> 00:10:23,190
And it's yeah, very
widely used at the moment

174
00:10:23,190 --> 00:10:26,153
and of course used in the network MCP

175
00:10:26,153 --> 00:10:28,173
that we are demonstrating today.

176
00:10:29,670 --> 00:10:32,790
In the AI agent that for
example, you have created,

177
00:10:32,790 --> 00:10:35,460
you would have an MCP client running

178
00:10:35,460 --> 00:10:37,765
that can then connect to MCP servers

179
00:10:37,765 --> 00:10:42,453
that might be running on your
laptop or somewhere remote.

180
00:10:46,710 --> 00:10:48,360
Let's take another show of hands.

181
00:10:48,360 --> 00:10:50,700
How many of you are
currently using scripts

182
00:10:50,700 --> 00:10:52,893
to manage your AWS network?

183
00:10:55,830 --> 00:10:59,580
Okay, how many of you are
using AI at the moment

184
00:10:59,580 --> 00:11:00,680
to manage the network?

185
00:11:01,920 --> 00:11:04,710
There are a few, not that many yet.

186
00:11:04,710 --> 00:11:06,461
Hopefully we can change that.

187
00:11:06,461 --> 00:11:07,650
But yeah,

188
00:11:07,650 --> 00:11:11,490
both of these are still
perfectly valid approaches.

189
00:11:11,490 --> 00:11:13,680
Scripts are very good in scenarios

190
00:11:13,680 --> 00:11:17,010
where you already know what
you want to get as an output.

191
00:11:17,010 --> 00:11:19,320
So for example, if you
want to find the IP address

192
00:11:19,320 --> 00:11:21,229
and you know how your network is built,

193
00:11:21,229 --> 00:11:23,130
you can just use a script

194
00:11:23,130 --> 00:11:26,760
and get the same answer
every time, and it's fast.

195
00:11:26,760 --> 00:11:28,410
But then again, if the
question is something

196
00:11:28,410 --> 00:11:31,770
that is more complex or
you don't exactly know

197
00:11:31,770 --> 00:11:33,600
what you're going to be asking,

198
00:11:33,600 --> 00:11:36,270
then AI is a really good tool for that.

199
00:11:36,270 --> 00:11:37,853
So for example, if you want to ask that

200
00:11:37,853 --> 00:11:41,490
can the EC2 instance
that owns that IP address

201
00:11:41,490 --> 00:11:44,660
reach internet, and you might
have a complex network, so...

202
00:11:45,840 --> 00:11:48,153
And we will see this
in the demonstrations.

203
00:11:51,420 --> 00:11:55,710
In the demo today, we will
be using a live environment

204
00:11:55,710 --> 00:11:57,360
and this is the environment.

205
00:11:57,360 --> 00:12:00,510
If you have any questions
during the presentation,

206
00:12:00,510 --> 00:12:03,417
we can try to do something live also.

207
00:12:03,417 --> 00:12:07,080
But behind the scenes there
is a AWS cloud WAN network

208
00:12:07,080 --> 00:12:10,763
with two a plus transit
gateways, some VPCs

209
00:12:10,763 --> 00:12:14,283
and AWS network firewalls in the mix.

210
00:12:16,089 --> 00:12:19,920
But yes, let's go into the code.

211
00:12:19,920 --> 00:12:24,920
- [Andy] So I think just before
we go on to the code itself,

212
00:12:26,364 --> 00:12:29,073
it's probably a good opportunity,

213
00:12:30,510 --> 00:12:35,510
has anyone got any questions
or any thoughts at the moment

214
00:12:35,610 --> 00:12:37,593
that you want to ask?

215
00:12:40,350 --> 00:12:41,523
Wow, okay.

216
00:12:42,450 --> 00:12:45,690
All right, I'm gonna coax
a question outta someone

217
00:12:45,690 --> 00:12:46,803
at some point.

218
00:12:48,210 --> 00:12:49,530
- [Jose] Can you switch over to the code?

219
00:12:49,530 --> 00:12:50,363
- [Andy] Yeah.

220
00:12:52,500 --> 00:12:53,550
- [Jose] Yes.

221
00:12:53,550 --> 00:12:58,300
So today we will be using
Kiro CLI as our AI agent

222
00:12:59,820 --> 00:13:01,683
and let's load that up.

223
00:13:03,540 --> 00:13:06,183
It will be initializing two MCP servers.

224
00:13:07,650 --> 00:13:10,260
We will be using the
AWS network MCP server

225
00:13:10,260 --> 00:13:14,313
and there is also AWS knowledge
MCP server available for us.

226
00:13:15,971 --> 00:13:17,220
And the first thing is,

227
00:13:17,220 --> 00:13:22,220
I will be switching to a predefined agent.

228
00:13:22,560 --> 00:13:24,330
So as I was mentioning in the start,

229
00:13:24,330 --> 00:13:27,330
so when we are sending the
information to the LLM,

230
00:13:27,330 --> 00:13:31,200
we can have some information
in the AI agent itself.

231
00:13:31,200 --> 00:13:34,590
So here we have specified some
more detailed information,

232
00:13:34,590 --> 00:13:38,733
what the agent should do and
some networking examples there.

233
00:13:40,980 --> 00:13:44,340
And we can also take a look at the tools

234
00:13:44,340 --> 00:13:48,360
so we can see that here is the
enterprise network MCP server

235
00:13:48,360 --> 00:13:51,603
and the tools that are
available to us at the moment.

236
00:13:52,460 --> 00:13:57,460
And before going into the
demonstration, let's take a moment

237
00:13:57,510 --> 00:14:00,720
and look at the code that
is behind the scenes.

238
00:14:00,720 --> 00:14:05,720
And this is one tool that is
within the network MCP server

239
00:14:06,330 --> 00:14:09,873
and all of this has been built
with the FastMCP framework.

240
00:14:11,760 --> 00:14:13,890
So the first tool that we are looking is

241
00:14:13,890 --> 00:14:17,880
get cloud WAN details,
a pretty simple function

242
00:14:17,880 --> 00:14:22,227
but this gives us possibility
to look at the structure,

243
00:14:23,340 --> 00:14:24,930
how it has been built.

244
00:14:24,930 --> 00:14:29,130
So there are four arguments in this tool

245
00:14:29,130 --> 00:14:30,420
with two of our mandatory ones.

246
00:14:30,420 --> 00:14:33,153
So core network ID, core network region.

247
00:14:34,380 --> 00:14:37,560
Core network ID is the
ID which we want to get.

248
00:14:37,560 --> 00:14:40,560
The core network region is
one of the key design choices

249
00:14:40,560 --> 00:14:42,900
that we did for this MCP.

250
00:14:42,900 --> 00:14:46,320
So we wanted to be able
to switch between regions

251
00:14:46,320 --> 00:14:48,870
and accounts as easily as possible,

252
00:14:48,870 --> 00:14:53,280
so all of the tools have this
region capability within it.

253
00:14:53,280 --> 00:14:55,380
So the LLM can decide that it will call,

254
00:14:55,380 --> 00:14:57,960
for example, US West two, E North one

255
00:14:57,960 --> 00:15:00,993
or any other region that is available.

256
00:15:02,730 --> 00:15:05,310
The third augment is next token

257
00:15:05,310 --> 00:15:10,106
and this controls pagination
for core network attachments.

258
00:15:10,106 --> 00:15:14,580
There are basically two design
choices that we could take,

259
00:15:14,580 --> 00:15:17,880
either do the pagination
internally within the tool

260
00:15:17,880 --> 00:15:19,619
and return everything immediately,

261
00:15:19,619 --> 00:15:21,570
or then let the LLM control

262
00:15:21,570 --> 00:15:24,090
if it wants to get more information.

263
00:15:24,090 --> 00:15:27,120
And for this particular tool
we have taken the approach

264
00:15:27,120 --> 00:15:28,920
that, okay, the LLM can decide

265
00:15:28,920 --> 00:15:32,763
when it wants to have more
attachments given to it.

266
00:15:34,770 --> 00:15:37,200
And lastly, there is the profile name.

267
00:15:37,200 --> 00:15:40,290
As mentioned, we want to
control or keep the LLM control

268
00:15:40,290 --> 00:15:41,940
to go to different accounts

269
00:15:41,940 --> 00:15:46,940
so it can use the AWS CLI name
profiles to switch accounts.

270
00:15:48,913 --> 00:15:51,960
Also important information
is the description.

271
00:15:51,960 --> 00:15:54,240
So we are using pedantic

272
00:15:54,240 --> 00:15:56,880
and the description field
is one of the details

273
00:15:56,880 --> 00:15:59,850
that is sent to the LLM when
it starts to do the reasoning,

274
00:15:59,850 --> 00:16:02,820
which tool to use and
how to use those tools.

275
00:16:02,820 --> 00:16:05,424
So the description set for the augments

276
00:16:05,424 --> 00:16:08,043
is an important detail also.

277
00:16:12,270 --> 00:16:16,562
Moving on we have the
dockstring for the tool

278
00:16:16,562 --> 00:16:19,350
and this is again one
of that information set

279
00:16:19,350 --> 00:16:23,460
that will be sent to the LLM
so that it knows how to use it.

280
00:16:23,460 --> 00:16:26,820
We will first give some
high level information

281
00:16:26,820 --> 00:16:28,070
that you can use this tool

282
00:16:28,070 --> 00:16:31,353
to get the cloud WAN core
network configuration and state.

283
00:16:32,430 --> 00:16:36,060
We have also given information
when to use this tool.

284
00:16:36,060 --> 00:16:38,070
So for example, when the LLM is doing

285
00:16:38,070 --> 00:16:39,870
or asked to do troubleshooting

286
00:16:39,870 --> 00:16:42,360
or understand network topology,

287
00:16:42,360 --> 00:16:45,270
and this is part when we
were testing out these tools,

288
00:16:45,270 --> 00:16:48,690
how to create this, that
this really makes a change

289
00:16:48,690 --> 00:16:50,460
how well the LLM can execute.

290
00:16:50,460 --> 00:16:52,080
For example, in complex scenarios

291
00:16:52,080 --> 00:16:53,743
when it's doing path tracing

292
00:16:53,743 --> 00:16:56,763
and it needs to use
multiple different tools.

293
00:16:59,880 --> 00:17:02,790
There is also information
workflows and for example,

294
00:17:02,790 --> 00:17:03,930
depending on the tools

295
00:17:03,930 --> 00:17:06,600
there might be a lot more
information in the workflows

296
00:17:06,600 --> 00:17:08,790
that after calling this tool,

297
00:17:08,790 --> 00:17:11,490
what are the most potential next tools

298
00:17:11,490 --> 00:17:14,370
that would give it good
enough information.

299
00:17:14,370 --> 00:17:17,520
So for example, here it's
stating that get cloud WAN routes

300
00:17:17,520 --> 00:17:19,710
or detect cloud WAN inspection

301
00:17:19,710 --> 00:17:22,323
might be good approaches after this one.

302
00:17:24,960 --> 00:17:26,594
And finally, we are specifying

303
00:17:26,594 --> 00:17:29,310
what information will be returned.

304
00:17:29,310 --> 00:17:31,530
So it's returning a dictionary

305
00:17:31,530 --> 00:17:33,780
containing the core network information,

306
00:17:33,780 --> 00:17:35,853
live policy, et cetera.

307
00:17:40,410 --> 00:17:45,410
Then the actual code itself
kind of basic Python code.

308
00:17:45,600 --> 00:17:47,820
So we are using repository library

309
00:17:47,820 --> 00:17:51,303
for this to get access to the AWS APIs.

310
00:17:52,140 --> 00:17:54,780
We have a help permit to get AWS client,

311
00:17:54,780 --> 00:17:59,610
which we will be using
to switch between regions

312
00:17:59,610 --> 00:18:02,253
and get the actual repository client.

313
00:18:02,253 --> 00:18:04,740
If there is next token specified,

314
00:18:04,740 --> 00:18:07,020
we will just get the list of attachments

315
00:18:07,020 --> 00:18:09,780
and return immediately
those attachment details

316
00:18:09,780 --> 00:18:11,230
and the potential next token.

317
00:18:13,320 --> 00:18:16,254
But then the core network
policy and attachments,

318
00:18:16,254 --> 00:18:20,100
that is also one design choice
that we did with this tool,

319
00:18:20,100 --> 00:18:23,310
is that we don't want to
create individual tools

320
00:18:23,310 --> 00:18:25,440
for individual API calls.

321
00:18:25,440 --> 00:18:27,750
There are other a plus MCP servers

322
00:18:27,750 --> 00:18:29,370
that you can use for that.

323
00:18:29,370 --> 00:18:34,370
So we try to combine and make
the obstruction level higher.

324
00:18:35,190 --> 00:18:36,450
So for each of the tools

325
00:18:36,450 --> 00:18:39,420
it would actually do multiple API calls,

326
00:18:39,420 --> 00:18:41,640
get more information immediately,

327
00:18:41,640 --> 00:18:43,740
and keep that back to the LLM.

328
00:18:43,740 --> 00:18:48,720
It makes the, for example,
troubleshooting analysis faster

329
00:18:48,720 --> 00:18:50,690
because there are fewer tool calls

330
00:18:50,690 --> 00:18:54,174
and also makes it more
efficient from processing wise

331
00:18:54,174 --> 00:18:56,520
because we don't need to
send the information back

332
00:18:56,520 --> 00:18:58,833
and forth for the LLM all the time.

333
00:19:02,730 --> 00:19:05,280
And then for all of these tools

334
00:19:05,280 --> 00:19:07,780
we are capturing all of the exceptions

335
00:19:08,640 --> 00:19:11,958
and we are not handling
those within the code,

336
00:19:11,958 --> 00:19:14,640
but we are raising all of
the errors back to the LLM.

337
00:19:14,640 --> 00:19:19,640
So we are using tool error
from the FastMCP framework,

338
00:19:20,061 --> 00:19:23,490
and for each of the error we
are specifying some details

339
00:19:23,490 --> 00:19:25,590
like for example there was an error,

340
00:19:25,590 --> 00:19:27,843
getting the a plus core network details.

341
00:19:28,950 --> 00:19:32,370
We will also give it some
information what to do next slide.

342
00:19:32,370 --> 00:19:34,890
For example, validate
parameter information

343
00:19:34,890 --> 00:19:37,380
and this might depend on the actual tool,

344
00:19:37,380 --> 00:19:39,180
what information we are giving back.

345
00:19:40,770 --> 00:19:44,880
And then we are also sending
the full error back to the LLM

346
00:19:44,880 --> 00:19:47,700
so that it can then
reason what to do next.

347
00:19:47,700 --> 00:19:49,410
So if there was for example,

348
00:19:49,410 --> 00:19:53,943
error with the sign in to
the AWS or something else.

349
00:19:57,660 --> 00:19:59,580
And lastly if everything was good,

350
00:19:59,580 --> 00:20:02,910
we will return back to
core network policy,

351
00:20:02,910 --> 00:20:04,683
live policy and attachments.

352
00:20:06,990 --> 00:20:08,703
Let's do one demonstration.

353
00:20:10,680 --> 00:20:13,950
So we have our agent and
as we saw from the tool,

354
00:20:13,950 --> 00:20:17,280
we need to give it the information
of the core network ID.

355
00:20:17,280 --> 00:20:18,930
We don't know it at the moment.

356
00:20:18,930 --> 00:20:21,000
So what we need to do
first is, for example,

357
00:20:21,000 --> 00:20:23,864
list the current networks that we have.

358
00:20:23,864 --> 00:20:28,864
So we can ask, list the core
networks in US West two,

359
00:20:30,690 --> 00:20:33,630
what we might have available in this,

360
00:20:33,630 --> 00:20:36,273
using a tool called list core networks.

361
00:20:37,800 --> 00:20:40,680
And it found out that
there is one core network

362
00:20:40,680 --> 00:20:43,980
in US West two with
just basic information.

363
00:20:43,980 --> 00:20:46,511
So we know the core network ID and state,

364
00:20:46,511 --> 00:20:49,173
but nothing else at the moment.

365
00:20:53,760 --> 00:20:56,290
We can also ask to get more details

366
00:20:57,270 --> 00:21:02,110
and now hopefully it'll use
the get cloud WAN details.

367
00:21:04,410 --> 00:21:05,910
And after this call,

368
00:21:05,910 --> 00:21:08,160
we are now actually getting more details

369
00:21:08,160 --> 00:21:09,120
of the core network.

370
00:21:09,120 --> 00:21:13,050
So it's you creating the basic
information in the start,

371
00:21:13,050 --> 00:21:17,400
what is the name, ID, and its date.

372
00:21:17,400 --> 00:21:21,660
It's also starting to passe
through the core network policy.

373
00:21:21,660 --> 00:21:25,080
So for example, information
what edge locations we have,

374
00:21:25,080 --> 00:21:29,073
what are the ASN numbers,
segment information,

375
00:21:29,960 --> 00:21:32,553
which segments we have and which regions.

376
00:21:33,660 --> 00:21:36,090
And also more details for example,

377
00:21:36,090 --> 00:21:39,870
from network function
groups, and egress control

378
00:21:39,870 --> 00:21:42,445
and the VPC attachments,

379
00:21:42,445 --> 00:21:44,895
or all of the attachments
that we have specified.

380
00:21:47,670 --> 00:21:50,040
And if we would want, we could then go in

381
00:21:50,040 --> 00:21:51,930
and ask more questions, for example,

382
00:21:51,930 --> 00:21:54,690
more detailed question on the attachments,

383
00:21:54,690 --> 00:21:58,590
what each of the attachments
are and so forth.

384
00:21:58,590 --> 00:22:02,160
But what I want to show here
also is the error handling.

385
00:22:02,160 --> 00:22:05,557
So what if we ask something
that is not there?

386
00:22:05,557 --> 00:22:08,907
So if we for example ask
to get one core network,

387
00:22:08,907 --> 00:22:11,343
but that we know that is not valid.

388
00:22:18,189 --> 00:22:22,856
Okay, that shouldn't be there,
it is again calling tool,

389
00:22:28,080 --> 00:22:30,120
and now we get the error back

390
00:22:30,120 --> 00:22:32,910
that the core network ID is invalid

391
00:22:32,910 --> 00:22:37,910
and the core network must be
following a specific pattern.

392
00:22:38,250 --> 00:22:41,040
And this is the reason why
we didn't want to handle

393
00:22:41,040 --> 00:22:42,330
all of the errors in the code,

394
00:22:42,330 --> 00:22:44,850
but actually keep those back to the LLM.

395
00:22:44,850 --> 00:22:47,820
So now the LLM can give us
more information that yeah,

396
00:22:47,820 --> 00:22:49,740
the idea was wrong and for example,

397
00:22:49,740 --> 00:22:52,380
do we want to use the valid core network

398
00:22:52,380 --> 00:22:54,720
that it already knew or something else?

399
00:22:54,720 --> 00:22:57,393
For example, list more networks.

400
00:23:00,975 --> 00:23:04,083
- [Andy] So we're gonna move on to,

401
00:23:05,760 --> 00:23:10,620
let me just click PowerPoint,
MCP and agent files.

402
00:23:10,620 --> 00:23:13,800
But before we move into
that, just one thing

403
00:23:13,800 --> 00:23:15,933
that I kind of really wanted to emphasize.

404
00:23:18,330 --> 00:23:21,450
A design decision was
taken really early on.

405
00:23:21,450 --> 00:23:26,450
So Jose's gone through a couple
of the tools that were used,

406
00:23:26,980 --> 00:23:30,393
you know, live demos, demo
goods have been good so far,

407
00:23:31,440 --> 00:23:36,440
but this really comes into
scripting versus using an MCP.

408
00:23:38,340 --> 00:23:43,340
The idea was to use the
actual agent and the LLM

409
00:23:43,860 --> 00:23:47,577
for the decision making not turn an MCP

410
00:23:47,577 --> 00:23:50,250
into this giant script

411
00:23:50,250 --> 00:23:53,190
where all the logic is
built within the script.

412
00:23:53,190 --> 00:23:57,480
So the tools and any
tool training that's done

413
00:23:57,480 --> 00:24:00,600
will pass the information
back to the agent.

414
00:24:00,600 --> 00:24:04,380
The agent will then use
the LLM to make decisions

415
00:24:04,380 --> 00:24:06,450
as to what to do next.

416
00:24:06,450 --> 00:24:07,410
And I think that's something

417
00:24:07,410 --> 00:24:11,730
that is a really important
paradigm to remember.

418
00:24:11,730 --> 00:24:16,730
Otherwise you do end up
building out this huge script,

419
00:24:16,830 --> 00:24:20,230
basically that just
happens to be called MCP

420
00:24:21,750 --> 00:24:25,533
and the differences are
stark in the results.

421
00:24:26,730 --> 00:24:31,730
Now for the keen eyed of
you, you may have noticed

422
00:24:32,430 --> 00:24:36,030
that when Jose went into Kiro,

423
00:24:36,030 --> 00:24:40,800
actually there was a small
line on there saying,

424
00:24:40,800 --> 00:24:43,353
AWS network agent,

425
00:24:45,120 --> 00:24:48,690
why are we using an
agent as well as an MCP?

426
00:24:48,690 --> 00:24:53,340
So what we found through
a lot of trial and error

427
00:24:53,340 --> 00:24:57,000
and also trying to build
some of the additional logic

428
00:24:57,000 --> 00:25:02,000
into the MCP that makes it
become huge and quite complex,

429
00:25:04,680 --> 00:25:09,453
is to actually use an
agent file I should say.

430
00:25:12,180 --> 00:25:14,040
It doesn't actually alter the capabilities

431
00:25:14,040 --> 00:25:17,250
or the functionality of the MCP server,

432
00:25:17,250 --> 00:25:19,590
but it does give you a few things

433
00:25:19,590 --> 00:25:21,990
that are very, very useful.

434
00:25:21,990 --> 00:25:25,743
Not just for this MCP server,
but literally for any.

435
00:25:26,949 --> 00:25:29,640
It'll give you a stable persona.

436
00:25:29,640 --> 00:25:32,820
So in this example, AWS network MCP,

437
00:25:32,820 --> 00:25:35,910
we gave it the persona
of a network engineer.

438
00:25:35,910 --> 00:25:39,870
So the the typical kind of
rules that an MC, sorry,

439
00:25:39,870 --> 00:25:41,770
that a network engineer should follow.

440
00:25:44,280 --> 00:25:47,670
We gave like a tool usage policy,

441
00:25:47,670 --> 00:25:50,160
you know, when to use which tools

442
00:25:50,160 --> 00:25:55,160
and provided some more guided prompts

443
00:25:55,320 --> 00:25:58,953
to provide specific
outcomes that we wanted.

444
00:26:00,720 --> 00:26:02,490
What we really found from this then

445
00:26:02,490 --> 00:26:07,490
is that the agent itself
has a context first,

446
00:26:08,940 --> 00:26:12,420
so it looks at the context
before it starts making calls.

447
00:26:12,420 --> 00:26:15,060
It orchestrates those workflows

448
00:26:15,060 --> 00:26:18,918
and it will provide some sort of overrides

449
00:26:18,918 --> 00:26:23,190
and specialization in terms
of knowledge and prompting.

450
00:26:23,190 --> 00:26:28,170
So the same queries or prompts

451
00:26:28,170 --> 00:26:31,650
that were given to the MCP
server would've worked.

452
00:26:31,650 --> 00:26:33,341
It's just that by using an agent

453
00:26:33,341 --> 00:26:37,143
we get back exactly what we
want in the format we want it.

454
00:26:39,630 --> 00:26:41,310
So it gives us a lot more control

455
00:26:41,310 --> 00:26:46,230
over the kind of how the MCP works

456
00:26:46,230 --> 00:26:47,943
and the data that we get back.

457
00:26:54,120 --> 00:26:57,840
So from here we're gonna
go on to some videos

458
00:26:57,840 --> 00:27:01,020
that they actually will
do some demo, so...

459
00:27:01,020 --> 00:27:01,853
Go for it.

460
00:27:01,853 --> 00:27:04,030
- [Audience Member] The tool
that you called network,

461
00:27:05,796 --> 00:27:09,535
is that a custom tool or is
that something that I do.

462
00:27:09,535 --> 00:27:13,470
- [Andy] I do apologize I
didn't quite catch the foot.

463
00:27:13,470 --> 00:27:16,420
- [Audience Member] You use
the tool called network, right?

464
00:27:17,340 --> 00:27:18,430
To discover that?

465
00:27:18,430 --> 00:27:19,263
- [Andy] Yeah.

466
00:27:19,263 --> 00:27:22,169
- [Audience Member] That tool,
is that a custom made tool?

467
00:27:22,169 --> 00:27:27,090
- [Andy] Yes, so the MCP that
we're talking about today

468
00:27:27,090 --> 00:27:30,810
started life as cloud WAN MCP

469
00:27:30,810 --> 00:27:35,810
because it was very geared
towards just AWS Cloud WAN.

470
00:27:36,780 --> 00:27:38,970
But what we found is that,
if we wanted to do things

471
00:27:38,970 --> 00:27:43,680
like trace route for example,
you know it goes through VPCs,

472
00:27:45,360 --> 00:27:48,990
cloud WAN, network
firewall, transit gateway,

473
00:27:48,990 --> 00:27:52,020
it touched on far more technologies

474
00:27:52,020 --> 00:27:56,377
than you would find just in Cloud WAN.

475
00:27:57,780 --> 00:28:01,803
So we renamed that as AWS networking MCP.

476
00:28:02,790 --> 00:28:06,330
Now your question, just to
paraphrase so everyone can,

477
00:28:06,330 --> 00:28:09,600
who may not have heard it,
was the core network tool,

478
00:28:09,600 --> 00:28:11,490
is that a specialized tool?

479
00:28:11,490 --> 00:28:16,140
Yes, so what you'll find
within the MCP server itself,

480
00:28:16,140 --> 00:28:20,100
it consists of a number of tools

481
00:28:20,100 --> 00:28:25,100
and those tools are written
specifically for that MCP server

482
00:28:25,860 --> 00:28:28,210
and get core network

483
00:28:29,490 --> 00:28:34,173
is a tool specific to the
AWS networking MCP server.

484
00:28:35,057 --> 00:28:40,057
The AWS networking MCP server
was released yesterday.

485
00:28:40,590 --> 00:28:44,341
So by all means, you can
go and have a look at it.

486
00:28:44,341 --> 00:28:48,570
There'll be a link,
it's in GitHub, AWS labs

487
00:28:48,570 --> 00:28:50,340
and you can actually walk through

488
00:28:50,340 --> 00:28:54,420
and see all of the tools included
plus all the source code.

489
00:28:54,420 --> 00:28:56,850
Ultimately, this is open source,

490
00:28:56,850 --> 00:28:58,800
there's nothing proprietary about this.

491
00:29:04,800 --> 00:29:06,220
Demo?

492
00:29:06,220 --> 00:29:07,968
- [Jose] Yeah, you're gonna?

493
00:29:07,968 --> 00:29:09,785
- [Andy] Yeah, okay.

494
00:29:09,785 --> 00:29:11,130
- [Jose] Go ahead.

495
00:29:11,130 --> 00:29:11,963
- [Audience Member] Question for ya.

496
00:29:11,963 --> 00:29:12,796
- [Andy] Yep.

497
00:29:12,796 --> 00:29:14,335
- [Audience Member] The
agent also, open source

498
00:29:14,335 --> 00:29:17,404
that you have wrapped
around the MCP server?

499
00:29:17,404 --> 00:29:21,420
- [Andy] So, well, the agent
that we're actually using here

500
00:29:21,420 --> 00:29:24,780
is Kiro, for obvious reasons,

501
00:29:24,780 --> 00:29:29,780
but we've also tested it
with TOR code, with VS code,

502
00:29:30,630 --> 00:29:34,650
with kind of the usual suspects.

503
00:29:34,650 --> 00:29:38,340
So the most commonly used agents,

504
00:29:38,340 --> 00:29:41,160
we've tested it with
to make sure it works.

505
00:29:41,160 --> 00:29:46,160
So it should work up with kind
of any standard coding agent.

506
00:29:47,276 --> 00:29:50,430
What that coding agent
uses in the background.

507
00:29:50,430 --> 00:29:55,430
You can choose, sometimes
you're limited in choice

508
00:29:55,680 --> 00:29:59,820
but other times you can
choose the actual LLM itself

509
00:29:59,820 --> 00:30:00,933
the agent's using.

510
00:30:03,420 --> 00:30:07,140
So for this, what we're gonna do a demo,

511
00:30:07,140 --> 00:30:11,123
lemme just quickly work
out where we are here.

512
00:30:11,123 --> 00:30:12,737
- [Jose] Let's do it live I think.

513
00:30:12,737 --> 00:30:13,570
- [Andy] Okay.

514
00:30:13,570 --> 00:30:14,403
- [Jose] (indistinct).

515
00:30:14,403 --> 00:30:15,236
- [Andy] Okay.

516
00:30:15,236 --> 00:30:16,069
- [Jose] Let's try.

517
00:30:16,069 --> 00:30:16,902
- [Andy] So, what we're gonna do here is,

518
00:30:16,902 --> 00:30:18,480
we're gonna go through
and one of the things,

519
00:30:18,480 --> 00:30:22,650
look if you're using kind of a cloud WAN

520
00:30:22,650 --> 00:30:25,293
or you're using any other network service,

521
00:30:26,580 --> 00:30:29,559
IP addresses are pretty
much common to everything.

522
00:30:29,559 --> 00:30:33,330
So where's my IP?

523
00:30:33,330 --> 00:30:35,730
Someone gives you an IP
address, where is it?

524
00:30:35,730 --> 00:30:40,730
So what we're gonna do is live
code a find my IP MCP server.

525
00:30:46,380 --> 00:30:50,190
So just like when I started
originally doing this,

526
00:30:50,190 --> 00:30:53,403
not being kind of from
a developer background,

527
00:30:55,950 --> 00:31:00,950
I did use Kiro to kind of help
me create the initial Python

528
00:31:03,720 --> 00:31:08,340
as a proof of concept to make
sure I can get what I need to.

529
00:31:08,340 --> 00:31:10,770
So you can apply the same principle here

530
00:31:10,770 --> 00:31:14,670
with putting in what
you want that MCP to do.

531
00:31:14,670 --> 00:31:17,643
This is very specific,
it's finding an IP address.

532
00:31:18,600 --> 00:31:22,590
So we've asked Kiro to
create an MCP server

533
00:31:22,590 --> 00:31:23,836
to find an IP address

534
00:31:23,836 --> 00:31:26,523
and given it some parameters around that.

535
00:31:27,630 --> 00:31:31,440
Kiro will now go off and
kind of work its magic

536
00:31:31,440 --> 00:31:36,440
and you'll see here what
it's actually creating.

537
00:31:37,920 --> 00:31:41,845
It will create the find
IP address MCP server,

538
00:31:41,845 --> 00:31:44,910
and going back to your question earlier,

539
00:31:44,910 --> 00:31:49,250
it will create specific
tools in the MCP server

540
00:31:49,250 --> 00:31:54,250
to find the IP address, and
there's some additional details

541
00:31:54,780 --> 00:31:57,333
that it will find as part of the MCP.

542
00:31:59,370 --> 00:32:04,370
What it'll then do, it will
also provide you the JSON

543
00:32:04,470 --> 00:32:08,940
that you'll end up normally
putting in like, MCP.JSON

544
00:32:08,940 --> 00:32:12,303
for example, which means
that we can actually,

545
00:32:13,320 --> 00:32:17,303
once it's finished building
it, we can add it to the MCP

546
00:32:17,303 --> 00:32:19,503
or JSON and try it live.

547
00:32:28,410 --> 00:32:32,673
- [Jose] I need to get
the IP address, tool,

548
00:32:35,640 --> 00:32:37,540
can't remember what the tool name was.

549
00:32:39,630 --> 00:32:44,117
Tool AWS IP search with profile network.

550
00:33:00,553 --> 00:33:03,060
- [Andy] So this shouldn't take too long.

551
00:33:03,060 --> 00:33:07,500
Now because, 'cause they
didn't provide a a region

552
00:33:07,500 --> 00:33:11,070
what the MCP will actually do,

553
00:33:11,070 --> 00:33:15,540
it'll look at all of the
regions your count is opted into

554
00:33:15,540 --> 00:33:19,624
and then use a parallel async function

555
00:33:19,624 --> 00:33:24,624
to search all the regions and
then stop all of those threads

556
00:33:24,750 --> 00:33:27,300
or all of those functions
once it finds it.

557
00:33:27,300 --> 00:33:30,060
Otherwise it's gonna keep
searching all of them.

558
00:33:30,060 --> 00:33:34,379
So you can see from here,
it's found the IP, the region,

559
00:33:34,379 --> 00:33:39,379
the ENI that the IP address is
associated with, the subnet,

560
00:33:40,920 --> 00:33:44,400
the instance that's
associated with that ENI,

561
00:33:44,400 --> 00:33:48,840
and just saying that it's
a private IP address.

562
00:33:48,840 --> 00:33:51,120
I mean that literally took what?

563
00:33:51,120 --> 00:33:53,403
Three or four minutes to create.

564
00:33:54,300 --> 00:33:57,129
Personally, well, I think
it's quite a helpful tool,

565
00:33:57,129 --> 00:33:59,730
but that gives you an example of,

566
00:33:59,730 --> 00:34:04,730
you don't have to be a
core Python developer.

567
00:34:05,085 --> 00:34:08,160
One sec, a core Python developer

568
00:34:08,160 --> 00:34:10,410
that's built MCPs in the past.

569
00:34:10,410 --> 00:34:13,440
There's a really easy way to get started

570
00:34:13,440 --> 00:34:18,033
using kind of an agentic coding assistant.

571
00:34:20,255 --> 00:34:21,088
- [Audience Member] Now, that tool,

572
00:34:21,088 --> 00:34:25,770
was it built to specifically
achieve that goal

573
00:34:25,770 --> 00:34:27,360
of finding an IP address?

574
00:34:27,360 --> 00:34:28,193
- [Andy] Correct.

575
00:34:28,193 --> 00:34:29,681
- [Audience Member] Is that the approach

576
00:34:29,681 --> 00:34:34,681
that you would recommend versus having MCP

577
00:34:34,770 --> 00:34:37,187
to discover information
and then having the agent

578
00:34:37,187 --> 00:34:42,187
trying to piece together the more generic,

579
00:34:42,420 --> 00:34:45,600
find you VPCs in all
your different accounts

580
00:34:45,600 --> 00:34:49,290
and things like that and then
coming up with that solution?

581
00:34:49,290 --> 00:34:50,123
- [Andy] Yes.

582
00:34:50,123 --> 00:34:52,530
Just to make sure everyone
kind of got the question,

583
00:34:52,530 --> 00:34:56,068
and please correct me if I
paraphrase it incorrectly.

584
00:34:56,068 --> 00:34:59,190
The tool here that was
built was very specific

585
00:34:59,190 --> 00:35:00,780
to find an IP address,

586
00:35:00,780 --> 00:35:04,140
and then provide some information
around the IP address.

587
00:35:04,140 --> 00:35:07,200
When you're building a large MCP server,

588
00:35:07,200 --> 00:35:10,620
is that the approach that
we would normally take

589
00:35:10,620 --> 00:35:13,950
or would we look at building tools

590
00:35:13,950 --> 00:35:15,543
that are far more generic?

591
00:35:17,042 --> 00:35:18,717
I'll give you my view on this

592
00:35:18,717 --> 00:35:22,650
and then also, hopefully
we've got a similar view

593
00:35:22,650 --> 00:35:27,650
but I'll also pass over to
Jose to give his view on this.

594
00:35:28,560 --> 00:35:33,079
So for MCP servers, if you
take a look at the source,

595
00:35:33,079 --> 00:35:38,079
for example, of the AWS
networking MCP server,

596
00:35:38,280 --> 00:35:41,400
you'll find that there's
a lot of tools in there.

597
00:35:41,400 --> 00:35:44,310
So what we've actually done
is, there's kind of two ways

598
00:35:44,310 --> 00:35:48,750
to do this is, use a
monolithic server up high,

599
00:35:48,750 --> 00:35:50,970
which has got everything in it,

600
00:35:50,970 --> 00:35:55,050
but that then starts to become
really big really quickly.

601
00:35:55,050 --> 00:36:00,050
Or you can create logical groups
of tools in the file system

602
00:36:00,600 --> 00:36:02,880
and dynamically load and register those

603
00:36:02,880 --> 00:36:05,580
which is what we ended up doing.

604
00:36:05,580 --> 00:36:08,580
So the tools that we've built

605
00:36:08,580 --> 00:36:11,250
are to achieve a specific purpose.

606
00:36:11,250 --> 00:36:13,413
So, find IP address,

607
00:36:15,600 --> 00:36:18,911
find all of your core
networks in your account,

608
00:36:18,911 --> 00:36:21,273
find your global networks,

609
00:36:22,440 --> 00:36:25,995
find AWS network firewall and policies.

610
00:36:25,995 --> 00:36:30,995
And then by giving the
information back to the agent,

611
00:36:34,980 --> 00:36:37,680
and of course we've
used like an agent file

612
00:36:37,680 --> 00:36:40,143
to give it some further direction.

613
00:36:41,070 --> 00:36:44,940
What we should then do
is here say to the agent,

614
00:36:44,940 --> 00:36:47,490
look, here's all the
information that we've got,

615
00:36:47,490 --> 00:36:49,050
how should we proceed?

616
00:36:49,050 --> 00:36:52,800
And then it will then
choose the tool training

617
00:36:52,800 --> 00:36:56,830
to put in place for specific information

618
00:36:57,990 --> 00:37:00,510
to almost analyze the hop by hop,

619
00:37:00,510 --> 00:37:02,850
if you want to do trace route for example,

620
00:37:02,850 --> 00:37:06,690
or if you've got a much more
complex question to ask it,

621
00:37:06,690 --> 00:37:10,320
is how to break that down into subtasks

622
00:37:10,320 --> 00:37:14,250
and choose the tools that it
should use to build that up

623
00:37:14,250 --> 00:37:16,533
to achieve the bigger,
more complex picture.

624
00:37:18,360 --> 00:37:19,590
- [Jose] If I expand on that,

625
00:37:19,590 --> 00:37:23,190
we will see an example of path trace next.

626
00:37:23,190 --> 00:37:26,010
But exactly when we
were creating this tool,

627
00:37:26,010 --> 00:37:29,790
we tried to avoid too
specific tools and large tools

628
00:37:29,790 --> 00:37:33,660
like path trace, we could
just write a script for that

629
00:37:33,660 --> 00:37:35,460
but then it would be a script.

630
00:37:35,460 --> 00:37:38,970
So we try to get or try to
hit some form of balance

631
00:37:38,970 --> 00:37:41,550
that there is higher level of abstraction

632
00:37:41,550 --> 00:37:44,610
but still that yeah, we
could get enough information

633
00:37:44,610 --> 00:37:48,150
to achieve higher goals
or more complex goals.

634
00:37:48,150 --> 00:37:49,731
- [Andy] And I think
the last thing on this,

635
00:37:49,731 --> 00:37:52,331
is that it goes back to
something I said earlier is,

636
00:37:54,030 --> 00:37:55,740
when you're using an MCP server

637
00:37:55,740 --> 00:37:58,863
that's being used by an agent
that's got access to an LLM,

638
00:37:59,910 --> 00:38:02,338
use that intelligence,
use the intelligence

639
00:38:02,338 --> 00:38:07,338
and the capabilities
of the language model,

640
00:38:07,860 --> 00:38:10,683
which is very good at
taking like tons of data in,

641
00:38:13,500 --> 00:38:15,300
pulling out the data it needs,

642
00:38:15,300 --> 00:38:17,624
and then doing something with it.

643
00:38:17,624 --> 00:38:19,770
And we're gonna go through
path trace in a minute

644
00:38:19,770 --> 00:38:24,770
or trace route and you'll
see that it touches

645
00:38:25,080 --> 00:38:27,850
so many different technologies from AWS

646
00:38:28,860 --> 00:38:31,521
that if you were to try
and build that into one

647
00:38:31,521 --> 00:38:34,770
sort of big monolithic tool,

648
00:38:34,770 --> 00:38:37,710
you'd have to cater for every use case.

649
00:38:37,710 --> 00:38:40,950
Where what we are doing is,

650
00:38:40,950 --> 00:38:43,623
by calling multiple specific tools,

651
00:38:44,490 --> 00:38:46,020
getting the agent to make the decision

652
00:38:46,020 --> 00:38:49,137
about what to do with
that and what to do next.

653
00:38:49,137 --> 00:38:51,240
- [Audience Member] So,
specifically what defines

654
00:38:51,240 --> 00:38:53,790
the IP address example
in that tool is that,

655
00:38:53,790 --> 00:38:54,810
based on how you built it,

656
00:38:54,810 --> 00:38:56,940
is that why we're getting that output?

657
00:38:56,940 --> 00:38:57,780
And for example,

658
00:38:57,780 --> 00:39:00,450
if I wanted to include
something like account ID,

659
00:39:00,450 --> 00:39:01,890
would I have to build it into the tool

660
00:39:01,890 --> 00:39:04,410
or would MCP have that context

661
00:39:04,410 --> 00:39:06,250
if I were to ask that as well?

662
00:39:07,628 --> 00:39:12,628
- [Andy] So because the
find IP address itself

663
00:39:13,290 --> 00:39:17,359
has to look through the accounts,
look through the regions,

664
00:39:17,359 --> 00:39:22,359
if you were to ask it
something that by doing

665
00:39:23,154 --> 00:39:26,490
the kind of lookups that it's got to do,

666
00:39:26,490 --> 00:39:29,040
would have the information to hand,

667
00:39:29,040 --> 00:39:31,320
it will give you that information back.

668
00:39:31,320 --> 00:39:34,170
If it's something that
hasn't got anything to do

669
00:39:34,170 --> 00:39:37,514
with any of the lookups that
it's got, then it wouldn't.

670
00:39:37,514 --> 00:39:38,347
- [Audience Member]
You'd have to build it.

671
00:39:38,347 --> 00:39:39,180
- [Andy] Yeah.

672
00:39:39,180 --> 00:39:43,920
And that's really why if you
build smaller, discreet tools

673
00:39:43,920 --> 00:39:48,300
and then use the intelligence
of the agent/ LLM

674
00:39:48,300 --> 00:39:49,920
to stitch those together,

675
00:39:49,920 --> 00:39:53,790
you can get a lot more
flexibility from that.

676
00:39:53,790 --> 00:39:57,250
So you could ask say, find this IP address

677
00:39:57,250 --> 00:40:01,628
and show me the security groups
associated with the instance

678
00:40:01,628 --> 00:40:06,628
and then obviously the
agent and the LLM would say,

679
00:40:08,340 --> 00:40:11,820
I can find the IP now, what
tools have I got available to me

680
00:40:11,820 --> 00:40:13,353
to find the security groups?

681
00:40:14,970 --> 00:40:17,700
When we go through the videos here,

682
00:40:17,700 --> 00:40:20,100
one thing I'm a massive, massive fan of,

683
00:40:20,100 --> 00:40:22,770
not just for these MCPs

684
00:40:22,770 --> 00:40:27,770
but just generally when
you're using an agent is,

685
00:40:28,151 --> 00:40:32,940
get the agent to give
you a report in markdown

686
00:40:32,940 --> 00:40:37,940
but also provide mermaid
diagrams to make things visual.

687
00:40:38,130 --> 00:40:39,604
And you'll see why.

688
00:40:39,604 --> 00:40:43,477
It really does give you
a lot of information.

689
00:40:43,477 --> 00:40:47,560
So for this particular one,

690
00:40:47,560 --> 00:40:50,913
do you wanna run the path trace first?

691
00:40:53,460 --> 00:40:54,570
- [Jose] Yeah.

692
00:40:54,570 --> 00:40:56,020
- [Andy] So what we'll do is,

693
00:40:59,340 --> 00:41:01,470
we've got a recorded path trace

694
00:41:01,470 --> 00:41:03,900
because it takes a long time

695
00:41:03,900 --> 00:41:06,810
and we've cut out all the thinking parts.

696
00:41:06,810 --> 00:41:09,390
So if we go onto the PowerPoint...

697
00:41:09,390 --> 00:41:10,230
- [Jose] We get it from there.

698
00:41:10,230 --> 00:41:13,413
- [Andy] Yeah, I just find the,
oh, you've got the clicker.

699
00:41:16,170 --> 00:41:19,383
And I think this really
kind of brings it together.

700
00:41:20,520 --> 00:41:21,353
Here we go.

701
00:41:22,320 --> 00:41:27,320
Right, so what we've done here
is this is the path trace.

702
00:41:30,687 --> 00:41:32,970
Now what we're doing from here is,

703
00:41:32,970 --> 00:41:37,970
we're literally just saying
can you provide a path trace

704
00:41:38,640 --> 00:41:43,640
between two IP addresses
using the AWS network MCP.

705
00:41:44,820 --> 00:41:48,990
Now, this kind of reiterates
what we've kind of said

706
00:41:48,990 --> 00:41:53,990
around small specific tools
that provide a specific output

707
00:41:56,520 --> 00:41:59,940
that then can be used to train tools

708
00:41:59,940 --> 00:42:03,690
and the intelligence is all
done by the actual agent

709
00:42:03,690 --> 00:42:05,730
and LLM itself.

710
00:42:05,730 --> 00:42:09,960
So what it's doing here is
it's going through a hop by hop

711
00:42:09,960 --> 00:42:14,013
how you do a trace route normally,

712
00:42:19,530 --> 00:42:22,410
which is, there we go.

713
00:42:22,410 --> 00:42:27,410
Sorry my apologies, I've just
clicked in the wrong place.

714
00:42:33,442 --> 00:42:34,440
Why is that not...

715
00:42:34,440 --> 00:42:35,273
Here we go.

716
00:42:36,540 --> 00:42:38,000
So you can see from here,

717
00:42:38,000 --> 00:42:40,350
once it goes through

718
00:42:40,350 --> 00:42:44,580
and it finds your source destination,

719
00:42:44,580 --> 00:42:47,130
it runs through literally hop by hop

720
00:42:47,130 --> 00:42:50,430
what your infrastructure composes of,

721
00:42:50,430 --> 00:42:53,340
and will record all of this information.

722
00:42:53,340 --> 00:42:58,340
Now what I've done at the end of this is,

723
00:42:58,380 --> 00:43:02,343
the video's not playing particularly well.

724
00:43:04,650 --> 00:43:09,650
I've asked it afterwards, please
can you provide me a report

725
00:43:10,020 --> 00:43:14,130
in Markdown with mermaid diagrams

726
00:43:14,130 --> 00:43:17,613
to explain what that
path trace looks like.

727
00:43:23,520 --> 00:43:26,250
This is the path trace report.

728
00:43:26,250 --> 00:43:30,210
Now again, whenever you're
doing a report with Markdown,

729
00:43:30,210 --> 00:43:35,210
sorry, ask it to include
MCP, sorry mermaid diagrams

730
00:43:36,960 --> 00:43:39,450
'cause it'll produce diagrams like this

731
00:43:39,450 --> 00:43:41,823
that actually show you a breakdown of,

732
00:43:42,698 --> 00:43:47,580
in this case the path trace,
exactly the path it took

733
00:43:47,580 --> 00:43:49,320
and even puts a nice little emoji on there

734
00:43:49,320 --> 00:43:53,130
to show an inspection VPC with a firewall.

735
00:43:53,130 --> 00:43:55,950
But it'll literally walk
through each component

736
00:43:55,950 --> 00:44:00,950
showing what's there, but then
it'll go into more detail.

737
00:44:02,910 --> 00:44:05,070
Again, it's hard to see from here,

738
00:44:05,070 --> 00:44:08,250
but it'll show you each of
those hops that it takes,

739
00:44:08,250 --> 00:44:09,993
what that's composed of.

740
00:44:11,310 --> 00:44:15,270
But from a network engineer
perspective, as we know,

741
00:44:15,270 --> 00:44:17,760
the return path is equally as valid

742
00:44:17,760 --> 00:44:20,520
because if it's not symmetric,
you're gonna have a problem.

743
00:44:20,520 --> 00:44:23,010
Firewalls are not gonna play nicely.

744
00:44:23,010 --> 00:44:26,133
So once it's done then,
if we keep going down,

745
00:44:27,360 --> 00:44:28,440
it'll give you an overview

746
00:44:28,440 --> 00:44:31,680
of what the cloud WAN
architecture itself looks like,

747
00:44:31,680 --> 00:44:36,680
where the segments have got
used, network function groups

748
00:44:37,200 --> 00:44:38,580
and if you keep going down,

749
00:44:38,580 --> 00:44:41,610
then start showing you your route tables.

750
00:44:41,610 --> 00:44:44,380
We can just kind of gradually
go through the rest of it

751
00:44:45,690 --> 00:44:47,700
if you just scroll down through the rest,

752
00:44:47,700 --> 00:44:50,190
if there's anything really pertinent.

753
00:44:50,190 --> 00:44:54,423
So it'll also show your
security control analysis.

754
00:44:55,260 --> 00:44:57,993
That's network ACLs for
anyone who uses them.

755
00:44:59,670 --> 00:45:03,480
Firewall inspection VPCs,

756
00:45:03,480 --> 00:45:06,423
does the policy allow that connectivity.

757
00:45:07,500 --> 00:45:10,773
Any particular issues that are identified.

758
00:45:11,925 --> 00:45:15,120
And it'll also show your security groups.

759
00:45:15,120 --> 00:45:16,830
And then the nice thing is,

760
00:45:16,830 --> 00:45:19,380
it'll give you a connectivity matrix.

761
00:45:19,380 --> 00:45:24,380
Now this is nothing more than
saying provide a path trace.

762
00:45:25,020 --> 00:45:28,230
Now because as we kind of
said before the questions,

763
00:45:28,230 --> 00:45:32,160
that calls a lot of discreet tools

764
00:45:32,160 --> 00:45:34,650
and each of those tools provides data.

765
00:45:34,650 --> 00:45:37,890
What it's now doing is
it's taking all that data

766
00:45:37,890 --> 00:45:42,330
and it's creating a
markdown report for you,

767
00:45:42,330 --> 00:45:45,480
but it's using mermaid diagrams as well

768
00:45:45,480 --> 00:45:48,180
to give you the visualization
where that really helps.

769
00:45:53,430 --> 00:45:58,430
So I think on this one, what it also does,

770
00:45:59,400 --> 00:46:01,860
it just provides you some CLI tools

771
00:46:01,860 --> 00:46:04,890
if you want to not trust what it says,

772
00:46:04,890 --> 00:46:09,890
and kind of validate for
yourself each of the hops itself,

773
00:46:10,320 --> 00:46:15,303
it'll provide you the AWS CLI tools.

774
00:46:19,080 --> 00:46:20,582
The next one.

775
00:46:20,582 --> 00:46:21,415
- [Audience Member] Quick question.

776
00:46:21,415 --> 00:46:22,248
- [Andy] Yeah, go for it.

777
00:46:22,248 --> 00:46:23,943
- [Audience Member] On the
previous, on the slide you did

778
00:46:23,943 --> 00:46:28,050
when you went through this,
you picking up this demo here,

779
00:46:28,050 --> 00:46:30,417
it said that there was a
lot of trial and error,

780
00:46:30,417 --> 00:46:32,940
any key learnings of what you tried

781
00:46:32,940 --> 00:46:35,838
that we could learn from not to do?

782
00:46:35,838 --> 00:46:37,950
Like when you were building
this (indistinct) tool?

783
00:46:37,950 --> 00:46:40,530
- [Andy] Oh wow, oh wow.

784
00:46:40,530 --> 00:46:42,573
Well first of all, when I had hair,

785
00:46:43,949 --> 00:46:45,960
Yes, lots.

786
00:46:45,960 --> 00:46:48,090
So I'll give you just a couple
of the ones that I found

787
00:46:48,090 --> 00:46:50,400
that were really key and then,

788
00:46:50,400 --> 00:46:53,790
'cause they obviously
add some more in there

789
00:46:53,790 --> 00:46:57,870
because you've got a much
stronger development background

790
00:46:57,870 --> 00:46:58,830
than I have.

791
00:46:58,830 --> 00:47:03,830
So first of all, if you rely too much

792
00:47:04,320 --> 00:47:09,320
on an agentic coding agent,
it ultimately did provide

793
00:47:10,770 --> 00:47:15,300
a cloud WAN MCP server
that gave me what I wanted.

794
00:47:15,300 --> 00:47:18,420
But it was really full of,
for want of a better term,

795
00:47:18,420 --> 00:47:19,470
bloatware.

796
00:47:19,470 --> 00:47:21,930
There was a lot of things in
there that it weren't needed,

797
00:47:21,930 --> 00:47:24,360
it didn't clean up a few things properly

798
00:47:24,360 --> 00:47:26,820
and it didn't give me a lot of control.

799
00:47:26,820 --> 00:47:31,820
So the standard in the
AWS labs MCP servers,

800
00:47:36,300 --> 00:47:39,720
bar this one, just
because of the size of it

801
00:47:39,720 --> 00:47:42,840
were very much put
everything in server PY.

802
00:47:42,840 --> 00:47:45,090
So you'd have kind of one monolithic file

803
00:47:45,090 --> 00:47:46,950
with all the tools in.

804
00:47:46,950 --> 00:47:48,750
And we soon found that,

805
00:47:48,750 --> 00:47:53,750
once you start touching on
cloud WAN, VPCs, firewalls,

806
00:47:54,210 --> 00:47:56,883
firewall policies, et
cetera, et cetera, et cetera,

807
00:47:56,883 --> 00:48:00,630
that that soon becomes huge.

808
00:48:00,630 --> 00:48:04,260
And it also means that
it's not that extensible.

809
00:48:04,260 --> 00:48:06,930
So by breaking that
down into logical groups

810
00:48:06,930 --> 00:48:10,890
on the file system for cloud WAN tools,

811
00:48:10,890 --> 00:48:15,420
network firewall tools,
it means that later on,

812
00:48:15,420 --> 00:48:17,100
if you wanted to add some tools in

813
00:48:17,100 --> 00:48:21,723
specifically for VPC endpoints for,

814
00:48:24,180 --> 00:48:26,640
I can't think of anything
else, VPC Lattice,

815
00:48:26,640 --> 00:48:28,890
you know, whatever the case may be,

816
00:48:28,890 --> 00:48:32,370
you've got dedicated
tools within a directory

817
00:48:32,370 --> 00:48:37,370
rather than forever expanding
this massive server PY.

818
00:48:37,800 --> 00:48:41,130
So I think that was a key learning.

819
00:48:41,130 --> 00:48:46,130
The other one was test with
real infrastructure often.

820
00:48:48,990 --> 00:48:53,700
What I found is, when I
used mock infrastructure

821
00:48:53,700 --> 00:48:58,700
or mock data to test with,
often it would be left in there

822
00:49:00,030 --> 00:49:01,768
and then you'd say,

823
00:49:01,768 --> 00:49:04,170
is this particular tool working properly?

824
00:49:04,170 --> 00:49:08,250
Yeah, it's great look, it works perfectly.

825
00:49:08,250 --> 00:49:11,100
And when you look closely,
it's just using mock data.

826
00:49:11,100 --> 00:49:15,840
So I try to, this is just me,
I try to avoid using mock data

827
00:49:15,840 --> 00:49:16,890
when I don't need to.

828
00:49:17,834 --> 00:49:22,050
One of the benefits of
doing this in the cloud,

829
00:49:22,050 --> 00:49:26,160
we can spin up a test environment.

830
00:49:26,160 --> 00:49:29,196
If it's cloud WAN, please
then spin it down afterwards.

831
00:49:29,196 --> 00:49:34,196
But you can test it against
a known good architecture,

832
00:49:35,100 --> 00:49:37,920
just test often against something,

833
00:49:37,920 --> 00:49:41,523
making sure you get the
responses you want every time.

834
00:49:43,560 --> 00:49:45,150
- [Jose] Yeah, I think
that's one key learning also

835
00:49:45,150 --> 00:49:46,650
was the error handling.

836
00:49:46,650 --> 00:49:51,650
So as LLM tries to be
as helpful as possible

837
00:49:51,720 --> 00:49:54,481
without good error handling
and good information

838
00:49:54,481 --> 00:49:57,300
giving back that if something failed

839
00:49:57,300 --> 00:49:58,800
that what it needs to do next.

840
00:49:58,800 --> 00:49:59,970
And for example, validate.

841
00:49:59,970 --> 00:50:02,757
So we have a lot of
information in the tools

842
00:50:02,757 --> 00:50:04,833
and there is a specific tool, for example,

843
00:50:04,833 --> 00:50:07,770
just for path trace that gives information

844
00:50:07,770 --> 00:50:11,430
on the methodology what needs
to be done and in which order.

845
00:50:11,430 --> 00:50:13,740
Without that it tries to be helpful.

846
00:50:13,740 --> 00:50:15,330
And for example, if something fails,

847
00:50:15,330 --> 00:50:19,563
it doesn't have access to
something or what it might be,

848
00:50:21,096 --> 00:50:24,480
AI can just go past and say
that okay, everything is good

849
00:50:24,480 --> 00:50:26,910
and it's working even though
it didn't actually verify it.

850
00:50:26,910 --> 00:50:28,172
So think that the error handling

851
00:50:28,172 --> 00:50:31,080
is one of the key details here,

852
00:50:31,080 --> 00:50:33,540
just to make sure that you get that right.

853
00:50:33,540 --> 00:50:35,351
- [Andy] I'm gonna add just
one last one on this is,

854
00:50:35,351 --> 00:50:40,351
even before we started
using agent files on this,

855
00:50:40,560 --> 00:50:44,790
we used an MCP resource
to provide a persona

856
00:50:44,790 --> 00:50:46,440
to the MCP server.

857
00:50:46,440 --> 00:50:50,040
Literally saying, you
are a network engineer

858
00:50:50,040 --> 00:50:53,340
or network operations, and
these are the guidelines.

859
00:50:53,340 --> 00:50:58,340
So if partial data
comes back or something,

860
00:50:58,440 --> 00:51:02,070
a tool returns data that's not complete,

861
00:51:02,070 --> 00:51:05,760
don't assume life is good
and everything's okay.

862
00:51:05,760 --> 00:51:09,420
Stop, use the error
handling and report back.

863
00:51:09,420 --> 00:51:13,350
Otherwise it can just la, la,
la it's all good, carry on.

864
00:51:13,350 --> 00:51:17,340
And you've got a core
decision that's led you down,

865
00:51:17,340 --> 00:51:20,793
potentially a very dark path
to try and troubleshoot.

866
00:51:23,388 --> 00:51:24,605
Yes?

867
00:51:24,605 --> 00:51:26,272
- [Audience Member] On
this markdown document,

868
00:51:26,272 --> 00:51:29,467
there was a section that
said, "Issues identified."

869
00:51:29,467 --> 00:51:32,850
Is that based on a general
guidance and best practice

870
00:51:32,850 --> 00:51:35,560
or is that included as output

871
00:51:36,725 --> 00:51:38,520
when you're trying to troubleshoot
a specific (indistinct)?

872
00:51:38,520 --> 00:51:41,430
- [Andy] That's actually
included in the output

873
00:51:41,430 --> 00:51:43,230
from the particular tool

874
00:51:43,230 --> 00:51:47,430
that found where there
was a potential problem.

875
00:51:47,430 --> 00:51:50,340
So that's further enhanced

876
00:51:50,340 --> 00:51:54,930
when you use things like a
persona or you use an agent file

877
00:51:54,930 --> 00:51:56,730
to give it very strict direction.

878
00:51:56,730 --> 00:52:01,730
But generally, if the tool returns data

879
00:52:02,490 --> 00:52:05,241
where it thinks there's a problem,

880
00:52:05,241 --> 00:52:08,310
it will get there automatically.

881
00:52:08,310 --> 00:52:10,050
So you don't have to go overboard

882
00:52:10,050 --> 00:52:12,513
with regard to try and
thinking of every use case,

883
00:52:12,513 --> 00:52:15,225
every corner case.

884
00:52:15,225 --> 00:52:16,486
- [Audience Member] So it's proactively

885
00:52:16,486 --> 00:52:18,150
identifying position.

886
00:52:18,150 --> 00:52:19,770
- [Andy] Correct, correct.

887
00:52:19,770 --> 00:52:21,660
- [Jose] I saw that there
were a couple more questions,

888
00:52:21,660 --> 00:52:25,587
but due time I think that
we need to finalize this one

889
00:52:25,587 --> 00:52:27,540
and if you have more questions

890
00:52:27,540 --> 00:52:30,764
we will be around here after
the presentation, so...

891
00:52:30,764 --> 00:52:32,190
- [Andy] Yeah, what I would
encourage just really quickly

892
00:52:32,190 --> 00:52:34,020
is look, we're gonna be around.

893
00:52:34,020 --> 00:52:36,810
Unfortunately we love
talking about this stuff,

894
00:52:36,810 --> 00:52:41,640
so if you want to sit down over
a coffee and have a chat now

895
00:52:41,640 --> 00:52:44,400
or anytime during the
week, just give us a shout.

896
00:52:44,400 --> 00:52:46,517
Both of us would love to
sit down and talk with you,

897
00:52:46,517 --> 00:52:48,333
connect offline.

898
00:52:49,920 --> 00:52:54,920
So one of the tools that I
found was very, very useful

899
00:52:57,570 --> 00:53:02,370
because trying to do
this manually is hard.

900
00:53:02,370 --> 00:53:05,130
So I tried to explain
this to a customer once

901
00:53:05,130 --> 00:53:08,610
and I wrote some Python to try and do it

902
00:53:08,610 --> 00:53:10,470
and it was very difficult to do.

903
00:53:10,470 --> 00:53:15,150
So the prompt that was
given to the MCP server was,

904
00:53:15,150 --> 00:53:18,873
please explain the core network policies,

905
00:53:19,920 --> 00:53:22,773
always plural in case
there's more than one,

906
00:53:24,008 --> 00:53:28,380
explain the network function
group configuration,

907
00:53:28,380 --> 00:53:29,670
if it exists.

908
00:53:29,670 --> 00:53:34,270
And the almighty, please
include mermaid diagrams

909
00:53:36,245 --> 00:53:37,890
where it's viable.

910
00:53:37,890 --> 00:53:39,660
And as you can see from here,

911
00:53:39,660 --> 00:53:43,200
it'll actually break down the policy.

912
00:53:43,200 --> 00:53:46,050
It'll show you all of your segments.

913
00:53:46,050 --> 00:53:48,483
The segments that are isolated,

914
00:53:49,350 --> 00:53:53,310
the segments that have
got direct connectivity,

915
00:53:53,310 --> 00:53:56,610
which you'll see here

916
00:53:56,610 --> 00:53:59,220
because they've got
route sharing configured.

917
00:53:59,220 --> 00:54:00,580
So it'll actually show you

918
00:54:01,560 --> 00:54:05,910
not just which segments
have got connectivity,

919
00:54:05,910 --> 00:54:06,990
but you'll have arrows on there

920
00:54:06,990 --> 00:54:08,943
to show you the direction as well.

921
00:54:09,802 --> 00:54:12,993
It'll build out a connectivity matrix.

922
00:54:13,920 --> 00:54:15,390
And then the really handy thing is,

923
00:54:15,390 --> 00:54:18,570
if you go down a bit further,
it'll actually explain to you,

924
00:54:18,570 --> 00:54:19,480
sorry, just go up a little bit.

925
00:54:19,480 --> 00:54:24,030
It'll explain to you why
certain routes are blocked.

926
00:54:24,030 --> 00:54:29,030
So as well as giving you the
diagrams and the explanations,

927
00:54:29,640 --> 00:54:33,540
it'll also say to you,
this is why things work

928
00:54:33,540 --> 00:54:35,459
or this is why things don't work.

929
00:54:35,459 --> 00:54:38,820
Now the hardest one is the next part,

930
00:54:38,820 --> 00:54:41,073
is the network function group analysis.

931
00:54:42,420 --> 00:54:46,470
So it'll take the network
function group configuration

932
00:54:46,470 --> 00:54:51,470
in the policy and then
build out mermaid diagrams

933
00:54:52,650 --> 00:54:56,040
to show you each of the
network function groups

934
00:54:56,040 --> 00:54:57,930
and their capabilities.

935
00:54:57,930 --> 00:55:02,613
So as we go down, you'll
see the attachments,

936
00:55:03,600 --> 00:55:07,263
the patterns that each of
the attachments have got,

937
00:55:08,490 --> 00:55:10,920
send to and send via.

938
00:55:10,920 --> 00:55:13,533
And if you keep going
down a little bit further,

939
00:55:16,830 --> 00:55:18,360
you'll start seeing that for each

940
00:55:18,360 --> 00:55:20,490
of the network function groups,

941
00:55:20,490 --> 00:55:25,050
you get that visual explanation
around how it works.

942
00:55:25,050 --> 00:55:27,360
So if you are troubleshooting something

943
00:55:27,360 --> 00:55:31,770
and you're not quite sure
if a network function group

944
00:55:31,770 --> 00:55:34,044
is doing something specific,

945
00:55:34,044 --> 00:55:36,060
you can actually look at the document,

946
00:55:36,060 --> 00:55:39,240
which will give you a, I say a verbal,

947
00:55:39,240 --> 00:55:42,630
a written explanation
of how it's configured,

948
00:55:42,630 --> 00:55:45,450
but also provide mermaid diagrams

949
00:55:45,450 --> 00:55:48,390
to show you how things are configured,

950
00:55:48,390 --> 00:55:49,950
where things are blocked,

951
00:55:49,950 --> 00:55:53,430
where connectivity is blocked by design,

952
00:55:53,430 --> 00:55:54,902
where there's isolation.

953
00:55:54,902 --> 00:55:59,460
Now getting that just from JSON document

954
00:55:59,460 --> 00:56:04,460
that is returned from cloud
WAN is very difficult to do.

955
00:56:04,890 --> 00:56:06,933
If you go down the last little bit,

956
00:56:07,890 --> 00:56:09,762
it'll show you the configuration

957
00:56:09,762 --> 00:56:13,980
of the network function group

958
00:56:13,980 --> 00:56:18,390
and it'll give you some of the
information in JSON as well.

959
00:56:18,390 --> 00:56:22,230
But using a question,

960
00:56:22,230 --> 00:56:27,030
asking it to provide the
output in a markdown document

961
00:56:27,030 --> 00:56:32,030
with mermaid diagrams will
save you so much time.

962
00:56:33,060 --> 00:56:35,793
And for learning, incredibly helpful.

963
00:56:40,849 --> 00:56:43,380
So as I said before, just
to kind of recap quickly

964
00:56:43,380 --> 00:56:45,480
and we've got a few minutes for questions,

965
00:56:48,480 --> 00:56:52,710
this started off as AWS
cloud WAN MCP server,

966
00:56:52,710 --> 00:56:54,390
but after we realized that it touched

967
00:56:54,390 --> 00:56:56,490
so many network services,

968
00:56:56,490 --> 00:56:58,500
and the fact that we want
to make this extensible

969
00:56:58,500 --> 00:57:02,880
to any network services,

970
00:57:02,880 --> 00:57:07,110
we changed the name to
AWS network MCP server.

971
00:57:07,110 --> 00:57:07,980
That's been released,

972
00:57:07,980 --> 00:57:10,740
that's available today for folks to use.

973
00:57:10,740 --> 00:57:15,740
It's open source, so if you're
doing something on path trace

974
00:57:16,590 --> 00:57:19,650
or you are looking at
something about, I don't know,

975
00:57:19,650 --> 00:57:21,180
getting the policy and you think,

976
00:57:21,180 --> 00:57:25,894
I've got a really good
idea, do a PR, add to it.

977
00:57:25,894 --> 00:57:28,710
You know, if you're doing
something on, I don't know,

978
00:57:28,710 --> 00:57:30,720
a service that's not there already,

979
00:57:30,720 --> 00:57:34,770
so say one of the services
that's being announced this week,

980
00:57:34,770 --> 00:57:39,770
or VPC Lattice, or one of
the services you heavily use,

981
00:57:41,490 --> 00:57:42,750
do a PR.

982
00:57:42,750 --> 00:57:45,933
It'd be really good to
get community involvement.

983
00:57:46,883 --> 00:57:50,913
So that's kind of it from
what we were going over today.

