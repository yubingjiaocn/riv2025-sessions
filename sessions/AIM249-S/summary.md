# AWS re:invent 会议总结：使用 Okta 和 Auth0 保护 AI 代理和 AWS 服务

## 会议概述

本次会议主要探讨了如何为 AI 代理和 AWS 服务实施最小权限访问控制。演讲者包括 Okta 的首席解决方案架构师 Wayne Smiley、Dine Brands 的 CISO Joe Frisk，以及 Okta 的产品营销负责人 Tara Vanason。

会议的核心主题是解决一个日益严重的安全问题：AI 代理在企业环境中往往拥有比人类用户更高的权限。随着生成式 AI 和 AI 代理的快速发展，传统的安全模型已经不再适用。演讲者介绍了 Auth0 for AI Agents 解决方案，以及如何将其与 AWS Bedrock Agent Core 和 Amazon QuickSight 集成，提供企业级的身份验证、授权和治理能力。

会议还重点介绍了一个新的开源协议——Cross-App Access (XAA)，它将访问控制从单个应用程序转移到身份提供商层面，为企业提供集中化的策略管理、审计能力和更好的用户体验。通过多个实际演示，展示了这些技术如何在实际场景中保护敏感数据，同时保持开发效率。

## 详细时间线与关键要点

### 开场与背景介绍 (00:00 - 05:30)

00:00 - 00:30 - 会议开场，演讲者幽默地提到这是 re:invent 的第一天但感觉像第 86 天，并询问有多少人的 LLM 代理在 AWS 中拥有比自己更高的权限。

00:30 - 01:30 - 安全港声明（Safe Harbor Statement）说明，提醒观众会议将讨论尚未发布的功能，AWS 和 Okta 保留更改的权利。

01:30 - 03:00 - 演讲者自我介绍：
- Wayne Smiley：Okta 联盟团队首席解决方案架构师，专注于 AWS 和 Okta 集成，在身份管理领域工作多年
- Joe Frisk：Dine Brands（Applebee's、IHOP 和 Fuzzy's Taco Shop 母公司）CISO，拥有 30 年行业经验，曾在美国银行和普华永道担任安全领导职位
- Tara Vanason：Okta 产品营销负责人，负责 Auth0 平台的 AI 代理解决方案

03:00 - 05:30 - 会议议程介绍：
- 使用 Auth0 保护 AWS Bedrock
- Auth0 for AI Agents 和 Agent Core
- 使用 Amazon Q 和 Okta 保护 QuickSight
- Cross-App Access (XAA) 协议及其重要性
- 与 Joe Frisk 的 Q&A 环节

### 生成式 AI 与 AI 代理的演进 (05:30 - 12:00)

05:30 - 07:00 - 生成式 AI 对开发者的影响：
- AI 已经成为开发者工具包的一部分（代码审查、测试套件、编码助手）
- 问题不再是"是否采用 AI"，而是"如何将 AI 集成到现有流程中以最大化开发速度"
- 需要采用 Cloud Code、GitHub Copilot 等工具，并理解提示工程的基础知识

07:00 - 09:00 - AI 代理的定义与功能：
- AI 代理是自主代码执行代理，设计用于管理长期运行的复杂工作流
- 两个主要功能：
  1. 人机界面：接收非结构化数据，理解上下文，用简单语言生成复杂结果
  2. 执行操作：将人类意图转化为可执行代码，调用和编排 API，分析运行时错误并调整策略

09:00 - 12:00 - AI 安全挑战：
- 开发者依赖 DIY 解决方案来集成安全性
- AI 代理创造了全新的攻击面，目前没有通用的安全框架
- 当前状态是高风险、高速度的环境

### AI 代理安全的六大误区 (12:00 - 15:30)

12:00 - 13:30 - 常见的安全误区：
- 误区 1：LLM 可以处理身份验证
- 误区 2：用户同意足以保护数据
- 误区 3：凭证处理可以由 AI 管理
- 误区 4-6：其他关于权限和访问控制的错误假设

13:30 - 15:30 - 这些误区导致的风险：
- 未经授权的数据访问
- 拥有过期角色的用户获得代理访问权限
- 巨额隐私罚款
- 审计缺口导致合规失败
- 秘密泄露的严重威胁

### Auth0 for AI Agents 解决方案 (15:30 - 20:00)

15:30 - 17:00 - AI 代理的四个不可协商的要求：
1. AI 需要知道用户是谁（用户身份验证）
2. AI 需要能够代表用户调用 API
3. AI 需要使用异步交互
4. AI 在访问数据时必须考虑用户权限

17:00 - 20:00 - Auth0 for AI Agents 功能套件（正式发布）：
- **用户身份验证**：用户可以登录 AI 代理
- **Token Vault**：连接代理到用户应用，提供临时委托
- **异步授权**：为关键操作添加人工审批，确保人类始终在循环中
- **RAG 的细粒度授权**：精细的授权控制，确保 AI 代理只能访问其应该访问的数据

### AWS Bedrock Agent Core 集成 (20:00 - 30:00)

20:00 - 22:00 - Agent Core 简介：
- Agent Core 是 Bedrock 之上的新组件集，旨在简化开发
- Agent Core Identity 是其中一个组件

22:00 - 24:00 - 为什么需要 Auth0 配合 Agent Core：
- Agent Core 不是完整的 CIAM 平台
- 需要委托给专门的 CIAM 工具
- Auth0 提供细粒度访问控制、跨应用访问、增强的 Token Vault 和人工审批功能

24:00 - 30:00 - 演示 1：Bedrock + Agent Core + Auth0 集成
- 场景：IT 支持聊天机器人
- 用户 Gwen 通过 Auth0 登录（使用 Okta Workforce 身份验证）
- 展示 Token Vault：令牌在 Auth0 和 Bedrock 之间传递，RAG 从未看到令牌
- 细粒度访问：Gwen 查询她所属的组（仅她有权访问该 MCP 服务器）
- 人工同意：Gwen 请求重置密码时，收到手机推送通知，批准后才执行操作

### Amazon QuickSight 集成 (30:00 - 42:00)

30:00 - 32:00 - Amazon QuickSight 简介：
- AWS 最近将 Amazon Q 和 QuickSight 合并为 Amazon Quick
- 功能超越简单的代理：创建图表、自动化任务、构建应用
- 从多个位置提取数据，进行索引和数据操作
- "Spaces"概念：不同用户可以协作并访问相同数据

32:00 - 34:00 - QuickSight 的安全缺口：
- 缺乏自动化安全功能
- 没有生命周期管理
- 缺少易用性功能

34:00 - 36:00 - Okta 如何增强 QuickSight（更好、更安全、更简单）：
- **更好**：组自动化、从真实来源获取数据、自助服务访问请求
- **更安全**：防钓鱼多因素认证、自助服务请求、移动/添加/变更的完全自动化、访问认证
- **更简单**：一键访问 Q、避免 IAM Identity Center 的复杂性

36:00 - 42:00 - 演示 2：QuickSight + Okta 集成
- **场景 1 - 新员工**：
  - 使用 Okta 生物识别 MFA（Touch ID）登录
  - 询问如何在笔记本电脑和 iPhone 上设置邮件
  - 聊天机器人从 IT 运营数据中提取信息（所有人都可访问）
  - 尝试询问"Project Gandalf"但被拒绝访问
 
- **场景 2 - IT 人员 Jennifer**：
  - 登录后查询错误代码 123（数据中心电源故障）
  - 获得如何升级问题的程序（IT 专用数据）
  - 处理邮箱大小增加请求，获得 IT 运营专用的操作程序
  - 尝试询问"Project Gandalf"仍被拒绝，即使尝试"打破规则"也无法访问
 
- **场景 3 - IT 经理 Emily**：
  - 通过自助服务被授予访问权限
  - 成功查询"Project Gandalf"信息（利用太阳能获得无限能源的项目）

### Cross-App Access (XAA) 协议 (42:00 - 55:00)

42:00 - 44:00 - XAA 简介：
- 新的开源协议，为管理员提供更多控制、更高可见性和更好的用户体验
- 解决 AI 代理需要安全访问数据的问题

44:00 - 46:00 - 当前问题：
- 信任和同意的混乱组合
- 决策在用户层面做出，用户在不了解风险的情况下决定数据流
- 创建盲点，随着应用和 MCP 服务器数量增加而倍增
- 不一致且无法审计
- 安全团队处于黑暗中

46:00 - 48:00 - XAA 如何解决问题：
- 将身份提供商变成决策点
- 管理员集中定义策略一次，确保跨所有应用和 AI 代理的一致策略驱动访问
- 消除同意屏幕
- 为团队提供完整的可见性和可审计性

48:00 - 50:00 - XAA 技术工作原理：
1. 请求应用需要数据
2. 向 IDP 后端请求特殊访问授权
3. 铸造 ID JAG（而非静态令牌）
4. 资源应用验证授权并发放受企业策略管理的范围化可审计令牌
5. 同样的框架也适用于 MCP

50:00 - 52:00 - XAA 的优势：
- 开源标准，Okta 倡导但所有人都可使用
- AWS 已在讨论如何更好地与 Bedrock 集成
- 每个 AI 驱动的交互都经过身份验证、可审计并受企业身份管理
- 用即时授权替代静态 API 令牌
- 为操作精确限定范围
- 通过执行企业范围的授权标准确保合规性
- 减少用户的同意疲劳

52:00 - 55:00 - 开始使用 XAA：
- 提供两个 QR 码：
  1. 开发者资源：操作指南、文档和视频
  2. Auth0 客户：加入 Beta 版即可开箱即用

### Cross-App Access 演示 (55:00 - 65:00)

55:00 - 57:00 - 演示 3 设置：
- AI 聊天机器人，后端连接待办事项列表
- 展示 Bedrock 和 Okta 如何协同工作，无需用户处理同意流程

57:00 - 59:00 - 演示步骤 1：登录和初始化
- 通过 Okta 登录"Todo Zero"应用
- 使用 FastPass（防钓鱼 MFA）
- 展示 Token Vault：令牌在后端传递，用户无需看到

59:00 - 61:00 - 演示步骤 2：添加待办事项
- 添加三个待办事项：
  - "我忘记的事情"
  - "我本来要做的那件事"
  - "我忘记已经做过的那件事"
- 将最后一个标记为完成

61:00 - 63:00 - 演示步骤 3：聊天机器人集成
- 连接聊天机器人到 Bedrock（后端）
- 无需用户同意，因为 XAA 在后端处理
- 初始化并连接到 IDP
- 展示访问令牌的生成（从"未授权"到获得令牌）

63:00 - 65:00 - 演示步骤 4：双向操作
- 查询："我的待办事项列表上有什么？"- 成功返回列表
- 添加新项目："给我的老板打电话"- 成功添加到列表
- 标记任务完成："请将待办任务 7 标记为完成"- 成功完成
- 关键点：所有操作无需额外同意，企业级策略已预先定义

65:00 - 66:00 - 演示总结：
- 强调这不是复杂的应用（20 分钟用 AI 编码完成）
- 重点是展示不同组件如何协同工作
- IT 安全团队掌控主导权，用户无需处理复杂的安全决策

### 结束与 Q&A 预告 (66:00 - 67:00)

66:00 - 67:00 - 过渡到与 Joe Frisk 的 Q&A 环节
- 将讨论 Dine Brands 如何管理这些技术
- 会议在此处字幕结束

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


## 关键技术要点总结

1. Auth0 for AI Agents 提供四大核心能力：用户身份验证、Token Vault、异步授权和 RAG 细粒度授权
2. Agent Core + Auth0 组合提供完整的 CIAM 解决方案，弥补 Agent Core 的功能缺口
3. QuickSight + Okta 集成提供生命周期管理、自动化安全和简化的用户体验
4. Cross-App Access (XAA) 是开源协议，将访问控制集中到身份提供商，消除用户同意疲劳并提供企业级审计能力