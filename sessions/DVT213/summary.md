# AWS re:Invent 2025 DVT213 会议总结

## 会议概述

本次会议由AWS Kiro团队的两位创始成员Arun（高级解决方案架构师经理）和Nathan（Kiro IDE构建团队的高级软件经理）主讲，主题聚焦于AI代理开发中的上下文工程（Context Engineering）。会议深入探讨了如何通过模型上下文协议（MCP）来解决AI代理在实际生产环境中面临的上下文管理挑战。

演讲者强调，决定AI代理输出质量的最关键因素是如何有效地为代理提供信息（上下文）。他们指出，上下文工程不仅仅是提供更多信息，而是提供响应式的、实时的信息，并且让代理能够观察其行为的结果并进行调整。会议涵盖了从传统RAG方法的局限性到MCP协议的革命性优势，展示了Kiro团队如何在整个软件开发生命周期中应用MCP，并通过现场演示展示了MCP工具如何让代理实现真正的反馈闭环。

## 详细时间线与关键要点

### 开场与背景介绍 (00:00 - 05:30)

00:00 - 01:30 - 会议开场
- 欢迎参加re:Invent第三天的DVT213会议
- 演讲者自我介绍：Arun和Nathan都是Kiro团队的创始成员
- 现场调查：大部分观众熟悉Kiro，正在使用AI代理，并遇到过上下文窗口限制问题

01:30 - 03:00 - 会议议程概览
- 四大核心议题：上下文工程的定义、RAG的局限性、MCP协议介绍、Kiro与MCP的集成
- 承诺进行现场演示（"YOLO"精神）

03:00 - 05:30 - 上下文工程的演进
- AI工程的发展路径：提示工程 → RAG → 代理 → 上下文工程
- 上下文工程是将原型转化为生产系统的关键
- 强调管理代理运行的整个信息环境的重要性

### 上下文的本质与挑战 (05:30 - 12:00)

05:30 - 07:00 - 消息数组中的上下文
- 解释LLM对话中的消息数组概念
- 包含系统提示、用户消息、工具调用、工具结果和助手响应
- 长时间运行的代理面临的问题：消息数组持续增长

07:00 - 09:00 - 上下文工程的定义
- 引用Andrej Karpathy的名言：上下文工程是填充上下文窗口的艺术和科学
- 进一步扩展：不仅是填充，还包括修剪、总结和在适当时机重新加载上下文

09:00 - 12:00 - 四种上下文类型
- **系统上下文**：角色定义、行为指令、代理的"工作手册"
- **检索上下文**：RAG的领域，通过语义搜索索引知识库
- **对话上下文**：消息历史，在长时间自主工作流中可能增长到数千条消息
- **工具上下文**：动态加载的上下文，包括MCP和API连接

### RAG的工作原理与局限 (12:00 - 18:00)

12:00 - 14:30 - RAG的三个核心步骤
- **检索（Retrieval）**：基于向量数据库的语义相似性搜索
- **增强（Augmentation）**：将检索到的上下文添加到用户原始提示中
- **生成（Generation）**：基于增强提示生成响应

14:30 - 16:00 - RAG的适用场景
- 改善内容质量，减少幻觉
- 上下文聊天机器人和问答系统
- 个性化搜索
- 实时数据摘要

16:00 - 18:00 - RAG的根本局限
- **无反馈循环**：模型无法请求更多或不同的信息
- **被动系统**：在模型推理之前就猜测相关内容
- **上下文困境**：检索太少信息不足，检索太多造成噪音
- **语义差距**：语义相似性不等于实际需求
- **过时问题**：向量数据库可能包含过时文档
- **多跳问题**：无法跟踪依赖链

### MCP协议详解 (18:00 - 28:00)

18:00 - 20:00 - MCP的核心特性
- Anthropic创建的开放标准（非专有）
- 客户端-服务器协议，连接AI与数据和工具
- 预定义SDK和内置集成（Google Drive、Slack、Jira等）
- 三个核心原语：资源、提示和工具

20:00 - 23:00 - MCP请求流程
- 用户查询 → 主机请求可用工具 → MCP服务器列出工具
- LLM选择工具并识别参数 → 调用工具 → API响应 → 格式化响应返回用户

23:00 - 25:00 - MCP的重要性："AI集成的USB"
- 标准化集成：M×N问题变成M+N问题
- 一致的实现模式
- 更快的开发、更简单的维护、更好的可靠性

25:00 - 28:00 - MCP的两种传输机制
- **stdio（本地MCP）**：子进程通信，隔离、简单、快速，但不适合多用户或分布式系统
- **HTTP（生产部署）**：基于SSE的流式HTTP，支持多代理连接和实时双向通信

### MCP的反馈闭环能力 (28:00 - 35:00)

28:00 - 31:00 - 反馈循环的革命性意义
- 传统代理：理解代码库 → 提出解决方案（一次性机会）
- MCP增强的代理：推理 → 行动 → 观察 → 迭代

31:00 - 33:00 - 观察能力的具体表现
- 读取终端输出
- 检索服务日志或客户端日志
- 检查代码断点
- 查看渲染的应用程序
- 向运行中的服务器发起内部API请求

33:00 - 35:00 - 远程MCP的优势
- 通过HTTPS安全连接外部资源
- 简化OAuth认证流程
- 安全的环境变量扩展
- 服务器托管，无需本地设置（解决Python、UV、Docker等环境依赖问题）

### Kiro团队的MCP实践 (35:00 - 42:00)

35:00 - 37:00 - 软件开发生命周期的全面应用
- 传统代理开发主要聚焦实现阶段
- Kiro团队将MCP应用于SDLC的所有阶段

37:00 - 39:00 - 构思阶段（Ideation）
- 检索积压工作信息
- 与产品团队协作
- 从Figma自动提取设计
- 分析需求并提出解决方案

39:00 - 40:00 - 实现阶段（Implementation）
- 编写代码
- 实时检索最新参考文档和库信息
- 控制开发服务器
- 启动调试窗口
- 与应用程序交互并测试实现

40:00 - 41:30 - 测试阶段（Testing）
- 基准测试系统评估代理变更
- 代理自我修改并运行基准测试套件
- 回归分析：分析服务请求，检测质量、速度或用户体验的回归
- 故障和验收测试：故障注入和行为验证

41:30 - 42:00 - 部署与支持阶段（Deployment & Support）
- 检索服务日志和实时遥测数据
- 诊断和根因分析
- 本地重现故障
- 将原本需要10-30分钟甚至数小时的诊断工作自动化

### 核心要点总结 (42:00 - 44:00)

42:00 - 43:00 - 三大关键学习点
- **上下文就是一切**：代理输出质量直接取决于提供的上下文质量
- **闭合反馈循环**：真正的代理行为需要观察结果并调整
- **扩展代理能力**：通过MCP工具让代理在编辑器外行动，使用远程MCP集成外部系统

43:00 - 44:00 - 演示预告
- 强调通过实际演示理解MCP影响的重要性
- 使用简单应用程序测试功能的开发方法

### 现场演示：2048游戏调试 (44:00 - 60:00)

44:00 - 46:00 - 演示环境设置
- 展示2048滑块游戏（组合数字达到2048）
- 打开Kiro并查看MCP配置

46:00 - 48:00 - MCP服务器配置展示
- **AWS Docs MCP**：本地服务器，检索文档
- **Chrome MCP**：26个工具，控制浏览器
- **Fetch工具**：从互联网检索网站
- **GitHub MCP**：40个工具，使用header授权
- **Figma MCP**：使用OAuth授权

48:00 - 49:30 - OAuth认证流程演示
- 在浏览器中启动OAuth流程
- 授权Kiro访问账户
- 无需担心本地凭证或意外提交
- 认证成功并连接

49:30 - 51:00 - AWS Nova 2模型查询
- 使用AWS Docs工具查询Nova 2信息
- 自动调用搜索文档工具（已信任，无需批准）
- 检索并读取文档
- 生成所有新Nova模型的摘要

51:00 - 52:30 - 启动开发服务器
- 请求Kiro帮助运行开发服务器
- 每个项目命令不同，让Kiro自动处理
- 服务器在后台进程中运行
- 可随时检查输出

52:30 - 54:00 - 发现并验证缺陷
- 用户报告：自动求解器运行时点击新游戏，游戏继续而非重置
- 请求Kiro使用MCP工具验证缺陷并在GitHub创建issue

54:00 - 55:30 - Powers功能介绍（新发布）
- 当前上下文使用率已达19%（仅开始对话）
- GitHub MCP有40个工具，Chrome有26个
- **Powers**：组合引导文件和MCP工具的新产品
- 打包流行库（Figma、Netlify、Supabase、Strands等）所需的所有信息
- 代理能够即时添加信息到上下文，而非始终保留所有内容

55:30 - 57:00 - Chrome MCP工具使用
- Chrome MCP允许代理操作浏览器（不太安全的操作）
- 需要命令批准机制
- 演示中选择"信任并运行"以实现更多自主性
- 代理启动新窗口并导航到项目

57:00 - 59:00 - 自动化缺陷验证
- 代理拍摄页面快照以获取导航信息
- 自主点击并启动自动求解器
- 点击"新游戏"按钮
- 确认缺陷：游戏继续运行而非重置
- 拍摄另一快照确认行为

59:00 - 60:00 - 创建GitHub Issue
- 确认缺陷后，代理在GitHub创建issue
- 选择批准但不信任（避免创建随机issue）
- 成功创建issue

### 文档测试用例 (60:00 - 63:00)

60:00 - 62:00 - 自动化文档验证
- 访问curo.dev/docs查看详细文档
- 包含规范、钩子、使用示例等信息
- 创新想法：让代理读取每个文档页面并验证说明是否有效
- 代理配置MCP服务器并测试是否按预期工作

62:00 - 63:00 - 文档与现实的一致性检查
- 验证工具是否按预期工作
- 验证文档信息是否正确
- 当文档与现实不符时，确定需要修复文档还是工具
- 低工程投入获得高价值回报

### 会议结束 (63:00+)

63:00+ - 演示完成
- 代理成功创建GitHub issue
- 展示了MCP在实际开发工作流中的强大能力
- 强调了反馈闭环和观察能力对代理质量的重要性

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


## 关键技术亮点

- **上下文工程**是AI代理从原型到生产的关键
- **MCP协议**提供标准化的AI集成方式，类似"AI的USB接口"
- **反馈闭环**让代理能够观察、验证和迭代其工作
- **Powers功能**通过即时上下文加载解决上下文窗口限制问题
- **远程MCP**简化生产部署和认证流程
- **全生命周期应用**：从构思到部署支持的完整SDLC覆盖