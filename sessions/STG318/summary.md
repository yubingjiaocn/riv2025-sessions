# AWS re:Invent 2025 - Amazon S3 Vectors 会议总结

## 会议概述

本次会议由 Amazon S3 高级解决方案架构师 Mark Tumi 主讲,产品经理 Vijaya Chakraorti 和来自 March Networks 的 Frank Oyou Young 共同参与。会议重点介绍了 Amazon S3 Vectors 这一创新服务——首个原生支持向量存储和查询的云对象存储服务。

会议首先阐述了向量嵌入(Vector Embeddings)的核心概念:它们是将文本、图像、音频等非结构化数据转换为数学表示的有序数字数组,使人工智能系统能够理解和处理"意义"。随着 AI 应用的爆炸式增长,向量数据的存储需求呈指数级增长,传统向量存储解决方案面临高成本、高复杂度和可扩展性限制等挑战。Amazon S3 Vectors 应运而生,将 S3 的规模化能力和性能优势引入向量存储领域。

会议宣布了 S3 Vectors 正式发布(GA),相比预览版实现了重大性能提升:查询延迟降至 100 毫秒(热查询),单个索引可存储 20 亿个向量,每个向量桶支持 10,000 个索引,写入吞吐量达到每秒 1,000 次事务。更重要的是,S3 Vectors 采用按使用付费的定价模式,相比传统向量存储解决方案可节省高达 90% 的成本。会议还展示了生物技术公司利用 S3 Vectors 进行科学文献语义搜索,以及 Amazon Bedrock Agent Core 使用 S3 Vectors 进行工具选择等实际应用案例。

## 详细时间线与关键要点

00:00 - 开场介绍
- Mark Tumi 介绍自己和团队成员
- 幽默提及 re:Invent 期间的大量步行

00:30 - 向量嵌入基础概念
- 解释 AI 系统如何通过向量理解"意义"
- 向量嵌入是计算机科学中意义的通用语言
- 向量是有序数字数组,用于编码文本、图像、声音、视频等的特征

02:00 - 向量嵌入的工作原理
- 嵌入模型将数据转换为"大脑扫描"
- 展示音乐轨道的向量聚类示例
- 介绍维度(dimensions)概念:通常为 32 位浮点数

03:30 - 向量的数学特性
- 演示向量算术:美元 - 美国 + 欧洲 = 欧元
- 说明这不是魔术,而是计算机科学原理

04:30 - 向量生成流程
- S3 作为世界最大的非结构化数据存储库
- 数据分块后通过嵌入模型生成向量
- 向量需要存储在专门的向量存储中

05:30 - 最近邻搜索(Nearest Neighbor Search)
- 传统数据库不适用于向量搜索
- 需要专门的算法进行距离计算和相似度搜索
- 使用 Prime Video 推荐系统作为实例

07:00 - 推荐系统示例
- 个人账户观看《黑袍纠察队》后的推荐
- 向量聚类如何实现内容推荐
- 幽默提及家庭共享账户导致的推荐混乱

09:00 - 向量爆炸问题
- 单个向量可达 4KB
- 存储需求可达 GB、TB 甚至 PB 级别
- 向量数量只会增加不会减少

10:30 - 向量存储的技术要求
- 需要处理高维数据(数千个维度)
- 毫秒级查询响应
- 大规模可扩展性
- 专门的索引算法

11:30 - 传统向量存储的成本问题
- 计算成本:即使空闲也在消耗资源
- 内存需求:需要数十到数百 GB RAM
- 许可成本:企业级许可费用高昂

12:30 - Amazon S3 Vectors 发布(2024年7月预览版)
- 首个原生支持向量的云对象存储
- 亚秒级查询性能
- 成本降低高达 90%
- 支持数十亿向量存储

13:00 - Vijaya Chakraorti 接棒讲解
- 介绍 S3 Vectors 的核心特性
- 预览版提供亚秒级延迟和专用 API
- 集成 Bedrock Knowledge Bases 和 OpenSearch

14:00 - 客户使用数据
- 数万客户使用
- 创建超过 250,000 个索引
- 摄入超过 400 亿个向量
- 两周内查询量突破 10 亿次

15:00 - 生物技术公司案例
- 对 3000 万篇科研论文进行语义搜索
- 将数周的手动审查压缩为亚秒级搜索
- 使用元数据过滤进行精确查询

17:00 - Agent 工具选择案例
- Bedrock Agent Core 使用 S3 Vectors
- 从数千个工具中快速选择相关工具
- 避免 Agent 混淆和幻觉

18:30 - 客户反馈的四大需求
- 更低延迟
- 更大索引容量
- 更快的向量摄入速度
- 更多 AWS 区域支持

19:30 - 正式发布(GA)的重大改进
- 热查询延迟降至 100 毫秒
- 单索引支持 20 亿向量(从 5000 万增长 40 倍)
- 每个向量桶支持 10,000 个索引
- 写入吞吐量达到每秒 1,000 次事务
- 成本节省仍保持 90%

21:00 - 技术架构详解
- 冷查询:亚秒级延迟
- 热查询:低至 100 毫秒
- 自动缓存机制,缓存保持数分钟

22:00 - 新增功能
- 索引级加密
- 标签支持(成本分配和访问控制)
- CloudFormation 支持
- PrivateLink 私有连接
- 新增 9 个 AWS 区域,总计 14 个区域

23:00 - 核心组件介绍
- 向量桶(Vector Buckets):专为向量工作负载设计
- 向量索引(Vector Index):存储向量和元数据
- 向量 API:专用的上传、查询、删除 API

24:30 - Query Vectors API 详解
- 同时进行相似度搜索和元数据过滤
- 输入:查询向量、Top K 值、索引名称、可选元数据过滤
- 输出:向量键、可选的嵌入、余弦距离、元数据

26:00 - 元数据类型
- 可过滤元数据:用于搜索过滤(如类型、发行年份、评分)
- 不可过滤元数据:随结果返回(如原始文本、源 URL)
- 每个向量支持 50 个键值对(10 个可设为不可过滤)

28:00 - 搜索算法原理
- 使用分层聚类组织向量空间
- 查询时快速导航和剪枝
- 仅对数千个候选向量计算距离
- 实现高召回率和低延迟

30:00 - S3 特性继承
- 可用性:4 个 9(99.99%)
- 持久性:11 个 9(99.999999999%)
- 性能:智能缓存优化
- 弹性:自动适应请求模式

32:00 - 构建相似度搜索的步骤
- 准备源数据
- 通过机器学习模型生成嵌入
- 使用 CLI/SDK 摄入向量到索引

33:00 - 性能最佳实践
- 按用户、区域或业务逻辑分布向量到多个索引
- 支持大批量上传或高并发微批量上传(每秒 1,000 次事务)

34:30 - 定价模型
- 按使用付费:上传、存储、查询三个组件
- 无空闲计算成本
- 大索引享受更低查询费率

35:30 - 定价示例计算
- 1000 万向量,每个 1024 维(4KB)
- 2KB 元数据(1KB 可过滤 + 1KB 不可过滤)
- 分布在 40 个索引中
- 每月重写 25% 的数据
- 每月 100 万次查询

37:00 - 会议结束
- 邀请 March Networks 的 Frank 进行客户案例分享