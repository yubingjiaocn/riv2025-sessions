# AWS re:Invent 2025 - CNS 427: 使用 Kiro 增强测试能力

## 会议概述

本次会议由来自新加坡的 Aarti 和来自悉尼的 Thomas 主讲，重点介绍如何在无服务器开发生命周期中使用代理式 AI 来简化测试。这是一个 400 级别的技术会议，假设听众熟悉无服务器架构和编程基础。

会议围绕一个任务管理 API 应用程序展开，该应用使用 Amazon API Gateway、Lambda 和 DynamoDB。演讲者展示了如何从紧耦合的架构重构为六边形架构，以及如何使用 Kiro CLI 和代理式 AI 来改进测试策略。整个演示涵盖了单元测试、集成测试、端到端测试，以及如何使用历史数据持续改进应用程序质量。

## 详细时间线与关键要点

### 0:00-10:00 - 会议介绍与无服务器测试挑战
- 介绍演讲者和会议主题：使用 Kiro 增强无服务器测试
- 阐述无服务器应用的特点：高度分布式、模块化、大量集成、使用云原生服务
- 讨论测试挑战：集成层测试的重要性、依赖处理（模拟 vs 仿真 vs 真实服务）、Lambda 函数复杂度和测试覆盖率问题
- 介绍演示应用：任务管理 API，使用 API Gateway、Lambda、DynamoDB 和 EventBridge

### 10:00-25:00 - 当前应用架构代码演示
- 展示 Python 代码结构和目录组织
- 详细解释 Lambda 处理器实现，使用 PowerTools 进行路由
- 演示任务创建、更新流程和循环依赖验证逻辑
- 展示数据模型、业务规则和 AWS 服务集成代码
- 演示当前单元测试实现，使用 Moto 库模拟 AWS 服务
- 运行测试套件，显示测试执行时间（400-500 毫秒开销）

### 25:00-40:00 - 使用 Kiro 进行架构审计和重构
- Thomas 介绍 Kiro CLI 自定义代理功能
- 演示如何配置专门的架构评估代理
- 使用 Kiro 生成六边形架构审计报告
- 创建规范驱动开发流程：需求、设计、任务列表
- 展示重构后的架构：处理器、领域逻辑、集成层的解耦
- 解释协议（Protocols）和依赖注入的使用

### 40:00-50:00 - 改进的测试策略实现
- Aarti 演示新的单元测试方法
- 使用内存伪造服务替代复杂的模拟配置
- 实现依赖注入简化测试设置
- 展示测试执行时间改进（从 400-500ms 降至 120ms）
- 介绍基于属性的测试（Property-based Testing）
- 使用 Hypothesis 库进行算法正确性验证
- 演示循环依赖检测的属性测试，运行 100 个测试用例

### 50:00-58:00 - 集成测试和持续改进
- 展示事件模式验证测试，使用 Pydantic 进行数据验证
- 演示针对真实 AWS 服务的集成测试
- DynamoDB 集成测试：成功场景和失败场景处理
- EventBridge 测试：设置测试工具和验证事件发布
- Thomas 介绍 AI 驱动开发生命周期（AIDLC）框架
- 演示使用历史错误数据生成风险热图
- 展示如何将运营阶段的发现反馈到开发周期

### 58:00-60:00 - 总结和资源分享
- 总结整个开发生命周期中 GenAI 的应用
- 强调重新设计以简化测试的重要性
- 分享相关资源链接：2023 年 Python 最佳实践演讲、VS Code 调试集成、GitHub 上的完整任务 API 实现
- 提供无服务器降临节资源链接
- 会议结束致谢