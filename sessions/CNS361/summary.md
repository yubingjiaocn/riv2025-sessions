# AWS re:Invent 2025 会议总结：通过平台工程扩展无服务器架构

## 会议概述

本次会议由AWS的Anton和CyberArk的Ron共同主讲，主题聚焦于如何在组织中扩展无服务器工程能力。这里的"扩展"并非指技术层面的请求处理能力（从每秒5个请求扩展到5000个），而是指组织层面的工程能力扩展——如何从1个团队使用无服务器技术发展到100个团队同时高效使用无服务器技术，而不失去开发效率。

会议核心围绕平台工程理念展开，强调在赋予开发团队自主权的同时，通过标准化和治理机制保持控制。演讲者介绍了如何通过构建基础设施代码模块目录、架构蓝图和治理工具来实现这一平衡。CyberArk作为实践案例，展示了他们如何将新服务启动时间从5个月缩短到3小时，实现了99%的效率提升。整个方法论和代码都已在GitHub上开源。

会议强调了"左移"（Shift Left）策略需要配合适当的治理机制，否则会导致混乱。平台工程团队的角色是创建可复用的模块和蓝图，让开发团队能够在预定义的安全边界内自由选择和定制，从而在自主性和标准化之间找到最佳平衡点。

## 详细时间线与关键要点

### 开场介绍 (0:00-2:30)
- **演讲者介绍**：Anton（AWS）和Ron（CyberArk）介绍会议主题
- **核心概念澄清**：扩展指的是组织工程能力的扩展，而非技术性能扩展
- **资源获取**：会议结束时将提供QR码，包含所有幻灯片和资源链接

### 传统开发模式的挑战 (2:30-6:00)
- **传统模式**：应用开发团队与基础设施团队的分离模型
- **工单系统**：团队间通过工单系统沟通基础设施变更需求
- **瓶颈问题**：随着开发团队数量增加，基础设施团队成为瓶颈
- **观众互动**：现场调查显示大多数组织仍在使用工单系统

### Shift Left的局限性 (6:00-8:30)
- **Shift Left概念**：将更多责任转移给开发团队
- **问题所在**：无限制地将DevOps、安全、可持续性等责任转移给开发团队不可持续
- **无服务器的引入**：通过减少基础设施管理来缓解压力

### 无服务器架构的新挑战 (8:30-11:00)
- **资源归属争议**：Lambda函数等资源既是应用资源也是基础设施资源
- **所有权冲突**：开发团队想要控制，运维团队也想要控制
- **核心矛盾**：开发团队追求自主性 vs 运维团队追求标准化
- **组织定位**：观众互动显示大多数组织认为自己在自主性和标准化之间取得了平衡

### 平台工程解决方案 (11:00-14:30)
- **新的所有权边界**：通过平台工程重新定义责任边界
- **平台工程理念**：开发团队拥有端到端的技术栈，但基于平台团队提供的标准化工具
- **目标**：实现自主性和标准化的最佳平衡

### 构建无服务器平台 (14:30-18:00)
- **平台层次结构**：
  - 底层：AWS服务（Lambda、Fargate、API Gateway等）
  - IaC层：选择基础设施即代码工具（Terraform、CDK、CloudFormation等）
  - CI/CD层：选择持续集成/部署工具（GitHub、GitLab、CodeBuild等）
  - 治理层：实施治理工具和策略
  - 顶层：开发者门户（Backstage、Krateo等）
- **工具选择**：现场调查显示Terraform和CDK是最流行的IaC工具

### 基础设施代码模块目录 (18:00-25:00)
- **核心实践**：创建经过审核的基础设施代码模块目录
- **模块化的三大优势**：
  - 最佳实践嵌入
  - 可复用性
  - 可组合性
- **Terraform示例**：
  - 标准化默认运行时（Node 20）
  - 标准化日志保留期（14天，避免永久存储费用）
  - 标准化日志配置
  - 嵌入Lambda Power Tools
- **模块打包**：将模块打包为可复用组件供工程团队使用

### 实际代码示例 (25:00-30:00)
- **基础Lambda模块**：通过变量和默认值标准化配置
- **日志管理**：自动设置CloudWatch日志保留期，避免永久存储成本
- **可观测性**：标准化日志结构和监控工具集成
- **开发者体验**：开发者无需了解所有配置细节，使用安全的默认值

### 架构蓝图 (30:00-35:00)
- **从模块到架构**：将多个模块组合成完整架构
- **常见模式示例**：
  - Lambda + EventBridge定时调度
  - Lambda + SQS + DLQ（死信队列）
  - API Gateway + Lambda + DynamoDB
- **架构定义**：模块之间的连接（箭头）与模块本身同样重要
- **同步API蓝图**：API Gateway + Lambda + DynamoDB的标准化实现

### 嵌入最佳实践 (35:00-40:00)
- **资源标记**：自动添加所有者标签，解决孤立资源问题
- **环境变量管理**：标准化开发和生产环境变量注入
- **DynamoDB安全**：
  - 强制启用服务器端加密
  - 启用TTL（生存时间）
  - 启用时间点恢复
- **权限最小化**：默认只授予必要的DynamoDB操作权限（PutItem、GetItem、UpdateItem）

### 生成式AI集成 (40:00-43:00)
- **Bedrock标准化**：
  - 标准化模型选择
  - 标准化配置参数（max tokens、temperature、top P）
  - 标准化安全访问
- **开发者简化**：开发者无需成为LLM专家即可使用

### 函数代码标准化 (43:00-46:00)
- **超越基础设施**：平台工程也可以标准化应用代码
- **函数处理器分层**：
  - 业务逻辑层（特定于功能）
  - 通用层（可观测性、配置管理、密钥管理、多租户、安全、治理、SDK集成）
- **标准化通用层**：让开发者专注于业务价值

### 治理与控制 (46:00-52:00)
- **灵活性与边界**：允许开发者定制，但在定义的边界内
- **主动控制与检测控制**：
  - 主动控制：在问题发生前捕获（开发阶段）
  - 检测控制：在运行时监控
- **治理工具**：
  - CloudFormation Guard（用于CloudFormation）
  - CDK Nag（用于CDK）
  - HashiCorp Sentinel / Checkov（用于Terraform）
- **Checkov示例**：
  - 验证CloudWatch日志组指定保留期
  - 验证日志至少保留一年
  - 在本地开发和CI/CD流程中运行

### 实际治理案例 (52:00-55:00)
- **运行时与内存限制**：防止Node.js函数配置10GB内存（因为Node默认不会使用6个vCPU）
- **安全边界**：例如限制Node函数最多2GB内存，除非明确说明需要更多
- **开发者体验**：开发者有灵活性但不需要了解所有底层细节

### 平台工程循环 (55:00-57:00)
- **平台团队职责**：构建和维护蓝图
- **开发者角色**：使用蓝图并提供反馈
- **产品思维**：将平台视为公司内部产品，而非周末项目
- **社区贡献**：随着时间推移，开发者开始贡献代码
- **跨团队协作**：安全和合规团队的需求也嵌入蓝图中

### CyberArk案例介绍 (57:00-1:00:00)
- **公司背景**：
  - 成立于1999年
  - 身份和访问管理全球领导者
  - 4000+员工，1000+开发者
  - 云原生、无服务器优先的SaaS公司
- **历史挑战**（6-8年前）：
  - 多个SaaS解决方案但开发体验碎片化
  - 多个技术栈和架构孤岛
  - SRE支持困难
  - 客户体验不统一

### CyberArk平台工程转型 (1:00:00-结束)
- **2020年启动**：15名工程师组建平台工程团队（Ron是创始成员之一）
- **转型目标**：统一所有体验
- **今天的成果**：
  - 统一技术栈（AWS无服务器 + Python）
  - 统一可观测性栈
  - 统一客户体验和入职流程
  - 定义安全和治理最佳实践
- **关键成就**：新服务启动时间从5个月缩短到3小时（99%改进）

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


注：完整的技术实现细节和代码示例将在会议结束时通过QR码提供，所有内容已在GitHub开源。