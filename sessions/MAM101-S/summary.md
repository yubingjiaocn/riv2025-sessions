# AWS re:Invent 2025 会议总结：使用 FSx for ONTAP 优化 Amazon Elastic VMware Service 的存储成本

## 会议概述

本次会议由 NetApp 产品解决方案架构师 Richard Nickel 主讲，他拥有 14 年 NetApp 工作经验，其中约 7 年专注于云产品，并自 FSx for ONTAP 项目启动以来一直参与其中。会议重点介绍了如何利用 Amazon FSx for ONTAP 来优化 Amazon Elastic VMware Service (EVS) 部署的存储成本。

会议核心内容围绕三大支柱展开：首先是通过解耦计算和存储来降低总体拥有成本 (TCO)；其次是通过改进的备份和快照功能来提高虚拟机保护的 SLA；最后是实现与本地环境一致的运维体验，使企业能够使用相同的工具和流程在云端和本地环境中操作。演讲者特别强调了 FSx for ONTAP 作为唯一经过 AWS 认证的原生存储服务用于 EVS 的独特地位，以及其企业级功能如何帮助客户实现成本优化、数据保护和灾难恢复等关键业务目标。

会议还介绍了 Workload Factory 这一免费工具，它可以帮助客户规划和迁移 VMware 工作负载到 AWS，并使用 FSx for ONTAP 作为存储解决方案。整个演讲强调了灵活性、成本效益和操作一致性的重要性。

## 详细时间线与关键要点

### 开场介绍 (00:00 - 02:30)
- **00:00** - 演讲者 Richard Nickel 自我介绍，NetApp 产品解决方案架构师，14 年 NetApp 工作经验
- **00:30** - 说明自己从 FSx for ONTAP 项目初期就开始参与，并在今年早些时候参与了 EVS 的早期访问测试
- **01:00** - 介绍会议主题：如何利用 FSx for ONTAP 优化 Amazon Elastic VMware Service 的存储成本

### 会议议程概览 (02:30 - 04:00)
- **02:30** - 介绍会议结构：首先介绍 EVS 服务基础知识
- **03:00** - 然后介绍 FSx for ONTAP 及其主要功能特性
- **03:30** - 讲解三大核心支柱：降低 TCO、改进 SLA、实现运维一致性

### Amazon Elastic VMware Service (EVS) 介绍 (04:00 - 12:00)
- **04:00** - EVS 定义：将 VMware 环境快速、轻松地迁移到云端并高效运行的服务
- **04:30** - 核心理念：为用户提供云端环境的完全控制权
- **05:00** - 用户可以选择自行管理或通过合作伙伴管理
- **06:00** - EVS 架构说明：将本地 VCF 堆栈（vSphere、NSX、VSAN）迁移到云端
- **07:00** - 使用场景：数据中心关闭、数据中心扩展、开发测试、灾难恢复、现代化第一步
- **08:00** - 自动化部署流程：通过控制台或 API 部署，约 3 小时完成
- **09:00** - 部署要求：VPC、EC2 实例（ESXi 主机）、VCF 订阅许可、CIDR 范围设置
- **10:00** - 当前支持 i4i metal 实例，未来计划支持更多实例类型
- **11:00** - 当前版本为 VCF 5.2.1，计划支持 VCF 9
- **11:30** - 最小部署要求：4 节点 i4i metal 实例

### FSx for ONTAP 介绍 (12:00 - 20:00)
- **12:00** - FSx for ONTAP 是唯一经过 AWS 认证用于 EVS 的原生存储服务
- **12:30** - 定义：完全托管的 AWS 存储服务，提供企业级功能
- **13:00** - 可访问性：支持文件、块和对象存储
- **13:30** - 强调块存储支持：约 30% 的 FSx for ONTAP 部署使用块存储
- **14:00** - 多协议访问：同一数据集可通过 NFS、SMB 和 S3 访问
- **14:30** - 重要公告：本周宣布 FSx for ONTAP 可作为 S3 端点，支持 Bedrock、Redshift 等服务
- **15:00** - 弹性和保护：双节点高可用性架构，数据相互复制
- **15:30** - 快照技术：基于指针、即时创建、仅存储增量，是 ONTAP 30 年的核心技术
- **16:00** - 数据安全：静态数据使用 KMS 加密
- **16:30** - 传输中数据加密：SMB 加密、NFS Kerberos、IPsec 支持
- **17:00** - Active Directory 集成，确保只有授权用户可访问文件
- **17:30** - 不可变存储选项：支持合规级别的不可变存储，连 AWS 管理员都无法删除
- **18:00** - 自主勒索软件保护：存储层内置，检测熵变化和文件扩展名变化
- **18:30** - 自动创建不可变快照，新版本还会创建攻击前的多个快照
- **19:00** - 数据占用空间缩减：支持重复数据删除、压缩、紧缩
- **19:30** - 数据分层：冷数据自动分层到容量池，降低成本

### FSx for ONTAP 与 EVS 集成 (20:00 - 26:00)
- **20:00** - 两种集成方式：补充数据存储和客户机附加存储
- **20:30** - 数据存储支持：NFS 数据存储和 NVMe 数据存储
- **21:00** - 客户机附加存储：支持 NFS 和 SMB 挂载到 VM
- **21:30** - 架构说明：EVS 和 FSx for ONTAP 部署在同一 VPC 中
- **22:00** - 通过 ENI（弹性网络接口）连接
- **22:30** - 设置 NFS 数据存储的步骤与本地环境完全相同
- **23:00** - 唯一额外步骤：更新 ENI 安全组以开放 NFS 端口
- **23:30** - 可选架构：FSx for ONTAP 可部署在不同 VPC 中，通过 VPC 对等连接
- **24:00** - 不推荐使用 Transit Gateway 连接数据存储
- **25:00** - 客户机附加存储通过 NSX Edge 虚拟路由器连接
- **25:30** - BGP 自动更新 AWS 路由表，简化网络配置

### 成本优化：解耦计算和存储 (26:00 - 32:00)
- **26:00** - 三大优化支柱之一：降低总体拥有成本
- **26:30** - FSx for ONTAP 的灵活性：多种存储类型和性能选项
- **27:00** - 可以无中断地调整吞吐量和 IOPS
- **27:30** - 利用 HA 对实现自动故障转移，无数据访问中断
- **28:00** - 内置存储效率：VDI 工作负载可节省高达 70% 的存储空间
- **28:30** - 存储扩展示例：4 节点最小部署提供 120TB 存储（每节点 30TB）
- **29:00** - 场景：需要额外 40TB 存储
- **29:30** - 传统方案：需要添加 2 个 ESXi 主机，带来不必要的计算成本
- **30:00** - FSx for ONTAP 方案：仅添加 40TB 补充数据存储
- **30:30** - 同时应用重复数据删除和压缩，实际需求可能更少
- **31:00** - 成本对比图表：随着环境增长，节省可达数百万美元
- **31:30** - 额外节省：减少 ESXi 主机也降低了 VCF 订阅的核心数成本

### 改进 VM 备份 SLA (32:00 - 38:00)
- **32:00** - 三大优化支柱之二：改进虚拟机保护的 SLA
- **32:30** - VSAN 备份流程：需要外部备份服务
- **33:00** - 创建 VMware 快照，然后传输到备份位置
- **33:30** - 问题：给 ESXi 主机增加负载
- **34:00** - VMware 快照存在期间有性能损失，因为需要跟踪增量变化
- **34:30** - 管理复杂性增加
- **35:00** - FSx for ONTAP 备份流程：设置单独的 FSx for ONTAP 系统用于备份
- **35:30** - 备份系统可以缩小规模：低吞吐量、最小 SSD 层、95% 数据在对象层
- **36:00** - 仍然创建 VMware 快照（如需 VM 一致性镜像）
- **36:30** - 注：本地环境中很多情况只需崩溃一致性，不需要 VM 一致性
- **37:00** - 利用 ONTAP 即时快照技术
- **37:30** - 关键优势：可以立即删除 VMware 快照，消除性能损失
- **38:00** - 使用 SnapMirror 复制，数据在传输中保持重复数据删除和压缩状态

### 备份对比总结 (38:00 - 40:00)
- **38:00** - 在存储层执行复制，不影响 ESXi 主机
- **38:30** - 优势总结：更快的备份过程
- **39:00** - VMware 快照即时删除，零性能影响
- **39:30** - 最小存储开销，因为数据保持重复数据删除和压缩状态

### 运维一致性 (40:00 - 44:00)
- **40:00** - 三大优化支柱之三：本地和云端运维一致性
- **40:30** - 前提：本地环境使用 ONTAP
- **41:00** - 云端可以使用相同方式设置数据存储
- **41:30** - 优势：简化发现和规划
- **42:00** - 相同的工具、自动化和 playbook 可在云端使用
- **42:30** - 避免重写应用程序：可以迁移非常旧的镜像
- **43:00** - 简单安全的迁移：使用 SnapMirror 传输重复数据删除和压缩的数据
- **43:30** - 完全互操作性：NSX Manager、vSphere Client、插件都可以迁移

### 企业级功能保留 (44:00 - 46:00)
- **44:00** - FlexClone 技术：与 VMware VAAI 集成
- **44:30** - 从模板创建 VM 时利用 FlexClone，即时创建副本
- **45:00** - 仅存储增量块，快速创建 VM，开销最小
- **45:30** - SnapLock 支持：将本地合规级别保护带到云端
- **46:00** - 实现跨环境一致的运维体验

### 灾难恢复场景 (46:00 - 结束)
- **46:00** - 演讲者特别强调的使用场景
- **46:30** - 场景：本地 ONTAP 环境，希望在云端设置灾难恢复
- **47:00** - 方案：部署最小 EVS 集群作为灾难恢复站点
- **47:30** - 利用 FSx for ONTAP 的新功能保持最小占用空间
- **48:00** - 提到 Workload Factory 工具：免费工具
- **48:30** - Workload Factory 功能：帮助规划和迁移 VMware 工作负载
- **49:00** - 支持使用 FSx for ONTAP 作为存储在 AWS EVS 中运行工作负载

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


注： 由于提供的字幕在后半部分被截断，灾难恢复场景和 Workload Factory 的详细内容未能完整呈现。建议获取完整字幕以补充这部分内容。