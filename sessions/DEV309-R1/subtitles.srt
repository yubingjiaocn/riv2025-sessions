1
00:00:01,050 --> 00:00:02,130
- [Gunnar] Good morning everyone.

2
00:00:02,130 --> 00:00:06,030
Welcome to DEV309.

3
00:00:06,030 --> 00:00:09,660
My name is Gunnar Grosch, I'm
a developer advocate at AWS.

4
00:00:09,660 --> 00:00:13,023
Excited to see so many of
you already Monday morning.

5
00:00:14,640 --> 00:00:16,950
- [Shridhar] Hello everyone.
I'm Shridhar Pandey.

6
00:00:16,950 --> 00:00:18,630
I'm a principal product manager

7
00:00:18,630 --> 00:00:21,210
and I lead developer
experience for serverless.

8
00:00:21,210 --> 00:00:24,150
Happy Monday morning
and happy re:Inventing.

9
00:00:24,150 --> 00:00:26,760
- [Gunnar] All right,
so this is a code talk

10
00:00:26,760 --> 00:00:30,660
where we are gonna look
at how we can make use

11
00:00:30,660 --> 00:00:33,120
of AI coding assistance,

12
00:00:33,120 --> 00:00:34,800
specifically when we are working

13
00:00:34,800 --> 00:00:36,663
with serverless applications.

14
00:00:37,890 --> 00:00:40,440
And kinda what we're expecting

15
00:00:40,440 --> 00:00:43,680
is that perhaps you haven't
used AI assistance that much

16
00:00:43,680 --> 00:00:46,710
for that use, but maybe many of you

17
00:00:46,710 --> 00:00:48,993
at least know things about serverless.

18
00:00:50,340 --> 00:00:51,630
Maybe, we'll see.

19
00:00:51,630 --> 00:00:54,630
So in this next hour,

20
00:00:54,630 --> 00:00:58,350
we're gonna walk through how
we can use these types of tools

21
00:00:58,350 --> 00:01:00,120
to build serverless applications.

22
00:01:00,120 --> 00:01:01,650
And we're gonna build both front

23
00:01:01,650 --> 00:01:05,133
and back end with the
help of an AI assistant.

24
00:01:06,210 --> 00:01:09,960
And then since this is a
code talk, it is interactive,

25
00:01:09,960 --> 00:01:14,400
so if you have questions, we'll
try to answer those as well.

26
00:01:14,400 --> 00:01:16,080
But we do have some things

27
00:01:16,080 --> 00:01:17,790
we wanna make sure to get through.

28
00:01:17,790 --> 00:01:20,523
So we'll try to power through as well.

29
00:01:24,570 --> 00:01:27,840
- [Shridhar] All right, before
we dive into the details

30
00:01:27,840 --> 00:01:29,760
and the session, let's level set

31
00:01:29,760 --> 00:01:32,703
on what developer experience
means for serverless.

32
00:01:33,810 --> 00:01:36,630
You can think of it as two distinct,

33
00:01:36,630 --> 00:01:38,760
but interconnected loops, the inner loop

34
00:01:38,760 --> 00:01:40,233
and the outer loop.

35
00:01:41,100 --> 00:01:43,110
The inner loop is where you'd likely spend

36
00:01:43,110 --> 00:01:46,050
most of your time on your
local development environment.

37
00:01:46,050 --> 00:01:47,700
It's all about rapid iterations.

38
00:01:47,700 --> 00:01:52,020
You know, write code, test
locally, debug and repeat.

39
00:01:52,020 --> 00:01:55,230
The goal here is fast feedback cycles.

40
00:01:55,230 --> 00:01:58,140
On the other hand, the outer
loop begins when you push code

41
00:01:58,140 --> 00:02:00,750
from your device to production or staging

42
00:02:00,750 --> 00:02:02,490
or integration testing environment.

43
00:02:02,490 --> 00:02:07,490
It includes CICD pipelines,
staging, deployment, testing,

44
00:02:07,890 --> 00:02:10,350
production monitoring and so on.

45
00:02:10,350 --> 00:02:14,190
The cycles are less frequent
but much more high stakes.

46
00:02:14,190 --> 00:02:18,930
The outer loop involves team
collaboration and coordination.

47
00:02:18,930 --> 00:02:22,683
And this is where works on
my machine meets reality.

48
00:02:26,880 --> 00:02:29,730
- [Gunnar] Alright, so the
AI assistant we're gonna use

49
00:02:29,730 --> 00:02:32,610
for this is Kiro CLI,

50
00:02:32,610 --> 00:02:36,300
the artist formerly known as
Amazon Queue developer CLI

51
00:02:36,300 --> 00:02:38,940
rebranded a couple of weeks ago.

52
00:02:38,940 --> 00:02:42,720
So Kiro CLI is a CLI,

53
00:02:42,720 --> 00:02:45,300
a tool that we can use within our terminal

54
00:02:45,300 --> 00:02:49,620
and that then have access
to large language models.

55
00:02:49,620 --> 00:02:54,390
It has access to adding
capabilities through MCP servers.

56
00:02:54,390 --> 00:02:57,150
It allows you to do a lot of the things

57
00:02:57,150 --> 00:02:59,940
many of us as developers
do through the CLI,

58
00:02:59,940 --> 00:03:02,010
but with the help of an AI assistant.

59
00:03:02,010 --> 00:03:04,260
So that is the tool we'll be using.

60
00:03:04,260 --> 00:03:07,170
And we will be using it within an ID,

61
00:03:07,170 --> 00:03:10,740
but you can also run it
just in any terminal window

62
00:03:10,740 --> 00:03:12,063
as you want as well.

63
00:03:13,410 --> 00:03:17,370
So with that, I think we've
set the baseline pretty much.

64
00:03:17,370 --> 00:03:20,493
So let's look at what we're
gonna build in this session.

65
00:03:25,793 --> 00:03:26,640
Alright.

66
00:03:26,640 --> 00:03:27,473
- [Shridhar] Alright,

67
00:03:27,473 --> 00:03:30,480
so we'll build a simple
image generator application.

68
00:03:30,480 --> 00:03:33,060
At the core of this
application, the back end,

69
00:03:33,060 --> 00:03:34,920
is an API that calls Lambda function,

70
00:03:34,920 --> 00:03:37,110
which is written in Node.js.

71
00:03:37,110 --> 00:03:40,230
The Lambda function then
calls a Bedrock model

72
00:03:40,230 --> 00:03:41,430
to generate the image.

73
00:03:41,430 --> 00:03:46,290
In this case we will use the
Titan Image Generator v2 model

74
00:03:46,290 --> 00:03:49,380
and we will use S3 for persistence.

75
00:03:49,380 --> 00:03:51,390
We'll also add a front end to this app,

76
00:03:51,390 --> 00:03:53,869
which will be built on React with Vite

77
00:03:53,869 --> 00:03:54,990
and deployed with Amplify Hosting.

78
00:03:54,990 --> 00:03:58,980
And lastly, we'll set up
observability for this application

79
00:03:58,980 --> 00:04:01,830
with CloudWatch application signals X-ray

80
00:04:01,830 --> 00:04:05,550
and use Power Tools for structured logging

81
00:04:05,550 --> 00:04:07,680
and to gather additional insights.

82
00:04:07,680 --> 00:04:10,710
And we'll also use CloudWatch Live Tail

83
00:04:10,710 --> 00:04:13,593
for real time debugging
if the need arises.

84
00:04:17,460 --> 00:04:19,680
- [Gunnar] I think we'll
skip over it, right.

85
00:04:19,680 --> 00:04:22,470
Alright, so time to get building

86
00:04:22,470 --> 00:04:25,410
and I'll be doing the
building from down here.

87
00:04:25,410 --> 00:04:30,410
And this what we see right
now on screen is the Kiro ID.

88
00:04:31,470 --> 00:04:35,460
Kiro is an ID that has AI capabilities,

89
00:04:35,460 --> 00:04:38,187
but like I said, we're
gonna use the Kiro CLI,

90
00:04:38,187 --> 00:04:41,040
this is just my preferred ID.

91
00:04:41,040 --> 00:04:44,100
You could use the visual studio code,

92
00:04:44,100 --> 00:04:48,090
you could use whatever ID
you want with the Kiro CLI.

93
00:04:48,090 --> 00:04:50,580
So the first thing I want to show is

94
00:04:50,580 --> 00:04:54,513
kind of what we can do
with the help of Kiro CLI.

95
00:04:55,980 --> 00:04:59,190
What we have so far in
our project is basically

96
00:04:59,190 --> 00:05:02,040
just empty folders, but what I have done

97
00:05:02,040 --> 00:05:06,000
just to save some time, is
to create our front end,

98
00:05:06,000 --> 00:05:09,630
just a clean install of Vite with React.

99
00:05:09,630 --> 00:05:12,360
So it kind of just
looks like this for now.

100
00:05:12,360 --> 00:05:14,100
We all know that installing everything

101
00:05:14,100 --> 00:05:17,970
through MPM takes a while,
so just saving us some time.

102
00:05:17,970 --> 00:05:21,690
Alright, so right now we have my terminal.

103
00:05:21,690 --> 00:05:23,703
We can open up Kiro CLI.

104
00:05:24,990 --> 00:05:26,590
That is then gonna load

105
00:05:28,590 --> 00:05:30,750
and let's see what we have here.

106
00:05:30,750 --> 00:05:34,230
So what you can see
straight away is that I have

107
00:05:34,230 --> 00:05:38,100
a number of MCP servers that
I've added to my configuration.

108
00:05:38,100 --> 00:05:41,400
All of these are now
in the disabled state.

109
00:05:41,400 --> 00:05:45,060
The CLI or the MCP servers that we have,

110
00:05:45,060 --> 00:05:47,370
I'm using a bunch of
different ones from AWS.

111
00:05:47,370 --> 00:05:50,580
You can obviously add
any type of MCP server

112
00:05:50,580 --> 00:05:53,220
that helps with your workflow.

113
00:05:53,220 --> 00:05:56,850
I wanna show just kind of how this differs

114
00:05:56,850 --> 00:05:59,310
when we start adding these MCP servers.

115
00:05:59,310 --> 00:06:02,190
So you can see kind of
how that enables you

116
00:06:02,190 --> 00:06:06,030
to be more powerful I'd say
with the help of these tools.

117
00:06:06,030 --> 00:06:08,610
So what I wanna do just to begin with

118
00:06:08,610 --> 00:06:12,487
is to tell my Kiro

119
00:06:17,340 --> 00:06:19,890
to just create a
serverless application now.

120
00:06:19,890 --> 00:06:21,240
I'm gonna copy paste prompts.

121
00:06:21,240 --> 00:06:24,090
You don't have to see
me writing everything,

122
00:06:24,090 --> 00:06:25,590
but right now I've opened it.

123
00:06:25,590 --> 00:06:28,773
I can start chatting with Kiro.

124
00:06:30,750 --> 00:06:35,220
It's using different
models behind the scenes.

125
00:06:35,220 --> 00:06:37,650
As you can see here with
Kiro you have access

126
00:06:37,650 --> 00:06:40,680
to Claude Sonnet 4.5, Claude Sonnet 4,

127
00:06:40,680 --> 00:06:43,800
Claude Haiku 4.5.

128
00:06:43,800 --> 00:06:46,380
And you can choose which
model you want to use.

129
00:06:46,380 --> 00:06:48,210
And as always with these
large language models,

130
00:06:48,210 --> 00:06:49,860
they're good at different things.

131
00:06:49,860 --> 00:06:51,600
So depending on what you are doing,

132
00:06:51,600 --> 00:06:53,160
you can either pick a specific one

133
00:06:53,160 --> 00:06:55,050
or stay in that auto mode.

134
00:06:55,050 --> 00:06:57,330
I'm gonna stay in auto for now,

135
00:06:57,330 --> 00:07:00,660
meaning that it will select
itself which model to use.

136
00:07:00,660 --> 00:07:04,560
But now I can then start
asking it just like any LLM.

137
00:07:04,560 --> 00:07:08,700
But what Kiro CLI is able
to do is that it has access

138
00:07:08,700 --> 00:07:10,980
to my file system so it can actually start

139
00:07:10,980 --> 00:07:12,360
doing things for me.

140
00:07:12,360 --> 00:07:14,010
So the first thing I wanna do now,

141
00:07:14,010 --> 00:07:16,353
with MCP servers disabled,

142
00:07:17,490 --> 00:07:20,730
I wanna tell it to
create a new SAM project,

143
00:07:20,730 --> 00:07:23,700
SAM, service application model,

144
00:07:23,700 --> 00:07:25,950
the way we can with
infrastructure as code,

145
00:07:25,950 --> 00:07:28,200
easily build serverless applications.

146
00:07:28,200 --> 00:07:32,220
I wanna have Node.js 22, an HTTP API

147
00:07:32,220 --> 00:07:33,660
and two Lambda functions.

148
00:07:33,660 --> 00:07:35,340
So this is basically the architecture

149
00:07:35,340 --> 00:07:37,290
that we looked at before.

150
00:07:37,290 --> 00:07:41,343
Let me just add, create
it in the back end folder.

151
00:07:42,480 --> 00:07:43,680
So what's gonna happen now

152
00:07:43,680 --> 00:07:47,130
is that Kiro is gonna
use the knowledge it has

153
00:07:47,130 --> 00:07:48,870
in that large language model

154
00:07:48,870 --> 00:07:51,003
and it's then gonna start doing things.

155
00:07:52,119 --> 00:07:54,960
And it now suggests that
it's gonna run this.

156
00:07:54,960 --> 00:07:57,510
It's gonna do a bunch of commands,

157
00:07:57,510 --> 00:08:00,390
create a file or a folder.

158
00:08:00,390 --> 00:08:01,590
It's gonna go into that folder,

159
00:08:01,590 --> 00:08:03,210
it's gonna run the sam init,

160
00:08:03,210 --> 00:08:05,730
meaning that it's using the sam CLI

161
00:08:05,730 --> 00:08:07,590
to create this application.

162
00:08:07,590 --> 00:08:11,130
But basically it's rounding a
bunch of CLI commands for me

163
00:08:11,130 --> 00:08:14,190
so I can press yes and
allow it to do this.

164
00:08:14,190 --> 00:08:15,780
So that's cool.

165
00:08:15,780 --> 00:08:18,180
It means that based on that model,

166
00:08:18,180 --> 00:08:21,090
it has a lot of knowledge that it can use

167
00:08:21,090 --> 00:08:22,890
basically from the documentation probably

168
00:08:22,890 --> 00:08:24,813
that it's trained on.

169
00:08:25,860 --> 00:08:29,520
But what these MCP servers allows us to do

170
00:08:29,520 --> 00:08:32,550
is add additional capabilities

171
00:08:32,550 --> 00:08:34,740
through different types of tools.

172
00:08:34,740 --> 00:08:37,140
And the first one that
we wanna make use of,

173
00:08:37,140 --> 00:08:38,940
so I'm not gonna run this command now

174
00:08:38,940 --> 00:08:40,620
because I don't want
it to actually do this,

175
00:08:40,620 --> 00:08:42,930
so I'm gonna cancel.

176
00:08:42,930 --> 00:08:43,763
There we go.

177
00:08:43,763 --> 00:08:47,940
And then I'm gonna enable
my MCP servers instead.

178
00:08:47,940 --> 00:08:50,880
So first one is AWS serverless.

179
00:08:50,880 --> 00:08:53,100
Maybe you can explain
a bit what that one is.

180
00:08:53,100 --> 00:08:56,040
- [Shridhar] Yeah, so the
AWS serverless MCP server,

181
00:08:56,040 --> 00:08:57,300
which we launched earlier in the year,

182
00:08:57,300 --> 00:08:59,700
it's an open source MCP server.

183
00:08:59,700 --> 00:09:02,400
And the idea was to combine the power

184
00:09:02,400 --> 00:09:04,380
of AI-assisted coding

185
00:09:04,380 --> 00:09:05,670
with the serverless expertise

186
00:09:05,670 --> 00:09:09,570
to help you throughout
the entire life cycle

187
00:09:09,570 --> 00:09:11,700
of your serverless application
development journey.

188
00:09:11,700 --> 00:09:15,210
So talk about best practices deployment

189
00:09:15,210 --> 00:09:19,170
as Gunnar will just show us
how it picks the right tools

190
00:09:19,170 --> 00:09:22,526
and guides us through the right
deployment model and so on.

191
00:09:22,526 --> 00:09:25,260
And it goes all the way
through to operations

192
00:09:25,260 --> 00:09:28,530
such as monitoring, looking at metrics

193
00:09:28,530 --> 00:09:30,270
and suggesting what could be going wrong

194
00:09:30,270 --> 00:09:33,120
with the application or what
could be improved and so on.

195
00:09:34,710 --> 00:09:36,570
Then we went ahead, went a step further

196
00:09:36,570 --> 00:09:40,740
and last month we added
specialized MCP ESM,

197
00:09:40,740 --> 00:09:43,200
event source mapping
tools to the MCP server

198
00:09:43,200 --> 00:09:45,990
to guide you through selecting
the right configuration

199
00:09:45,990 --> 00:09:47,250
for your event sources

200
00:09:47,250 --> 00:09:49,923
and troubleshooting if
something were to go wrong.

201
00:09:50,760 --> 00:09:52,950
- [Gunnar] So these additional
tools means that instead

202
00:09:52,950 --> 00:09:56,700
of just relying on the model's knowledge

203
00:09:56,700 --> 00:09:57,900
that it's been trained on,

204
00:09:57,900 --> 00:10:00,420
it can actually do very specific things.

205
00:10:00,420 --> 00:10:02,160
So now I've enabled those.

206
00:10:02,160 --> 00:10:06,300
I also enabled one specific
for AWS documentation,

207
00:10:06,300 --> 00:10:08,160
meaning that it has knowledge

208
00:10:08,160 --> 00:10:10,230
from all of the AWS documentation.

209
00:10:10,230 --> 00:10:13,050
There's also ones with AWS knowledge,

210
00:10:13,050 --> 00:10:15,930
MCP server contains additional information

211
00:10:15,930 --> 00:10:17,250
and tools that it can use.

212
00:10:17,250 --> 00:10:21,270
I also have one for front end
that we'll make use of later.

213
00:10:21,270 --> 00:10:23,670
All of these, the information
and how to find them

214
00:10:23,670 --> 00:10:26,160
will be shared in the
resources at the end as well.

215
00:10:26,160 --> 00:10:28,110
So you'll be able to get that there.

216
00:10:28,110 --> 00:10:31,263
So what we can do now is we can check.

217
00:10:32,520 --> 00:10:36,810
Slash MCP. Let's see.

218
00:10:36,810 --> 00:10:38,210
Oh now it...

219
00:10:40,710 --> 00:10:42,063
Ah. There we go.

220
00:10:43,080 --> 00:10:45,660
Let me restart it. Kiro CLI.

221
00:10:45,660 --> 00:10:48,013
So now it has access to those MCP

222
00:10:48,013 --> 00:10:51,783
and we're gonna basically try
again and see what it says.

223
00:10:53,670 --> 00:10:58,313
List the available serverless tools.

224
00:11:01,110 --> 00:11:03,510
So let's see what it says.

225
00:11:03,510 --> 00:11:05,940
So now we can see that
well these are the type

226
00:11:05,940 --> 00:11:07,050
of tools that it can do.

227
00:11:07,050 --> 00:11:08,700
So for instance, we saw before

228
00:11:08,700 --> 00:11:11,700
that it wanted to run
sam init as a command.

229
00:11:11,700 --> 00:11:15,060
Well now I can see that
it has access to sam init

230
00:11:15,060 --> 00:11:17,880
as a tool instead to be able to do this,

231
00:11:17,880 --> 00:11:19,980
and a bunch of other ones as well.

232
00:11:19,980 --> 00:11:23,400
So now with that, well we can then

233
00:11:23,400 --> 00:11:25,620
try to create this project again.

234
00:11:25,620 --> 00:11:30,620
So let me paste a prompt.

235
00:11:31,380 --> 00:11:33,873
Once again, create a new SAM project,

236
00:11:35,640 --> 00:11:38,913
create in the back end folder.

237
00:11:41,160 --> 00:11:42,903
I want it to create that project.

238
00:11:43,740 --> 00:11:47,040
Both of the Lambda
functions should now return

239
00:11:47,040 --> 00:11:49,050
just hard code adjacent to begin with,

240
00:11:49,050 --> 00:11:51,270
since we're not connecting it

241
00:11:51,270 --> 00:11:53,070
to Bedrock just yet.

242
00:11:53,070 --> 00:11:54,930
I wanted to run sam build as well,

243
00:11:54,930 --> 00:11:57,530
which is another tool to
actually build the project.

244
00:11:58,410 --> 00:12:00,720
We wanna run sam validate to make sure

245
00:12:00,720 --> 00:12:02,940
that everything works as expected.

246
00:12:02,940 --> 00:12:05,550
I also tell it to create a change log.

247
00:12:05,550 --> 00:12:07,830
And this is something that
I use with AI assistance.

248
00:12:07,830 --> 00:12:10,290
So for everything I do to keep track,

249
00:12:10,290 --> 00:12:11,730
I always keep a change log.

250
00:12:11,730 --> 00:12:15,150
So everything it does basically
ends up in a markdown file

251
00:12:15,150 --> 00:12:17,790
for me to be able to review afterwards.

252
00:12:17,790 --> 00:12:20,433
So let's try this again
and see what happens.

253
00:12:22,560 --> 00:12:25,500
So now it says they will do this

254
00:12:25,500 --> 00:12:27,300
and you can see the difference here.

255
00:12:27,300 --> 00:12:30,030
So instead of saying
just a long CLI command,

256
00:12:30,030 --> 00:12:34,560
it now says that it's gonna
run the sam init tool for us.

257
00:12:34,560 --> 00:12:36,810
It's gonna create an image generator

258
00:12:36,810 --> 00:12:39,600
with Node.js 22 and so on.

259
00:12:39,600 --> 00:12:42,810
So now I can say that I want to run this.

260
00:12:42,810 --> 00:12:45,810
Let's say that we're
gonna trust it to run.

261
00:12:45,810 --> 00:12:46,643
There we go.

262
00:12:48,690 --> 00:12:53,690
So now Kiro is gonna run the tool for us.

263
00:12:56,570 --> 00:12:59,790
65,000 attendees running
Kiro at the same time.

264
00:12:59,790 --> 00:13:02,433
So I have to give it a few minutes.

265
00:13:03,570 --> 00:13:06,750
Okay, so now it's running.
Oh it failed to validate.

266
00:13:06,750 --> 00:13:07,583
Let's see.

267
00:13:10,273 --> 00:13:11,106
There we go.

268
00:13:12,270 --> 00:13:14,820
And what what I think
is pretty cool with Kiro

269
00:13:14,820 --> 00:13:16,170
is if something fails,

270
00:13:16,170 --> 00:13:18,870
well then it looks at that error message

271
00:13:18,870 --> 00:13:22,350
and tries to adjust itself
so I don't have to try

272
00:13:22,350 --> 00:13:25,140
to find what error it was, what happened.

273
00:13:25,140 --> 00:13:27,150
It's instead gonna do that itself.

274
00:13:27,150 --> 00:13:28,290
So here we go.

275
00:13:28,290 --> 00:13:31,413
So now it's generating this.

276
00:13:32,520 --> 00:13:37,520
So it generated our initial back end

277
00:13:38,430 --> 00:13:40,980
as we can see basically a hello world

278
00:13:40,980 --> 00:13:43,380
example using sam init,

279
00:13:43,380 --> 00:13:45,510
and now it's gonna start adjusting it

280
00:13:45,510 --> 00:13:47,010
based on what we needed,

281
00:13:47,010 --> 00:13:50,460
our tool endpoints for instance and so on.

282
00:13:50,460 --> 00:13:53,820
So once again, I'm gonna trust
it to make these changes.

283
00:13:53,820 --> 00:13:55,593
It's now updating the template.

284
00:13:58,560 --> 00:14:01,323
And trust it once again.

285
00:14:05,280 --> 00:14:07,290
The first few times
we're rounding commands.

286
00:14:07,290 --> 00:14:09,270
It's always gonna ask
you if you want to trust

287
00:14:09,270 --> 00:14:10,710
for this session or if you want

288
00:14:10,710 --> 00:14:13,140
to just say yes or no every time.

289
00:14:13,140 --> 00:14:17,610
Alright, so it's creating
my initial Lambda handlers

290
00:14:17,610 --> 00:14:19,923
with just static JSON to begin with.

291
00:14:22,380 --> 00:14:25,623
It's creating a package
JSON for what we need.

292
00:14:26,940 --> 00:14:28,920
So now through that simple prompt

293
00:14:28,920 --> 00:14:31,440
with the help of those tools from MCP,

294
00:14:31,440 --> 00:14:35,463
it's able to start creating
everything I wanted it to do.

295
00:14:37,450 --> 00:14:38,283
There we go.

296
00:14:38,283 --> 00:14:41,610
You can see that it's still
using the serverless MCP server,

297
00:14:41,610 --> 00:14:43,210
now it's a sam build command

298
00:14:44,430 --> 00:14:47,523
and now it's doing sam validate with lint.

299
00:14:49,830 --> 00:14:53,013
It's now gonna create a
change log for me as well.

300
00:14:56,118 --> 00:14:57,120
Here we go.

301
00:14:57,120 --> 00:14:59,109
So keeping that change log, I think

302
00:14:59,109 --> 00:15:02,250
that's usually for me a
great way to keep track

303
00:15:02,250 --> 00:15:04,473
of what's happening within my projects.

304
00:15:05,400 --> 00:15:08,220
Since these AI tools, they're
able to do a lot of things.

305
00:15:08,220 --> 00:15:11,729
So keeping track of exactly
what it's doing can be hard

306
00:15:11,729 --> 00:15:13,203
through just the CLI.

307
00:15:15,180 --> 00:15:20,180
It's also doing some
initializing a Git repo for me

308
00:15:21,420 --> 00:15:23,070
and here we go.

309
00:15:23,070 --> 00:15:24,810
Alright, so now it's done all of that

310
00:15:24,810 --> 00:15:26,130
through that simple prompt.

311
00:15:26,130 --> 00:15:27,540
Created a new project,

312
00:15:27,540 --> 00:15:31,720
created an HTTP API,
implemented two endpoints

313
00:15:32,850 --> 00:15:36,360
with Lambda functions
and it's run sam build

314
00:15:36,360 --> 00:15:38,550
and sam validate.

315
00:15:38,550 --> 00:15:40,830
So now it's basically ready for us

316
00:15:40,830 --> 00:15:42,750
to be able to deploy this.

317
00:15:42,750 --> 00:15:45,810
- [Shridhar] And if you did
not want to do even that,

318
00:15:45,810 --> 00:15:49,410
the MCP server has access
to a well curated library

319
00:15:49,410 --> 00:15:52,350
of patterns through Serverless Land.

320
00:15:52,350 --> 00:15:53,557
So you could have just started with that.

321
00:15:53,557 --> 00:15:57,210
"Hey get me Serverless Land
that has an API gateway

322
00:15:57,210 --> 00:15:58,440
connected to a Lambda function."

323
00:15:58,440 --> 00:16:00,900
And it would've gotten you that as well.

324
00:16:00,900 --> 00:16:02,610
So you have options here.

325
00:16:02,610 --> 00:16:03,990
- [Gunnar] Yep.

326
00:16:03,990 --> 00:16:05,850
Alright, so now we have that done,

327
00:16:05,850 --> 00:16:07,530
we can basically go ahead

328
00:16:07,530 --> 00:16:10,557
and deploy this first
version of our application

329
00:16:10,557 --> 00:16:15,210
and then fingers crossed it might work.

330
00:16:15,210 --> 00:16:16,923
So I'm gonna open a new terminal.

331
00:16:19,524 --> 00:16:21,150
I could tell Kiro to
actually do the deployment

332
00:16:21,150 --> 00:16:24,000
but I'm gonna do it manually in this case.

333
00:16:24,000 --> 00:16:26,820
So let's go into the back end

334
00:16:26,820 --> 00:16:31,530
and let's run a sam deploy and guide it.

335
00:16:31,530 --> 00:16:33,933
So this is gonna be my
first deployment. Oops.

336
00:16:35,220 --> 00:16:36,053
Oh sorry.

337
00:16:38,100 --> 00:16:38,933
There we go.

338
00:16:43,260 --> 00:16:44,520
Something's outdated.

339
00:16:44,520 --> 00:16:46,690
Let's call it image generate

340
00:16:51,660 --> 00:16:53,223
December 1st today, right?

341
00:16:54,690 --> 00:16:57,390
US West 2 sounds good.

342
00:16:57,390 --> 00:16:59,463
Confirm changes, no.

343
00:17:00,330 --> 00:17:01,830
Create roles,

344
00:17:01,830 --> 00:17:03,423
disable rollback.

345
00:17:04,260 --> 00:17:06,510
We don't have any
authentication to begin with,

346
00:17:06,510 --> 00:17:09,003
which is fine in this case.

347
00:17:10,050 --> 00:17:10,883
Here we go.

348
00:17:10,883 --> 00:17:13,323
So now it's gonna start
deploying this for us.

349
00:17:15,222 --> 00:17:17,972
And as soon as this deployment
is done, it's gonna take

350
00:17:19,004 --> 00:17:21,383
a couple of minutes usually
through cloud formation,

351
00:17:22,560 --> 00:17:24,660
then we can basically try it out.

352
00:17:24,660 --> 00:17:27,090
And the normal way to do this is,

353
00:17:27,090 --> 00:17:29,640
I'm sure most of us would,
we look at the output,

354
00:17:29,640 --> 00:17:33,840
we get the API endpoint,
we test it through postman

355
00:17:33,840 --> 00:17:35,970
or through curl or something.

356
00:17:35,970 --> 00:17:40,110
But this is another way where
I usually use the AI assistant

357
00:17:40,110 --> 00:17:41,880
to help me with this.

358
00:17:41,880 --> 00:17:43,170
And you can do it in multiple ways.

359
00:17:43,170 --> 00:17:45,540
It can help you find
the resources for you.

360
00:17:45,540 --> 00:17:49,080
So instead of me having to
find the correct API endpoint,

361
00:17:49,080 --> 00:17:51,630
I can tell the CLI to do that for me.

362
00:17:51,630 --> 00:17:53,940
I can also then tell it to actually test

363
00:17:53,940 --> 00:17:55,920
and make sure that the output is correct.

364
00:17:55,920 --> 00:17:57,180
So here we go.

365
00:17:57,180 --> 00:17:58,320
So it's now deployed

366
00:17:58,320 --> 00:18:00,210
and we can see we have the API endpoint.

367
00:18:00,210 --> 00:18:02,640
So yes I could use curl.

368
00:18:02,640 --> 00:18:04,650
I never remember the exact curl commands.

369
00:18:04,650 --> 00:18:08,850
Honestly I've been doing
development for 25 years now

370
00:18:08,850 --> 00:18:10,140
I have to Google it every time.

371
00:18:10,140 --> 00:18:11,640
- You're not alone.
- No.

372
00:18:11,640 --> 00:18:14,460
So this helps me so much.

373
00:18:14,460 --> 00:18:16,940
Alright so now let's try it out then.

374
00:18:16,940 --> 00:18:18,963
So I have my test prompt.

375
00:18:22,170 --> 00:18:27,170
Get the API endpoint from
the cloud formation stack.

376
00:18:27,420 --> 00:18:30,750
This is why I shouldn't
change it. The stack name.

377
00:18:30,750 --> 00:18:31,583
Alright.

378
00:18:33,300 --> 00:18:34,920
Rookie mistake.

379
00:18:34,920 --> 00:18:37,140
Imagegen-API.

380
00:18:37,140 --> 00:18:38,890
That's not at all what I called it.

381
00:18:40,200 --> 00:18:41,223
What did I call it?

382
00:18:43,080 --> 00:18:45,880
Let's see if you can find it
without even mentioning it.

383
00:18:46,920 --> 00:18:47,820
Here we go.

384
00:18:47,820 --> 00:18:50,403
So I'm telling it to get the API endpoint.

385
00:18:53,700 --> 00:18:54,933
Now it wants to deploy.

386
00:18:56,370 --> 00:18:59,343
It's already deployed.

387
00:19:04,200 --> 00:19:05,033
There we go.

388
00:19:05,033 --> 00:19:07,593
So now it's gonna try to get that.

389
00:19:10,590 --> 00:19:12,120
Nope, that's not the correct name.

390
00:19:12,120 --> 00:19:14,970
So now it needs to find-
- Had a December 1 in it.

391
00:19:14,970 --> 00:19:17,040
- [Gunnar] I know. So let's see if it can.

392
00:19:17,040 --> 00:19:20,913
So now it's gonna list,
let's see if we can find it.

393
00:19:22,920 --> 00:19:24,153
This was on purpose.

394
00:19:27,150 --> 00:19:27,983
There we go.

395
00:19:31,950 --> 00:19:33,693
That is not correct. Oh!

396
00:19:36,330 --> 00:19:38,943
That is not correct.

397
00:19:40,320 --> 00:19:43,083
It has a different name.

398
00:19:44,220 --> 00:19:47,703
Let's see, what was the name?

399
00:19:48,750 --> 00:19:51,213
December 1st?
- Yep.

400
00:19:53,640 --> 00:19:57,600
- [Gunnar] Okay, I trust
Kiro. There we go, yay.

401
00:19:57,600 --> 00:20:00,993
Okay, so now it's gonna get that for me.

402
00:20:02,580 --> 00:20:04,629
Now it has the API endpoint.

403
00:20:04,629 --> 00:20:05,581
Now it's gonna test it

404
00:20:05,581 --> 00:20:07,530
and as you can see it's
basically using curl.

405
00:20:07,530 --> 00:20:11,343
But yeah it knows the
command that I don't.

406
00:20:12,240 --> 00:20:15,153
Both endpoints are working,
these are the results.

407
00:20:17,310 --> 00:20:18,143
So that's very cool.

408
00:20:18,143 --> 00:20:20,070
We're able to then
start testing the things

409
00:20:20,070 --> 00:20:22,713
we deploy straight away
just by prompting it again.

410
00:20:24,270 --> 00:20:26,160
So at that point I think we can go on

411
00:20:26,160 --> 00:20:30,360
to the next part of the architecture.

412
00:20:30,360 --> 00:20:32,730
And what I didn't say before

413
00:20:32,730 --> 00:20:35,490
is that what I tend to do
when I build these types

414
00:20:35,490 --> 00:20:38,730
of applications, specifically
with AI assistant,

415
00:20:38,730 --> 00:20:40,320
but I kind of do it otherwise as well,

416
00:20:40,320 --> 00:20:44,070
is to break down the architecture
and do it step-by-step.

417
00:20:44,070 --> 00:20:45,180
So that's what we did now,

418
00:20:45,180 --> 00:20:48,210
we created the API and the
initial Lambda functions,

419
00:20:48,210 --> 00:20:50,547
then we start adding the next parts of it

420
00:20:50,547 --> 00:20:51,870
and the next part in this case

421
00:20:51,870 --> 00:20:54,210
could be the S3 bucket for instance.

422
00:20:54,210 --> 00:20:56,943
So let's do that.

423
00:20:58,560 --> 00:21:02,070
Let's do the prompt.

424
00:21:02,070 --> 00:21:04,080
Add an S3 bucket to the SAM template,

425
00:21:04,080 --> 00:21:07,830
update POST generate to
create a placeholder object

426
00:21:07,830 --> 00:21:10,810
and then update GET/ images to list

427
00:21:12,240 --> 00:21:16,260
the 25 most recent objects
and return pre-signed URLs.

428
00:21:16,260 --> 00:21:18,390
And that's gonna be
important in our architecture

429
00:21:18,390 --> 00:21:20,310
because we wanted to generate images

430
00:21:20,310 --> 00:21:22,560
and then we want to be able
to actually view the images

431
00:21:22,560 --> 00:21:25,200
without making this entire bucket public

432
00:21:25,200 --> 00:21:26,733
because that's a big no-no.

433
00:21:27,990 --> 00:21:32,310
Least-privilege IAM for
S3. Rebuild and redeploy.

434
00:21:32,310 --> 00:21:35,100
So let's see if it's then able
to actually do those commands

435
00:21:35,100 --> 00:21:37,203
as well and update the change log.

436
00:21:39,060 --> 00:21:39,893
So here we go.

437
00:21:41,203 --> 00:21:43,740
Add S3 bucket, update Lambda functions.

438
00:21:43,740 --> 00:21:46,530
And the thing is that
I'm not gonna prompt it

439
00:21:46,530 --> 00:21:49,320
to use tools or not use tools.

440
00:21:49,320 --> 00:21:53,040
That's gonna be up to Kiro in this case.

441
00:21:53,040 --> 00:21:55,470
So the way those tools are built,

442
00:21:55,470 --> 00:21:57,810
they basically have capabilities

443
00:21:57,810 --> 00:22:00,780
and when it's kind of matching something

444
00:22:00,780 --> 00:22:04,140
that I tell it to do, it's
gonna pick to use a tool.

445
00:22:04,140 --> 00:22:06,330
Other times it's just
gonna use the knowledge

446
00:22:06,330 --> 00:22:07,980
that it has in the training data

447
00:22:07,980 --> 00:22:10,050
from the large language model.

448
00:22:10,050 --> 00:22:13,170
Alright, so now it's
doing a bunch of stuff.

449
00:22:13,170 --> 00:22:15,730
We can see in the code it's creating

450
00:22:16,710 --> 00:22:18,603
pre-signed URLs for instance,

451
00:22:21,090 --> 00:22:23,733
it's updating our package.

452
00:22:27,960 --> 00:22:28,830
There we go.

453
00:22:28,830 --> 00:22:31,180
And now it's gonna do
the sam build tool again,

454
00:22:35,910 --> 00:22:37,210
it's running it hopefully.

455
00:22:38,910 --> 00:22:41,640
So we can see these are
our Lambda functions

456
00:22:41,640 --> 00:22:42,840
and the code for it.

457
00:22:42,840 --> 00:22:44,370
We haven't written a single line of code

458
00:22:44,370 --> 00:22:46,680
but I think it's so far looking like

459
00:22:46,680 --> 00:22:48,753
it's generating exactly what we need.

460
00:22:50,670 --> 00:22:53,340
I'm gonna allow it to run sam deploy.

461
00:22:53,340 --> 00:22:55,140
So that's a tool we didn't use before

462
00:22:55,140 --> 00:22:56,160
since I did it manually.

463
00:22:56,160 --> 00:22:59,463
But now it's deciding that
it's gonna use that tool.

464
00:23:02,160 --> 00:23:02,993
I trust it.

465
00:23:02,993 --> 00:23:04,620
So from here on out it's gonna be able

466
00:23:04,620 --> 00:23:07,470
to do these deployments by itself.

467
00:23:07,470 --> 00:23:12,470
Alright, so Kiro is hard at work.

468
00:23:14,640 --> 00:23:16,560
And the next thing then, well same thing.

469
00:23:16,560 --> 00:23:20,763
We're gonna test this out to
see that it actually works.

470
00:23:27,450 --> 00:23:28,350
Sure it's running.

471
00:23:37,800 --> 00:23:39,890
What do you think? Is it doing something?

472
00:23:39,890 --> 00:23:42,810
- [Shridhar] Yeah, it looks like it.

473
00:23:42,810 --> 00:23:43,643
- [Gunnar] Yes.

474
00:23:46,230 --> 00:23:47,760
- [Shridhar] Sometimes you've
gotta let it do its thing

475
00:23:47,760 --> 00:23:50,100
and not let your instinct
take over and like start.

476
00:23:50,100 --> 00:23:51,000
- [Gunnar] I know.

477
00:23:53,400 --> 00:23:56,520
All right. But hopefully it's deploying.

478
00:23:56,520 --> 00:23:59,583
I guess we can check that
in cloud formation, right?

479
00:24:01,440 --> 00:24:03,540
See if something is happening.

480
00:24:03,540 --> 00:24:05,250
Yeah, updating progress.

481
00:24:05,250 --> 00:24:08,910
It's just not showing
the output at the moment.

482
00:24:08,910 --> 00:24:09,990
- [Shridhar] Is the S3 object

483
00:24:09,990 --> 00:24:11,940
and stuff already showing there?

484
00:24:11,940 --> 00:24:13,410
I can't see very well from here so.

485
00:24:13,410 --> 00:24:14,910
- [Gunnar] Oh yeah. Let's see.

486
00:24:17,310 --> 00:24:19,833
Resources, the functions.

487
00:24:22,050 --> 00:24:23,670
Yeah, it's created a bucket for us

488
00:24:23,670 --> 00:24:24,503
now.
- Nice.

489
00:24:25,770 --> 00:24:28,050
- [Gunnar] Yeah and update complete now.

490
00:24:28,050 --> 00:24:28,883
So let's see.

491
00:24:30,330 --> 00:24:32,430
Now it's updating the
change log for us as well

492
00:24:32,430 --> 00:24:36,123
so we can see that these
are the things it's done.

493
00:24:39,780 --> 00:24:43,620
Alright, so now that's done.

494
00:24:43,620 --> 00:24:45,573
So we can test this out as well.

495
00:24:46,500 --> 00:24:49,920
So let me just make sure

496
00:24:49,920 --> 00:24:54,273
that I'm not gonna trick it
with the wrong stack name again.

497
00:24:58,650 --> 00:25:00,360
Where is my stack name?

498
00:25:00,360 --> 00:25:01,830
There we go.

499
00:25:01,830 --> 00:25:04,510
Okay, so let's try this out

500
00:25:05,460 --> 00:25:07,050
and then when we've tested that,

501
00:25:07,050 --> 00:25:10,530
I'm gonna show something
else that's super useful

502
00:25:10,530 --> 00:25:12,093
when using these tools.

503
00:25:17,940 --> 00:25:21,070
So now it's hopefully
gonna test that as well

504
00:25:22,920 --> 00:25:24,270
to generate an image.

505
00:25:24,270 --> 00:25:27,310
So far we're only
generating a test text file

506
00:25:28,230 --> 00:25:31,050
and now it's testing the
output to get the images

507
00:25:31,050 --> 00:25:33,960
and as we can see it's
getting the ID of the file

508
00:25:33,960 --> 00:25:38,580
and it's getting a pre-assigned
URL that it's able to fetch.

509
00:25:38,580 --> 00:25:40,110
So yeah, that works as well.

510
00:25:40,110 --> 00:25:42,960
- Nice.
- We've gotten that far.

511
00:25:42,960 --> 00:25:47,310
I want to show something
that I try to use quite a lot

512
00:25:47,310 --> 00:25:49,443
that's helpful when using these tools.

513
00:25:50,850 --> 00:25:55,140
With Kiro you can create
what's called steering files.

514
00:25:55,140 --> 00:25:58,200
So I'm doing this now in the Kiro ID.

515
00:25:58,200 --> 00:26:00,090
What's pretty cool is that Kiro ID

516
00:26:00,090 --> 00:26:02,820
and Kiro CLI, they're
sharing certain things.

517
00:26:02,820 --> 00:26:05,370
For instance, the MCV server configuration

518
00:26:05,370 --> 00:26:06,993
is shared between those two.

519
00:26:07,890 --> 00:26:10,290
The steering files is the same thing.

520
00:26:10,290 --> 00:26:12,660
And steering files is basically a way

521
00:26:12,660 --> 00:26:17,190
to control the behavior of these AI tools.

522
00:26:17,190 --> 00:26:22,190
So I have a global steering
file that I use for Kiro

523
00:26:22,530 --> 00:26:24,813
that basically tells it what it should do.

524
00:26:26,220 --> 00:26:27,480
If you are an AI assistant,

525
00:26:27,480 --> 00:26:30,150
you must follow these rules
just to make it very clear.

526
00:26:30,150 --> 00:26:32,430
But then I have kind of my workflow,

527
00:26:32,430 --> 00:26:33,870
what it's supposed to do.

528
00:26:33,870 --> 00:26:36,060
Always make sure to update read me

529
00:26:36,060 --> 00:26:39,090
or design documents when it make changes.

530
00:26:39,090 --> 00:26:43,350
Do not create additional
markdown files in repository

531
00:26:43,350 --> 00:26:47,160
unless you're instructed
explicitly to do that.

532
00:26:47,160 --> 00:26:49,170
Something that keeps
happening with these tools

533
00:26:49,170 --> 00:26:52,020
is that it wants to always
create markdown files

534
00:26:52,020 --> 00:26:53,730
to explain everything.

535
00:26:53,730 --> 00:26:57,213
So by adding that little
line, I'm able to stop it too.

536
00:26:58,770 --> 00:27:03,360
I've also told it that it should
use commit when it needs to

537
00:27:03,360 --> 00:27:06,450
and kind of my rules for
when I think it should.

538
00:27:06,450 --> 00:27:09,123
I also tell it how to do commit messages.

539
00:27:12,060 --> 00:27:13,380
Bit about unit tests.

540
00:27:13,380 --> 00:27:15,600
I don't want it to have big unit tests,

541
00:27:15,600 --> 00:27:18,630
it should be very small
pieces of functionality.

542
00:27:18,630 --> 00:27:22,200
And then I have some things
around code style for instance,

543
00:27:22,200 --> 00:27:24,723
how it should name functionality,

544
00:27:26,370 --> 00:27:28,440
how it should do documentation.

545
00:27:28,440 --> 00:27:31,353
I want to follow JSDoc for instance.

546
00:27:32,400 --> 00:27:36,303
Testing standards, security essentials.

547
00:27:37,740 --> 00:27:41,343
This one is good, never commit secrets,

548
00:27:42,390 --> 00:27:43,410
and so on and so on.

549
00:27:43,410 --> 00:27:46,080
So this is basically
how I can control Kiro.

550
00:27:46,080 --> 00:27:48,840
And these are, like I said,
these are my global steering.

551
00:27:48,840 --> 00:27:51,240
So it uses this all the time.

552
00:27:51,240 --> 00:27:55,500
What I can do as well is to
create additional steering files

553
00:27:55,500 --> 00:27:57,750
and once again I'm doing it in the ID now,

554
00:27:57,750 --> 00:28:00,450
but these are just files
in the file system.

555
00:28:00,450 --> 00:28:03,660
So if I don't use Kiro ID,

556
00:28:03,660 --> 00:28:06,120
it's just files that I store there.

557
00:28:06,120 --> 00:28:08,460
So I can create an additional one,

558
00:28:08,460 --> 00:28:10,530
either a global one like we had,

559
00:28:10,530 --> 00:28:13,740
or I can create specific
ones for this workspace

560
00:28:13,740 --> 00:28:18,740
and they're just stored
in the .kiro folder

561
00:28:20,340 --> 00:28:22,980
for my workspace in that case.

562
00:28:22,980 --> 00:28:25,620
- [Shridhar] What happens if
so, which one takes precedence?

563
00:28:25,620 --> 00:28:28,260
So if it has a global steering file

564
00:28:28,260 --> 00:28:30,180
and then it has a workspace one,

565
00:28:30,180 --> 00:28:34,980
it's gonna use the workspace steering.

566
00:28:34,980 --> 00:28:37,980
So for instance, if I have
a global steering file

567
00:28:37,980 --> 00:28:39,990
that says "Always use Java"

568
00:28:39,990 --> 00:28:44,990
and then I have in my specific
workspace steering document

569
00:28:45,570 --> 00:28:47,100
that I want to use Node.js,

570
00:28:47,100 --> 00:28:48,780
well then it's gonna go with Node.js

571
00:28:48,780 --> 00:28:51,960
because that's for
specifically that project.

572
00:28:51,960 --> 00:28:53,550
So we can create a new one.

573
00:28:53,550 --> 00:28:58,290
Project steering, there we go.

574
00:28:58,290 --> 00:29:02,163
And then just start
adding my rules into that.

575
00:29:03,120 --> 00:29:05,073
I just had, let's see.

576
00:29:07,599 --> 00:29:08,432
- [Shridhar] So it basically serves

577
00:29:08,432 --> 00:29:09,300
a bunch of purposes, right?

578
00:29:09,300 --> 00:29:11,370
You can use it as
guardrails, you can use it

579
00:29:11,370 --> 00:29:14,490
as sort of augmentation
of the tool itself.

580
00:29:14,490 --> 00:29:16,500
- [Gunnar] Yep, exactly.

581
00:29:16,500 --> 00:29:19,590
So let me just add,

582
00:29:19,590 --> 00:29:22,830
probably should have done
this earlier, but it's fine.

583
00:29:22,830 --> 00:29:24,840
We control it through our prompt instead.

584
00:29:24,840 --> 00:29:26,250
But for instance, for my project,

585
00:29:26,250 --> 00:29:28,770
well I wanted to use US west 2

586
00:29:28,770 --> 00:29:31,170
and that could be
specifically for that project.

587
00:29:32,010 --> 00:29:33,690
How I want the structure to be,

588
00:29:33,690 --> 00:29:35,610
back end front end directories,

589
00:29:35,610 --> 00:29:37,743
that it should use the template YAML,

590
00:29:38,640 --> 00:29:40,320
that I want to use Node.js.

591
00:29:40,320 --> 00:29:42,330
The full timer should be 30 seconds.

592
00:29:42,330 --> 00:29:45,330
So then by adding these, I
don't have to prompt everything.

593
00:29:45,330 --> 00:29:48,830
It's gonna look at the project
steering for it as well.

594
00:29:48,830 --> 00:29:50,760
So I can save this

595
00:29:50,760 --> 00:29:52,950
and now it's always gonna
have that as context

596
00:29:52,950 --> 00:29:55,890
with everything that I prompt it to do.

597
00:29:55,890 --> 00:29:58,140
So I think that's a very
useful thing to have

598
00:29:58,140 --> 00:30:00,780
when working with this and
especially then if you want

599
00:30:00,780 --> 00:30:04,680
to control the output of what
you're actually building.

600
00:30:04,680 --> 00:30:09,180
Alright, so let's get back to
what we're actually building.

601
00:30:09,180 --> 00:30:13,560
So now we've created the API,
the two Lambda functions.

602
00:30:13,560 --> 00:30:16,170
We're just doing a text files for now

603
00:30:16,170 --> 00:30:18,180
and then we're storing
those in an S3 bucket

604
00:30:18,180 --> 00:30:21,570
and we're able to return
with a pre-signed URL

605
00:30:21,570 --> 00:30:22,830
to be able to fetch the images.

606
00:30:22,830 --> 00:30:23,850
So, so far so good.

607
00:30:23,850 --> 00:30:27,810
I guess the next step then is
to add Bedrock into the mix.

608
00:30:27,810 --> 00:30:29,640
- [Shridhar] The actual
image generation part. Yeah?

609
00:30:29,640 --> 00:30:31,663
- [Gunnar] Yes, so that one

610
00:30:32,900 --> 00:30:34,863
is a bit longer prompt,

611
00:30:36,990 --> 00:30:39,840
telling it to replace the
placeholder generation

612
00:30:39,840 --> 00:30:43,353
to use a Titan image
generator 2 on Bedrock,

613
00:30:44,460 --> 00:30:47,670
I got the model ID, we
could leave that blank,

614
00:30:47,670 --> 00:30:51,496
then it will probably have to
start searching to find it.

615
00:30:51,496 --> 00:30:54,000
So it'll save us probably
a couple of minutes,

616
00:30:54,000 --> 00:30:55,920
but it would then start looking up

617
00:30:55,920 --> 00:31:00,210
through the APIs basically
what model to actually use.

618
00:31:00,210 --> 00:31:04,800
Use the correct request format,
generate a PNG from prompt,

619
00:31:04,800 --> 00:31:08,163
store it in S3 under images,
return the object key.

620
00:31:11,400 --> 00:31:13,680
I'm telling it to add
an environment variable

621
00:31:13,680 --> 00:31:16,920
so we can bypass Bedrock
when we're doing testing

622
00:31:16,920 --> 00:31:19,740
for instance, we don't
have to call it every time.

623
00:31:19,740 --> 00:31:22,680
IM should be least privileged
for Bedrock and S3.

624
00:31:22,680 --> 00:31:24,990
We want a bit longer Lambda timeout

625
00:31:24,990 --> 00:31:26,430
for image generation.

626
00:31:26,430 --> 00:31:29,220
So in this case this is gonna go against

627
00:31:29,220 --> 00:31:32,670
what I have in my project
steering, where I had 30 seconds,

628
00:31:32,670 --> 00:31:34,170
and in that case, well it's gonna go

629
00:31:34,170 --> 00:31:36,510
with what I say in the prompt instead.

630
00:31:36,510 --> 00:31:38,640
- [Shridhar] And I
think one quick call out

631
00:31:38,640 --> 00:31:41,280
or a pro tip here is don't
be shy with your prompts.

632
00:31:41,280 --> 00:31:45,189
Like if you wanted to do a certain thing,

633
00:31:45,189 --> 00:31:46,560
I personally have this instinct of trying

634
00:31:46,560 --> 00:31:48,660
to get the prompt out and just get going.

635
00:31:48,660 --> 00:31:50,370
But take your time, think through it.

636
00:31:50,370 --> 00:31:52,890
The more specific and clear you are,

637
00:31:52,890 --> 00:31:54,030
the better it will do for you.

638
00:31:54,030 --> 00:31:57,600
You're just saving yourself
some time for the next step.

639
00:31:57,600 --> 00:31:59,190
- [Gunnar] Yep.

640
00:31:59,190 --> 00:32:01,440
Alright, so now it's just gonna,

641
00:32:01,440 --> 00:32:03,930
in similar way it's
gonna update our template

642
00:32:03,930 --> 00:32:06,510
to be able to add the
infrastructure needed.

643
00:32:06,510 --> 00:32:09,750
And in this case, since it's
Lambda who's calling Bedrock,

644
00:32:09,750 --> 00:32:12,120
it's basically about adding
the correct permissions

645
00:32:12,120 --> 00:32:14,190
to be able to call Bedrock.

646
00:32:14,190 --> 00:32:16,740
But then it needs to
update the package files

647
00:32:16,740 --> 00:32:19,653
to be able to use Bedrock runtime as well.

648
00:32:24,090 --> 00:32:26,843
That was pretty quick. Yeah, here we go.

649
00:32:26,843 --> 00:32:28,260
This is the Lambda function.

650
00:32:28,260 --> 00:32:30,730
So it's added what's
needed to generate an image

651
00:32:32,820 --> 00:32:35,220
and now it's running sam build again.

652
00:32:35,220 --> 00:32:39,060
And then it's gonna do
sam deploy hopefully

653
00:32:39,060 --> 00:32:40,263
at the end as well.

654
00:32:41,940 --> 00:32:43,680
Here we go.

655
00:32:43,680 --> 00:32:44,643
Trust.

656
00:32:48,630 --> 00:32:50,280
There, and as soon as that's done,

657
00:32:50,280 --> 00:32:52,860
well I guess we can test
if it's actually able

658
00:32:52,860 --> 00:32:54,560
to generate images for us as well.

659
00:33:02,040 --> 00:33:05,130
And now I guess it's the same thing. Oops.

660
00:33:05,130 --> 00:33:06,303
Let's see.

661
00:33:10,290 --> 00:33:11,283
Is it already done?

662
00:33:13,470 --> 00:33:14,910
That was quick in that case.

663
00:33:18,270 --> 00:33:21,333
I'm not sure if I need, is it
waiting for a prompt or not?

664
00:33:24,390 --> 00:33:25,223
Maybe.

665
00:33:27,210 --> 00:33:29,070
I always just agree to everything,

666
00:33:29,070 --> 00:33:31,580
so yes, no clue what that is.

667
00:33:31,580 --> 00:33:32,820
Oh yeah, here it's updating.

668
00:33:32,820 --> 00:33:34,480
So it was probably just me

669
00:33:36,630 --> 00:33:38,310
not wanting to wait long enough.

670
00:33:38,310 --> 00:33:40,050
Okay, so now it's updating again.

671
00:33:40,050 --> 00:33:41,910
- Testing time.
- Yeah.

672
00:33:41,910 --> 00:33:43,190
Let's see if...

673
00:33:44,040 --> 00:33:45,810
This should be fairly quick.

674
00:33:45,810 --> 00:33:47,700
It's about updating the Lambda functions

675
00:33:47,700 --> 00:33:51,510
and just adding policies.

676
00:33:51,510 --> 00:33:53,220
Update cleanup. There we go.

677
00:33:53,220 --> 00:33:56,703
Alright, so now that's done.

678
00:34:00,240 --> 00:34:01,130
Let's see if...

679
00:34:06,090 --> 00:34:07,500
It's thinking.

680
00:34:07,500 --> 00:34:10,810
Yep, updated the change log

681
00:34:16,890 --> 00:34:19,200
and since this was big enough change

682
00:34:19,200 --> 00:34:23,943
according to my steering I'm
gonna do a Git commit as well.

683
00:34:27,750 --> 00:34:30,513
That was a very good commit message.

684
00:34:31,800 --> 00:34:32,633
- [Shridhar] While that is loading

685
00:34:32,633 --> 00:34:33,900
does anyone have any suggestions

686
00:34:33,900 --> 00:34:35,350
for what we want to generate?

687
00:34:39,480 --> 00:34:43,410
So mine was a watercolor hummingbird.

688
00:34:43,410 --> 00:34:45,060
- [Gunnar] There we go. That's good.

689
00:34:45,060 --> 00:34:47,430
- Is that good?
- Good for a Monday morning.

690
00:34:47,430 --> 00:34:49,290
- [Gunnar] We should have, no, it needs

691
00:34:49,290 --> 00:34:51,273
to be re:Invent themed some way, right?

692
00:34:53,760 --> 00:34:58,260
Las Vegas in winter.

693
00:34:58,260 --> 00:34:59,300
Let's see if...

694
00:35:00,360 --> 00:35:01,950
Okay, so telling it then

695
00:35:01,950 --> 00:35:05,640
to first generate and then test it out.

696
00:35:05,640 --> 00:35:06,473
Let's see.

697
00:35:10,410 --> 00:35:11,973
So it's run in curl.

698
00:35:18,360 --> 00:35:22,680
And since that's now calling
Bedrock, it takes a few seconds

699
00:35:22,680 --> 00:35:25,023
and we can see that it generated an image.

700
00:35:26,430 --> 00:35:28,830
And now it's gonna try the other one.

701
00:35:28,830 --> 00:35:30,960
And yes, we're getting a pre-signed URL.

702
00:35:30,960 --> 00:35:34,563
If someone is quick enough you
can type it in and test it.

703
00:35:37,290 --> 00:35:38,790
There we go.

704
00:35:38,790 --> 00:35:40,500
It worked. Should we try?

705
00:35:40,500 --> 00:35:41,673
Do we dare to test it?

706
00:35:43,590 --> 00:35:44,433
Moment of truth.

707
00:35:45,780 --> 00:35:46,950
Do we really?

708
00:35:46,950 --> 00:35:47,783
Yeah.

709
00:35:50,340 --> 00:35:51,573
Placeholder.

710
00:35:53,010 --> 00:35:53,843
What's that?

711
00:35:55,590 --> 00:35:57,153
Oh, well that's interesting.

712
00:35:58,380 --> 00:36:00,393
Placeholder for image generation.

713
00:36:09,750 --> 00:36:10,770
Images.

714
00:36:10,770 --> 00:36:12,360
Oh it's still the text file.

715
00:36:12,360 --> 00:36:14,330
I don't think it updated the...

716
00:36:15,750 --> 00:36:17,220
So it's able to generate

717
00:36:17,220 --> 00:36:20,373
but it didn't update the return guy.

718
00:36:22,043 --> 00:36:23,220
(person speaks indistinctly)

719
00:36:23,220 --> 00:36:24,617
- [Gunnar] Sorry?

720
00:36:24,617 --> 00:36:25,673
- [Speaker] There are two images.

721
00:36:25,673 --> 00:36:26,506
The first one (indistinct).

722
00:36:26,506 --> 00:36:27,339
- [Gunnar] Oh you're right. Yeah, yeah.

723
00:36:27,339 --> 00:36:29,190
Oh yeah, it's listing 25 of them.

724
00:36:29,190 --> 00:36:30,513
You're right. That's good.

725
00:36:33,840 --> 00:36:35,790
Oh wow.

726
00:36:35,790 --> 00:36:38,490
That's exactly what
Vegas looks like to me.

727
00:36:38,490 --> 00:36:39,323
So yeah.

728
00:36:40,650 --> 00:36:41,880
I guess this is a winter.
- There you go.

729
00:36:41,880 --> 00:36:44,330
And how many lines of code
exactly did you write?

730
00:36:45,330 --> 00:36:47,670
- Zero. Yes.

731
00:36:47,670 --> 00:36:49,500
Okay, so it worked. Oh
yeah, good call out.

732
00:36:49,500 --> 00:36:52,263
So yes, it's listing
the text file as well.

733
00:36:54,360 --> 00:36:56,910
- [Shridhar] Alright, so we
have the back end all ready now

734
00:36:56,910 --> 00:36:58,260
and it works.

735
00:36:58,260 --> 00:36:59,883
- [Gunnar] Cool. So.

736
00:37:01,710 --> 00:37:06,710
Can you remove the text
file from the S3 bucket?

737
00:37:11,670 --> 00:37:13,440
Goes against exactly what you said.

738
00:37:13,440 --> 00:37:16,170
Very specific with your prompts.

739
00:37:16,170 --> 00:37:18,420
I'm not saying which text
file or which S3 bucket.

740
00:37:18,420 --> 00:37:21,630
Let's see if it gets
it. Hopefully it should.

741
00:37:21,630 --> 00:37:23,613
Yeah that was too easy.

742
00:37:24,690 --> 00:37:28,813
So now it's using the S3 API

743
00:37:30,240 --> 00:37:31,833
through the AWS tool.

744
00:37:33,990 --> 00:37:37,080
So now the API will hopefully not return

745
00:37:37,080 --> 00:37:38,490
that text file as well.

746
00:37:38,490 --> 00:37:39,450
Okay, cool.

747
00:37:39,450 --> 00:37:43,740
So now we basically have
our back end generated

748
00:37:43,740 --> 00:37:45,030
exactly how we want it to do.

749
00:37:45,030 --> 00:37:48,540
So I guess it's time to
look at the front end part.

750
00:37:48,540 --> 00:37:50,550
- [Shridhar] Yeah, that's the fun part.

751
00:37:50,550 --> 00:37:52,920
- [Gunnar] So like I said,

752
00:37:52,920 --> 00:37:56,257
I pre-created just a blank front end.

753
00:38:00,450 --> 00:38:01,830
Vite + React

754
00:38:01,830 --> 00:38:06,830
and it just looks like this for now.

755
00:38:07,020 --> 00:38:10,683
So I'm running that here.

756
00:38:12,420 --> 00:38:13,740
NPN Run dev for it.

757
00:38:13,740 --> 00:38:15,330
So that's all we've done so far.

758
00:38:15,330 --> 00:38:16,410
Just to save a bit of time.

759
00:38:16,410 --> 00:38:21,410
So let's try to add that prompt.

760
00:38:23,040 --> 00:38:25,260
I have a blank React +
Vite app in front end,

761
00:38:25,260 --> 00:38:27,960
update it with a single page,
text input for the prompt,

762
00:38:27,960 --> 00:38:29,730
a button to call post generate

763
00:38:29,730 --> 00:38:32,220
and a gallery with calls get images

764
00:38:32,220 --> 00:38:34,413
and renders pre-signed URLs as images.

765
00:38:35,580 --> 00:38:39,150
Add an environment file with Vite API URL

766
00:38:39,150 --> 00:38:43,083
set to the endpoint and
now I'm tricking it again.

767
00:38:48,270 --> 00:38:49,620
Let's do like that.

768
00:38:49,620 --> 00:38:52,113
For now skip authentication,
commit to code.

769
00:38:54,270 --> 00:38:57,420
So now we're switching from making use

770
00:38:57,420 --> 00:39:00,330
of the serverless MCP servers.

771
00:39:00,330 --> 00:39:02,613
Now it doesn't really need to use those.

772
00:39:04,830 --> 00:39:08,160
So here we can see that it's using tools

773
00:39:08,160 --> 00:39:13,160
to understand the front end directory

774
00:39:15,300 --> 00:39:17,583
and it wants to make changes.

775
00:39:18,510 --> 00:39:19,893
Looks great.

776
00:39:22,590 --> 00:39:25,113
It's doing some CSS stuff as well.

777
00:39:26,460 --> 00:39:28,653
Let's see what this is gonna look like.

778
00:39:30,240 --> 00:39:31,073
Alright.

779
00:39:32,670 --> 00:39:34,593
Stage front end changes.

780
00:39:37,440 --> 00:39:41,490
So it's adding that to Git.

781
00:39:41,490 --> 00:39:42,930
The commit message.

782
00:39:42,930 --> 00:39:44,463
Okay, that was pretty quick.

783
00:39:48,420 --> 00:39:51,840
Oh here we go. So this is our
front end application now.

784
00:39:51,840 --> 00:39:52,890
Nice.

785
00:39:52,890 --> 00:39:56,880
So one single prompt, it's able
to just generate something.

786
00:39:56,880 --> 00:40:00,840
I didn't tell it exactly
how to use the APIs.

787
00:40:00,840 --> 00:40:02,880
It was able to do it,
let's see if it's able

788
00:40:02,880 --> 00:40:04,530
to actually generate
something as well then.

789
00:40:04,530 --> 00:40:07,653
So now it's your turn to be creative.

790
00:40:08,610 --> 00:40:10,260
This is always the hardest part about-

791
00:40:10,260 --> 00:40:11,580
- [Shridhar] Keeping the
re:Invent theme going.

792
00:40:11,580 --> 00:40:14,283
Let's say re:Invent expo hall.

793
00:40:15,660 --> 00:40:18,210
I wanna see what it
looks like this morning.

794
00:40:18,210 --> 00:40:19,043
Just kidding.

795
00:40:21,270 --> 00:40:22,820
- [Gunnar] re:Invent Expo hall.

796
00:40:24,030 --> 00:40:24,863
- [Shridhar] It's not an easy one.

797
00:40:24,863 --> 00:40:27,423
I purposely gave a a more ambiguous one.

798
00:40:31,170 --> 00:40:32,520
- [Gunnar] Right, so it's generating,

799
00:40:32,520 --> 00:40:34,713
so hopefully it's calling the API for us.

800
00:40:40,620 --> 00:40:41,883
Oh.
- Oh wow.

801
00:40:44,100 --> 00:40:46,500
- [Gunnar] That's more
like re:Inforce I think.

802
00:40:46,500 --> 00:40:48,843
But yeah it worked. Okay.

803
00:40:51,390 --> 00:40:53,250
Yeah that's a front end that's able

804
00:40:53,250 --> 00:40:55,740
to then call the API, generate an image

805
00:40:55,740 --> 00:40:58,620
with our back end return a response

806
00:40:58,620 --> 00:41:01,860
and actually update the
front end for us as well

807
00:41:01,860 --> 00:41:03,330
and display the image straight away.

808
00:41:03,330 --> 00:41:05,760
- Nice.
- I think that's pretty cool.

809
00:41:05,760 --> 00:41:07,143
So now obviously,

810
00:41:08,520 --> 00:41:10,740
most of us would not be
happy with this front end.

811
00:41:10,740 --> 00:41:11,997
We would then iterate on it

812
00:41:11,997 --> 00:41:13,890
and add additional functionality.

813
00:41:13,890 --> 00:41:17,490
We would perhaps improve
the appearance of it.

814
00:41:17,490 --> 00:41:21,840
And let's say that maybe
I have my own design team

815
00:41:21,840 --> 00:41:25,110
that actually created a nice
design for this website.

816
00:41:25,110 --> 00:41:28,500
Well I can just prompt it,
tell it to look at this image

817
00:41:28,500 --> 00:41:31,290
or even this Figma template

818
00:41:31,290 --> 00:41:33,690
that this is what I want
my website to look like

819
00:41:33,690 --> 00:41:36,420
and it would then work
based on that as well.

820
00:41:36,420 --> 00:41:38,340
So you can do a lot more.

821
00:41:38,340 --> 00:41:41,820
The more specific you
are, even using images,

822
00:41:41,820 --> 00:41:43,140
you can tell it exactly

823
00:41:43,140 --> 00:41:45,030
what you want the output to look like.

824
00:41:45,030 --> 00:41:48,720
And I think that's really
the power of these tools

825
00:41:48,720 --> 00:41:51,903
to be able to use proper
context to make things happen.

826
00:41:53,250 --> 00:41:58,020
Alright, so now we've made that happen.

827
00:41:58,020 --> 00:42:02,193
So I wanted to show something that,

828
00:42:06,900 --> 00:42:09,570
I'll try to explain how
I see this relevant.

829
00:42:09,570 --> 00:42:12,690
Many times we don't start
from scratch with something.

830
00:42:12,690 --> 00:42:16,740
Maybe we have something that's
already deployed in AWS,

831
00:42:16,740 --> 00:42:18,720
we have some Lambda
functions running somewhere,

832
00:42:18,720 --> 00:42:22,170
some project that we're already using,

833
00:42:22,170 --> 00:42:25,200
but then we wanna make use
of these tools to improve,

834
00:42:25,200 --> 00:42:27,840
to update and so on.

835
00:42:27,840 --> 00:42:32,250
And there is a fairly new
functionality in the console

836
00:42:32,250 --> 00:42:34,413
that I think is super helpful for this.

837
00:42:35,804 --> 00:42:38,430
- [Shridhar] Yeah, so
while get it all set up,

838
00:42:38,430 --> 00:42:41,490
so like Gunnar mentioned, right,

839
00:42:41,490 --> 00:42:42,450
there are challenges.

840
00:42:42,450 --> 00:42:45,000
So when you start in the console

841
00:42:45,000 --> 00:42:47,950
and let's say you want to
transition over to your local IDE

842
00:42:49,380 --> 00:42:53,700
you almost instantaneously
get hit with these friction

843
00:42:53,700 --> 00:42:56,580
of you know, having to copy code manually,

844
00:42:56,580 --> 00:43:00,183
configure credentials
or set up dependencies.

845
00:43:01,110 --> 00:43:02,910
Other tools like Linter, formatters,

846
00:43:02,910 --> 00:43:05,190
all of those things you
actually have to set up.

847
00:43:05,190 --> 00:43:07,380
So what we went ahead
and did earlier this year

848
00:43:07,380 --> 00:43:09,930
was sort of take away all the pain

849
00:43:09,930 --> 00:43:11,520
and make it a one click experience.

850
00:43:11,520 --> 00:43:13,620
So if you are in the
Lambda console for example,

851
00:43:13,620 --> 00:43:15,630
and you just say "open in VS code"

852
00:43:15,630 --> 00:43:19,410
and it will open your VS code
instance, it'll download,

853
00:43:19,410 --> 00:43:21,000
set everything up for you.

854
00:43:21,000 --> 00:43:24,210
So you are, there you go.

855
00:43:24,210 --> 00:43:25,980
You know, you will just be able

856
00:43:25,980 --> 00:43:27,360
to get started in the console.

857
00:43:27,360 --> 00:43:30,870
If you authenticate it, it's
literally just one click.

858
00:43:30,870 --> 00:43:33,450
- [Gunnar] So just created a new one.

859
00:43:33,450 --> 00:43:35,070
- [Shridhar] There we go. Yeah.

860
00:43:35,070 --> 00:43:38,970
- [Gunnar] So created
a new Lambda function,

861
00:43:38,970 --> 00:43:40,320
it's just a Lambda function

862
00:43:40,320 --> 00:43:42,210
but it could obviously
have an API in front of it.

863
00:43:42,210 --> 00:43:45,960
It can have a bunch of
stuff, it could be anything.

864
00:43:45,960 --> 00:43:49,980
But what we can do then
is make use of this.

865
00:43:49,980 --> 00:43:53,883
So I tell it to open it
in visual studio code.

866
00:43:57,060 --> 00:44:01,533
And make sure it's opening, here we go.

867
00:44:04,620 --> 00:44:07,070
Lemme move the window
ended up on the wrong side.

868
00:44:08,880 --> 00:44:09,713
Here we go.

869
00:44:09,713 --> 00:44:11,200
So it opened vs code for me

870
00:44:12,180 --> 00:44:15,150
asking me do I allow the AWS toolkit,

871
00:44:15,150 --> 00:44:17,190
which is the requirement
that you need to have

872
00:44:17,190 --> 00:44:19,293
that extension installed to open.

873
00:44:20,400 --> 00:44:21,950
And then once we open it...

874
00:44:26,040 --> 00:44:27,123
sure, there we go.

875
00:44:31,650 --> 00:44:33,120
Yes, I trust, here we go.

876
00:44:33,120 --> 00:44:37,350
So now through that one
click thing in the console,

877
00:44:37,350 --> 00:44:39,900
we're able to open up
that specific function.

878
00:44:39,900 --> 00:44:41,460
Like we said it could be something

879
00:44:41,460 --> 00:44:42,630
that someone else has deployed,

880
00:44:42,630 --> 00:44:44,703
something that was created long time ago.

881
00:44:45,896 --> 00:44:50,896
And now from this point on,
so many popups in vs code,

882
00:44:51,090 --> 00:44:54,090
from this point on, well I can
start doing the same things.

883
00:44:54,090 --> 00:44:57,450
I can now use Kiro to iterate
on this, I can work on it,

884
00:44:57,450 --> 00:44:59,400
I can deploy it again.

885
00:44:59,400 --> 00:45:03,030
But with this, what happens when I store

886
00:45:03,030 --> 00:45:04,140
or you make a change.

887
00:45:04,140 --> 00:45:06,240
- [Shridhar] Yeah, that's
literally my favorite part, right?

888
00:45:06,240 --> 00:45:08,580
So you make changes in your ID,

889
00:45:08,580 --> 00:45:10,800
it automatically gets
synced back to the cloud.

890
00:45:10,800 --> 00:45:12,570
So you do not have to keep hitting,

891
00:45:12,570 --> 00:45:14,040
it prompts you obviously, it prompts you

892
00:45:14,040 --> 00:45:16,601
that you wanna deploy and you hit deploy,

893
00:45:16,601 --> 00:45:18,210
it automatically deploys to cloud.

894
00:45:18,210 --> 00:45:20,280
You don't have to make
any of those changes.

895
00:45:20,280 --> 00:45:23,190
And one of the other
things here is you could,

896
00:45:23,190 --> 00:45:25,860
and we talked about SAM a lot
throughout the session so far.

897
00:45:25,860 --> 00:45:29,070
So from here you could
also export your project

898
00:45:29,070 --> 00:45:30,030
as a SAM template.

899
00:45:30,030 --> 00:45:31,980
So if you want to start
building using, you know,

900
00:45:31,980 --> 00:45:33,963
SAM CLI or something,

901
00:45:34,950 --> 00:45:38,640
from the ID you could
just go export to SAM

902
00:45:38,640 --> 00:45:40,620
and start doing that locally as well.

903
00:45:40,620 --> 00:45:43,620
So as you saw the
experience has been much,

904
00:45:43,620 --> 00:45:46,020
you know, simplified to
a great deal to the point

905
00:45:46,020 --> 00:45:47,190
where you don't have to do anything.

906
00:45:47,190 --> 00:45:50,206
We've just taken care
of all the scaffolding,

907
00:45:50,206 --> 00:45:52,023
all the setup for you.

908
00:45:53,130 --> 00:45:54,180
- [Gunnar] Cool. Alright.

909
00:45:54,180 --> 00:45:56,520
So that's a good way if you want

910
00:45:56,520 --> 00:45:58,590
to start using these types of tools

911
00:45:58,590 --> 00:46:01,200
together with something that's
already deployed perhaps.

912
00:46:01,200 --> 00:46:02,850
So back to our app then,

913
00:46:02,850 --> 00:46:04,720
and what we've done so far is

914
00:46:06,810 --> 00:46:09,090
it's a working app, front and back end,

915
00:46:09,090 --> 00:46:11,730
and it has the functionality that we want.

916
00:46:11,730 --> 00:46:13,560
But to take this into something

917
00:46:13,560 --> 00:46:15,780
that's perhaps production ready,

918
00:46:15,780 --> 00:46:17,520
there's usually a lot of other things

919
00:46:17,520 --> 00:46:18,810
we need to think about.

920
00:46:18,810 --> 00:46:21,270
And one key thing when we're building,

921
00:46:21,270 --> 00:46:25,080
and I think for serverless

922
00:46:25,080 --> 00:46:27,600
it's super important to understand

923
00:46:27,600 --> 00:46:29,070
how your application works

924
00:46:29,070 --> 00:46:31,350
and that's where observability comes in.

925
00:46:31,350 --> 00:46:35,010
And there are a lot of
great things with the way

926
00:46:35,010 --> 00:46:38,043
that serverless works, that
you have separate functions,

927
00:46:38,910 --> 00:46:42,480
all the pieces are basically broken apart,

928
00:46:42,480 --> 00:46:43,980
makes it easier to understand

929
00:46:43,980 --> 00:46:47,040
what's actually happening
as soon as you start adding

930
00:46:47,040 --> 00:46:49,470
logging, tracing, metrics and so on.

931
00:46:49,470 --> 00:46:52,560
So that's what we're gonna
do now as the next step.

932
00:46:52,560 --> 00:46:56,640
And there is something called AWS

933
00:46:56,640 --> 00:46:58,710
or what is the official name?

934
00:46:58,710 --> 00:47:01,590
- [Shridhar] Power Tools for AWS Lambda.

935
00:47:01,590 --> 00:47:05,010
- [Gunnar] Power Tools
for AWS Lambda allows us

936
00:47:05,010 --> 00:47:08,130
to do these things fairly easily.

937
00:47:08,130 --> 00:47:10,500
So it's basically
libraries that you can add

938
00:47:10,500 --> 00:47:14,010
to your Lambda functions
to start adding logging,

939
00:47:14,010 --> 00:47:16,290
tracing and metrics to your applications.

940
00:47:16,290 --> 00:47:19,650
So instrument your functions
to understand what's happening.

941
00:47:19,650 --> 00:47:22,620
So I'm gonna tell it
to basically add that,

942
00:47:22,620 --> 00:47:24,030
add Lambda Power Tools

943
00:47:24,030 --> 00:47:27,453
to both functions include
logger tracer metrics.

944
00:47:28,500 --> 00:47:31,890
I wanna have a custom
metric images generated,

945
00:47:31,890 --> 00:47:33,270
I wanna have correlation ideas

946
00:47:33,270 --> 00:47:37,440
so we can do request tracking,
I want structured logging

947
00:47:37,440 --> 00:47:39,543
and then rebuild and deploy.

948
00:47:40,560 --> 00:47:43,680
So I'm telling it that I want

949
00:47:43,680 --> 00:47:45,873
to have full observability basically.

950
00:47:47,370 --> 00:47:49,500
- [Shridhar] And Power
Tools is a set of libraries

951
00:47:49,500 --> 00:47:51,060
that sort of augments

952
00:47:51,060 --> 00:47:53,730
what we provide in Lambda out of the box.

953
00:47:53,730 --> 00:47:55,290
So you get structured logging in Lambda,

954
00:47:55,290 --> 00:47:56,280
adjacent structured logging.

955
00:47:56,280 --> 00:47:58,020
We launched a couple of years ago.

956
00:47:58,020 --> 00:48:00,090
You could have previously done
it as well using libraries,

957
00:48:00,090 --> 00:48:01,680
but we just made it native.

958
00:48:01,680 --> 00:48:04,500
You get all log level controls,
what Power Tools does,

959
00:48:04,500 --> 00:48:07,650
it helps you extend that
functionality to other things

960
00:48:07,650 --> 00:48:10,530
and it builds traces from that and so on.

961
00:48:10,530 --> 00:48:11,550
And it's a nifty little tool.

962
00:48:11,550 --> 00:48:13,920
So we definitely recommend checking out.

963
00:48:13,920 --> 00:48:14,753
- [Gunnar] Yep.

964
00:48:14,753 --> 00:48:17,010
So as soon as this is deployed now

965
00:48:17,010 --> 00:48:19,113
or once again I'm gonna test that.

966
00:48:20,640 --> 00:48:25,640
And something that I use
the Kiro CLI for a lot,

967
00:48:27,300 --> 00:48:29,430
it is to understand
what's actually happening

968
00:48:29,430 --> 00:48:32,490
with my applications, telling
it to fetch logs for me

969
00:48:32,490 --> 00:48:35,280
or telling it to look at traces and so on.

970
00:48:35,280 --> 00:48:38,250
Because it is then able to call CloudWatch

971
00:48:38,250 --> 00:48:41,010
to be able to get this
type of data for me,

972
00:48:41,010 --> 00:48:43,920
but I don't have to do it basically.

973
00:48:43,920 --> 00:48:45,930
I can ask it very specific things

974
00:48:45,930 --> 00:48:47,820
and it can go through a bunch of logs

975
00:48:47,820 --> 00:48:50,730
to find specifically what I'm after.

976
00:48:50,730 --> 00:48:53,700
So now it's using the serverless MCP again

977
00:48:53,700 --> 00:48:57,933
to run the sam build and
then we'll do another deploy.

978
00:49:00,270 --> 00:49:01,930
So what we're doing now is

979
00:49:03,090 --> 00:49:06,870
we've been running sam
deploy quite a few times

980
00:49:06,870 --> 00:49:09,810
and mostly because we've
done infrastructure changes

981
00:49:09,810 --> 00:49:12,030
pretty much all the time so far,

982
00:49:12,030 --> 00:49:15,030
but we don't really have
to do sam deploy every time

983
00:49:15,030 --> 00:49:17,490
when we're just making code changes.

984
00:49:17,490 --> 00:49:19,203
We could use sam sync.

985
00:49:20,160 --> 00:49:22,230
- [Shridhar] That is one of my favorite

986
00:49:22,230 --> 00:49:25,770
SAM capabilities where
you just do sam sync

987
00:49:25,770 --> 00:49:27,090
and it automatically detects

988
00:49:27,090 --> 00:49:29,460
and deploys changes for you.

989
00:49:29,460 --> 00:49:30,810
It's obviously this guided,

990
00:49:30,810 --> 00:49:32,490
you can have different options.

991
00:49:32,490 --> 00:49:35,259
I guess you're gonna use
sam sync watch or something

992
00:49:35,259 --> 00:49:36,720
or just using plain sam sync.

993
00:49:36,720 --> 00:49:39,120
- [Gunnar] Well I'm not
doing it at all right now.

994
00:49:39,120 --> 00:49:39,953
This is just.

995
00:49:44,157 --> 00:49:46,170
- [Shridhar] And it becomes
handy if you are using,

996
00:49:46,170 --> 00:49:47,790
there's another capability called Remote,

997
00:49:47,790 --> 00:49:49,560
if you're remotely debugging, for example,

998
00:49:49,560 --> 00:49:53,160
debugging a function deployed
in the cloud from your IDE

999
00:49:53,160 --> 00:49:54,840
and if you do sam sync

1000
00:49:54,840 --> 00:49:56,760
then you don't have to
get out of the flow.

1001
00:49:56,760 --> 00:49:59,070
You could make continue making changes

1002
00:49:59,070 --> 00:50:01,620
and you know, sam sync will
keep deploying it for you.

1003
00:50:01,620 --> 00:50:02,880
So you get the experience

1004
00:50:02,880 --> 00:50:05,040
as if everything is running
on your local device

1005
00:50:05,040 --> 00:50:06,780
when in reality you're
debugging a function

1006
00:50:06,780 --> 00:50:08,230
that's sitting in production.

1007
00:50:09,540 --> 00:50:11,040
- [Gunnar] Alright, let's see.

1008
00:50:12,060 --> 00:50:13,060
I'm in that state again

1009
00:50:13,060 --> 00:50:15,783
where I'm not sure if it's
waiting for me or not.

1010
00:50:19,830 --> 00:50:21,300
I'm always gonna be unsure.

1011
00:50:21,300 --> 00:50:22,133
Here we go.

1012
00:50:23,580 --> 00:50:25,980
Updated progress. Alright, almost done.

1013
00:50:25,980 --> 00:50:27,393
So we can test that as well.

1014
00:50:30,960 --> 00:50:33,660
These changes now it's
adding those libraries for us

1015
00:50:33,660 --> 00:50:35,640
so we're able to fetch all that data

1016
00:50:35,640 --> 00:50:36,780
and we're then able

1017
00:50:36,780 --> 00:50:40,350
to have better observability
into our application.

1018
00:50:40,350 --> 00:50:42,543
Let's see if it's almost done.

1019
00:50:44,700 --> 00:50:46,254
Yeah, update complete.

1020
00:50:46,254 --> 00:50:47,494
(person sneezes)

1021
00:50:47,494 --> 00:50:48,411
Gesundheit.

1022
00:50:51,363 --> 00:50:52,196
Here we go.

1023
00:50:54,900 --> 00:50:56,550
And then we can test it.

1024
00:50:56,550 --> 00:50:57,843
I have my prompt ready.

1025
00:51:04,290 --> 00:51:05,123
Yep.

1026
00:51:06,043 --> 00:51:08,520
And then we obviously
need to generate something

1027
00:51:08,520 --> 00:51:10,293
so we have some metrics.

1028
00:51:14,880 --> 00:51:16,763
- [Shridhar] Oh, you're
looking at me for a prompt?

1029
00:51:18,480 --> 00:51:20,760
- It's Monday morning.
- Yeah.

1030
00:51:20,760 --> 00:51:22,230
- Monday morning.
- Oh let's do that

1031
00:51:22,230 --> 00:51:23,133
Monday morning.

1032
00:51:24,420 --> 00:51:25,253
Let's see.

1033
00:51:29,190 --> 00:51:30,810
All right, so now we're generating new

1034
00:51:30,810 --> 00:51:32,850
and this is to now
generate some logs for us.

1035
00:51:32,850 --> 00:51:34,700
So we have something to test as well.

1036
00:51:36,690 --> 00:51:37,790
Hopefully that's done.

1037
00:51:38,700 --> 00:51:41,340
The application now has
production-grade observability

1038
00:51:41,340 --> 00:51:42,870
with minimal code changes.

1039
00:51:42,870 --> 00:51:45,180
And that's pretty cool with Power Tools

1040
00:51:45,180 --> 00:51:46,920
because you're instrumenting the code

1041
00:51:46,920 --> 00:51:49,890
so you don't have to write
a lot of code yourself

1042
00:51:49,890 --> 00:51:51,790
to actually create this observability.

1043
00:51:53,040 --> 00:51:55,260
You're wrapping basically your function

1044
00:51:55,260 --> 00:51:56,310
to be able to get it.

1045
00:51:57,330 --> 00:51:59,790
Monday, Mondy morning.

1046
00:51:59,790 --> 00:52:02,913
Yep. Not that time.

1047
00:52:03,840 --> 00:52:07,173
10 past eight and seven at the same time.

1048
00:52:08,940 --> 00:52:10,830
- [Shridhar] Not too far off
from what time you're at.

1049
00:52:10,830 --> 00:52:11,880
- [Gunnar] No.

1050
00:52:11,880 --> 00:52:13,680
Fetch the most recent CloudWatch logs

1051
00:52:13,680 --> 00:52:15,990
for the generate function in stack

1052
00:52:15,990 --> 00:52:19,353
and show me structured log
entries with correlation IDs.

1053
00:52:24,210 --> 00:52:27,990
Like I said, this is something
that I use it a lot for

1054
00:52:27,990 --> 00:52:30,690
to be able to understand
not only when developing,

1055
00:52:30,690 --> 00:52:33,000
but also for instance,

1056
00:52:33,000 --> 00:52:35,583
when trying to solve issues and so on.

1057
00:52:37,800 --> 00:52:39,513
Let me fetch the logs differently.

1058
00:52:42,360 --> 00:52:45,333
All right, so we found
the log group, here we go.

1059
00:52:47,850 --> 00:52:49,533
I guess this is it.

1060
00:52:51,210 --> 00:52:52,773
Structured log entry.

1061
00:52:56,250 --> 00:52:57,083
Monday morning.

1062
00:52:57,083 --> 00:52:58,600
Oh yeah. So here we go, that's our.

1063
00:53:03,360 --> 00:53:05,370
So now I was able to then fetch that,

1064
00:53:05,370 --> 00:53:08,400
we have a trace ID
following the entire request

1065
00:53:08,400 --> 00:53:09,453
all throughout.

1066
00:53:10,740 --> 00:53:13,830
Cold start detected since
the Lambda function.

1067
00:53:13,830 --> 00:53:15,330
Well first off we haven't
used any in a while,

1068
00:53:15,330 --> 00:53:18,269
but it was also a code change.

1069
00:53:18,269 --> 00:53:19,102
If that makes sense.

1070
00:53:19,102 --> 00:53:22,170
Image generation took 12 seconds

1071
00:53:22,170 --> 00:53:26,610
and we have our custom
metric successfully admitted.

1072
00:53:26,610 --> 00:53:27,443
So it works.

1073
00:53:27,443 --> 00:53:28,860
We're able to then fetch these logs

1074
00:53:28,860 --> 00:53:32,100
and we now have instrumented
our Lambda functions.

1075
00:53:32,100 --> 00:53:35,730
So what we could do now is
obviously use CloudWatch

1076
00:53:35,730 --> 00:53:38,010
and we would have traces available,

1077
00:53:38,010 --> 00:53:40,440
we can use CloudWatch and so on.

1078
00:53:40,440 --> 00:53:42,630
There is a new feature in CloudWatch

1079
00:53:42,630 --> 00:53:46,860
that I think is super
useful for serverless.

1080
00:53:46,860 --> 00:53:49,110
- [Shridhar] Yeah, it's
application signals.

1081
00:53:49,110 --> 00:53:52,740
It is essentially AWS's APM tool

1082
00:53:52,740 --> 00:53:57,060
and it collects signals
across logs, metrics, traces

1083
00:53:57,060 --> 00:53:59,520
for your application
and it correlates them

1084
00:53:59,520 --> 00:54:01,503
and it gives you key metrics.

1085
00:54:02,970 --> 00:54:04,050
Think of golden signals,

1086
00:54:04,050 --> 00:54:05,790
latency, throughput and so on.

1087
00:54:05,790 --> 00:54:08,550
All of this out of the box by default.

1088
00:54:08,550 --> 00:54:10,590
It's a one click enable if you are setting

1089
00:54:10,590 --> 00:54:12,150
it up for your Lambda function.

1090
00:54:12,150 --> 00:54:14,730
And the part that I emphasize on a lot

1091
00:54:14,730 --> 00:54:16,620
is that it uses open telemetry

1092
00:54:16,620 --> 00:54:17,910
to do all the instrumentation.

1093
00:54:17,910 --> 00:54:21,240
So it can easily fit into
your open telemetry tooling

1094
00:54:21,240 --> 00:54:25,320
that you already have and
you can extend it as well.

1095
00:54:25,320 --> 00:54:26,820
Do we have time to show it or?

1096
00:54:26,820 --> 00:54:28,590
- [Gunnar] Yeah, I'm adding it now.

1097
00:54:28,590 --> 00:54:33,590
So I sent a prompt telling it
to enable application signals.

1098
00:54:34,320 --> 00:54:36,450
So I'm doing it through
infrastructures code

1099
00:54:36,450 --> 00:54:37,800
through my SAM template.

1100
00:54:37,800 --> 00:54:40,208
It can be enabled in the console as well.

1101
00:54:40,208 --> 00:54:41,041
- [Shridhar] Yeah, it's the one click.

1102
00:54:41,041 --> 00:54:42,150
So you enable it

1103
00:54:42,150 --> 00:54:44,193
and we take care of all the setting up.

1104
00:54:45,230 --> 00:54:47,610
- [Gunnar] I told it to add
it in the global section

1105
00:54:47,610 --> 00:54:49,660
so it should be for all Lambda functions,

1106
00:54:50,580 --> 00:54:53,640
but it then told me no it
can't be in the global section

1107
00:54:53,640 --> 00:54:55,830
so I told it the wrong thing.

1108
00:54:55,830 --> 00:54:58,350
So it's adding it to each Lambda function.

1109
00:54:58,350 --> 00:54:59,183
So it's pretty cool.

1110
00:54:59,183 --> 00:55:00,690
Instead of actually deploying it

1111
00:55:00,690 --> 00:55:03,640
and not working, it fixed the
problem for me straight away.

1112
00:55:04,500 --> 00:55:06,060
So here we go.

1113
00:55:06,060 --> 00:55:08,340
And now it needs to run sam build

1114
00:55:08,340 --> 00:55:09,540
and then sam deploy again

1115
00:55:09,540 --> 00:55:11,760
because it's an infrastructure change.

1116
00:55:11,760 --> 00:55:14,640
And then as soon as that's done

1117
00:55:14,640 --> 00:55:17,270
we are then gonna have CloudWatch.

1118
00:55:24,000 --> 00:55:27,333
Let's see if we get their
application signals.

1119
00:55:28,710 --> 00:55:32,103
So this is application signals,
so it's basically an APM

1120
00:55:32,103 --> 00:55:37,080
for our application.

1121
00:55:37,080 --> 00:55:40,260
And it helps us then understand
the application much better.

1122
00:55:40,260 --> 00:55:43,170
This is a super cool new
feature in CloudWatch

1123
00:55:43,170 --> 00:55:48,150
and I think it probably
works best for serverless.

1124
00:55:48,150 --> 00:55:49,830
- [Shridhar] Yes, yes, absolutely.

1125
00:55:49,830 --> 00:55:52,524
It makes debugging and figuring out

1126
00:55:52,524 --> 00:55:54,930
your serverless application
much, much easier.

1127
00:55:54,930 --> 00:55:58,320
With that, do we wanna
transition back to wrapping up?

1128
00:55:58,320 --> 00:55:59,730
- [Gunnar] Yeah, I think we should.

1129
00:55:59,730 --> 00:56:03,090
So basically we've been
able to build an application

1130
00:56:03,090 --> 00:56:06,783
that I think does exactly
what we want it to.

1131
00:56:08,040 --> 00:56:10,530
It is able to generate images,

1132
00:56:10,530 --> 00:56:12,960
we're able to return images.

1133
00:56:12,960 --> 00:56:15,150
But functionality isn't
the most important thing.

1134
00:56:15,150 --> 00:56:18,390
I think the important thing is
basically the way we did it.

1135
00:56:18,390 --> 00:56:21,930
I still haven't written
a single line of code

1136
00:56:21,930 --> 00:56:24,840
and we were able to generate
this, but still under control.

1137
00:56:24,840 --> 00:56:25,740
So we controlled it.

1138
00:56:25,740 --> 00:56:29,670
It wasn't just vibe coding telling a tool

1139
00:56:29,670 --> 00:56:31,710
to generate the application
from scratch for us

1140
00:56:31,710 --> 00:56:33,360
and then not knowing
what was gonna happen.

1141
00:56:33,360 --> 00:56:35,430
We broke it down into small pieces

1142
00:56:35,430 --> 00:56:38,250
and made sure that we were
in control all throughout.

1143
00:56:38,250 --> 00:56:39,540
- [Shridhar] I think the
serverless MCP server

1144
00:56:39,540 --> 00:56:40,590
was super helpful as well.

1145
00:56:40,590 --> 00:56:43,500
It turned Kiro essentially
into a serverless expert,

1146
00:56:43,500 --> 00:56:47,880
you know, with all the SAM
tools, deployment guidelines,

1147
00:56:47,880 --> 00:56:50,460
access to Serverless Land
that I talked about earlier

1148
00:56:50,460 --> 00:56:51,690
and so on.

1149
00:56:51,690 --> 00:56:53,820
And again, as you saw

1150
00:56:53,820 --> 00:56:55,860
that observability was
not an afterthought.

1151
00:56:55,860 --> 00:56:57,090
Like we added it towards the end,

1152
00:56:57,090 --> 00:56:59,250
but that's just the progression.

1153
00:56:59,250 --> 00:57:01,170
You know, we embedded it with Power Tools

1154
00:57:01,170 --> 00:57:03,960
and throughout the process,
not just observability,

1155
00:57:03,960 --> 00:57:06,870
the guardrail security
least privilege permissions,

1156
00:57:06,870 --> 00:57:08,850
not giving S3 bucket public access.

1157
00:57:08,850 --> 00:57:11,310
Those are things that we
were able to do all again

1158
00:57:11,310 --> 00:57:14,700
without having to, you know, fiddle around

1159
00:57:14,700 --> 00:57:16,593
with I am policies and such.

1160
00:57:18,750 --> 00:57:20,730
And lastly, you know, it also gives you

1161
00:57:20,730 --> 00:57:23,550
sort of this easy transition
between local and production.

1162
00:57:23,550 --> 00:57:26,403
Like a basically a complete
developer experience.

1163
00:57:27,540 --> 00:57:28,373
Alright.

1164
00:57:29,970 --> 00:57:32,880
- [Gunnar] Alright, so
if you scan the QR code,

1165
00:57:32,880 --> 00:57:37,590
it will get you to a list
of resources basically.

1166
00:57:37,590 --> 00:57:39,990
So you can easily download Kiro CLI,

1167
00:57:39,990 --> 00:57:43,050
but also how you can
find these MCP servers.

1168
00:57:43,050 --> 00:57:45,030
We're linking the serverless MCP servers,

1169
00:57:45,030 --> 00:57:48,000
but all the other AWS
MCP servers are there

1170
00:57:48,000 --> 00:57:49,800
in the same page.

1171
00:57:49,800 --> 00:57:53,850
Serverless Land, great resource
for everything serverless.

1172
00:57:53,850 --> 00:57:57,240
Lots of patterns, walkthroughs, articles,

1173
00:57:57,240 --> 00:58:01,650
blog posts, workshops,
everything basically.

1174
00:58:01,650 --> 00:58:03,660
A lot of this is built around

1175
00:58:03,660 --> 00:58:06,030
well-architected serverless lens.

1176
00:58:06,030 --> 00:58:10,050
So the way that these MCP
servers, for instance work,

1177
00:58:10,050 --> 00:58:12,135
it is built on
well-architected principles.

1178
00:58:12,135 --> 00:58:13,230
- [Shridhar] Yes, yes.

1179
00:58:13,230 --> 00:58:15,840
- [Gunnar] And then finally
linked to the Kiro CLI docs

1180
00:58:15,840 --> 00:58:18,210
as well where you can
find more information

1181
00:58:18,210 --> 00:58:20,640
about how to use Kiro CLI.

1182
00:58:20,640 --> 00:58:24,630
And with that, we want to
thank you all very much

1183
00:58:24,630 --> 00:58:26,250
for joining us today.

1184
00:58:26,250 --> 00:58:27,700
Well thank you.
- Thank you.

