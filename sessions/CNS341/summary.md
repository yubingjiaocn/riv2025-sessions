# AWS re:Invent 2025 CNS-341 会议总结

## 会议概述

本次会议主题为"使用 Amazon ECS 加速代码部署到云端"(CNS-341)，由 AWS ECS 专家 Jennifer 和 Saki 主讲，并邀请了 GoDaddy 的首席工程师 Keith Bartholomew 分享实践经验。会议重点介绍了 Amazon ECS 的核心能力、平台构建的设计原则，以及最新发布的 ECS Express Mode 功能。

Amazon ECS 作为 AWS 的全托管容器编排服务，提供了最简单的方式来构建、部署和管理容器化应用。该服务的独特之处在于完全托管且无版本控制——用户无需管理控制平面、无需协调升级或安排补丁。ECS 每周启动超过 30 亿个任务，超过 65% 的新 AWS 容器客户选择使用 ECS，并且是 AWS 内部的基础服务之一。

会议深入探讨了开发者平台构建的三大核心设计原则：生命周期管理、规模经济和应急退出机制。同时对比了抽象化和组合化两种平台接口设计理念，并展示了 ECS Express Mode 如何将两者优势结合，为开发者提供既简单又灵活的部署体验。最后，GoDaddy 分享了他们如何在这些新功能推出之前，就基于 ECS 构建了强大的内部开发者平台。

## 详细时间线

### 开场与 ECS 服务介绍 (00:00 - 08:30)

00:00 - 00:45 - 会议开场
- Jennifer 和 Saki 介绍会议主题 CNS-341
- 面向希望加速代码部署的开发者和平台团队
- 预告稍后将有 GoDaddy 的 Keith 加入分享

00:45 - 03:15 - Amazon ECS 基础介绍
- ECS 是全托管的容器编排服务，提供在 AWS 上构建、部署和管理容器化应用的最简单方式
- 计算层灵活性：支持 EC2 实例、ECS Anywhere（自有硬件）、AWS Fargate（无服务器）
- 大多数客户使用 Fargate，享受无服务器的终极简单性，按使用付费

03:15 - 04:30 - ECS Managed Instances 新功能
- 上个月刚推出的新计算选项
- 消除基础设施管理的同时提供广泛的 EC2 实例类型访问
- 适合需要特定实例类型（GPU、网络优化、内存优化）但仍希望 ECS 处理运维负担的场景

04:30 - 06:45 - ECS 的独特优势
- 完全托管且无版本：无需管理控制平面、无需升级或补丁协调
- 集群本质上只是逻辑分组，可以根据需要创建任意数量
- Fargate 和 Managed Instances 无需配置或扩展服务器，无需管理或修补操作系统
- Fargate 提供租户隔离，每个任务获得独特的 EC2 实例（金融服务客户特别青睐）

06:45 - 08:30 - ECS 原生集成功能
- 原生服务发现：Service Connect 提供服务网格功能，无需安装或维护
- 统一的服务访问方式，无需复杂的 DNS 管理
- 原生部署机制：传统的滚动部署，今年夏天推出的原生蓝绿部署，一个月前推出的金丝雀和线性部署策略
- 每周启动超过 30 亿个任务，超过 65% 的新容器客户使用 ECS
- ECS 是 AWS 的基础服务之一，每个新区域必须首先部署 ECS

### 应用部署流程与平台设计原则 (08:30 - 20:00)

08:30 - 10:45 - 部署流程的复杂性
- Saki 从开发者视角展示从容器镜像到生产环境的完整部署流程
- 需要配置：VPC、ECS 集群、任务定义、ALB、TLS 证书、目标组、监听器规则、路由配置
- 创建 ECS 服务整合所有组件
- 还需配置自动扩展策略和可观测性（日志、追踪、指标到 CloudWatch）
- 这只是单个应用的流程

10:45 - 12:30 - 平台构建者的挑战
- 需要支持多个开发团队，每个团队有不同的应用和需求
- 即使在计算层标准化（如使用 ECS），不同应用可能需要不同的后端服务（S3、DynamoDB 等）
- 需要在整个组织范围内扩展
- 解决方案：构建开发者平台进行自动化

12:30 - 15:45 - 平台设计的三大原则
1. 生命周期管理：拥有从创建、更新到退役的完整应用部署生命周期
   - 不仅是部署，还包括长期维护、更新和升级
   - 需要提供开发者交互的入口点（API、CLI 或模板集合）

2. 规模经济：智能使用资源
   - 不配置不需要的资源，重复使用现有资源
   - 例如：多个应用可以共享同一个 ALB，使用不同的路由配置
   - 共享资源包括 ECS 集群、VPC 配置、监控仪表板
   - 在为每个应用复制资源和避免过度互联的复杂性之间取得平衡

3. 应急退出机制（Break Glass Procedures）：最重要的原则
   - 没有平台能从一开始就完美适配所有用例
   - 必须为用户提供在平台产品之间轻松过渡的方式
   - 允许用户扩展平台能力
   - 支持用户在需要时自行管理资源，而不是被困在平台限制中

15:45 - 20:00 - 抽象化 vs 组合化的哲学讨论

抽象化方法：
- 用户无需了解底层实现
- 优势：入门门槛低、确保组织一致性、通常通过 API 暴露生命周期管理
- 挑战：依赖平台团队添加新功能、调试困难需要深入了解底层资源、维护工作量大
- 总结：更容易入门，但演进受平台团队瓶颈限制

组合化方法：
- 自动化设置但保持对用户可见
- 优势：快速适应、灵活调整、所见即所得
- 挑战：学习曲线陡峭（需要领域知识如 ECS、ALB 概念）、可能导致部署碎片化、生命周期管理在模板场景下较复杂
- 总结：需要更多领域知识，但团队可以独立演进

理想方案：结合两者优势
- 提供简单的入门方式，但不隐藏实现细节
- 需要时仍可更新和自定义

### Amazon ECS Express Mode 发布 (20:00 - 38:00)

20:00 - 22:30 - Express Mode 介绍
- 上周刚发布的新功能
- 为开发者提供全新的 ECS 体验方式
- 利用 ECS 多年的平台经验，加速应用部署
- 采用向后工作法（Working Backwards）：从客户需求出发

22:30 - 25:00 - Express Mode 的简化体验
- 只需提供三样东西：容器镜像和两个 IAM 角色
  - 任务执行角色：用于从 ECR 获取镜像和设置日志
  - 基础设施角色（新）：用于配置所有其他资源
- 其他所有配置都有默认值
- 部署完成后立即获得应用 URL，可进行端到端测试
- 大幅减少配置参数（相比数百个参数）

25:00 - 27:15 - Express Mode 自动配置的资源
- VPC 和网络配置
- ECS 集群
- 应用负载均衡器（ALB）
- TLS 证书
- 目标组和监听器规则
- ECS 服务
- 自动扩展策略
- CloudWatch 日志记录
- 可用区再平衡
- 最小权限入站安全组
- 金丝雀部署和基于告警的回滚

27:15 - 29:00 - CLI 交互式体验
- 使用 --monitor-resources 标志可获得交互式体验
- 在终端中实时查看部署进度，类似控制台体验
- 适用于创建、更新和删除操作
- 显示资源 ARN、状态、事件和错误信息

29:00 - 31:30 - 生命周期管理
- 完整的生命周期：创建、更新、删除
- 新手用户无需了解底层资源（ALB、目标组、任务定义设置）
- 简化复杂操作：
  - 更新端口或健康检查（传统 ECS 中可能造成中断且难以协调）
  - 在公共服务和私有服务之间切换（只需提供不同子网并更新）

31:30 - 33:45 - 控制台功能演示
- 可观测性：CPU、内存、目标响应时间、4xx/5xx 错误
- 应用日志
- 新的资源标签页：时间线视图和深度链接列表
- 更新选项：
  - 容器设置：端口、健康检查、环境变量、密钥、命令
  - 任务角色：访问其他 AWS 服务
  - 计算：CPU 和内存
  - 自动扩展：基于 CPU、内存和请求数，设置最小/最大值
  - 网络：子网和安全组
  - 日志：自定义日志组和日志流前缀
- 删除操作：删除服务独有的资源

33:45 - 36:00 - 基础设施即代码支持
- 展示完整 CloudFormation 模板与 Express Mode 资源的对比
- Express Mode 大幅减少所需参数
- 支持引入自有资源（集群、子网、安全组）
- 规模经济：部署到相同子网和账户的 Express Mode 服务共享 ALB
- 使用基于主机头的监听器规则
- 自动扩展 ALB：每个 ALB 最多支持 25 个服务

36:00 - 38:00 - ALB 自动扩展演示
- 展示已有 25 个服务的 ALB
- 创建第 26 个服务时自动配置第二个 ALB
- 删除第 26 个服务时自动删除第二个 ALB
- 只删除服务独有的资源

### Express Mode 的独特价值与灵活性 (38:00 - 44:00)

38:00 - 40:30 - Express Mode 的差异化优势
- 市场上有很多"容器转 URL"的服务，AWS 也有类似服务
- Express Mode 的独特之处：
  - 所有资源都在用户账户中
  - 用户可以直接访问和修改这些资源
  - 是"抽象中的组合"：可以停留在抽象层享受简单性，也可以深入组合层获得灵活性
  - 无需"毕业"或"迁移"即可访问高级功能
  - 可以配置所需参数后继续使用 Express Mode 进行日常更新

40:30 - 44:00 - 灵活性演示
- 演示从 Express Mode 服务访问底层任务定义
- 直接编辑 JSON 添加第二个容器（sidecar，如 FireLens 日志容器）
- 创建新任务定义版本并更新服务
- 返回 Express Mode 更新镜像
- 验证：Express Mode 保留了手动添加的 sidecar 容器
- 证明可以在 Express Mode 和直接资源管理之间无缝切换

### 定价与可用性 (44:00 - 46:00)

44:00 - 46:00 - Express Mode 可用性
- 与 ECS 本身一样，Express Mode 无额外费用
- 只需为配置的资源付费（Fargate、ALB）
- ALB 成本在所有服务间分摊
- 支持多种访问方式：
  - 控制台
  - CLI（带交互式监控）
  - API 和 SDK
  - 基础设施即代码（CloudFormation）
  - CDK（L1 构造）
  - Terraform（上周发布）
  - GitHub Action（两天前发布）：可直接从 GitHub 仓库构建、推送到 ECR 并部署到 Express Mode

46:00 - 47:30 - 目标用户
- 主要为开发者设计，帮助快速上手 ECS
- 平台团队也可使用：
  - 加速开发者体验（DevX）
  - 为应用团队提供体验
  - 为不太关心架构细节的小型 POC 快速搭建环境

### GoDaddy 案例分享 (47:30 - 结束)

47:30 - 49:00 - GoDaddy 背景介绍
- Keith Bartholomew，GoDaddy 首席工程师
- 强调：GoDaddy 在 Express Mode、蓝绿部署、Managed Instances 等功能推出前就构建了平台
- 现在做同样的事情会容易 10 倍
- GoDaddy 不仅是域名注册商，还为"日常创业者"提供全方位服务
- 服务包括：域名、网站、电子商务店面、销售点支付等

49:00 - 结束 - 创业者生态圈
- GoDaddy 将所有客户接触点称为"创业者之轮"
- 生成式 AI 改变了技术人员的工作方式，也改变了日常创业者的工作方式
- （会议字幕在此处截断）

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


## 关键要点总结

1. ECS 核心优势：全托管、无版本、完全无服务器选项、原生集成功能
2. 平台设计原则：生命周期管理、规模经济、应急退出机制
3. Express Mode：结合抽象和组合的优势，3 个参数即可部署，保持底层资源可访问性
4. 实践验证：GoDaddy 等大型企业已成功基于 ECS 构建内部平台