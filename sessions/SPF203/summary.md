# AWS re:Invent 2025 - FanDuel ACI 生成式AI投注助手会话总结

## 会话概述

本次会话介绍了FanDuel如何与AWS合作，从零开始构建并部署了ACI（Autonomous betting assistant）——一个基于生成式AI的投注助手。演讲者包括AWS高级生成式AI策略师Jordan Ratner、FanDuel高级软件工程师Rohit，以及AWS博彩游戏团队高级解决方案架构师Sushwalur Paly（Santos）。

FanDuel作为美国排名第一的体育博彩平台，在2025年超级碗期间处理了超过1660万笔投注，峰值达到每秒7万笔投注。面对高度监管的行业环境、快速变化的赔率、以及复杂的州级法规要求，FanDuel需要为客户提供更流畅的投注体验。通过AWS生成式AI创新中心的支持，FanDuel仅用一名工程师起步，在几周内就完成了从概念验证到生产部署的全过程。

ACI的核心价值在于将原本需要数小时的研究、发现、构建和执行投注的流程，压缩到几秒钟内完成，同时保持用户对整个过程的控制权。该解决方案采用Amazon Bedrock作为核心LLM平台，结合Lambda、API Gateway、DynamoDB、ElastiCache等AWS服务，构建了一个可扩展、低延迟的智能助手系统。目前ACI已经完成多轮Beta测试，并在多个州逐步推广，成为FanDuel在生成式AI领域15个项目中的标杆案例。

## 详细时间线与关键要点

### 开场与背景介绍
时间戳：会话开始
- Jordan Ratner介绍自己是AWS高级生成式AI策略师
- 询问现场观众在拉斯维加斯期间是否下注，几乎所有人都举手
- 介绍FanDuel的ACI生成式AI投注助手，强调将让投注体验变得更加简单

时间戳：团队介绍
- Rohit自我介绍为FanDuel高级软件工程师
- Santos介绍自己是AWS博彩游戏团队高级解决方案架构师，与FanDuel紧密合作
- 说明会话目标：展示如何从零到全面生产环境部署生成式AI解决方案，特别是在高度监管的环境中

### FanDuel公司背景与挑战
时间戳：2025年2月9日超级碗数据
- Rohit分享超级碗当天的数据：
  - 超过1660万笔投注
  - 近300万活跃用户
  - 峰值达到每秒7万笔投注
- 强调FanDuel是美国排名第一的体育博彩平台

时间戳：FanDuel业务模式解释
- 将体育博彩平台比作电子商务平台：需要展示产品、处理订单、履行订单
- 同时也类似交易平台：价格实时变化，需要快速更新赔率
- 例如：当球员接近得分时，需要实时调整该事件发生的概率和赔率

时间戳：行业挑战
- **监管复杂性**：美国体育博彩受到严格的州级监管
  - 不同州对大学体育博彩有不同规定
  - 某些州只允许投注非本州的大学球队
  - 某些州完全禁止某些体育项目
- **数据要求**：受Wire Act监管，所有投注数据必须保留在州内
- **延迟问题**：中央规则与州特定规则分离导致的延迟挑战
- **快节奏环境**：比赛进行中赔率快速变化
- **负责任博彩**：FanDuel将负责任博彩作为核心原则，致力于成为行业标准制定者

时间戳：FanDuel核心原则
- **一切始于客户**：确保客户安全和娱乐体验
- **一切皆有可能**：领导层对生成式AI的大力支持
- **诚信致胜**：在确保客户安全的前提下追求成功

### 从概念到原型的过程
时间戳：2024年初全球黑客马拉松
- FanDuel在2024年初组织了全球黑客马拉松
- 参与者包括数百人：工程师、数据科学家、业务负责人、高管和C-suite
- 目标：寻找应用生成式AI改善客户体验和内部运营的最佳机会
- 最终选定ACI（自主投注助手）作为优先项目

时间戳：AWS生成式AI创新中心介绍
- AWS生成式AI创新中心是专门的全球团队，由策略师和科学家组成
- AWS投资超过2亿美元建立该团队
- 专注于大规模交付生成式AI解决方案

时间戳：起步阶段
- FanDuel从零开始，只有一名工程师
- 配合3-4名AWS生成式AI创新中心的数据科学家
- 采用咨询式合作模式（类似办公时间），讨论解决方案、服务选择、架构设置等
- 这名工程师后来成为培训师，推动了FanDuel内部的生成式AI能力建设

时间戳：合作成果
- 从ACI项目开始，扩展到与FanDuel的15个合作项目
- 其中10个已经投入生产
- 计划明年再开展20-30个项目

时间戳：AWS生成式AI创新中心项目类型
- **咨询式（Advisory）**：AWS指导，客户工程师构建（ACI采用此模式）
- **实践式（Hands-on）**：AWS团队进入客户环境，与工程师共同构建

### 项目实施流程
时间戳：验证想法阶段
- 进行60分钟的诊断电话会议
- 参与者：高管、工程负责人、数据团队
- 讨论挑战、机会和原因
- 通过一次会议确认投注助手的价值

时间戳：发现工作坊
- AWS生成式AI创新中心的数据科学家参与
- 与FanDuel的工程师、数据科学家、业务负责人共同工作
- 确定客户、理解挑战、确定KPI、了解需求
- 共享屏幕、查看数据、深入了解如何使成功

时间戳：正式开发阶段
- FanDuel工程师与3-4名AWS数据科学家协作
- 完成后交付给Rohit团队进行生产化

### 客户旅程分析
时间戳：客户投注流程
1. 研究阶段：查找信息（如费德勒vs纳达尔过去10年的战绩）
2. 发现阶段：了解可以投注的选项
3. 构建阶段：决定投注金额，可能构建复杂的连串投注（parlay）
4. 执行阶段：按下按钮完成投注

时间戳：痛点识别
- 客户在研究阶段会离开FanDuel应用
- 使用搜索引擎查询信息
- 容易被其他应用（如TikTok）分散注意力
- 5-10小时后，投注机会可能已经过期

时间戳：解决方案设计
- 创建单一的应用内流程
- 客户可以在FanDuel应用内完成整个投注旅程
- 保持辅助性质，而非完全自主
- 客户在每个步骤都保持控制权
- AI处理耗时的信息查找和分析工作

时间戳：成功指标定义
- **基于事件的指标**：使用次数、放弃率、购物车遗弃率
- **基于时间的指标**：从开始到执行的总时长、各子阶段耗时
- **交互式指标**：通过CSAT等方式直接询问客户反馈

### 原型展示
时间戳：原型界面
- 展示了一个简陋的原型界面
- 提问："勒布朗在过去三场比赛中得了多少分？"
- 回答是未格式化的段落，包含一串指标，难以阅读

时间戳：原型阶段的重点
- 目标是证明客户价值，而非处理所有边缘情况
- 例如：如果要求写一首关于网球运动员的诗，原型会照做
- 这在原型阶段是可以接受的
- 完成价值验证后，交付给Rohit团队进行生产化

### 生产部署策略
时间戳：推出三大目标
- **准确性**：确保客户获得最准确的信息，如果不准确需要回滚
- **学习**：了解生成式AI的工作方式和客户反应
- **迭代**：逐步推出，一次一个运动项目，一次一个州

时间戳：分阶段推出
- **Alpha试点**：小规模友好客户测试，快速获取反馈
- **Beta 1发布**：2025年第一季度
- **Beta 2发布**：2025年第二季度
- **Beta 3发布**：当前阶段
- 逐步扩展到更多州

### 当前ACI产品展示
时间戳：产品演示视频
- 展示了比原型丰富得多的用户体验
- 客户输入模糊关键词"bets"
- 系统提供建议和选项

时间戳：用户行为分析
- 客户像使用搜索引擎一样使用ACI
- 输入单个关键词而非完整句子
- 期待快速得到答案

时间戳：动态UI展示
- 根据客户需求动态生成丰富的UI组件
- 对话式交互，类似人与人之间的对话
- 展示球员统计数据

时间戳：Parlay构建功能
- 客户请求"帮我构建一个parlay"
- 内部研究显示：客户通常需要数小时来研究和构建parlay
- ACI只需几秒钟就能完成

时间戳：负责任博彩功能
- 展示了一个极端例子：客户说"我要输掉房子"
- ACI立即识别为负责任博彩问题
- 快速响应并提供负责任博彩页面链接
- 强调FanDuel作为负责任运营商的承诺

时间戳：ACI定位说明
- ACI不是推荐系统
- 它为客户进行研究
- 允许客户提示并发现他们想要的投注和机会

### 技术架构深入解析
时间戳：整体架构介绍
- **前端**：sportsbookfanduel.com（客户设备或应用）
- **API Gateway**：处理速率限制、认证和授权
- **Lambda**：作为主要计算资源
  - 无服务器架构，适合不确定流量的场景
  - 内存占用低
  - 负责路由和数据收集

时间戳：数据源
- **EC2实例和EKS集群**：提供体育博彩服务和数据
- **ElastiCache Redis和DynamoDB**：提供数据缓存和LLM记忆功能
- **RDS**：存储球员和球队统计数据

时间戳：Amazon Bedrock的优势
- **快速上手**：学习曲线平缓，团队能快速开始使用
- **模型选择**：提供多种模型选择
  - 测试了Claude Haiku、Meta Llama等
  - 最终选择Nova Light和Nova Pro（性价比高）
- **无服务器扩展**：自动扩展，无需维护基础设施
- **成本控制**：基于token计费，控制token即可控制成本

时间戳：Santos补充Bedrock价值
- **统一API**：提供单一一致的API访问数百个模型
- **快速实验**：只需更改模型ID即可切换不同LLM
- **无需自定义SDK**：避免为每个LLM构建专有SDK和认证框架
- **可观测性**：内置监控能力
- **无缝扩展**：只需提供预期负载（token数、RPM等），AWS处理扩展

### 数据流详解
时间戳：RAG流程
1. 客户提示到达Lambda（ACI后端服务）
2. 立即调用Bedrock获取意图（intent）
3. Bedrock返回客户意图
4. Lambda根据意图决定使用哪些工具收集数据
5. 从RDS、EC2或EKS实例获取数据
6. 将数据发送回Bedrock进行增强和格式化
7. Lambda将结果返回给客户并渲染

时间戳：负责任博彩示例
- 提示："我要输掉房子"
- Bedrock识别为负责任博彩意图
- 快速返回静态响应（负责任博彩页面）
- 客户服务和负责任博彩类问题响应速度最快

时间戳：统计查询示例
- 提示：关于Donovan Mitchell的统计数据
- Bedrock识别为统计查询意图
- 从RDS获取统计数据
- Bedrock根据提示格式化和增强数据
- 返回给客户渲染

### 技术挑战与解决方案
时间戳：上下文管理挑战
- 客户先问："给我Donovan Mitchell的统计数据"
- 然后问："为他创建一个parlay"
- "他"指的是谁？人类理解代词，但LLM需要上下文
- 在Alpha和Beta阶段发现：单个球员/球队时工作正常，多个时LLM难以理解上下文

时间戳：上下文解决方案
- 使用DynamoDB作为LLM的记忆
- 新提示到达时，获取客户之前的提示
- 将历史上下文提供给LLM
- 使LLM能够理解对话上下文

时间戳：生成式AI开发范式
- 与传统开发-测试-修复-发布周期不同
- 需要从功能角度不同思考
- 需要理解LLM的工作方式（如幻觉、错误结果等）

时间戳：实时投注挑战
- 博彩是快节奏行业
- 例如：勒布朗·詹姆斯即将得到20分
- 在实时环境中，客户和LLM都难以快速处理复杂的parlay请求

时间戳：实时投注解决方案
- 比赛进行时只提供单一投注选项
- 即使客户要求parlay，也只返回单一投注
- 告知客户实时parlay不可用
- 提供相关球员的单一投注选项

时间戳：延迟优化
- 初始延迟：P99为12秒
- 传统优化：使用Redis缓存共享数据
  - 例如：多个用户投注同一场比赛，可以共享缓存数据
- 模型优化：与AWS合作微调模型以加快响应
- 优化后：P99降至5秒
- 关键教训：不能只依赖模型，需要传统架构优化配合

时间戳：测试挑战
- 生成式AI测试与传统测试不同
- 可以有测试套件，但不是传统的测试套件
- 功能测试和探索性测试困难，因为无法预测AI的响应

时间戳：客户行为挑战
- 客户提问非常模糊
- 像使用搜索引擎一样使用生成式AI
- 例如：只输入"bets"
- 需要将LLM视为人，思考人会如何回应
- 解决方案：LLM反问客户想要哪个运动项目（NFL、NBA、NHL等）
- 提供建议选项

### 会话结束
时间戳：总结
- 完整展示了从概念到生产的完整旅程
- 强调了AWS与FanDuel的紧密合作
- 展示了生成式AI在高度监管行业的成功应用
- 分享了技术架构、挑战和解决方案