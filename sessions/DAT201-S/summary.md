# AWS re:Invent 2025 ScyllaDB 会议总结

## 一、会议概述

本次 AWS re:Invent 2025 的分会场由 ScyllaDB 主办,重点介绍了 ScyllaDB 数据库在高性能、大规模数据密集型应用中的优势。会议邀请了两家重要合作伙伴 SAS 和 Freshworks 分享他们的实际应用案例。

ScyllaDB 是一个专为需要可预测性能的应用而设计的数据库,其架构专门用于消除传统数据库系统在大规模场景下遇到的性能瓶颈。通过贴近硬件的架构设计,ScyllaDB 能够最大化底层基础设施的性能。一个小型的三节点集群运行在 AWS EC2 上,就能够支持每秒数百万次操作,并保持可预测的个位数毫秒延迟,即使在工作负载增长和波动的情况下也能保持稳定。

ScyllaDB 的典型用户群体主要集中在高吞吐量(接近每秒百万次操作)和低延迟(个位数到 20 毫秒以下的 P99 响应时间)的场景。该数据库支持高性能事务工作负载、实时分析用例,并在今年推出了原生向量搜索功能,成为为性能而构建的统一 AI 平台。ScyllaDB 与 AWS 保持着长期的 ISV 合作伙伴关系,在 AWS Marketplace 上提供企业版和云托管服务两种产品形式。

## 二、详细时间线与关键要点

### **00:00 - 开场介绍**
- Felipe(ScyllaDB 技术总监)开场,感谢 AWS、SAS 和 Freshworks 的参与
- 介绍会议议程:ScyllaDB 产品介绍、SAS 案例分享、Freshworks 案例分享

### **02:30 - ScyllaDB 核心挑战与解决方案**
- 数据密集型应用面临的三大挑战:
  1. 响应时间不可预测,尾部延迟违反 SLA
  2. 数据库无法跟上吞吐量需求,特别是在流量高峰期
  3. 数据库支出失控,只能通过增加节点来掩盖性能问题

### **05:00 - ScyllaDB 用户画像**
- 展示用户基础分布图:Y 轴代表吞吐量,X 轴代表延迟
- 最大用户集群位于左上角:接近每秒百万次操作,P99 响应时间在个位数到 20 毫秒之间

### **07:15 - ScyllaDB 核心优势**
- 高可用架构支持关键任务应用
- 支持高性能事务工作负载和实时分析
- 2025 年推出原生向量搜索,成为统一 AI 平台
- 使用更少节点存储和服务海量数据,降低基础设施成本
- 避免供应商锁定,可在本地、任何云或混合环境中运行
- 内置深度弹性,按需扩展集群

### **10:00 - ScyllaDB 客户案例**
- TripAdvisor:为实时机器学习推荐系统提供支持
- Discord:大规模连接全球数百万用户
- Disney+ 和 Hulu:为媒体流服务提供支持,连续多年支持超级碗赛事

### **12:30 - AWS 合作关系**
- ScyllaDB 是 AWS ISV 合作伙伴多年
- 共同展示 EC2 i4i 和 i7i 实例的卓越性价比
- Graviton Ready 合作伙伴
- AWS Marketplace 上有两个产品:ScyllaDB Enterprise(自管理)和 ScyllaDB Cloud(全托管服务)

### **14:00 - SAS 案例:实时个性化广告**
- Brian Jones(SAS 软件开发高级经理)介绍 SAS 360 Match 平台
- SAS 自 2014 年起为足球、网球、橄榄球等直播体育赛事提供数字广告服务

### **16:30 - 数字视频广告的核心组成**
1. 广告决策:收到广告请求时快速决定投放内容
2. 播放信号:使用 IAB VAST 标准返回响应,包含播放事件
3. 报告:信号返回给 SAS 和合作伙伴,用于报告
4. 优化:特别是视频点播,可选择广告数量和时长

### **19:00 - 数字视频广告的三大挑战**
1. 扩展以支持大流量峰值
2. 与生态系统其他部分集成
3. 使广告与每个观众相关

### **21:45 - SAS 360 Match 平台规模**
- 数十亿次展示
- 数十亿视频广告
- 数十亿程序化竞价请求
- 全部以低延迟和高可用性交付

### **24:00 - 广告决策所需数据类型**
- 个人数据:位置、兴趣、注册数据、分析评分
- 上下文数据:使用 AI 从视频流中提取,包括剧集数据、广告时段数据、最近广告投放历史
- 其他数据:产品数据、优惠数据

### **27:30 - 广告时段请求流程**
- 视频流接近广告时段时,流中会有信号(SCTE 类型信号)
- 发出广告请求(通常是模板化的,数据很少)
- 返回 VAST 格式的 XML 模板响应
- 响应中包含展示、查看等各种事件

### **30:15 - 广告决策流程**
1. 如果是新用户,启动会话
2. 加载用户数据(如果有)
3. 激活更多数据:内存中的超级标签、持久化数据
4. 加载其他标识符(产品、优惠)
5. 连接器调用 HTTP 服务或 SAS Intelligent Decisioning
6. 根据客户需求进行优先级排序
7. 通过布尔逻辑进行定向
8. 可选择使用 OpenRTB SSP 或直接预订
9. 渲染响应并记录决策和指标

### **34:00 - SAS 的差异化方法**
- SAS 不像其他广告行业参与者那样跨客户收集和聚合数据
- 广播公司控制自己的数据及数据共享对象
- 提供开放集成和扩展的工具
- 性能和可用性对用户、广告商和客户都很重要

### **36:30 - 数据访问扩展要求**
- 低延迟读取
- 高可用性
- 数据冗余
- 可预测成本
- 在会话启动时激活数据
- 必要时写入数据更改
- 基于路由找到集群中的正确会话

### **39:00 - 应对大流量峰值的扩展策略**
1. 负载均衡:使用 AWS 预配置容量负载均衡器(2025 年 1 月正式发布)
2. 自动扩展:从 EC2 到 Kubernetes 水平 Pod 自动扩展
3. 计划扩展:广播公司根据时间、节目等预知受众规模
4. CPU 利用率缓冲:运行在 50% 而非 80% CPU 利用率,为峰值留出空间
5. 负载削减:客户可选择优先处理某些类型的请求

### **42:00 - SAS 为何选择 ScyllaDB**
- 提供所需的低延迟读取
- 在计算方面线性垂直和水平扩展
- 集群中的单个节点可在无数据丢失或停机的情况下更换
- 数据可复制到多个数据中心/区域
- 工作负载优先级确保广告投放不受其他数据处理影响

### **44:30 - 请求峰值示例**
- 展示图表:当底部图表出现峰值时,读取延迟几乎没有变化
- 这正是期望看到的结果

### **46:00 - SAS 在 ScyllaDB 中存储的数据类型**
- 观众数据、注册数据
- 事件计数:跟踪用户执行重要操作的次数
- 曝光数据:用户看到特定广告的次数,支持"每天不超过一次"等规则
- 标识符映射:从设备标识符映射到注册用户

### **48:30 - ITV 客户评价**
- Alex Maison(ITV 数字广告平台负责人):"SAS 360 Match 的灵活性使我们能够按自己的节奏开发。我们定义自己的开发队列,不用等待第三方。"

### **50:00 - SAS 案例三大要点**
1. 利用多种数据源在关键时刻做出最佳决策
2. 帮助广告商触达目标受众
3. 为广播公司提供工具改善观众的广告体验
4. 以能够处理最大广播体育赛事的规模完成所有这些工作

### **52:00 - Freshworks 案例介绍**
- Shridar Gare(Freshworks AI 和数据负责人)和 Prem Kumar(数据平台工程高级经理)
- 主题:Freshworks 如何重新设计 AI 软件架构,实现 10 倍增长,同时将延迟降低 95%,并显著节省成本

### **54:00 - Freshworks 公司背景**
- 2010 年在印度钦奈成立,梦想构建简单易用的软件
- 从客户支持软件 Fresh Desk 起步
- 10 年后成为首家在美国上市的 SaaS 公司
- 目前拥有近 75,000 名客户
- 产品支持 40 多种语言
- 收入接近 10 亿美元

### **56:30 - Freshworks 技术栈**
- 底层:跨云基础设施扩展
- 平台层:单点登录、分析等基础功能
- 基础 AI 层
- 顶层:产品层
- 这种架构帮助实现跨越式扩展

### **58:00 - Freshworks 产品演进**
- 2010 年:Fresh Desk(单一产品,100-200 客户)
- 增加 Fresh Service(IT 服务管理产品,增长最快的 ITSM 系统之一)
- 包括资产管理、服务管理、员工工作流管理
- Freddy:AI 产品的品牌名称

### **1:00:00 - Freshworks 数据理念**
- 一种规模不适合所有场景
- 从将所有业务逻辑放在 MySQL/RDBMS 转向多种数据技术
- 根据特定用例选择最合适的技术
- 确保数据组合中的每项技术都是该领域的最佳选择

### **1:02:00 - Freshworks 数据关注点**
1. 数据工程:不仅是运维或保持运行,而是为数据而工程
2. 可靠性和规模:在数据层提供一致的 4 个 9 甚至 4.5 个 9 的可用性
3. 灾难恢复和业务连续性:客户对数据位置和灾难恢复越来越敏感
4. 安全性:数据静态和传输中的加密
5. 开发者社区:支持 1000 多名开发者,提供 AI 赋能的自助服务门户

### **1:05:30 - ScyllaDB 对 Freshworks 的价值**
- 允许使用自己的 AWS 账户(BYOA)
- 在复杂的 AWS 网格架构环境中,保持在自己的 VPC 中
- 同时享有托管解决方案的所有优势
- 性能和规模指标优异

### **1:07:00 - Freshworks 关注数据驻留**
- 客户关心数据驻留
- 使用托管服务,但整个数据平面在自己的 VPC 内
- 完全控制和访问数据
- 在安全防护边界内
- 控制平面由 ScyllaDB 管理
- 完美结合:快速部署、快速扩展

### **1:09:00 - 性能基准测试结果**
- ScyllaDB 团队访问钦奈时展示的数字令人震撼
- 特别是尾部延迟性能远超预期
- P99.99 百分位的性能表现优异
- 通常只关注 P90/P95,但这里达到了更深的层次
- 意味着没有单个请求在性能上被遗漏

### **1:11:00 - Freshworks 三大用例**
- Prem Kumar 介绍三种不同的数据库迁移类型:
  1. Cassandra 到 ScyllaDB(自然迁移)
  2. MySQL 到 ScyllaDB
  3. DynamoDB 到 ScyllaDB(改进限制)

### **1:12:30 - 用例 1:对话存储(Conversation Store)**
- Freshworks 的平台服务
- 在一个地方存储所有产品对话
- 作为翻译服务
- 存储客户与 AI 代理之间的 AI 对话
- 由 Cassandra 提供支持

### **1:14:00 - 用例 2:统一客户门户(UCR)**
- 在一个地方存储所有产品(Fresh Desk、Fresh Service)的联系人
- 以极低延迟检索
- 之前使用 Cassandra,存在瓶颈和可用性问题
- 考虑使用 ScyllaDB

### **1:15:30 - UCR 规模和要求**
- 存储超过 40 亿联系人
- 延迟要求:一致低于 5 毫秒
- 即使 P99.99 也应低于 5 毫秒
- 当前规模:每秒 15,000 次操作

### **1:17:00 - Cassandra 遇到的问题**
- 每个周末运行修复和删除时出现延迟和超时
- 尝试第三方 Cassandra(如 DataStax)也有可用性问题
- 因此考虑 ScyllaDB

### **1:18:30 - 零停机实时迁移策略**
- 挑战:希望进行实时迁移
- 目标:让客户在周末也能继续使用数据库和应用
- 无法承受任何停机时间
- 标准:客户始终在线并能够服务(服务全球客户)

### **1:20:00 - 迁移步骤 1:引入 ZDM Proxy**
- 在 Fresh 应用和 Cassandra 之间引入 ZDM Proxy
- 对 Cassandra 和 ScyllaDB 进行双写
- 读取仍通过 Cassandra(现有系统)
- 从 ZDM Proxy 开始,所有新数据都被捕获到两个地方

### **1:22:00 - 迁移步骤 2:历史数据迁移**
- 使用 CDM Migrator 迁移历史数据
- 将所有历史数据从 Cassandra 迁移到 ScyllaDB
- 现在 ScyllaDB 同时拥有历史数据和通过双写获得的最新数据

### **1:24:00 - 迁移步骤 3:验证和修复**
- 使用 CDM Migrator 验证所有数据是否从 Cassandra 复制到 ScyllaDB
- 数据量接近 TB 级(准确说是 1.2-2 TB)
- 发现一些差距,任务持续运行一段时间
- 采用开源 CDM Migrator 并修改,添加批处理选项
- 批处理帮助改进时间并完成迁移

### **1:26:30 - 迁移步骤 4:切换读取**
- 验证完成后,将读取从 Cassandra 切换到 ScyllaDB
- 继续双写一段时间以确保安全
- 最终完全切换到 ScyllaDB

### **1:28:00 - 迁移成果**
- 零停机迁移成功
- 延迟显著改善
- 可用性问题解决
- 成本优化

### **1:29:30 - 用例 3:MySQL 到 ScyllaDB**
- 某些 MySQL 工作负载面临扩展挑战
- 特别是高吞吐量、低延迟要求的场景
- 考虑迁移到 ScyllaDB 以获得更好的性能

### **1:31:00 - 用例 4:DynamoDB 到 ScyllaDB**
- DynamoDB 存在某些限制
- 迁移到 ScyllaDB 以改进这些限制
- 获得更好的性能和灵活性

### **1:33:00 - 未来 AI 用例**
- AI 时代的一切都与 AI 相关
- 使用自助服务和代理工作流
- ScyllaDB 将帮助实现这些目标
- 向量搜索功能对 AI 应用至关重要

### **1:35:00 - 总结与要点**
- Shridar 回到舞台总结
- ScyllaDB 帮助 Freshworks 实现:
  - 10 倍增长
  - 延迟降低 95%
  - 显著成本节省
- 数据驻留和安全性得到保障
- 开发者体验改善

### **1:37:00 - 会议结束**
- 感谢 SAS 和 Freshworks 的分享
- 演讲者可在会后回答问题
- 鼓励与会者探索 ScyllaDB

## 三、核心要点总结

ScyllaDB 的核心价值:
- 可预测的低延迟性能(个位数毫秒,即使在 P99.99)
- 线性扩展能力(垂直和水平)
- 高可用性和数据冗余
- 成本效益(更少节点处理更多数据)
- 避免供应商锁定
- 支持多云和混合部署

SAS 360 Match 案例亮点:
- 处理数十亿次广告请求
- 实时决策(毫秒级)
- 零停机要求
- ScyllaDB 提供稳定的低延迟读取
- 工作负载优先级功能确保关键业务不受影响

Freshworks 案例亮点:
- 零停机实时迁移
- 40 亿+联系人规模
- 延迟从不稳定降至一致的 5 毫秒以下
- 10 倍增长,延迟降低 95%
- 显著成本节省
- 数据驻留在自己的 VPC 中,同时享受托管服务优势