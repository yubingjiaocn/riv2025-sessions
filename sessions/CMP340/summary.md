# AWS 并行计算服务(PCS)技术会议总结

## 会议概述

本次AWS re:Invent技术会议由AWS高级计算与模拟总监Ian Coley主持,重点介绍了AWS并行计算服务(AWS PCS)——一个完全托管的高性能计算(HPC)调度服务。会议回顾了AWS在HPC领域从2017年至今的发展历程,当时许多客户对AWS能否满足HPC工作负载的性能、安全性和成本要求持怀疑态度。如今,Shell和丰田等曾经的怀疑者已成为AWS PCS的生产用户。

AWS PCS是基于Slurm的托管服务,旨在简化HPC基础设施的复杂性,让客户专注于科学研究和工程创新,而非基础设施管理。该服务提供动态资源配置、自动化更新、API驱动的基础设施即代码部署,以及与AWS生态系统的深度集成。丰田中央研发实验室和Shell公司的代表分享了他们的实际应用案例,展示了PCS如何将环境部署时间从数周缩短至30分钟,并显著加速创新周期。例如,Tune Therapeutics将创新周期从12周缩短至2-3周,实现了6倍的效率提升。

## 详细时间线与关键要点

### 开场与背景介绍
[00:00 - 05:30] Ian Coley自我介绍与互动调查
- 介绍自己是AWS高级计算与模拟总监
- 进行现场互动:询问首次参加re:Invent和参加超过10次的人数
- 分享2017年11月加入AWS的经历,当时HPC on AWS面临诸多质疑

[05:30 - 08:45] 早期客户挑战
- 回顾2017年超级计算大会上与Shell的会面,客户直言AWS在性能、安全性和价格方面存在不足
- 描述与丰田的早期会议,客户对AWS能否达到其数十年优化的HPC集群效率表示怀疑
- 强调Shell和丰田如何推动AWS开发更好的HPC基础设施和编排工具

### HPC即服务的需求
[08:45 - 12:00] PCS开发动机
- 介绍会议议程:PCS概述、设计、成本、定价、区域可用性
- 预告Shell和丰田的客户案例分享
- 解释HPC工作负载爆炸式增长的原因,特别是AI与模拟的融合
- 阐述为何需要简化HPC架构实施

[12:00 - 15:30] PCS的核心价值主张
- 提供简单的基础设施即代码和可重复的设置
- 通过API驱动开发
- 让客户专注于科学工作负载、研发和工程模拟
- 减轻HPC管理员的繁重工作,如补丁和更新
- 实现无缝升级,无需关闭整个集群

### AWS PCS技术详解
[15:30 - 18:00] PCS定义与Slurm选择
- PCS是托管的Slurm服务
- Slurm是最流行的开源调度器,在大语言模型训练和AI领域广泛应用
- 表示仍在评估其他调度器(LSF、PBS Pro、Symphony等)

[18:00 - 22:00] PCS在AWS HPC产品组合中的定位
- 展示完整的HPC堆栈:网络、计算、存储、集群编排
- 介绍相关服务:NICE DCV(远程可视化)、AWS Batch、Parallel Cluster
- 列举EC2实例系列:从HPC优化实例到最新的R8i(Intel Xeon第六代Granite Rapids)和GPU实例(P6系列的GB200、B300)
- 存储选项:FSx for Lustre、FSx for NetApp ONTAP等

[22:00 - 28:00] 从Parallel Cluster到PCS的演进
- 2015年:与Intel合作创建CFN Cluster(Cloud Foundation Cluster)开源工具包
- 2017年:重新品牌为AWS Parallel Cluster,提供官方支持
- 客户反馈:需要托管服务,避免为升级而重建整个集群
- 2023年:发布AWS PCS作为真正的AWS托管服务

### PCS核心功能
[28:00 - 35:00] 主要特性
- 托管Slurm调度:扩展和调度计算作业资源
- 动态资源配置:根据队列中的作业自动扩展,无作业时缩减
- 支持静态分配(如GPU资源24/7运行)和动态分配
- CloudWatch日志集成:提供作业执行、扩展和性能洞察
- 简化升级:通过API更新OS、补丁和Slurm版本,无需管理员手动干预

[35:00 - 40:00] 灵活架构与多方利益相关者
- 支持CPU、GPU和各种存储选项
- 不限制特定基础设施配置
- 可随时切换到最新实例类型
- 满足三类用户需求:
  - HPC系统管理员:强大的日志记录和遥测
  - 科学家和工程师:无缝的用户体验,与本地Slurm一致
  - 合作伙伴和ISV:AWS服务集成支持

### PCS架构深入解析
[40:00 - 48:00] 集群架构组件
- 集群包含多个节点组:登录节点和计算节点
- 队列系统:可配置多个队列和优先级
- 支持多种目录服务和存储选项
- 架构示例1:一个队列连接两个节点组(ARM CPU和x86 CPU)
- 架构示例2:两个队列连接一个节点组(最大化GPU利用率)

[48:00 - 52:00] 共享责任模型
- AWS管理:控制器、次要版本更新、PCS功能更新
- 客户管理:VPC中的计算节点、AMI更新
- 主要版本更新由客户通过API控制
- 控制器自动更新,计算节点由客户控制

### 定价、区域与可观测性
[52:00 - 58:00] 定价模型
- 集群控制器费用:基于T恤尺寸(小、中、大),限制可执行作业数量
- 未来计划:动态扩展控制器,无需重建集群
- Slurm计费数据库的S3存储费用
- EC2实例费用:按标准EC2定价(按需、Spot、ODCR)

[58:00 - 62:00] 区域可用性与扩展计划
- 当前可用区域:欧洲、亚太、北美的部分区域
- 重大公告:到2026年底,PCS将在所有AWS区域可用

[62:00 - 65:00] 可观测性与成本跟踪
- CloudWatch日志集成
- 可标记资源:通过标记作业跟踪成本
- 支持内部成本分摊和工作组计费

### 客户案例:Tune Therapeutics
[65:00 - 68:00] 生物医药领域的突破
- Tune Therapeutics专注于表观遗传学研究
- 通过药物控制基因表达的开关,而非基因编辑
- 2024年开始乙型肝炎治疗的临床试验
- 使用AWS PCS后,创新周期从12周缩短至2-3周
- 从每年4次实验迭代提升至约25次,实现6倍加速

### 丰田案例分享
[68:00 - 70:00] 丰田中央研发实验室介绍
- 演讲者:Satoshi Kimura,丰田中央研发实验室HPC负责人
- 公司成立于1916年,专注高质量研究
- 研究领域:信息技术、环境能源、材料科学
- 主要成就:QR码开发、可见光响应光催化剂、人工光合作用演示

[70:00 - 74:00] HPC环境与挑战
- 约10人团队运营共享计算环境
- 支持CAE模拟、AI/机器学习工作负载、大规模研究数据存储
- 挑战:标准资源与大规模/长时间运行作业需求的平衡
- 传统问题:作业排队等待,新增资源需要数月时间

[74:00 - 78:00] 技术演进路径
- 第一阶段:专用EC2实例,但空闲时仍产生成本
- 第二阶段:AWS Parallel Cluster,但为每个研究人员设置环境耗时,且独立控制器节点增加成本
- 第三阶段:采用AWS PCS,通过几次点击即可实现专用性和灵活性

[78:00 - 82:00] PCS实施效果
- 通过GUI直观配置和构建环境
- 无需依赖外部供应商,可自主创建环境
- 根据研究人员需求链接适当的实例类型和数量到专用队列
- 计算完成后实例自动停止,降低总体成本

[82:00 - 86:00] 丰田的成果总结
- 环境设置时间:本地6周 → Parallel Cluster数天 → PCS仅30分钟
- 研究人员有更多时间专注于工作
- 发布后立即开始使用:R7iz 48xlarge实例用于大规模材料模拟,P4d 24xlarge实例用于AI/机器学习
- 与作业执行集成,仅在需要时使用资源,优化成本
- 团队从日常运维中解放,专注于创造新价值

### Shell案例分享
[86:00 - 90:00] Shell公司概况
- 演讲者:Michael Groh,Shell全球HPC工程与运营负责人
- 2022年数据:70个国家运营,规模相当于一座城市
- 每天46,000人访问零售站点
- 上游业务:日产2,800桶油当量,6,600万吨液化天然气

[90:00 - 95:00] HPC在上游业务中的作用
- 85-95%的计算用于地震成像
- 地震成像:向地球发送声波并监听回声,涉及非常复杂的物理学
- 两个核心问题:为何需要更多HPC?为何选择云?

[95:00 - 100:00] 为何需要更多HPC
- 进入更复杂的区域寻找油气(更深或更具挑战性的空间)
- 算法基于1970年代的波动方程物理学
- 挑战始终是计算的可负担性
- 地球物理学家获得新机器后会用算法填满它

[100:00 - 105:00] 云的价值主张
- 更强的响应能力:无需猜测未来几年的计算需求
- 传统方式:购买大型系统,填满它,但永远不知道本可以做什么
- 云"打破上限":根据需求动态扩展
- 业务影响:更快速的决策,在需要时提供信息价值
- 交付时间:本地设备采购变得极具挑战性(后疫情时代、AI热潮、GPU功耗)

[105:00 - 112:00] Shell的云HPC历程(2017-2022)
- 2017-2022年:多次尝试失败
- 尝试Parallel Cluster规模,试图复制本地10节点配置
- 问题:节点不匹配,Spot实例中断无法处理
- 2022年转折点:提出"10倍挑战"——将运行时间缩短10倍
- 理念:10倍速度改变工作方式(6小时→6分钟,会做更多次)
- 要求AWS在技术上实现10倍加速,商业条款并行讨论

[112:00 - 118:00] 2022年的突破
- 多个因素对齐:
  - 关键算法(全波形反演)刚刚加速到GPU
  - 同构设计:节点架构类似AWS P系列(Nvidia参考架构)
  - 认识到无需迁移整个工作流
  - 数据有引力,但HPC有吸引力
- 策略:拆解工作流,在加速器上运行特定部分
- 输入数据量小,可以上传使用大量GPU,然后下载结果

[118:00 - 122:00] 生产部署与挑战
- 2022年12月:使用P4 A100 GPU投入生产
- 时机巧合:ChatGPT刚刚发布,A100变得极难获取
- 这标志着Shell在AWS上的生产HPC之旅的真正开始

### 总结与未来展望
[122:00 - 结束] 会议收尾
- Ian Coley回到台上进行总结
- 预告AWS Batch的演示
- 强调PCS如何帮助客户加速创新
- 鼓励与会者尝试PCS并提供反馈

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


关键要点总结:
- AWS PCS将HPC环境部署从数周缩短至30分钟
- 创新周期加速6倍(12周→2-3周)
- 2026年底将在所有AWS区域可用
- 托管服务减轻运维负担,让团队专注于创新
- 动态扩展能力打破传统HPC容量限制
- 成功案例涵盖生物医药、汽车研发、能源勘探等多个行业