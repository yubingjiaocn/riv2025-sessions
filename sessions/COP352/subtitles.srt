1
00:00:00,129 --> 00:00:01,508
Hi everybody,

2
00:00:01,768 --> 00:00:04,209
um, happy Thursday, unofficial

3
00:00:04,209 --> 00:00:06,070
last day of reinvent. How y'all doing?

4
00:00:08,130 --> 00:00:10,358
OK, alright, that's the energy. OK,

5
00:00:10,439 --> 00:00:12,618
I was actually watching some of the talks that like my

6
00:00:12,788 --> 00:00:14,868
coworkers presented on like Monday morning at

7
00:00:14,868 --> 00:00:17,000
8 o'clock and there's nothing, there was

8
00:00:17,000 --> 00:00:19,318
silence, um, that was so devastating

9
00:00:19,318 --> 00:00:21,399
for me to watch. This will not be like that. We are

10
00:00:21,399 --> 00:00:23,399
friends up here and we're gonna go on a

11
00:00:23,399 --> 00:00:25,638
journey today through infrastructure's code

12
00:00:25,638 --> 00:00:27,519
and governance and it's gonna be very fun.

13
00:00:27,818 --> 00:00:29,859
Um, but before we get into all of

14
00:00:29,859 --> 00:00:32,020
that, I do have some questions for you all

15
00:00:32,020 --> 00:00:34,020
because this is an us situation. This

16
00:00:34,020 --> 00:00:36,219
is not a breakout session. They won't let me do those

17
00:00:36,219 --> 00:00:38,340
anymore. Um, this is a us session,

18
00:00:38,459 --> 00:00:40,679
so like if you have any questions at any time,

19
00:00:40,700 --> 00:00:41,679
you just say David

20
00:00:42,209 --> 00:00:43,348
Sefi, and we'll be like, what's up?

21
00:00:43,618 --> 00:00:45,819
Um, speaking of David, I'm

22
00:00:45,819 --> 00:00:48,139
David. Uh, my name is David Kilman. I'm a principal

23
00:00:48,139 --> 00:00:49,340
engineer in AWS,

24
00:00:49,649 --> 00:00:51,719
specifically infrastructures code, so

25
00:00:51,889 --> 00:00:52,679
things like. Um,

26
00:00:53,270 --> 00:00:55,429
cloud formation and terraform and

27
00:00:55,429 --> 00:00:57,548
CDK, a quick survey,

28
00:00:57,590 --> 00:00:59,649
who here uses infrastructure as code?

29
00:01:00,429 --> 00:01:02,978
Oh, that is a beautiful 100%

30
00:01:03,319 --> 00:01:05,480
um, maybe I, we actually can't

31
00:01:05,480 --> 00:01:07,698
see up here because of the light, so I, I will,

32
00:01:07,799 --> 00:01:09,418
the narrative will be changed to suit

33
00:01:09,799 --> 00:01:10,579
the talk, um,

34
00:01:10,838 --> 00:01:13,120
uh, a quick survey who uses cloud formation?

35
00:01:14,198 --> 00:01:16,209
OK, I see you, I see you.

36
00:01:16,329 --> 00:01:17,909
Uh, who's this terraform?

37
00:01:18,790 --> 00:01:20,209
Nice. Who uses both?

38
00:01:20,989 --> 00:01:23,069
Oh yeah, I like this guy. Um,

39
00:01:23,230 --> 00:01:25,308
cool. Oh, any Plumi? Any,

40
00:01:25,430 --> 00:01:27,510
any Plumi people? They have the best swag at

41
00:01:27,510 --> 00:01:29,870
the, that's why I ask. OK, anyway, um, so

42
00:01:29,870 --> 00:01:32,400
my name is David Kilman. I am a senior, uh, principal

43
00:01:32,400 --> 00:01:34,489
engineer on cloud formation, and today we're talking

44
00:01:34,489 --> 00:01:35,260
about, um,

45
00:01:35,709 --> 00:01:37,739
infrastructures code governance, making

46
00:01:37,739 --> 00:01:39,939
deployments of IAC safe, um,

47
00:01:40,028 --> 00:01:42,448
and, uh, I am joined today byefi.

48
00:01:42,629 --> 00:01:43,409
This is my friend.

49
00:01:43,750 --> 00:01:45,829
Hi, nice to meet you all. I'm Sefi Abrech. I'm

50
00:01:45,829 --> 00:01:47,129
a senior solution architect.

51
00:01:47,650 --> 00:01:49,989
I'm working with governance

52
00:01:50,088 --> 00:01:52,109
and compliance and security. This is

53
00:01:52,329 --> 00:01:53,989
the side that I'm covering here,

54
00:01:54,370 --> 00:01:56,150
and let's get started.

55
00:01:59,760 --> 00:02:01,959
OK, so we're all familiar with

56
00:02:01,959 --> 00:02:03,959
this uh uh pattern. You write

57
00:02:03,959 --> 00:02:05,000
in some code, write

58
00:02:05,558 --> 00:02:07,620
some cloud formation, some terraform,

59
00:02:07,879 --> 00:02:08,939
you push it to your gate,

60
00:02:09,699 --> 00:02:11,719
and then there is the CICD pipeline

61
00:02:12,118 --> 00:02:14,210
that start running, right? And you have

62
00:02:14,210 --> 00:02:16,240
your resources deployed

63
00:02:16,240 --> 00:02:17,580
inside your AWS account.

64
00:02:17,849 --> 00:02:19,210
We're all familiar with it, right?

65
00:02:19,639 --> 00:02:20,479
This is how we work.

66
00:02:21,000 --> 00:02:22,778
Great. But

67
00:02:23,159 --> 00:02:23,699
uh

68
00:02:24,278 --> 00:02:26,479
How do we implement some gutters

69
00:02:26,479 --> 00:02:28,558
around this situation? And this is what we're going

70
00:02:28,558 --> 00:02:30,558
to talk about today. We will run

71
00:02:30,558 --> 00:02:32,879
this slide, so we go to the codes

72
00:02:32,879 --> 00:02:33,460
directly.

73
00:02:33,800 --> 00:02:35,979
Um, so developers are moving very fast,

74
00:02:36,399 --> 00:02:38,758
right? You all use, I believe, generative

75
00:02:38,758 --> 00:02:40,758
AI to generate code to help

76
00:02:40,758 --> 00:02:41,899
you with the infrastructure.

77
00:02:42,399 --> 00:02:44,569
And we need something to help

78
00:02:44,569 --> 00:02:46,689
you stay in the guards of

79
00:02:46,689 --> 00:02:48,800
your organization, the security

80
00:02:48,800 --> 00:02:50,479
requirements, cost requirements,

81
00:02:50,889 --> 00:02:51,610
even

82
00:02:52,889 --> 00:02:54,689
machines image requirements.

83
00:02:55,219 --> 00:02:57,210
So let's see if the car is working.

84
00:02:58,088 --> 00:03:00,308
This took us like a few hours to put together.

85
00:03:00,419 --> 00:03:02,879
It's working. Inside

86
00:03:02,879 --> 00:03:05,099
the garble. Yeah, please hold the applause until the end.

87
00:03:08,050 --> 00:03:08,558
So,

88
00:03:08,889 --> 00:03:10,919
what we're going this is the one in

89
00:03:10,919 --> 00:03:12,270
cloud formation hooks

90
00:03:12,770 --> 00:03:14,550
is coming to help us,

91
00:03:15,050 --> 00:03:18,149
huh? 00

92
00:03:18,149 --> 00:03:21,219
dude. It's

93
00:03:21,219 --> 00:03:23,569
so good we want to show you twice. You make it so good.

94
00:03:23,939 --> 00:03:24,758
Ah, yeah,

95
00:03:25,500 --> 00:03:26,778
see what automation don't do

96
00:03:27,368 --> 00:03:29,419
cops do. So on

97
00:03:29,419 --> 00:03:31,580
the left side, on the right side, you see

98
00:03:31,580 --> 00:03:33,860
the simple cloud formation template to

99
00:03:33,860 --> 00:03:35,199
going to create a resource.

100
00:03:36,139 --> 00:03:37,990
And it's going to be failed,

101
00:03:38,308 --> 00:03:40,429
OK, it's going to be failed because it's not,

102
00:03:40,508 --> 00:03:41,679
uh, a stand

103
00:03:42,110 --> 00:03:44,008
in the organizational requirements,

104
00:03:44,710 --> 00:03:46,990
OK. And now I'm passing to David.

105
00:03:48,088 --> 00:03:50,229
Well, give you some use cases. Cool. So whenever

106
00:03:50,229 --> 00:03:52,189
we talk about failing things, Sefi always,

107
00:03:52,469 --> 00:03:54,569
uh, sends it back to me, um, so,

108
00:03:54,699 --> 00:03:55,229
uh,

109
00:03:55,508 --> 00:03:57,588
yeah, today we're gonna talk about infrastructure as

110
00:03:57,588 --> 00:03:59,868
code and like how proactive controls

111
00:03:59,868 --> 00:04:01,710
can stop bad things from happening.

112
00:04:02,028 --> 00:04:02,538
Um,

113
00:04:02,990 --> 00:04:05,028
so we're gonna talk about hooks. Uh, hooks,

114
00:04:05,069 --> 00:04:07,258
hooks is a cloud formation feature. Um, I

115
00:04:07,258 --> 00:04:09,270
work on cloud formation. They sign all of my

116
00:04:09,270 --> 00:04:10,330
paychecks, um,

117
00:04:10,629 --> 00:04:13,229
but we also realized that like infrastructure's

118
00:04:13,229 --> 00:04:15,429
code spans beyond just cloud formation.

119
00:04:15,508 --> 00:04:17,588
So we're also gonna talk about terraform, um, in

120
00:04:17,588 --> 00:04:18,250
a bit. So,

121
00:04:18,949 --> 00:04:21,230
uh, for the first part of this talk we're gonna do a lot of demos

122
00:04:21,230 --> 00:04:23,230
in cloud formation, but Steffi's gonna show you how

123
00:04:23,230 --> 00:04:25,338
things work in terraform as well. I just, um,

124
00:04:25,470 --> 00:04:26,670
I, anytime I type.

125
00:04:27,129 --> 00:04:29,528
For terraform apply on my Amazon

126
00:04:29,528 --> 00:04:31,238
issued laptop. It like lights on fire.

127
00:04:31,528 --> 00:04:33,608
So, um, Sefi will be doing the terraform

128
00:04:33,608 --> 00:04:34,160
stuff, but,

129
00:04:34,449 --> 00:04:35,399
uh, the,

130
00:04:35,689 --> 00:04:37,730
the root of it is like proactive controls are the

131
00:04:37,730 --> 00:04:39,730
same across all of IAC, right? And like

132
00:04:39,730 --> 00:04:42,350
what are proactive controls for, um,

133
00:04:42,809 --> 00:04:45,209
you know, I think probably the most common

134
00:04:45,209 --> 00:04:47,329
and like most important reason we talk about

135
00:04:47,329 --> 00:04:49,649
proactive controls is around things like

136
00:04:49,649 --> 00:04:51,129
safety and governance,

137
00:04:51,410 --> 00:04:53,559
um. And we wanna stop bad

138
00:04:53,559 --> 00:04:55,600
things from happening basically, right? So if

139
00:04:55,600 --> 00:04:57,720
you look at this slide, it's like a really simple slide,

140
00:04:57,798 --> 00:04:59,838
right? Um, I have a, this is on the left is a

141
00:04:59,838 --> 00:05:02,079
cloud formation template and this is the simplest

142
00:05:02,079 --> 00:05:04,160
cloud formation template I could write. It just creates an

143
00:05:04,160 --> 00:05:05,178
S3 bucket,

144
00:05:05,480 --> 00:05:07,528
um. And on the right you can

145
00:05:07,528 --> 00:05:09,600
see that like if I tried to provision this

146
00:05:09,600 --> 00:05:12,088
bucket it actually fails because uh

147
00:05:12,088 --> 00:05:13,869
there's no bucket encryption enabled

148
00:05:14,170 --> 00:05:16,230
and that's totally fine right like

149
00:05:16,410 --> 00:05:17,730
I think uh

150
00:05:18,250 --> 00:05:20,449
quick question for the audience like who who here

151
00:05:20,449 --> 00:05:22,678
considers themselves like security people like

152
00:05:22,678 --> 00:05:25,069
security is part of my responsibility cool um

153
00:05:25,410 --> 00:05:27,449
who how about platforming people like the

154
00:05:27,449 --> 00:05:28,600
platform team? OK cool yeah

155
00:05:29,189 --> 00:05:31,290
so right like we see this a lot like

156
00:05:31,290 --> 00:05:33,334
I'm an engineer and I don't know if you can. Intel

157
00:05:33,334 --> 00:05:35,536
like I kind of just do stuff very fast.

158
00:05:35,574 --> 00:05:37,656
I basically try to find the fastest

159
00:05:37,656 --> 00:05:39,745
way to make things work, um, and I

160
00:05:39,745 --> 00:05:41,906
don't always think about the platform.

161
00:05:42,096 --> 00:05:44,454
Um, I always think about security, but

162
00:05:44,454 --> 00:05:46,536
sometimes I omit security in the name of speed,

163
00:05:46,696 --> 00:05:47,584
uh, like this bucket,

164
00:05:47,935 --> 00:05:50,175
uh, I think like all of us in like security

165
00:05:50,175 --> 00:05:52,264
and like platforming teams are familiar with like

166
00:05:52,264 --> 00:05:53,696
this trade off, right? Like

167
00:05:53,975 --> 00:05:56,134
developers wanna go really fast but

168
00:05:56,134 --> 00:05:58,334
like we who own the platform or get paid

169
00:05:58,334 --> 00:06:00,940
for security incidents. Don't wanna sacrifice

170
00:06:00,940 --> 00:06:03,021
like the platform security or

171
00:06:03,021 --> 00:06:05,100
like governance or like compliance,

172
00:06:05,141 --> 00:06:05,661
you know, we

173
00:06:06,380 --> 00:06:08,380
tons of organizations have things like FedRAM

174
00:06:08,380 --> 00:06:10,461
compliance or like NIS compliance, all these like

175
00:06:10,461 --> 00:06:12,502
compliance packs which require you to be

176
00:06:12,502 --> 00:06:14,860
like always put on bucket encryption

177
00:06:14,860 --> 00:06:16,932
or like enable object lock on your S

178
00:06:16,932 --> 00:06:19,600
Suite bucket, right? Like these are kind of like really nuanced

179
00:06:19,790 --> 00:06:22,141
like configuration options that we don't really

180
00:06:22,141 --> 00:06:24,420
wanna have to have that conversation with developers

181
00:06:24,420 --> 00:06:26,281
every time they wanna create an S Suite bucket

182
00:06:26,622 --> 00:06:27,380
that um.

183
00:06:27,959 --> 00:06:30,480
They have to turn on SSE encryption

184
00:06:30,480 --> 00:06:31,298
for their bucket, right?

185
00:06:31,559 --> 00:06:33,600
We wanna make sure that they can move fast but

186
00:06:33,600 --> 00:06:35,259
like not break our platform.

187
00:06:35,519 --> 00:06:37,819
So hooks and like proactive controls

188
00:06:38,019 --> 00:06:40,100
help stop bad things from happening

189
00:06:40,278 --> 00:06:41,059
before they happen.

190
00:06:41,399 --> 00:06:43,559
Um, I, I'm gonna tell you a story. We're

191
00:06:43,559 --> 00:06:45,678
gonna have a lot of stories and they're all gonna be a little embarrassing

192
00:06:45,678 --> 00:06:47,939
about me, um, or our interns, uh, but,

193
00:06:48,119 --> 00:06:50,119
uh, a long time ago, does anyone

194
00:06:50,119 --> 00:06:52,319
remember, um, when Lambda launched

195
00:06:52,319 --> 00:06:53,559
Function Endpoints,

196
00:06:53,920 --> 00:06:56,000
uh, a long time, it, it was like maybe 2 or 3 years

197
00:06:56,000 --> 00:06:57,040
ago, uh. Um,

198
00:06:57,439 --> 00:06:59,639
does anyone here not know what lambda is? It's totally fine.

199
00:06:59,798 --> 00:07:01,829
Do we count our lambda? OK, cool. Uh, I love

200
00:07:01,829 --> 00:07:03,959
lambda. Um, any time reinvent

201
00:07:03,959 --> 00:07:06,040
is very fun for us as well because this is the first

202
00:07:06,040 --> 00:07:08,500
time we're hearing a lot about a lot of new features.

203
00:07:08,678 --> 00:07:10,798
Um, so I remember a few years ago at Reinvent Lambda

204
00:07:10,798 --> 00:07:12,838
launched this feature called Function Endpoints.

205
00:07:13,040 --> 00:07:15,519
It basically lets you like generate an HTP

206
00:07:15,519 --> 00:07:17,559
URL that when someone calls it, like

207
00:07:17,559 --> 00:07:19,579
sends a get request to it or a post request or something,

208
00:07:19,838 --> 00:07:21,910
it invokes a lambda function, and I thought

209
00:07:21,910 --> 00:07:24,160
this was super cool and it was like really easy

210
00:07:24,160 --> 00:07:25,379
to set up, um.

211
00:07:26,009 --> 00:07:28,259
And this was sort of back before things like hooks

212
00:07:28,259 --> 00:07:28,809
existed,

213
00:07:29,069 --> 00:07:31,259
uh, and so I was, uh,

214
00:07:31,298 --> 00:07:33,338
I was experimenting. I was writing, I was

215
00:07:33,338 --> 00:07:35,519
trying to like set up this like lambda, uh,

216
00:07:35,540 --> 00:07:37,699
with the function endpoint, and it was actually really fun.

217
00:07:37,819 --> 00:07:39,939
I had it like the lambda function send

218
00:07:39,939 --> 00:07:42,379
a like a text message to my manager

219
00:07:42,379 --> 00:07:44,608
saying that you should give David a raise, um,

220
00:07:44,619 --> 00:07:47,000
and then I posted the URL into like our,

221
00:07:47,009 --> 00:07:49,059
our organizations Slack channel and everyone kept cooking. It was,

222
00:07:49,129 --> 00:07:50,209
it was really a beautiful day,

223
00:07:50,778 --> 00:07:53,173
um, but it was really fun for me because I got. Like, experiment

224
00:07:53,173 --> 00:07:55,153
with this new feature. I had a lot of fun with it.

225
00:07:55,415 --> 00:07:57,613
Um, the cool thing about function endpoints is that there's

226
00:07:57,613 --> 00:07:59,733
also a lot of configuration that you can do

227
00:07:59,733 --> 00:08:01,014
for security. You can say,

228
00:08:01,295 --> 00:08:03,613
hey, like only like this IP

229
00:08:03,613 --> 00:08:05,855
address range can call this endpoint or like

230
00:08:05,855 --> 00:08:07,934
it has to be within this like VPC and

231
00:08:07,934 --> 00:08:10,084
it's private. Um, those are really cool

232
00:08:10,084 --> 00:08:12,475
and I did not care about them, uh,

233
00:08:12,574 --> 00:08:14,574
because like I just wanted to get it to work. I wanted to make

234
00:08:14,574 --> 00:08:16,694
a funny like joke for my coworkers and

235
00:08:16,694 --> 00:08:17,834
send like this link out,

236
00:08:18,095 --> 00:08:20,160
um, so I did that. And it was fun and then I was

237
00:08:20,160 --> 00:08:22,048
going home. I was going home, uh,

238
00:08:22,338 --> 00:08:24,410
and I was on the train like

239
00:08:24,410 --> 00:08:26,790
listening to, I don't know, some podcast or something

240
00:08:26,959 --> 00:08:29,028
and like I got this like, like my, I thought,

241
00:08:29,088 --> 00:08:31,119
I thought it was like an amber alert, but I

242
00:08:31,119 --> 00:08:33,340
was actually getting paged and I was like this is

243
00:08:33,340 --> 00:08:35,570
what I'm not, I am not on call. Why am I getting

244
00:08:35,570 --> 00:08:36,109
paged

245
00:08:36,489 --> 00:08:38,548
and it turns out like our we had this

246
00:08:38,548 --> 00:08:40,649
reactor, uh, detective control

247
00:08:40,649 --> 00:08:42,769
system that like scanned our AWS accounts

248
00:08:42,769 --> 00:08:44,969
every hour or so to make sure

249
00:08:44,969 --> 00:08:47,283
that like all of our. Resources were compliant

250
00:08:47,524 --> 00:08:49,764
and it turns out like our security

251
00:08:49,764 --> 00:08:51,803
team um had decided that like

252
00:08:51,803 --> 00:08:52,423
a

253
00:08:52,923 --> 00:08:55,283
globally accessible function endpoint

254
00:08:55,283 --> 00:08:57,604
that costs money when it is invoked

255
00:08:57,604 --> 00:08:59,604
that's just accessible by anyone was

256
00:08:59,604 --> 00:09:01,904
not compliant with security um

257
00:09:02,173 --> 00:09:04,283
so I, I had to like get off the train and like

258
00:09:04,283 --> 00:09:06,803
go find a coffee shop and like go

259
00:09:06,803 --> 00:09:08,854
like read this ticket that I got paid

260
00:09:08,854 --> 00:09:10,965
for and like go disable this

261
00:09:10,965 --> 00:09:12,183
uh delete this function.

262
00:09:12,580 --> 00:09:14,619
Um, I was really mad actually. This is the

263
00:09:14,619 --> 00:09:16,619
thing that radicalized me on proactive controls. This

264
00:09:16,619 --> 00:09:18,690
is why I care about it so much because I was

265
00:09:18,690 --> 00:09:20,779
like, how did you just let me create something that

266
00:09:20,779 --> 00:09:22,178
you knew was wrong, right?

267
00:09:22,500 --> 00:09:24,700
So that's where proactive controls comes in

268
00:09:24,700 --> 00:09:26,820
like that experience for

269
00:09:26,820 --> 00:09:28,759
developers, it kind of sucks, right? Like

270
00:09:29,058 --> 00:09:31,219
you page, like if you

271
00:09:31,219 --> 00:09:33,798
create a resource and it is misconfigured

272
00:09:33,899 --> 00:09:35,000
and you just let it happen

273
00:09:35,298 --> 00:09:37,460
like that. Change can propagate through pipelines.

274
00:09:37,500 --> 00:09:39,658
It can go to production, and reactive

275
00:09:39,658 --> 00:09:41,779
controls and detective controls are amazing. They're like,

276
00:09:41,820 --> 00:09:43,859
uh, they're a like

277
00:09:44,739 --> 00:09:47,210
they always catch things, but proactive

278
00:09:47,210 --> 00:09:49,538
controls are better because they can stop things

279
00:09:49,538 --> 00:09:50,250
before they happen.

280
00:09:50,519 --> 00:09:52,558
Um, so that's why I love, um,

281
00:09:52,710 --> 00:09:54,859
uh, proactive controls, and, uh, that was just

282
00:09:54,859 --> 00:09:57,058
a long story to say that proactive controls are really

283
00:09:57,058 --> 00:09:58,099
good for governance,

284
00:09:58,460 --> 00:10:00,590
um. Another thing that

285
00:10:00,590 --> 00:10:03,000
proactive controls are really helpful for are

286
00:10:03,000 --> 00:10:05,460
stopping you from making accidental mistakes,

287
00:10:05,719 --> 00:10:08,090
um. This, so in this example

288
00:10:08,090 --> 00:10:10,500
I have, um, uh, a,

289
00:10:10,570 --> 00:10:12,960
uh, cloud formation template with an auto scaling

290
00:10:12,960 --> 00:10:15,048
group, uh, and my auto scaling group had

291
00:10:15,048 --> 00:10:17,210
a minimum of 1 EC2 instance

292
00:10:17,210 --> 00:10:18,719
and a maximum of 100

293
00:10:19,168 --> 00:10:20,229
EC2 instances,

294
00:10:20,570 --> 00:10:22,629
um, so in, in cloud formation you can create

295
00:10:22,629 --> 00:10:24,629
this thing called a change set which is very similar to

296
00:10:24,629 --> 00:10:26,629
a terraform plan which basically just says

297
00:10:26,808 --> 00:10:29,009
hey I'm transitioning from like this state

298
00:10:29,009 --> 00:10:29,989
to this other state,

299
00:10:30,408 --> 00:10:32,450
um. So, uh, in

300
00:10:32,450 --> 00:10:34,450
this case I had a hook that was running

301
00:10:34,450 --> 00:10:36,389
that when I tried to make this change, uh,

302
00:10:36,649 --> 00:10:38,690
failed. It failed because the hook had

303
00:10:38,690 --> 00:10:40,928
logic in it that said, hey, whenever

304
00:10:40,928 --> 00:10:43,168
some sort of like capacity change

305
00:10:43,168 --> 00:10:45,639
happens on a bunch of resources so like CPU,

306
00:10:46,250 --> 00:10:48,570
memory, I ops, um,

307
00:10:48,849 --> 00:10:50,849
like auto scaling group sizes, whenever those

308
00:10:50,849 --> 00:10:52,849
changes happen and they exceed

309
00:10:52,849 --> 00:10:53,629
50%,

310
00:10:53,969 --> 00:10:55,769
I'm just gonna fail, right, because this is product.

311
00:10:56,163 --> 00:10:57,962
Like you're changing things really drastically,

312
00:10:58,283 --> 00:10:59,182
uh, so

313
00:10:59,802 --> 00:11:02,001
in this example it actually wasn't me. I didn't

314
00:11:02,001 --> 00:11:04,043
make the change. I'm not the villain of this particular

315
00:11:04,043 --> 00:11:06,043
story. We had an intern. This intern

316
00:11:06,043 --> 00:11:08,202
was so smart and much smarter than me,

317
00:11:08,403 --> 00:11:10,481
um, and one of the things that our intern

318
00:11:10,481 --> 00:11:12,783
was doing was he, they really wanted to like

319
00:11:12,962 --> 00:11:14,962
deploy our service to their

320
00:11:14,962 --> 00:11:16,962
own like we give all developers

321
00:11:16,962 --> 00:11:19,033
at Amazon, they get an AWS account that they can

322
00:11:19,033 --> 00:11:19,751
do anything with,

323
00:11:20,043 --> 00:11:22,676
um, so. Wanted to deploy our service to

324
00:11:22,676 --> 00:11:25,216
their um their own personal account and

325
00:11:25,315 --> 00:11:27,596
I was so excited because I was like yay bias for action

326
00:11:27,596 --> 00:11:28,934
this is fun you're gonna experiment

327
00:11:29,315 --> 00:11:31,596
um and this intern also was like very frugal

328
00:11:31,596 --> 00:11:33,875
they're like I don't need 100 EC2

329
00:11:33,875 --> 00:11:36,035
instances being spun up in my account so

330
00:11:36,035 --> 00:11:38,195
they actually changed, they changed their

331
00:11:38,195 --> 00:11:40,355
template, um, to make it so that like

332
00:11:40,355 --> 00:11:42,716
the number of auto scaling, um, the EC2

333
00:11:42,716 --> 00:11:45,315
instances that could be provisioned was 10 instead of 100.

334
00:11:46,239 --> 00:11:48,500
Um, and through a series of,

335
00:11:48,509 --> 00:11:50,599
uh, unfortunate accidents they

336
00:11:50,599 --> 00:11:52,649
accidentally committed this change to our

337
00:11:52,649 --> 00:11:54,788
repository and our pipeline picked it up

338
00:11:54,928 --> 00:11:56,928
and our pipeline started to try to deploy it to our

339
00:11:56,928 --> 00:11:58,950
beta stage and then that's when this hook

340
00:11:59,168 --> 00:12:01,288
was invoked and stopped that change from rolling

341
00:12:01,288 --> 00:12:03,668
out, which is great because if our service,

342
00:12:03,849 --> 00:12:06,389
um, you know, cloud formation powers like

343
00:12:06,590 --> 00:12:08,590
100s of thousands of deployments,

344
00:12:08,658 --> 00:12:10,808
um, so if we had only 10

345
00:12:10,808 --> 00:12:12,928
EC2 instances to do that, that would have been a

346
00:12:12,928 --> 00:12:14,590
very difficult day for our on call,

347
00:12:14,928 --> 00:12:16,960
um. The other nice thing about,

348
00:12:17,019 --> 00:12:19,099
um, uh, the thing I like about this

349
00:12:19,099 --> 00:12:21,210
story is that, uh, Amazon has

350
00:12:21,210 --> 00:12:23,379
like this culture called like COE

351
00:12:23,379 --> 00:12:26,158
culture. Are folks familiar with COEs?

352
00:12:26,529 --> 00:12:28,899
Um, they're just, uh, yeah, they're just basically

353
00:12:28,899 --> 00:12:29,960
like when something goes wrong,

354
00:12:30,298 --> 00:12:32,658
you're right, this doc that's like what went wrong?

355
00:12:32,779 --> 00:12:33,798
Why did it go wrong,

356
00:12:34,259 --> 00:12:36,460
and like most importantly, how do we stop it from happening

357
00:12:36,460 --> 00:12:38,739
again. And the reason we had

358
00:12:38,739 --> 00:12:40,739
this hook written for our team was

359
00:12:40,739 --> 00:12:42,779
not because I'm really wise and a

360
00:12:42,779 --> 00:12:44,979
wonderful platform engineer, um, and

361
00:12:44,979 --> 00:12:46,979
uh foresaw this is because we had a

362
00:12:46,979 --> 00:12:49,058
COE like a couple of years ago where

363
00:12:49,058 --> 00:12:51,070
another intern had done something very similar.

364
00:12:51,379 --> 00:12:53,690
So the nice thing about like our like COE

365
00:12:53,690 --> 00:12:55,820
process is we have these tenants that are

366
00:12:55,820 --> 00:12:58,099
actually. Items should not be best intentions,

367
00:12:58,178 --> 00:13:00,178
right? So an easy action item is

368
00:13:00,178 --> 00:13:02,340
like update a run book and that way when our

369
00:13:02,340 --> 00:13:04,379
intern comes back they'll follow the

370
00:13:04,379 --> 00:13:06,269
steps to make sure that they do the right thing.

371
00:13:06,538 --> 00:13:08,399
We call those like good intentions and like

372
00:13:08,779 --> 00:13:10,820
sometimes they're fine but we always are searching for

373
00:13:10,820 --> 00:13:13,119
mechanisms like how can we enforce

374
00:13:13,259 --> 00:13:15,139
that this bad thing does not happen again.

375
00:13:15,460 --> 00:13:17,629
Um, so with things like hooks

376
00:13:17,629 --> 00:13:19,710
you can take your learnings from different types of

377
00:13:19,710 --> 00:13:22,269
outages like over eager interns

378
00:13:22,269 --> 00:13:24,710
or maybe like careless engineers and

379
00:13:24,710 --> 00:13:27,250
codify them and enforce them in your IAC

380
00:13:27,250 --> 00:13:29,168
that way these mistakes don't have to happen again.

381
00:13:29,639 --> 00:13:31,690
Um, OK, I'm gonna go over

382
00:13:31,690 --> 00:13:33,690
one more use case that my manager

383
00:13:33,690 --> 00:13:36,009
insisted I put in as a punishment.

384
00:13:36,129 --> 00:13:38,250
Um, so the other great thing that

385
00:13:38,250 --> 00:13:40,369
like proactive controls can do is make

386
00:13:40,369 --> 00:13:42,450
sure that you don't spend too much money. Um,

387
00:13:42,849 --> 00:13:45,288
sometimes engineers provision extremely

388
00:13:45,288 --> 00:13:48,000
large EC2 instances because they're not responsible

389
00:13:48,000 --> 00:13:49,349
for their AWS bill,

390
00:13:49,609 --> 00:13:51,690
um, and they just leave them in their account and run

391
00:13:51,690 --> 00:13:53,908
up huge bills. Um, that is. Something

392
00:13:53,908 --> 00:13:56,070
I have done, so now we have a, a hook

393
00:13:56,070 --> 00:13:57,129
on our team only

394
00:13:57,469 --> 00:13:59,509
that makes sure that like there's a set of allow

395
00:13:59,509 --> 00:14:01,788
listed, uh, EC2 instances

396
00:14:01,788 --> 00:14:03,830
that we can deploy. Um, that's my manager

397
00:14:03,830 --> 00:14:06,048
made me do that, um, because we had a huge bill,

398
00:14:06,308 --> 00:14:08,509
but our actual practical reason

399
00:14:08,509 --> 00:14:10,609
why folks would do this a lot is, you know,

400
00:14:10,830 --> 00:14:12,830
uh, a lot of organizations do a lot of

401
00:14:12,830 --> 00:14:15,070
negotiation with Amazon to make sure that we have

402
00:14:15,070 --> 00:14:17,308
like savings plans or like certain

403
00:14:17,308 --> 00:14:19,570
EC2. Instances that we get discounts on

404
00:14:19,729 --> 00:14:22,080
and that's really hard information to like trickle

405
00:14:22,080 --> 00:14:24,090
down to engineers or people who are building

406
00:14:24,090 --> 00:14:26,330
platforms know that like hey you should only

407
00:14:26,330 --> 00:14:28,330
use this particular type of instance

408
00:14:28,330 --> 00:14:30,668
because we get a discount on it um so

409
00:14:30,779 --> 00:14:32,849
that kind of information can be codified in

410
00:14:32,849 --> 00:14:35,009
like a proactive control that says hey like

411
00:14:35,009 --> 00:14:37,009
you didn't do anything wrong it's just that you tried to

412
00:14:37,009 --> 00:14:39,408
like there's a better um instance

413
00:14:39,408 --> 00:14:41,529
type that you can use uh that we get a

414
00:14:41,529 --> 00:14:43,590
discount on. So part of controls

415
00:14:43,590 --> 00:14:45,969
can help you with things like governance and security.

416
00:14:46,288 --> 00:14:48,330
They can help codify best practices

417
00:14:48,330 --> 00:14:49,918
and learnings from COEs.

418
00:14:50,200 --> 00:14:52,369
They can help you, uh, make sure that

419
00:14:52,369 --> 00:14:54,450
like trickle down, uh,

420
00:14:54,690 --> 00:14:56,690
uh, organizational best practices like,

421
00:14:56,769 --> 00:14:59,149
uh, cost, uh, best practices,

422
00:14:59,450 --> 00:15:01,474
um, so they're really. Useful and they're kind of like

423
00:15:01,474 --> 00:15:02,504
uh I think

424
00:15:02,884 --> 00:15:05,215
they uh in in the IAC

425
00:15:05,215 --> 00:15:07,283
world they're super valuable and I think

426
00:15:07,283 --> 00:15:09,504
in cloud formation and Amazon specifically

427
00:15:09,724 --> 00:15:11,844
like we're only just in the past couple of

428
00:15:11,844 --> 00:15:12,945
years really like

429
00:15:13,524 --> 00:15:15,715
understanding how valuable these are um so I'm

430
00:15:15,715 --> 00:15:18,053
excited for us to like get together and experiment

431
00:15:18,053 --> 00:15:20,200
with them. Cool,

432
00:15:20,320 --> 00:15:22,359
uh, so you thought that it was cool

433
00:15:22,359 --> 00:15:24,599
that I was talking for so long, uh, but now we're actually

434
00:15:24,599 --> 00:15:26,298
gonna code because this is a code talk,

435
00:15:26,719 --> 00:15:28,798
um, so in this code talk we're gonna do

436
00:15:28,798 --> 00:15:29,538
a couple of things.

437
00:15:30,000 --> 00:15:32,029
Uh, I'm gonna teach you a little bit about

438
00:15:32,029 --> 00:15:34,369
cloud formation guard. This is our, our,

439
00:15:34,509 --> 00:15:36,849
um. Policy is code DSL, um,

440
00:15:37,509 --> 00:15:39,389
there's nothing really special about guard here.

441
00:15:39,658 --> 00:15:41,750
Like you can replace it in your mind with, uh, any

442
00:15:41,750 --> 00:15:44,070
policy has code language that you're familiar with like

443
00:15:44,070 --> 00:15:46,269
Sentinel or Rego or like

444
00:15:46,269 --> 00:15:48,769
check off, whatever you're comfortable with like conceptually

445
00:15:48,769 --> 00:15:49,609
they all do the same thing.

446
00:15:50,739 --> 00:15:52,788
Um, I'm gonna show you how to build a hook using

447
00:15:52,788 --> 00:15:54,830
guard. Uh, we're going to go

448
00:15:54,830 --> 00:15:57,219
through a beautiful journey of trying to deploy

449
00:15:57,219 --> 00:15:59,349
a cloud formation stack, a process

450
00:15:59,349 --> 00:16:01,428
that I'm sure we've all experienced and enjoyed a

451
00:16:01,428 --> 00:16:02,529
lot, um,

452
00:16:02,788 --> 00:16:04,950
and then I'm gonna show you how we cannot do

453
00:16:04,950 --> 00:16:07,149
any of that and just use a couple of clicks to,

454
00:16:07,190 --> 00:16:09,269
um, build a hook using something

455
00:16:09,269 --> 00:16:10,369
called the control catalog.

456
00:16:10,750 --> 00:16:12,440
Um, and of course, uh,

457
00:16:12,759 --> 00:16:14,798
I will, we have, we're going to show you how to make it

458
00:16:14,798 --> 00:16:16,879
work in terraform too, which is gonna be fun and

459
00:16:16,879 --> 00:16:18,408
delightful, um,

460
00:16:18,879 --> 00:16:21,119
but now we're actually gonna do all that

461
00:16:21,119 --> 00:16:22,369
stuff, cool,

462
00:16:22,918 --> 00:16:23,639
so, yeah,

463
00:16:23,918 --> 00:16:26,269
switch. OK, I'm gonna assume

464
00:16:26,269 --> 00:16:28,119
my official coding position

465
00:16:28,428 --> 00:16:30,469
which is sitting on this chair with

466
00:16:30,469 --> 00:16:30,989
my knees,

467
00:16:31,308 --> 00:16:33,250
um, cool, uh,

468
00:16:33,558 --> 00:16:35,739
yeah, let's get into it. Let's build stuff. OK,

469
00:16:35,950 --> 00:16:38,058
so also this Amazon has

470
00:16:38,058 --> 00:16:40,269
this thing called connections where every day they ask us a

471
00:16:40,269 --> 00:16:42,469
question and you cannot stop it from happening and it always

472
00:16:42,469 --> 00:16:43,168
pops up during

473
00:16:43,509 --> 00:16:45,788
presentations so I'm gonna move this over

474
00:16:45,788 --> 00:16:47,690
here and we're just not gonna talk about it anymore.

475
00:16:48,729 --> 00:16:51,058
OK, cool, so let's set up some proactive

476
00:16:51,058 --> 00:16:52,639
controls for IAC and show how they work.

477
00:16:53,658 --> 00:16:55,798
All right, so let's go to cloud formation.

478
00:16:57,080 --> 00:16:59,320
Which is my favorite, uh, IAC

479
00:16:59,320 --> 00:17:01,570
service that's natively hosted on AWS.

480
00:17:01,849 --> 00:17:03,849
I talk a lot of smack about Terraform, but I actually

481
00:17:03,849 --> 00:17:05,750
love it, so please don't take it personally.

482
00:17:06,049 --> 00:17:08,199
Um, I'm gonna, uh, close every

483
00:17:08,199 --> 00:17:10,209
single notification that came up because we are very

484
00:17:10,209 --> 00:17:12,328
eager this year to open, uh, launch

485
00:17:12,328 --> 00:17:13,068
a lot of features.

486
00:17:13,809 --> 00:17:15,689
And I'm gonna go to our hook section.

487
00:17:15,989 --> 00:17:18,108
So, um, this, this is our hooks page.

488
00:17:18,219 --> 00:17:20,529
Uh, this is a, um, like

489
00:17:20,650 --> 00:17:22,750
3 step picture that explains

490
00:17:22,750 --> 00:17:24,848
in, uh, what I took 20 minutes

491
00:17:24,848 --> 00:17:26,868
to explain. So this is always delightful if you

492
00:17:26,868 --> 00:17:28,868
ever forget and don't feel like listening to this talk

493
00:17:28,868 --> 00:17:31,019
again. Um, it just shows how, uh,

494
00:17:31,029 --> 00:17:33,368
like a hook basically sits in front

495
00:17:33,368 --> 00:17:35,630
of cloud formation doing something and evaluates

496
00:17:35,630 --> 00:17:37,789
if that thing is good or bad. If it is bad,

497
00:17:37,910 --> 00:17:39,989
it stops that bad thing from happening, um.

498
00:17:40,439 --> 00:17:42,739
So I'm gonna actually go down here

499
00:17:42,959 --> 00:17:44,420
and we're gonna create a hook

500
00:17:44,959 --> 00:17:47,229
and we're gonna use guard because that's my DSL

501
00:17:47,229 --> 00:17:48,098
of choice

502
00:17:48,598 --> 00:17:50,598
and OK so over here

503
00:17:50,598 --> 00:17:52,880
it tells us like hey you have to upload

504
00:17:52,880 --> 00:17:54,380
your guard rules to S3.

505
00:17:54,660 --> 00:17:55,299
Um,

506
00:17:55,630 --> 00:17:57,670
and so this is a code talk, so I'm supposed to

507
00:17:57,670 --> 00:17:59,910
be coding, but I'm remarkably

508
00:17:59,910 --> 00:18:01,949
lazy, so we're not actually gonna write

509
00:18:01,949 --> 00:18:02,809
these rules ourselves,

510
00:18:03,189 --> 00:18:05,549
um, so there's this community on, on

511
00:18:05,549 --> 00:18:07,848
GitHub, uh, of pre-written

512
00:18:07,848 --> 00:18:09,568
guard rules, uh,

513
00:18:10,078 --> 00:18:12,108
which are super cool. So I'm actually just gonna

514
00:18:12,108 --> 00:18:13,799
go steal this from

515
00:18:14,160 --> 00:18:15,430
our guard rules registry.

516
00:18:16,170 --> 00:18:18,289
So this is GitHub. Uh, if

517
00:18:18,289 --> 00:18:20,289
we go into the rules, you can see

518
00:18:20,289 --> 00:18:22,318
that there's a bunch of different AWS services,

519
00:18:22,390 --> 00:18:24,529
so like Amazon S3, this is one of my

520
00:18:24,529 --> 00:18:26,598
favorite ones, so I'm gonna click it and you can see

521
00:18:26,598 --> 00:18:27,828
that there's a bunch of different,

522
00:18:28,130 --> 00:18:30,289
uh, uh, files that map

523
00:18:30,289 --> 00:18:31,348
to a policy.

524
00:18:31,779 --> 00:18:33,858
So we have S3 bucket default

525
00:18:33,858 --> 00:18:35,358
block enabled, um,

526
00:18:35,689 --> 00:18:37,598
S3 bucket logging is enabled,

527
00:18:37,900 --> 00:18:39,900
uh, there, there's a bunch of, well, let's see what

528
00:18:39,900 --> 00:18:40,689
is a good one?

529
00:18:41,519 --> 00:18:43,779
Oh, bucket versioning enabled, that's

530
00:18:43,779 --> 00:18:45,818
kind of fun. So, um, we're gonna just,

531
00:18:45,939 --> 00:18:48,019
I, I already took a few of these, but I just wanted

532
00:18:48,019 --> 00:18:50,078
to show you, um, there's a bunch of different

533
00:18:50,078 --> 00:18:51,348
services over here.

534
00:18:51,699 --> 00:18:53,739
Uh, let's see, IAM exists, which

535
00:18:53,739 --> 00:18:54,838
is always a fun one,

536
00:18:55,338 --> 00:18:57,699
and IM has a bunch of like IM is probably

537
00:18:57,699 --> 00:18:58,759
the, the place where.

538
00:18:59,439 --> 00:19:01,618
You can do the most damage from a security

539
00:19:01,618 --> 00:19:03,838
point of view, um, so there's a lot of really fun

540
00:19:03,838 --> 00:19:05,709
like, uh, oh,

541
00:19:06,078 --> 00:19:07,098
policies written

542
00:19:08,039 --> 00:19:10,078
already for IM, for example, no

543
00:19:10,078 --> 00:19:12,199
admin access, uh, which

544
00:19:12,199 --> 00:19:14,209
is, um, delightful we should

545
00:19:14,209 --> 00:19:16,229
not have admin access for a lot of. Things,

546
00:19:16,519 --> 00:19:17,279
um, so

547
00:19:17,640 --> 00:19:18,150
you know, I,

548
00:19:18,439 --> 00:19:20,479
what I did, uh, earlier for demo

549
00:19:20,479 --> 00:19:22,519
magic purposes is I

550
00:19:22,519 --> 00:19:23,199
cloned,

551
00:19:23,509 --> 00:19:25,759
uh, this repository locally and I

552
00:19:25,759 --> 00:19:27,818
took a couple of rules, um,

553
00:19:28,239 --> 00:19:30,400
from that repository, so I have some Dynamo DB,

554
00:19:30,489 --> 00:19:32,269
some IM, some lambda, some S3,

555
00:19:32,549 --> 00:19:33,979
and I just zipped it up.

556
00:19:34,739 --> 00:19:37,449
And then I uploaded it to S3.

557
00:19:38,068 --> 00:19:40,150
Uh, we never know what the Wi Fi situation is

558
00:19:40,150 --> 00:19:42,229
gonna be in these rooms, so I try to like pre-buffer

559
00:19:42,229 --> 00:19:43,890
as much as, as much as I can.

560
00:19:44,269 --> 00:19:46,910
So, um, I'm gonna go. I, I uploaded

561
00:19:46,910 --> 00:19:49,108
my guard rules to S3 earlier,

562
00:19:49,209 --> 00:19:50,449
so I'm gonna select this.

563
00:19:51,709 --> 00:19:53,828
And I'm gonna tell guard to write

564
00:19:53,828 --> 00:19:56,380
a bunch of logs whenever something fails,

565
00:19:56,989 --> 00:19:59,098
and we're gonna call this something, um,

566
00:19:59,108 --> 00:20:01,108
this is fun. Does anyone have a fun name for

567
00:20:01,108 --> 00:20:03,009
this hook that we should call it? I'm thinking

568
00:20:03,578 --> 00:20:06,130
very good hook. Does anyone have any other suggestions?

569
00:20:07,699 --> 00:20:10,489
What? That,

570
00:20:10,608 --> 00:20:12,838
that I don't know that I don't know what I expected from that. Uh,

571
00:20:13,009 --> 00:20:15,750
I heard someone say, uh, uh,

572
00:20:16,130 --> 00:20:18,289
I don't know, I heard gotcha hook. I like

573
00:20:18,289 --> 00:20:20,019
that because it's like pew pew. I got you.

574
00:20:20,328 --> 00:20:21,989
Um, so we're gonna call this the gotcha hook,

575
00:20:22,529 --> 00:20:24,529
and hooks can run in a lot

576
00:20:24,529 --> 00:20:26,680
of different places. So before a

577
00:20:26,680 --> 00:20:28,529
cloud formation stack is updated,

578
00:20:28,809 --> 00:20:31,039
uh, through cloud control API at change sets,

579
00:20:31,140 --> 00:20:33,368
um, for this we're gonna just do resources.

580
00:20:33,489 --> 00:20:35,890
We're gonna, so any time cloud formation goes to provision

581
00:20:35,890 --> 00:20:37,930
a resource, it's gonna run these guard rules

582
00:20:37,930 --> 00:20:39,689
to make sure that resource is compliant.

583
00:20:40,900 --> 00:20:43,000
And I'm gonna tell um hooks

584
00:20:43,000 --> 00:20:45,078
to run this whenever a resource is updated or

585
00:20:45,078 --> 00:20:45,660
created.

586
00:20:46,880 --> 00:20:49,049
And there's this thing called a hook mode. So

587
00:20:49,049 --> 00:20:50,049
a hook, um,

588
00:20:50,368 --> 00:20:52,489
I'm gonna change it to fail. So basically

589
00:20:52,489 --> 00:20:54,848
any time this hook evaluates to false, it

590
00:20:54,848 --> 00:20:56,930
blocks something. You can also put a hook and

591
00:20:56,930 --> 00:20:59,068
warn mode so like a hook can fail

592
00:20:59,250 --> 00:21:01,449
and it doesn't actually block something. So this is really

593
00:21:01,449 --> 00:21:03,650
good if you're like authoring new rules and you wanna

594
00:21:03,650 --> 00:21:05,769
test them out without necessarily blocking

595
00:21:05,769 --> 00:21:08,059
people, um, but for this we're gonna block it

596
00:21:08,489 --> 00:21:10,568
and I'm gonna create, uh, a new role

597
00:21:10,568 --> 00:21:12,009
called the gotcha roll.

598
00:21:13,000 --> 00:21:13,640
Um,

599
00:21:14,289 --> 00:21:16,328
cool, um, you can tell, uh, you can

600
00:21:16,328 --> 00:21:18,410
have hooks be really specific on exactly when

601
00:21:18,410 --> 00:21:20,430
they run. I'm just gonna have it run all the time.

602
00:21:21,489 --> 00:21:23,118
And I'm gonna create this hook.

603
00:21:25,400 --> 00:21:27,640
Yay, cool. OK, so I created this up. It's

604
00:21:27,640 --> 00:21:29,439
running in my account now. Um,

605
00:21:29,719 --> 00:21:30,259
fun question,

606
00:21:30,640 --> 00:21:32,719
uh, has anyone here used Gen

607
00:21:32,719 --> 00:21:35,299
AI for IAC stuff yet?

608
00:21:35,880 --> 00:21:38,000
OK, cool. Yeah, it's fun. It's fun. I

609
00:21:38,000 --> 00:21:40,000
also use Gen AI for IAC stuff, uh,

610
00:21:40,078 --> 00:21:40,779
for this talk.

611
00:21:41,078 --> 00:21:43,039
I, uh, asked Kiro

612
00:21:43,358 --> 00:21:45,059
to generate for me

613
00:21:45,400 --> 00:21:46,539
a, um,

614
00:21:46,880 --> 00:21:48,939
a, a template, a cloud formation template.

615
00:21:49,259 --> 00:21:51,439
And I asked my prompt to Kira was basically

616
00:21:51,439 --> 00:21:53,618
like I want a really simple cloud formation

617
00:21:53,618 --> 00:21:55,640
template that creates a lambda function,

618
00:21:55,868 --> 00:21:57,939
um, a Dynamo DB table, and an

619
00:21:57,939 --> 00:22:00,059
S3 bucket, um, just to

620
00:22:00,059 --> 00:22:02,400
create a really simple application that writes to Dynamo DB

621
00:22:02,529 --> 00:22:03,900
and pulls files from S3.

622
00:22:04,479 --> 00:22:06,489
And this is the this is the template

623
00:22:06,489 --> 00:22:07,269
that it gave me,

624
00:22:07,529 --> 00:22:09,568
um, it created a lambda execution

625
00:22:09,568 --> 00:22:11,848
role. um, this is the role that lambda

626
00:22:11,848 --> 00:22:13,630
will use to do stuff

627
00:22:13,969 --> 00:22:15,969
um it created a lambda function, um,

628
00:22:16,088 --> 00:22:18,338
so a simple inline function using

629
00:22:18,338 --> 00:22:19,009
no JS

630
00:22:19,368 --> 00:22:21,000
sure, I don't, that sounds good,

631
00:22:21,328 --> 00:22:23,709
um, it created an S3 bucket with no properties

632
00:22:23,969 --> 00:22:25,650
fine, that is a correct bucket.

633
00:22:26,009 --> 00:22:28,108
And I created a Dynamo DB table

634
00:22:28,650 --> 00:22:30,809
and the thing that I like about um this like

635
00:22:30,809 --> 00:22:32,809
template that it generated is it tried a little

636
00:22:32,809 --> 00:22:35,209
hard, right? Like it turned on a

637
00:22:35,209 --> 00:22:37,209
point in time recovery for me which is a really

638
00:22:37,209 --> 00:22:39,250
nice gesture. I do appreciate that

639
00:22:39,250 --> 00:22:41,489
because um you don't wanna accidentally delete

640
00:22:41,489 --> 00:22:43,709
your Dynamo DV table and realize you don't have

641
00:22:43,709 --> 00:22:46,015
a point in time recovery. Turned on, so, um,

642
00:22:46,515 --> 00:22:48,634
this, this is a great template, uh, and I

643
00:22:48,634 --> 00:22:50,755
think maybe as I was scrolling

644
00:22:50,755 --> 00:22:53,154
through this, the security people may have lifted

645
00:22:53,154 --> 00:22:55,713
an eyebrow or, or maybe folks

646
00:22:55,713 --> 00:22:57,755
realized, um, that I was alluding to certain things

647
00:22:57,755 --> 00:22:59,824
earlier with this S3 bucket, but, uh,

648
00:22:59,993 --> 00:23:02,064
I'm, we're gonna, we're gonna try to deploy it to cloud

649
00:23:02,064 --> 00:23:03,414
formation and see what happens now.

650
00:23:04,035 --> 00:23:06,074
So I'm going to go take

651
00:23:06,074 --> 00:23:07,255
this template.

652
00:23:07,979 --> 00:23:08,509
Uh,

653
00:23:09,000 --> 00:23:10,219
cloth from the web,

654
00:23:10,568 --> 00:23:11,130
oops,

655
00:23:11,420 --> 00:23:14,449
sorry. Cohoon

656
00:23:14,449 --> 00:23:16,140
next. Uh

657
00:23:17,068 --> 00:23:19,199
Yeah. Oops, sorry.

658
00:23:19,500 --> 00:23:20,380
I don't, um,

659
00:23:20,818 --> 00:23:22,130
sometimes the, um,

660
00:23:22,500 --> 00:23:24,779
uh, the AI doesn't always

661
00:23:24,779 --> 00:23:27,358
create perfectly valid cloud formation.

662
00:23:27,858 --> 00:23:29,979
OK, so that one works. OK, we're gonna

663
00:23:29,979 --> 00:23:32,459
call this, this will probably

664
00:23:32,459 --> 00:23:33,019
work.

665
00:23:34,239 --> 00:23:36,500
Um, and I'm going

666
00:23:36,500 --> 00:23:37,078
to

667
00:23:38,019 --> 00:23:40,098
just power through all these

668
00:23:40,098 --> 00:23:41,880
prompts and tell it to do stuff

669
00:23:42,338 --> 00:23:44,519
and it's gonna start creating stuff.

670
00:23:44,858 --> 00:23:47,000
Oh, does anyone have any feedback for cloud formation?

671
00:23:47,338 --> 00:23:50,000
Um, we'll get to that later. We love feedback.

672
00:23:50,500 --> 00:23:52,500
OK, cool. Uh, so, uh, cloudformation tried

673
00:23:52,500 --> 00:23:54,650
to create my stack, my dynamoji B

674
00:23:54,650 --> 00:23:56,279
table, and it failed.

675
00:23:56,618 --> 00:23:58,699
So if I scroll through like all of like

676
00:23:58,699 --> 00:24:00,400
what happened chronologically.

677
00:24:01,078 --> 00:24:03,078
Is, uh, it, it started to, it started

678
00:24:03,078 --> 00:24:05,170
creating this lambdaro estuary bucket,

679
00:24:05,439 --> 00:24:07,519
um, but before it did

680
00:24:07,519 --> 00:24:09,719
anything like actually called the like service APIs

681
00:24:09,719 --> 00:24:11,789
to create a bucket or create a lambda function, it

682
00:24:11,789 --> 00:24:13,118
invoked our gotcha hook,

683
00:24:13,439 --> 00:24:13,979
um,

684
00:24:14,439 --> 00:24:15,269
and as you can see,

685
00:24:16,118 --> 00:24:18,680
um, like the estuary bucket failed

686
00:24:18,680 --> 00:24:20,880
to create because the gotcha hook

687
00:24:20,880 --> 00:24:22,920
failed. So if I click on this

688
00:24:22,920 --> 00:24:25,219
we can see that, oh, this hook failed with the message

689
00:24:25,219 --> 00:24:26,719
that the template, um.

690
00:24:27,259 --> 00:24:29,328
Uh, you know, we had a rule called S3 bucket

691
00:24:29,328 --> 00:24:31,539
lock enabled that failed, a

692
00:24:31,539 --> 00:24:33,719
rule called S3 bucket read prohibited

693
00:24:34,140 --> 00:24:35,539
that failed. Um,

694
00:24:35,939 --> 00:24:38,059
so, and I guess we're gonna have to fix that.

695
00:24:38,420 --> 00:24:40,420
So if I go into like the hook, you

696
00:24:40,420 --> 00:24:41,439
can see like,

697
00:24:41,858 --> 00:24:44,059
all right, here's the details of this particular hook

698
00:24:44,059 --> 00:24:46,180
run. Um, I had a bunch of, you know, we

699
00:24:46,180 --> 00:24:48,318
had the lambda rules, uh, rules,

700
00:24:48,338 --> 00:24:50,420
and the dynamo DB rule and the IM rules. They

701
00:24:50,420 --> 00:24:52,420
did not run because this is an S3 bucket, but the

702
00:24:52,420 --> 00:24:53,299
S3 ones did.

703
00:24:53,949 --> 00:24:55,949
And I'm gonna click this S3 bucket lock

704
00:24:55,949 --> 00:24:58,588
enabled uh real quick and

705
00:24:58,670 --> 00:25:00,789
um it kind of gives us uh it tells

706
00:25:00,789 --> 00:25:02,769
us exactly what went wrong, right? So

707
00:25:03,469 --> 00:25:05,709
it says the check was not compliant because

708
00:25:05,709 --> 00:25:07,289
the property um

709
00:25:07,549 --> 00:25:09,588
of S3 bucket properties

710
00:25:10,068 --> 00:25:11,519
object lock is missing

711
00:25:11,868 --> 00:25:14,229
and we have this little helpful hint saying

712
00:25:14,229 --> 00:25:16,299
hey like the violation is

713
00:25:16,299 --> 00:25:18,509
that S3 um bucket object lock

714
00:25:18,509 --> 00:25:19,529
was not set

715
00:25:19,789 --> 00:25:21,949
and we should set it to true uh to make this

716
00:25:21,949 --> 00:25:22,549
check pass.

717
00:25:23,588 --> 00:25:25,449
So just to um

718
00:25:25,789 --> 00:25:27,910
I'm gonna show you how what this rule looks

719
00:25:27,910 --> 00:25:29,108
like let me see.

720
00:25:30,068 --> 00:25:31,098
Oh yeah, so here it is,

721
00:25:31,368 --> 00:25:33,630
um, so this is a guard rule, um,

722
00:25:33,868 --> 00:25:35,949
so this is all comments, but

723
00:25:35,949 --> 00:25:37,989
it's just, uh, this is describing what this rule

724
00:25:37,989 --> 00:25:40,189
does. So this is my object lock enabled

725
00:25:40,189 --> 00:25:41,410
rule, uh,

726
00:25:41,789 --> 00:25:43,868
and what this does is it, uh, every

727
00:25:43,868 --> 00:25:46,029
time this rule runs it takes,

728
00:25:46,189 --> 00:25:48,309
uh, as input the cloud formation resource

729
00:25:48,309 --> 00:25:49,430
that's getting provisioned.

730
00:25:50,219 --> 00:25:52,430
And we say this rule applies if

731
00:25:52,430 --> 00:25:54,568
any resource type

732
00:25:54,568 --> 00:25:56,328
is of AWSS3 bucket.

733
00:25:57,269 --> 00:25:59,479
And our rule says that you know

734
00:25:59,479 --> 00:26:01,858
S3 bucket default lock must be enabled

735
00:26:02,160 --> 00:26:04,088
and it says when it has found uh a resource

736
00:26:06,199 --> 00:26:07,299
of type S3 bucket.

737
00:26:08,328 --> 00:26:09,660
Assert that

738
00:26:09,939 --> 00:26:12,598
there is a property called object block enabled

739
00:26:13,098 --> 00:26:15,219
and that the property object block enabled

740
00:26:15,219 --> 00:26:16,049
equals true,

741
00:26:16,338 --> 00:26:18,459
right? And you can see in this like guard rule

742
00:26:18,459 --> 00:26:20,578
I have this like free form text here it says

743
00:26:20,578 --> 00:26:22,689
like violation hey like

744
00:26:22,818 --> 00:26:24,858
if we get here that means that the object

745
00:26:24,858 --> 00:26:27,059
lock enabled property did not

746
00:26:27,059 --> 00:26:27,618
exist

747
00:26:27,880 --> 00:26:29,920
um and it needs to so we can set this feedback.

748
00:26:30,500 --> 00:26:31,900
And if the um

749
00:26:32,229 --> 00:26:33,338
S3 bucket lock

750
00:26:33,598 --> 00:26:35,890
enabled existed but was not true

751
00:26:36,118 --> 00:26:38,118
we say hey you have to set this to true and

752
00:26:38,118 --> 00:26:39,739
you can see like this is the data

753
00:26:40,160 --> 00:26:42,239
that pops up right here so

754
00:26:42,239 --> 00:26:44,279
it it's you can be as specific

755
00:26:44,279 --> 00:26:46,439
or as like cryptic as you'd like

756
00:26:46,439 --> 00:26:48,463
to be with your. Feedback, but this

757
00:26:48,463 --> 00:26:50,824
is a really good example that I think this is really good feedback

758
00:26:50,824 --> 00:26:52,824
for me, um, because it's really

759
00:26:52,824 --> 00:26:55,144
clear what happens. It's looking for this object lock

760
00:26:55,144 --> 00:26:56,364
enabled property

761
00:26:56,625 --> 00:26:58,555
and it look is looking for it to be true.

762
00:26:58,864 --> 00:27:01,104
So let's go back to our template and help

763
00:27:01,104 --> 00:27:03,104
Kiro a little bit. So I'm gonna

764
00:27:03,104 --> 00:27:04,243
add a property

765
00:27:05,114 --> 00:27:07,255
called object lock enabled, and it says it

766
00:27:07,255 --> 00:27:08,045
should be true.

767
00:27:08,463 --> 00:27:10,664
I don't know what object lock enabled means, but

768
00:27:10,664 --> 00:27:13,144
my platform administrator, who was very wise,

769
00:27:13,223 --> 00:27:15,324
said that we needed it. So I'll believe them,

770
00:27:15,743 --> 00:27:17,868
um. Actually I do know what object locked

771
00:27:17,868 --> 00:27:19,910
enabled is, but it is very cool. So

772
00:27:19,910 --> 00:27:21,209
like if you, it's, uh,

773
00:27:21,709 --> 00:27:23,729
it's really an interesting feature, but, um,

774
00:27:23,900 --> 00:27:24,410
critically,

775
00:27:24,750 --> 00:27:26,949
um, that I'm putting my platform hat on now, like

776
00:27:27,068 --> 00:27:29,439
you can only enable object lock,

777
00:27:29,630 --> 00:27:31,838
uh, on S3 buckets when you're creating the bucket.

778
00:27:31,910 --> 00:27:34,088
So this is actually a really good rule because you cannot

779
00:27:34,479 --> 00:27:35,368
add that feature

780
00:27:35,630 --> 00:27:36,759
after the fact. So,

781
00:27:37,150 --> 00:27:39,150
um, we're gonna create it, we're gonna try creating the

782
00:27:39,150 --> 00:27:41,299
stack again with my new, new

783
00:27:41,299 --> 00:27:42,630
and improved template.

784
00:27:44,469 --> 00:27:45,719
And we're gonna call it

785
00:27:46,160 --> 00:27:48,328
This Will Death Work.

786
00:27:48,719 --> 00:27:50,759
Um, you can see that I go through this

787
00:27:50,759 --> 00:27:51,920
experience pretty often,

788
00:27:52,318 --> 00:27:54,479
um, so I'm gonna, I'm just gonna power

789
00:27:54,479 --> 00:27:56,739
through the cloud formation console

790
00:27:57,130 --> 00:27:58,500
and we're gonna say submit.

791
00:27:59,640 --> 00:28:01,699
And we're gonna see again what's happened.

792
00:28:03,199 --> 00:28:04,259
Oh, it failed. OK,

793
00:28:04,640 --> 00:28:06,640
uh, this is not too surprising. We knew some things were gonna

794
00:28:06,640 --> 00:28:08,759
fail, but I just wanted to see what, what

795
00:28:08,759 --> 00:28:09,739
it looked like now.

796
00:28:10,078 --> 00:28:12,410
So if we go back to our, our hook,

797
00:28:13,019 --> 00:28:15,390
um, you can see now our, our S3 bucket

798
00:28:15,390 --> 00:28:17,199
default lock enabled experience worked.

799
00:28:17,959 --> 00:28:19,420
Uh, it, it was fixed,

800
00:28:19,838 --> 00:28:21,910
um, and it passed, but we still have this

801
00:28:21,910 --> 00:28:24,239
other rule that failed called S3 bucket

802
00:28:24,239 --> 00:28:25,219
read prohibited,

803
00:28:25,680 --> 00:28:28,059
and if I look at this one, it's a little more complicated,

804
00:28:28,598 --> 00:28:30,259
so it's saying, um.

805
00:28:31,269 --> 00:28:33,279
Uh, like, it was looking for this property

806
00:28:33,279 --> 00:28:35,459
called public access block configuration

807
00:28:35,459 --> 00:28:37,420
and the properties of this estuary bucket,

808
00:28:37,719 --> 00:28:39,880
um, and you know

809
00:28:39,880 --> 00:28:41,920
there's, there's a couple of properties it wanted

810
00:28:41,920 --> 00:28:44,519
to be set, so like block public ACLs,

811
00:28:44,680 --> 00:28:47,039
block public policy, ignore public ACLs,

812
00:28:47,239 --> 00:28:49,279
restrict public bucket access. It wanted

813
00:28:49,279 --> 00:28:50,459
all of those to be true,

814
00:28:50,799 --> 00:28:52,338
so, um, I think.

815
00:28:53,118 --> 00:28:55,368
Buckets being public is bad,

816
00:28:55,559 --> 00:28:56,630
um, in general,

817
00:28:56,920 --> 00:28:59,000
so we were like I think as the platform teams

818
00:28:59,000 --> 00:29:01,039
and security folks we are always

819
00:29:01,039 --> 00:29:03,118
really excited when folks wanna make sure

820
00:29:03,118 --> 00:29:04,098
that their buckets

821
00:29:04,509 --> 00:29:05,279
can have

822
00:29:05,670 --> 00:29:08,039
absolutely no way of having public

823
00:29:08,039 --> 00:29:10,160
access, um, so by setting all of these

824
00:29:10,160 --> 00:29:12,338
values, uh, we can, uh,

825
00:29:12,680 --> 00:29:13,449
uh, it's true

826
00:29:13,920 --> 00:29:16,118
we can make that a reality. So

827
00:29:16,118 --> 00:29:18,098
let's go back to our little SU bucket

828
00:29:18,519 --> 00:29:20,078
or I have this public.

829
00:29:20,709 --> 00:29:23,049
Block public access block configuration.

830
00:29:24,059 --> 00:29:25,108
I'm just gonna like

831
00:29:25,420 --> 00:29:27,420
say tell that I'm just gonna

832
00:29:27,420 --> 00:29:29,039
copy straight from this

833
00:29:29,469 --> 00:29:30,259
output.

834
00:29:31,729 --> 00:29:34,328
Uh Boop

835
00:29:34,328 --> 00:29:38,650
boop boop And

836
00:29:38,719 --> 00:29:39,858
I'm gonna say

837
00:29:40,578 --> 00:29:42,769
true. Alright,

838
00:29:43,229 --> 00:29:45,108
cool, so I did that.

839
00:29:45,769 --> 00:29:47,910
That was fun, um, and I'm sure you all

840
00:29:47,910 --> 00:29:49,989
were really excited for me to go through the create wizard

841
00:29:49,989 --> 00:29:50,989
again, but

842
00:29:51,269 --> 00:29:53,430
we know there's more things that failed, right?

843
00:29:53,588 --> 00:29:55,750
Like if I go back to our template.

844
00:29:57,009 --> 00:29:59,170
You know, the Dynamo DB table failed.

845
00:29:59,289 --> 00:30:01,568
The lambda execution role failed. You

846
00:30:01,568 --> 00:30:02,809
know, let's see,

847
00:30:03,209 --> 00:30:03,969
uh, Dynamo D B

848
00:30:04,729 --> 00:30:06,969
Dynamo DB table failed because table

849
00:30:06,969 --> 00:30:07,890
must be encrypted.

850
00:30:08,209 --> 00:30:09,229
So, um,

851
00:30:09,689 --> 00:30:11,930
this is fun, and you know I enjoy

852
00:30:11,930 --> 00:30:13,640
coding with you all, but

853
00:30:14,049 --> 00:30:16,608
as a developer experience waiting

854
00:30:16,608 --> 00:30:19,009
for my stack to create a

855
00:30:19,009 --> 00:30:19,568
resource.

856
00:30:20,000 --> 00:30:22,358
And then iteratively trying to fix it

857
00:30:22,559 --> 00:30:24,630
is not great, right? Like I

858
00:30:24,630 --> 00:30:26,699
think this, this, this stack is really fun

859
00:30:26,699 --> 00:30:28,739
because it's serverless. It's using Dynamo, it's S3,

860
00:30:28,799 --> 00:30:29,868
it's really fast.

861
00:30:30,279 --> 00:30:32,358
But if I was using something like ECS,

862
00:30:32,439 --> 00:30:34,479
which like when you create an ECS service

863
00:30:34,479 --> 00:30:36,519
in cloud formation, it waits for the deployment

864
00:30:36,519 --> 00:30:37,618
to actually be done

865
00:30:37,880 --> 00:30:40,150
before it like considers the resource successfully created,

866
00:30:40,348 --> 00:30:42,430
that can take a while that can. Take a few minutes if

867
00:30:42,430 --> 00:30:44,430
you're creating a cloud front distribution like that

868
00:30:44,430 --> 00:30:46,469
also can take minutes so your your

869
00:30:46,469 --> 00:30:48,500
stack execution time like

870
00:30:48,500 --> 00:30:50,509
can take a while and you don't

871
00:30:50,509 --> 00:30:52,799
really wanna find out that you're the

872
00:30:52,799 --> 00:30:54,009
template that you're building

873
00:30:54,400 --> 00:30:55,598
was not compliant

874
00:30:57,088 --> 00:30:59,430
only after like uh minutes like 20-30

875
00:30:59,430 --> 00:31:00,348
minutes um

876
00:31:00,640 --> 00:31:02,568
we wanna know early as early as possible.

877
00:31:03,410 --> 00:31:04,459
So, um,

878
00:31:04,809 --> 00:31:06,868
this is fun. Instead of going

879
00:31:06,868 --> 00:31:07,969
through, um.

880
00:31:08,920 --> 00:31:10,949
And like iterating on this template one by

881
00:31:10,949 --> 00:31:13,189
one trying to fix all these errors I'm gonna

882
00:31:13,189 --> 00:31:14,410
show you a fun trick.

883
00:31:15,719 --> 00:31:17,759
So we're gonna go back to our hook, our

884
00:31:17,759 --> 00:31:19,828
gotcha hook, that was a really good name. I don't know who

885
00:31:19,828 --> 00:31:21,699
said that, but you should consider yourself really cool,

886
00:31:22,088 --> 00:31:24,118
um, so I'm gonna go to our hook,

887
00:31:24,239 --> 00:31:26,279
and you can see like for this hook you can see

888
00:31:26,279 --> 00:31:27,939
all the different times it ran,

889
00:31:28,209 --> 00:31:30,559
um, and like when it ran, so

890
00:31:30,559 --> 00:31:32,670
it, you know, it ran for this old stack,

891
00:31:32,680 --> 00:31:33,739
ran for this new stack,

892
00:31:34,118 --> 00:31:36,150
um, you can also see if it failed

893
00:31:36,150 --> 00:31:37,029
or not, you know,

894
00:31:37,479 --> 00:31:38,380
oh, they all failed,

895
00:31:38,680 --> 00:31:40,719
um, surprise, uh, but I'm gonna have the, I'm

896
00:31:40,719 --> 00:31:41,269
gonna change.

897
00:31:41,529 --> 00:31:43,559
This hook to

898
00:31:43,559 --> 00:31:46,108
actually run not just when we create resources

899
00:31:46,449 --> 00:31:47,858
but when we create a change set,

900
00:31:48,170 --> 00:31:50,209
um, so are folks here familiar with change sets?

901
00:31:50,358 --> 00:31:52,250
Raise your hand if you know what they are. Cool,

902
00:31:52,529 --> 00:31:54,769
um, change sets are basically cloud formation's

903
00:31:54,769 --> 00:31:56,838
version of like a terraform plan we I'll,

904
00:31:56,900 --> 00:31:59,039
I'll show you about that than just describe it. I'll

905
00:31:59,039 --> 00:31:59,890
show you how it works,

906
00:32:00,250 --> 00:32:02,318
um. So I'm gonna go to cloud

907
00:32:02,318 --> 00:32:04,979
formation. I'm gonna upload my template.

908
00:32:08,140 --> 00:32:09,068
And

909
00:32:09,910 --> 00:32:10,519
Uh,

910
00:32:11,750 --> 00:32:13,250
change sets rule.

911
00:32:15,410 --> 00:32:19,199
And OK,

912
00:32:19,318 --> 00:32:21,368
so instead of clicking submit and having cloud formation

913
00:32:21,368 --> 00:32:22,459
go try to provision everything,

914
00:32:22,920 --> 00:32:24,420
I'm gonna create a change set,

915
00:32:24,789 --> 00:32:27,118
and this change set will show me like, hey, here

916
00:32:27,118 --> 00:32:29,239
are all the things that would happen if you tried

917
00:32:29,239 --> 00:32:31,289
to apply that. So this change that says,

918
00:32:31,400 --> 00:32:33,559
hey, like if you tried to apply this change

919
00:32:33,559 --> 00:32:35,789
set, you're gonna create a dynamoDB table, lambda

920
00:32:35,789 --> 00:32:37,140
execution rule, lambda function,

921
00:32:37,519 --> 00:32:39,640
um, but my lambda, my

922
00:32:39,640 --> 00:32:41,539
change set is actually in a failed state

923
00:32:42,199 --> 00:32:42,900
because

924
00:32:43,239 --> 00:32:45,279
my hook failed, my, um,

925
00:32:45,598 --> 00:32:47,219
my gotcha hook failed, right, so.

926
00:32:47,818 --> 00:32:50,059
This time what's cool about like this

927
00:32:50,059 --> 00:32:52,059
experience is that you get

928
00:32:52,059 --> 00:32:54,098
every single one of the thing

929
00:32:54,098 --> 00:32:56,519
like the rules that I ran like they run

930
00:32:56,709 --> 00:32:57,318
early

931
00:32:57,618 --> 00:32:59,618
and you can see all the details of how to fix

932
00:32:59,618 --> 00:33:01,140
this stuff um directly.

933
00:33:01,739 --> 00:33:03,769
So if I go back to my gotcha hook,

934
00:33:03,969 --> 00:33:05,489
you know, I can look at this,

935
00:33:05,779 --> 00:33:06,459
this hook rum,

936
00:33:06,779 --> 00:33:08,979
and you can see like, well, look, we fixed a bunch of stuff, we

937
00:33:08,979 --> 00:33:11,219
fixed the public read prohibited and we fixed the

938
00:33:11,219 --> 00:33:11,838
object lock,

939
00:33:12,098 --> 00:33:14,140
but now you can see in one place like, hey, like

940
00:33:14,299 --> 00:33:16,338
your Dynamo DB table has to have SSE

941
00:33:16,338 --> 00:33:17,078
enabled

942
00:33:17,338 --> 00:33:17,969
and your IM,

943
00:33:18,618 --> 00:33:19,789
uh, uh,

944
00:33:20,259 --> 00:33:22,420
I have a role with an admin policy, and

945
00:33:22,420 --> 00:33:23,519
the fix for that is

946
00:33:23,989 --> 00:33:25,920
remove it, uh, which makes a lot of sense,

947
00:33:26,219 --> 00:33:28,318
so. Uh, just for

948
00:33:28,318 --> 00:33:30,380
fun, we're going to, I'm going

949
00:33:30,380 --> 00:33:31,219
to show you,

950
00:33:31,598 --> 00:33:32,789
uh, we're gonna.

951
00:33:33,650 --> 00:33:35,868
Through the power of movie magic, I've

952
00:33:35,868 --> 00:33:37,598
already fixed all of this actually,

953
00:33:38,209 --> 00:33:39,588
and I'll just show you

954
00:33:39,890 --> 00:33:40,410
ta da.

955
00:33:42,348 --> 00:33:43,410
How it works.

956
00:33:43,670 --> 00:33:46,150
Yeah. What happens in the delightful

957
00:33:46,150 --> 00:33:47,309
case? I'll show you.

958
00:33:49,068 --> 00:33:49,588
Cool.

959
00:33:52,989 --> 00:33:55,160
Yeah, so in this case you can see that my change set

960
00:33:55,160 --> 00:33:57,118
can actually run. I can execute it.

961
00:33:57,400 --> 00:33:59,439
You can see that, um, our hook

962
00:33:59,439 --> 00:34:01,439
passed because we, we fixed it

963
00:34:01,559 --> 00:34:02,858
and it was truly delightful.

964
00:34:03,160 --> 00:34:05,269
Um, so that's kind of like the experience

965
00:34:05,269 --> 00:34:07,309
that I have as like a, a team lead of

966
00:34:07,309 --> 00:34:08,260
writing, um,

967
00:34:08,539 --> 00:34:10,559
um, confirmation guard to make sure things

968
00:34:10,559 --> 00:34:12,679
work. I wanna show you one more thing real

969
00:34:12,679 --> 00:34:14,750
quick because confirmation guard is really cool,

970
00:34:14,760 --> 00:34:16,179
but not everyone wants to do it.

971
00:34:16,668 --> 00:34:18,668
Um, we have another hook called

972
00:34:18,668 --> 00:34:20,139
the control catalog,

973
00:34:20,429 --> 00:34:21,789
and this is meant, um,

974
00:34:22,309 --> 00:34:23,409
for like,

975
00:34:23,668 --> 00:34:25,148
uh, compliance checks.

976
00:34:25,458 --> 00:34:26,860
So if you look, uh,

977
00:34:27,550 --> 00:34:28,849
if we look at,

978
00:34:29,110 --> 00:34:30,119
uh,

979
00:34:30,389 --> 00:34:32,070
this basically has a bunch of like.

980
00:34:32,474 --> 00:34:34,304
Rebuilt, um, policies,

981
00:34:34,603 --> 00:34:36,644
uh, so I can, oh see, I

982
00:34:36,644 --> 00:34:38,965
can just, so instead of having to write the guard

983
00:34:38,965 --> 00:34:40,965
myself, Amazon owns and

984
00:34:40,965 --> 00:34:43,114
runs these rules so we maintain them, um,

985
00:34:43,125 --> 00:34:45,144
I can basically say hey, like this bucket

986
00:34:45,144 --> 00:34:47,704
has to have S3 enabled. I'm versioning enabled.

987
00:34:48,119 --> 00:34:50,128
Uh, it has to have server side encryption,

988
00:34:50,398 --> 00:34:52,800
and Steffi's gonna show you more about this later,

989
00:34:53,050 --> 00:34:55,050
but what's really cool about this is that like

990
00:34:55,050 --> 00:34:57,090
these policies are also grouped

991
00:34:57,090 --> 00:34:59,099
by like their compliance framework, right?

992
00:34:59,208 --> 00:35:01,208
So I was talking about NIST earlier so

993
00:35:01,208 --> 00:35:03,429
you can see like oh this rule

994
00:35:03,429 --> 00:35:04,869
is, um, part like

995
00:35:05,128 --> 00:35:07,449
applies to the NIST framework, uh,

996
00:35:07,688 --> 00:35:09,760
and you know I'm super

997
00:35:09,760 --> 00:35:12,269
excited about security so I could just create this hook

998
00:35:12,449 --> 00:35:14,688
with all of these, um.

999
00:35:15,199 --> 00:35:17,309
Uh, uh, proactive controls already

1000
00:35:17,309 --> 00:35:19,320
enabled and I don't have to write a single

1001
00:35:19,320 --> 00:35:21,458
line of code, right? Like you can take this home,

1002
00:35:21,719 --> 00:35:23,760
uh, and just enable this hook in

1003
00:35:23,760 --> 00:35:25,898
one mode with all these controls turned on

1004
00:35:26,039 --> 00:35:27,179
and see like, oh,

1005
00:35:27,449 --> 00:35:29,519
what resources are people in my

1006
00:35:29,519 --> 00:35:31,099
organization creating which are not compliant,

1007
00:35:31,438 --> 00:35:33,559
um, and also if you, if you walk in in

1008
00:35:33,559 --> 00:35:35,849
a multi uh accounts environment

1009
00:35:35,849 --> 00:35:38,159
you can run it on all accounts.

1010
00:35:38,760 --> 00:35:40,938
How many of you are walking with multi-account environment

1011
00:35:41,119 --> 00:35:42,519
from secure perspective?

1012
00:35:43,119 --> 00:35:44,820
How many of you implement control tower?

1013
00:35:46,168 --> 00:35:48,409
Oh cool. So after I we show

1014
00:35:48,570 --> 00:35:49,449
some cool stuff, yeah, yeah,

1015
00:35:49,728 --> 00:35:51,849
uh, so this is delightful that I'll create this hook. It'll

1016
00:35:51,849 --> 00:35:53,849
be in my account and I can play with it and experiment

1017
00:35:53,849 --> 00:35:55,889
with it, but in reality, like Steffi's saying, like

1018
00:35:55,889 --> 00:35:58,250
you really actually wanna make like apply

1019
00:35:58,250 --> 00:36:00,559
this to OUs and like enforce

1020
00:36:00,559 --> 00:36:01,269
it, um,

1021
00:36:01,570 --> 00:36:02,869
so he'll show you how to do that later.

1022
00:36:03,128 --> 00:36:05,250
Um, also, uh, you

1023
00:36:05,250 --> 00:36:07,648
know, I love terraform and

1024
00:36:07,648 --> 00:36:09,949
I've been talking a lot, so I'm actually gonna hand it over

1025
00:36:09,949 --> 00:36:11,989
to Sefi to show you how this can

1026
00:36:12,168 --> 00:36:14,429
work, uh, how you can use conservation hooks,

1027
00:36:14,610 --> 00:36:16,648
uh, to also run policy and practiceive

1028
00:36:16,648 --> 00:36:17,648
controls for terraform.

1029
00:36:18,010 --> 00:36:19,829
Yeah, thank you, David. You're welcome.

1030
00:36:20,760 --> 00:36:23,139
Let's just fix the credentials.

1031
00:36:23,719 --> 00:36:24,539
What's up?

1032
00:36:27,909 --> 00:36:28,579
Oh

1033
00:36:30,228 --> 00:36:31,280
I don't want to run

1034
00:36:31,958 --> 00:36:34,099
for for. Just

1035
00:36:34,099 --> 00:36:34,860
seems like what I want.

1036
00:36:35,789 --> 00:36:36,349
Yes,

1037
00:36:36,789 --> 00:36:38,869
so yeah, the question is like why not just

1038
00:36:38,869 --> 00:36:40,949
have hooks always run on change sets, is

1039
00:36:40,949 --> 00:36:41,938
that right? Basically,

1040
00:36:42,228 --> 00:36:44,809
yeah, that's a really good question. There is nuance,

1041
00:36:44,949 --> 00:36:47,148
um, so when we run at the resource level

1042
00:36:47,148 --> 00:36:49,148
we're literally about to call the APIs so we have

1043
00:36:49,148 --> 00:36:51,148
every piece of information that we

1044
00:36:51,148 --> 00:36:52,719
need to call the APIs

1045
00:36:52,989 --> 00:36:55,469
at the change set time there are dynamic

1046
00:36:55,469 --> 00:36:57,668
values that we don't necessarily know

1047
00:36:57,789 --> 00:36:59,909
so you don't always have all the information

1048
00:36:59,909 --> 00:37:01,610
that you need like that you would

1049
00:37:01,989 --> 00:37:02,809
need to make a

1050
00:37:03,228 --> 00:37:04,760
fully deterministic decision.

1051
00:37:05,079 --> 00:37:07,340
Um, so an example would be like

1052
00:37:07,579 --> 00:37:09,780
I need the subnet, uh, you're

1053
00:37:09,780 --> 00:37:11,929
running, um, you're creating a, uh,

1054
00:37:11,938 --> 00:37:12,898
RDS instance

1055
00:37:13,179 --> 00:37:15,458
you wanna look at the, uh, subnet

1056
00:37:15,458 --> 00:37:17,659
IDs and evaluate to make sure that they're,

1057
00:37:17,860 --> 00:37:20,139
um, correct, um, like allowed,

1058
00:37:20,378 --> 00:37:22,458
uh, if your cloud

1059
00:37:22,458 --> 00:37:24,539
formation template references the subnet

1060
00:37:24,539 --> 00:37:27,050
ID as an output of like the subnet

1061
00:37:27,050 --> 00:37:29,458
resource, there's no way like you can know that

1062
00:37:29,458 --> 00:37:30,860
until you create the resource.

1063
00:37:31,320 --> 00:37:33,398
Um, so basically like the,

1064
00:37:33,530 --> 00:37:34,889
it's, it's sort of like a filter you have

1065
00:37:35,489 --> 00:37:37,648
less information at changed that

1066
00:37:37,648 --> 00:37:39,570
time because um.

1067
00:37:40,478 --> 00:37:42,679
Properties that are only evaluated after a

1068
00:37:42,679 --> 00:37:44,840
resource is created are not available yet

1069
00:37:44,840 --> 00:37:46,239
because you've not created the resource,

1070
00:37:46,519 --> 00:37:48,260
um, but at resource time

1071
00:37:48,559 --> 00:37:50,719
you have all the information so usually

1072
00:37:50,719 --> 00:37:52,800
like for our hooks we generate, uh, we run

1073
00:37:52,800 --> 00:37:54,840
them on both and we usually write our rules

1074
00:37:54,840 --> 00:37:57,360
such that like if the value just isn't present

1075
00:37:57,360 --> 00:37:59,398
because it's like not, uh, because it

1076
00:37:59,398 --> 00:38:01,579
hasn't been resolved yet we just skip it.

1077
00:38:02,719 --> 00:38:04,090
So and that's why I.

1078
00:38:05,590 --> 00:38:06,760
Why Jean said

1079
00:38:07,280 --> 00:38:09,378
not that certain values cannot be elaborate

1080
00:38:09,378 --> 00:38:10,019
at this time.

1081
00:38:11,559 --> 00:38:12,250
Just seems to

1082
00:38:14,159 --> 00:38:17,300
Yes. Yes.

1083
00:38:18,409 --> 00:38:18,978
But that's what I'm saying.

1084
00:38:21,789 --> 00:38:24,369
Oh yeah, I mean that's fair. Uh, I think, um,

1085
00:38:24,909 --> 00:38:27,148
we just like Chances is

1086
00:38:27,148 --> 00:38:29,168
like Chances hook launched last year

1087
00:38:29,349 --> 00:38:31,829
and so like we don't have like a super opinionated

1088
00:38:31,829 --> 00:38:33,869
approach yet with like the wizard. It's just,

1089
00:38:34,070 --> 00:38:36,099
but it's like a fair point. Like I think if

1090
00:38:36,099 --> 00:38:38,228
I were to create a hook, like the defaults would be like

1091
00:38:38,228 --> 00:38:40,000
resources and change sets, um,

1092
00:38:40,309 --> 00:38:42,728
the reason why like some. Sometimes we don't

1093
00:38:42,909 --> 00:38:44,929
make that is because like Steffi will show you that like

1094
00:38:45,228 --> 00:38:47,469
like we're gonna apply this to terraform now and Terraform

1095
00:38:47,469 --> 00:38:49,360
doesn't have change sets so like

1096
00:38:50,070 --> 00:38:52,300
it's a good point, yeah, like I think for most

1097
00:38:52,300 --> 00:38:54,590
if you're using cloud formation I would almost always just

1098
00:38:54,590 --> 00:38:56,898
choose all of the things so like resources stack

1099
00:38:56,898 --> 00:38:59,050
change set so good

1100
00:39:01,070 --> 00:39:03,168
oh. A Party

1101
00:39:04,188 --> 00:39:06,228
Ah, OK, so this, the question is like how

1102
00:39:06,228 --> 00:39:08,228
do, what do I do with exceptions basically?

1103
00:39:09,269 --> 00:39:11,269
There's a few things you can do with exception, so I, I

1104
00:39:11,269 --> 00:39:13,329
skipped through the hook creation screen like pretty

1105
00:39:13,329 --> 00:39:15,628
quickly, but in there you can basically

1106
00:39:15,628 --> 00:39:18,059
exempt certain stacks, um,

1107
00:39:18,309 --> 00:39:20,228
you can just say, you know what, this is fine.

1108
00:39:20,590 --> 00:39:22,889
Uh, the other thing that I didn't show you

1109
00:39:23,039 --> 00:39:25,280
is that in the guard hook, um, you

1110
00:39:25,280 --> 00:39:27,898
can provide this thing called like an input parameter

1111
00:39:28,159 --> 00:39:30,199
which is, um, like, so a common thing that

1112
00:39:30,199 --> 00:39:31,458
we see is basically like,

1113
00:39:31,719 --> 00:39:33,878
um, like this stack

1114
00:39:33,878 --> 00:39:36,340
and this particular bucket are exempt

1115
00:39:36,599 --> 00:39:38,679
and so what you would do is like you would put

1116
00:39:38,679 --> 00:39:41,378
that into like a, a file, put it in S3,

1117
00:39:41,679 --> 00:39:43,719
and then you tell your guard hook to like

1118
00:39:43,719 --> 00:39:45,800
read that file and then that data

1119
00:39:45,800 --> 00:39:48,239
becomes like available um as

1120
00:39:48,239 --> 00:39:50,329
uh. Uh, like context to write your

1121
00:39:50,329 --> 00:39:52,570
rules. Another thing is if you look at the guard

1122
00:39:52,570 --> 00:39:53,550
repository,

1123
00:39:53,898 --> 00:39:55,958
if there are rules that you think are like useful

1124
00:39:55,958 --> 00:39:58,260
but like developers should be able to override them

1125
00:39:58,260 --> 00:40:00,800
themselves if they think, if you look at the guard repository,

1126
00:40:00,898 --> 00:40:02,978
basically like you can, you can include

1127
00:40:02,978 --> 00:40:05,228
additional metadata in the cloud formation template,

1128
00:40:05,500 --> 00:40:07,579
uh, at the top being like I acknowledge this but

1129
00:40:07,579 --> 00:40:09,699
I don't care and like you can write

1130
00:40:09,699 --> 00:40:11,829
your rules such that like it's like, OK, as

1131
00:40:11,829 --> 00:40:14,320
long if there's like a suppression rule in the template

1132
00:40:14,418 --> 00:40:16,458
I'll skip this rule, but it's up to you, but yeah.

1133
00:40:18,070 --> 00:40:19,639
Good good question. Uh, was there another question over there?

1134
00:40:20,389 --> 00:40:21,639
Oh cool

1135
00:40:22,550 --> 00:40:23,668
I had stated that um there's some certain clients.

1136
00:40:25,929 --> 00:40:27,969
Yes, uh, so terraform plan

1137
00:40:27,969 --> 00:40:30,010
is like almost exactly equivalent

1138
00:40:30,010 --> 00:40:31,708
to, uh, chain sets.

1139
00:40:32,329 --> 00:40:34,559
The weird thing with terraform plans is like we don't

1140
00:40:34,559 --> 00:40:36,570
actually like that's on the client side, so

1141
00:40:36,570 --> 00:40:38,570
we have no interception point for that so we

1142
00:40:38,570 --> 00:40:40,429
can't apply hooks at that level,

1143
00:40:40,739 --> 00:40:43,010
um, so we can do it with

1144
00:40:43,010 --> 00:40:45,329
resources in terraform because we have the AWS cloud

1145
00:40:45,329 --> 00:40:47,090
control provider which basically just takes.

1146
00:40:47,449 --> 00:40:49,449
Yeah, yeah, and Steffi's gonna show you that right now,

1147
00:40:49,500 --> 00:40:51,429
so I won't show you. David, you will help me.

1148
00:40:51,938 --> 00:40:54,110
Yeah, yeah. So, uh,

1149
00:40:54,300 --> 00:40:56,458
before we start, I will, uh, run tele from

1150
00:40:56,458 --> 00:40:58,250
apply and we're going to fail, OK,

1151
00:40:58,699 --> 00:41:00,860
everybody relax. We're going to fail. This is one of

1152
00:41:00,860 --> 00:41:01,840
the reasons we're doing it.

1153
00:41:02,239 --> 00:41:04,208
And then we start walking.

1154
00:41:04,489 --> 00:41:05,809
So I have two rules.

1155
00:41:06,208 --> 00:41:08,619
If you saw the template of David

1156
00:41:08,619 --> 00:41:10,628
before of the cloud formation template for

1157
00:41:10,628 --> 00:41:11,309
the lambda,

1158
00:41:11,648 --> 00:41:13,469
you use the deprecated runtime.

1159
00:41:13,938 --> 00:41:16,148
I think not 16 because he will create it for you.

1160
00:41:17,438 --> 00:41:19,809
So basically I created some guards that

1161
00:41:19,809 --> 00:41:20,869
check exactly

1162
00:41:21,688 --> 00:41:23,728
which run time is inside the resource

1163
00:41:23,728 --> 00:41:25,889
because you don't want to run deprecated

1164
00:41:25,889 --> 00:41:27,918
run time. And you

1165
00:41:27,918 --> 00:41:30,128
see that uh as David mentioned, we use

1166
00:41:30,128 --> 00:41:32,159
resource type AWS lambda function, and

1167
00:41:32,159 --> 00:41:34,599
then we take the runtime variables, but

1168
00:41:34,599 --> 00:41:35,659
from where we take it.

1169
00:41:36,519 --> 00:41:38,750
We take it from the cloud formation

1170
00:41:39,889 --> 00:41:40,789
template reference.

1171
00:41:41,090 --> 00:41:43,208
Are you familiar with that? Who is working with

1172
00:41:43,208 --> 00:41:44,188
the cloud formation?

1173
00:41:45,010 --> 00:41:47,050
Yeah, so, also in the, in

1174
00:41:47,050 --> 00:41:49,050
the rules, you can see which variables you

1175
00:41:49,050 --> 00:41:49,978
can take from it

1176
00:41:50,530 --> 00:41:52,559
and then just paste it inside the

1177
00:41:52,559 --> 00:41:54,570
rule. For example, you can see all the version of

1178
00:41:54,570 --> 00:41:55,090
the lambda.

1179
00:41:55,688 --> 00:41:57,949
But now that the telephone is running,

1180
00:41:58,449 --> 00:42:01,010
I want to see, to show you how we're going to use the AWCC

1181
00:42:01,489 --> 00:42:02,449
to create the hook.

1182
00:42:02,728 --> 00:42:04,469
OK? So we'll do it really fast.

1183
00:42:04,958 --> 00:42:06,228
We're going to create a hook

1184
00:42:07,050 --> 00:42:07,769
with guard.

1185
00:42:09,590 --> 00:42:10,340
OK,

1186
00:42:10,860 --> 00:42:11,530
let me browse

1187
00:42:12,119 --> 00:42:13,978
the file that I zipped before.

1188
00:42:16,659 --> 00:42:19,010
OK, and I'm going to use the same bucket

1189
00:42:19,429 --> 00:42:20,688
for the results also.

1190
00:42:21,349 --> 00:42:23,469
And of course the name, but in

1191
00:42:23,469 --> 00:42:25,610
the hook target we're going to use the control

1192
00:42:25,610 --> 00:42:27,050
cloud control APIs,

1193
00:42:27,429 --> 00:42:30,070
OK, which basically is going to catch the telephone

1194
00:42:30,070 --> 00:42:31,329
uh applies that we're doing

1195
00:42:31,789 --> 00:42:33,829
and it is exactly the same thing like cloud formation

1196
00:42:33,829 --> 00:42:35,949
nos we can, uh, choose what action we want,

1197
00:42:36,110 --> 00:42:38,269
create, update, etc. and

1198
00:42:38,269 --> 00:42:40,090
we can choose if we want to warn or fail.

1199
00:42:41,159 --> 00:42:43,510
OK, so I already created one of the hooks.

1200
00:42:43,809 --> 00:42:44,628
Now let's see

1201
00:42:45,090 --> 00:42:46,929
what happened to our telephone.

1202
00:42:49,398 --> 00:42:50,010
Oh

1203
00:42:52,530 --> 00:42:54,159
OK, so basically what we did here.

1204
00:42:55,489 --> 00:42:57,530
Uh, I also use QO to

1205
00:42:57,969 --> 00:42:58,688
generate it.

1206
00:42:59,010 --> 00:43:01,128
OK, we're going to use uh to try to create

1207
00:43:01,128 --> 00:43:01,869
a lambda

1208
00:43:02,769 --> 00:43:03,809
with run time.

1209
00:43:04,739 --> 00:43:05,360
Of

1210
00:43:06,199 --> 00:43:07,429
no DS 18,

1211
00:43:07,989 --> 00:43:08,918
which is deprecated.

1212
00:43:10,010 --> 00:43:12,019
And also we're going to

1213
00:43:12,019 --> 00:43:14,280
try to deploy an F3 with

1214
00:43:14,280 --> 00:43:16,860
a lot of missing variables

1215
00:43:16,860 --> 00:43:19,139
like block public access, bucket encryption,

1216
00:43:19,458 --> 00:43:20,139
etc.

1217
00:43:20,659 --> 00:43:22,079
Now there is something new.

1218
00:43:23,030 --> 00:43:24,648
My skin is a little bit big for me.

1219
00:43:25,519 --> 00:43:27,000
It's OK. You can see like this.

1220
00:43:29,300 --> 00:43:31,500
You can see that uh uh

1221
00:43:31,500 --> 00:43:33,619
also in the telephone in the ID

1222
00:43:33,860 --> 00:43:35,559
you can see the reason

1223
00:43:36,099 --> 00:43:38,179
of why the hook fail you.

1224
00:43:38,619 --> 00:43:40,849
OK, for example, in the

1225
00:43:41,378 --> 00:43:43,599
S3 bucket you can see that it's failed because

1226
00:43:43,599 --> 00:43:45,530
S3 encryption required

1227
00:43:46,199 --> 00:43:48,280
S3 no public read in S3 version enabled

1228
00:43:48,280 --> 00:43:50,469
like David show before in the you can see

1229
00:43:50,469 --> 00:43:52,500
through the ID, but

1230
00:43:52,500 --> 00:43:54,500
if I want to see the

1231
00:43:54,500 --> 00:43:56,619
exact reason all the output of

1232
00:43:56,619 --> 00:43:58,039
the souk of what happened.

1233
00:43:58,340 --> 00:43:59,590
So I can just take

1234
00:44:00,688 --> 00:44:02,438
Yes, Jason.

1235
00:44:05,628 --> 00:44:06,188
Add

1236
00:44:07,389 --> 00:44:09,679
a kind of a dash and then it will be to my STD

1237
00:44:09,679 --> 00:44:10,349
out over here.

1238
00:44:12,269 --> 00:44:12,849
OK,

1239
00:44:14,309 --> 00:44:16,550
so if I'm a developer, I can use it

1240
00:44:16,820 --> 00:44:18,989
for my VS code, and if I'm a click ops

1241
00:44:18,989 --> 00:44:20,418
guy, I can use it for theUI,

1242
00:44:21,110 --> 00:44:21,628
right.

1243
00:44:22,409 --> 00:44:23,010
OK.

1244
00:44:24,878 --> 00:44:25,750
Uh,

1245
00:44:26,110 --> 00:44:27,409
what is we want to see?

1246
00:44:29,780 --> 00:44:31,398
Just to show you from here also.

1247
00:44:33,898 --> 00:44:36,159
You see, it's exactly the same like the like the cloud

1248
00:44:36,159 --> 00:44:38,300
formation looks. It's working the same with styrofoam.

1249
00:44:40,128 --> 00:44:43,659
Right? OK.

1250
00:44:44,699 --> 00:44:46,179
Basically this is a demo of.

1251
00:44:46,898 --> 00:44:49,119
Yeah, the, the cool thing, so

1252
00:44:49,869 --> 00:44:52,260
Sefi used the AWSCC provider

1253
00:44:52,260 --> 00:44:54,360
which is different from the AWS provider.

1254
00:44:54,739 --> 00:44:56,648
Um, with the AWSCC provider,

1255
00:44:57,039 --> 00:44:59,219
um, basically like, uh,

1256
00:44:59,269 --> 00:45:01,309
it uses cloud control API under the hood, so

1257
00:45:01,309 --> 00:45:03,458
it takes the resource and it sends it to cloud

1258
00:45:03,458 --> 00:45:04,969
formation to create it rather than

1259
00:45:05,309 --> 00:45:07,469
orchestrating API calls directly on the client

1260
00:45:07,469 --> 00:45:08,929
side like the AWS provider

1261
00:45:09,188 --> 00:45:11,389
since we can do since like it sends the

1262
00:45:11,389 --> 00:45:13,889
entire payload to us before it gets created,

1263
00:45:14,070 --> 00:45:16,090
that's why hooks can run at the same time,

1264
00:45:16,530 --> 00:45:18,208
um, that's why you can catch it before, yep,

1265
00:45:18,989 --> 00:45:21,309
exactly. So we want to show now

1266
00:45:21,309 --> 00:45:23,739
of how to implement it on

1267
00:45:23,739 --> 00:45:24,750
organization unit, yeah,

1268
00:45:25,030 --> 00:45:27,070
um, so any, any questions about the terraform

1269
00:45:27,070 --> 00:45:28,050
implementation.

1270
00:45:30,780 --> 00:45:32,320
Oh yeah, can you show the provider?

1271
00:45:33,280 --> 00:45:35,260
What do you mean provider? Um, yeah.

1272
00:45:38,340 --> 00:45:40,340
Yeah, so the required provider here is Hashi

1273
00:45:40,340 --> 00:45:42,398
Corp AWSWCC, yeah,

1274
00:45:43,030 --> 00:45:44,090
instead of AWS.

1275
00:45:44,898 --> 00:45:46,918
This is a different because as David

1276
00:45:46,918 --> 00:45:48,929
mentioned we want to uh catch it

1277
00:45:48,929 --> 00:45:50,918
before it create a release resource so it's not

1278
00:45:51,300 --> 00:45:51,969
doing telephone

1279
00:45:52,478 --> 00:45:53,760
uh API calls

1280
00:45:54,458 --> 00:45:56,510
straight to the AWS account. It's

1281
00:45:56,510 --> 00:45:58,820
it's sending the payload and then you can

1282
00:45:58,820 --> 00:46:00,059
block it before it's happened.

1283
00:46:00,579 --> 00:46:03,159
Yeah, basically all of these hooks

1284
00:46:03,219 --> 00:46:05,039
is if we start this talk

1285
00:46:05,300 --> 00:46:06,918
when we talk about it, it's to

1286
00:46:07,260 --> 00:46:07,800
uh.

1287
00:46:08,789 --> 00:46:10,878
Stop people to get call after

1288
00:46:10,878 --> 00:46:13,079
hours because they create something that

1289
00:46:13,079 --> 00:46:15,239
they didn't supposed to create and they didn't

1290
00:46:15,239 --> 00:46:17,300
even know that they're supposed

1291
00:46:17,559 --> 00:46:18,628
to do it that way. Yeah, yeah, yeah,

1292
00:46:19,320 --> 00:46:19,849
right?

1293
00:46:23,208 --> 00:46:24,159
Yeah, yeah,

1294
00:46:24,489 --> 00:46:26,570
yeah. Right, so this is not a

1295
00:46:26,570 --> 00:46:28,809
drop-in replacement if you have existing terraform

1296
00:46:28,809 --> 00:46:30,128
and you're using AWS,

1297
00:46:30,489 --> 00:46:32,530
the AWS provider. Hooks is not very

1298
00:46:32,530 --> 00:46:33,500
helpful for you

1299
00:46:33,849 --> 00:46:36,030
going forward. Um, so our relationship

1300
00:46:36,030 --> 00:46:38,429
with Hashy Corp is, uh, like the

1301
00:46:38,849 --> 00:46:40,889
Hashy Corp owns this provider, but

1302
00:46:40,889 --> 00:46:42,329
like it's a partnership with us,

1303
00:46:42,610 --> 00:46:43,929
um, and

1304
00:46:44,300 --> 00:46:46,438
one of the main reasons why like we partnered with Hashi

1305
00:46:46,438 --> 00:46:48,530
to create this is not for hooks at all. That's just

1306
00:46:48,530 --> 00:46:49,590
like a nice side effect,

1307
00:46:50,050 --> 00:46:52,469
but mostly around like coverage. So,

1308
00:46:52,530 --> 00:46:54,489
um, we, we've noticed.

1309
00:46:54,978 --> 00:46:57,550
Um, and our customers have noticed that like

1310
00:46:57,550 --> 00:46:59,929
new feature launches and, um,

1311
00:47:00,429 --> 00:47:01,360
and terraform

1312
00:47:02,110 --> 00:47:03,719
like can be

1313
00:47:04,148 --> 00:47:06,309
like they can lag, uh they can get there

1314
00:47:06,309 --> 00:47:08,429
before AWS support, uh, AWS

1315
00:47:08,429 --> 00:47:09,909
and confirmation support resources,

1316
00:47:10,188 --> 00:47:12,208
but we've noticed a lot with like AWS we

1317
00:47:12,208 --> 00:47:14,550
have like mandates on like launching with

1318
00:47:14,550 --> 00:47:16,699
resource support immediately, um, that

1319
00:47:16,708 --> 00:47:18,789
there's like this growing gap of sort of like

1320
00:47:18,789 --> 00:47:21,010
medium to like lower popular

1321
00:47:21,010 --> 00:47:23,050
resources and terraform just never getting

1322
00:47:23,050 --> 00:47:24,010
like support.

1323
00:47:24,340 --> 00:47:26,418
Um, and so to like help with that we

1324
00:47:26,418 --> 00:47:28,780
basically said hey like yes use AWS

1325
00:47:28,780 --> 00:47:31,099
provider for stuff if you want, but also you have

1326
00:47:31,099 --> 00:47:33,099
access to the cloud formation versions as well

1327
00:47:33,099 --> 00:47:35,159
so you can mix and match but, uh,

1328
00:47:35,208 --> 00:47:37,300
and like a side effect of that is that

1329
00:47:37,300 --> 00:47:39,519
with hooks you can also intercept like

1330
00:47:39,519 --> 00:47:40,989
governancey stuff with that.

1331
00:47:41,340 --> 00:47:43,378
But yes, to your point, like there's not a

1332
00:47:43,378 --> 00:47:45,579
lot of sugar coating on that if you're using the AWS

1333
00:47:45,579 --> 00:47:46,469
provider. Later today,

1334
00:47:46,889 --> 00:47:48,789
um, there we can't, um,

1335
00:47:49,648 --> 00:47:51,809
put hooks in that call path. The

1336
00:47:51,809 --> 00:47:54,188
only option you have really is sort of like IM

1337
00:47:54,409 --> 00:47:56,708
and like SCPs to do, uh,

1338
00:47:56,929 --> 00:47:59,010
gov governancey stuff, but those are

1339
00:47:59,010 --> 00:48:01,010
RCPs, clarative policies. There's a

1340
00:48:01,010 --> 00:48:03,090
lot of options that you can do it in the

1341
00:48:03,090 --> 00:48:04,938
organization level through control tower

1342
00:48:05,250 --> 00:48:07,458
to block from this thing to happen,

1343
00:48:08,110 --> 00:48:08,679
uh, but

1344
00:48:08,969 --> 00:48:10,708
yeah. Cool,

1345
00:48:11,559 --> 00:48:12,889
cool, uh, one more question, yeah.

1346
00:48:16,820 --> 00:48:18,878
got Yes, yes,

1347
00:48:19,079 --> 00:48:21,239
yes, change sets, uh, change sets

1348
00:48:21,438 --> 00:48:23,719
and hooks and the control

1349
00:48:23,719 --> 00:48:26,039
hook and lambda and guard hook, all those things are also

1350
00:48:26,039 --> 00:48:27,760
in GovCloud, uh,

1351
00:48:28,119 --> 00:48:30,320
the China regions and the secret regions

1352
00:48:30,320 --> 00:48:30,898
as well,

1353
00:48:31,398 --> 00:48:33,559
yeah, we're, uh, actually, um, we

1354
00:48:33,559 --> 00:48:35,478
had a really interesting launching cloud formation this,

1355
00:48:35,800 --> 00:48:38,188
uh, like last week or this week. I don't know what day it is, um,

1356
00:48:38,438 --> 00:48:40,519
where, uh, we do early validation, so

1357
00:48:40,519 --> 00:48:42,679
like basically. We'll check before a cloud

1358
00:48:42,679 --> 00:48:44,800
formation stack runs to make sure that

1359
00:48:44,800 --> 00:48:46,958
like the resources that you're trying to create don't

1360
00:48:46,958 --> 00:48:49,079
already exist or like some properties aren't

1361
00:48:49,079 --> 00:48:51,079
set correctly um it's sort of like

1362
00:48:51,079 --> 00:48:53,199
a developer experience thing but

1363
00:48:53,199 --> 00:48:54,659
it's built on top of hooks

1364
00:48:54,958 --> 00:48:57,000
so we're we're like

1365
00:48:57,000 --> 00:48:59,159
considered part of like launch blocking for news

1366
00:48:59,159 --> 00:49:01,320
for new region build so hooks and

1367
00:49:01,320 --> 00:49:02,860
like all of these features are there

1368
00:49:03,199 --> 00:49:04,760
um for all new regions.

1369
00:49:06,219 --> 00:49:08,659
Would you like to see how to implement the the

1370
00:49:08,659 --> 00:49:10,159
controls and hooks

1371
00:49:10,659 --> 00:49:11,639
on organization?

1372
00:49:14,050 --> 00:49:18,458
Yes. OK.

1373
00:49:19,510 --> 00:49:21,349
So, uh, we're going to

1374
00:49:22,269 --> 00:49:23,188
close all of this.

1375
00:49:23,628 --> 00:49:24,550
Uh,

1376
00:49:25,110 --> 00:49:27,250
so I have a multi-count strategy, a landing zone,

1377
00:49:27,340 --> 00:49:29,599
uh, in this, uh, demo environment, of course.

1378
00:49:29,949 --> 00:49:32,010
And we're going to, uh, get inside

1379
00:49:32,010 --> 00:49:33,329
to the management account.

1380
00:49:37,340 --> 00:49:38,728
It's up

1381
00:49:39,269 --> 00:49:41,789
and we will go to control towers.

1382
00:49:42,309 --> 00:49:43,969
Everybody familiar with control tower?

1383
00:49:44,958 --> 00:49:46,000
Yeah, cool.

1384
00:49:48,938 --> 00:49:50,750
And we will go to controlled catalog.

1385
00:49:51,809 --> 00:49:54,128
Just have a new face now, which is

1386
00:49:54,128 --> 00:49:56,550
amazing. And

1387
00:49:56,550 --> 00:49:58,860
we're going to filter the controls

1388
00:49:58,860 --> 00:49:59,469
proactive.

1389
00:50:01,438 --> 00:50:02,878
Behavior, OK.

1390
00:50:03,800 --> 00:50:04,978
And then we can choose

1391
00:50:06,550 --> 00:50:07,239
whatever we want.

1392
00:50:08,978 --> 00:50:11,389
Uh, any specific redshift.

1393
00:50:12,449 --> 00:50:13,349
Which is stuff.

1394
00:50:14,329 --> 00:50:16,449
And you can see exactly what framework like

1395
00:50:16,449 --> 00:50:17,599
David mentioned before, uh,

1396
00:50:18,449 --> 00:50:20,128
before, and

1397
00:50:20,409 --> 00:50:22,809
which regions are also uh deployed.

1398
00:50:22,929 --> 00:50:25,010
If you work in a region that this control is

1399
00:50:25,010 --> 00:50:27,168
not available, you cannot deploy it,

1400
00:50:27,489 --> 00:50:28,139
basically.

1401
00:50:28,489 --> 00:50:30,110
And we're going to do enable control.

1402
00:50:30,769 --> 00:50:32,809
And here we can uh uh

1403
00:50:32,809 --> 00:50:34,849
see also the selected control. You

1404
00:50:34,849 --> 00:50:37,050
can choose multiple controls.

1405
00:50:37,159 --> 00:50:39,369
You don't have to choose this one, just for this demo, choose

1406
00:50:39,369 --> 00:50:41,139
one, so it will be faster.

1407
00:50:41,478 --> 00:50:43,809
And then we have the organization units

1408
00:50:43,809 --> 00:50:45,208
that we can choose.

1409
00:50:45,530 --> 00:50:47,949
So let's take sandbox for example.

1410
00:50:49,219 --> 00:50:51,059
So I can just let me see that we have a

1411
00:50:51,840 --> 00:50:53,099
count over there for a second.

1412
00:51:01,019 --> 00:51:05,668
OK. box.

1413
00:51:06,559 --> 00:51:08,728
So we choose the OU we can target it and

1414
00:51:08,728 --> 00:51:10,070
we do enable controls.

1415
00:51:11,269 --> 00:51:13,369
It will take several seconds.

1416
00:51:14,878 --> 00:51:17,079
Until it will be provisioned, you can see all the

1417
00:51:17,079 --> 00:51:19,139
controls that I would implemented.

1418
00:51:21,820 --> 00:51:23,019
OK, we'll give it a second.

1419
00:51:24,820 --> 00:51:26,929
And the good thing about it that you can from

1420
00:51:26,929 --> 00:51:28,360
here you can choose

1421
00:51:28,978 --> 00:51:31,139
from a security perspective if you want

1422
00:51:31,139 --> 00:51:33,139
a specific framework and then you

1423
00:51:33,139 --> 00:51:35,260
can enable those controls. You

1424
00:51:35,260 --> 00:51:37,378
need to do it carefully because you do

1425
00:51:37,378 --> 00:51:38,000
want that

1426
00:51:38,300 --> 00:51:40,378
your team will succeed in this

1427
00:51:40,378 --> 00:51:41,958
stuff and

1428
00:51:42,510 --> 00:51:43,219
let's see if it's.

1429
00:51:45,619 --> 00:51:47,949
Yeah, we'll go to the account.

1430
00:51:50,269 --> 00:51:52,378
Reinvent. The cool thing about like

1431
00:51:52,378 --> 00:51:54,429
this approach versus the one I showed like I was

1432
00:51:54,429 --> 00:51:56,289
enabling the hook in like an individual account.

1433
00:51:56,668 --> 00:51:58,840
He's enabling it for like an entire OU

1434
00:51:59,559 --> 00:52:01,708
and like there's a like resource policy

1435
00:52:01,708 --> 00:52:04,030
on that hook that basically means you cannot turn it off

1436
00:52:04,030 --> 00:52:05,829
unless you are like the

1437
00:52:06,188 --> 00:52:07,320
in the um

1438
00:52:07,869 --> 00:52:08,728
uh root account.

1439
00:52:09,228 --> 00:52:11,789
So, OK, so you can see we have the guard

1440
00:52:11,789 --> 00:52:13,909
full governance that I built before and now we

1441
00:52:13,909 --> 00:52:15,728
have also the control tower hook.

1442
00:52:16,128 --> 00:52:17,659
That managed by control tower.

1443
00:52:18,079 --> 00:52:20,239
So under this OU I have

1444
00:52:20,239 --> 00:52:22,320
like 56, 10, 100

1445
00:52:22,320 --> 00:52:24,429
accounts. It's will implement to

1446
00:52:24,429 --> 00:52:26,438
all of these accounts and of course nobody can

1447
00:52:26,438 --> 00:52:27,159
be deleted

1448
00:52:27,478 --> 00:52:28,619
and that's where you can

1449
00:52:28,958 --> 00:52:30,219
secure your environment

1450
00:52:31,110 --> 00:52:32,780
from a management account.

1451
00:52:33,929 --> 00:52:35,938
The nice thing about the control catalog through control

1452
00:52:35,938 --> 00:52:37,958
tower too is that this talk is called from

1453
00:52:37,958 --> 00:52:40,110
like reactive to proactive. um,

1454
00:52:40,340 --> 00:52:42,389
the control tower catalog also

1455
00:52:42,389 --> 00:52:44,559
like it groups things by control

1456
00:52:44,559 --> 00:52:46,659
objective so like here's the thing like the

1457
00:52:46,659 --> 00:52:49,079
control objective that I wanna accomplish

1458
00:52:49,179 --> 00:52:51,679
like no public S3 buckets um

1459
00:52:52,260 --> 00:52:54,500
through the control catalog like you can enable

1460
00:52:54,500 --> 00:52:56,760
the proactive version of it but you can also

1461
00:52:56,760 --> 00:52:58,820
enable the reactive version, the detective

1462
00:52:58,820 --> 00:52:59,418
version too,

1463
00:52:59,699 --> 00:53:01,905
so it's like a defense. Depth thing like if someone

1464
00:53:01,905 --> 00:53:03,905
goes to the console like they're not going to get or

1465
00:53:03,905 --> 00:53:05,945
using the AWS provider in terraform

1466
00:53:05,945 --> 00:53:08,043
they're not going to hit hooks so you still probably

1467
00:53:08,043 --> 00:53:10,425
want detective controls as well. Basically

1468
00:53:10,425 --> 00:53:12,543
you want to implement all the

1469
00:53:12,543 --> 00:53:14,543
kinds of controls. It depends on the environment

1470
00:53:14,543 --> 00:53:16,583
and the security requirements, but what

1471
00:53:16,583 --> 00:53:19,224
I do want to show you here is that

1472
00:53:19,583 --> 00:53:21,695
you have common controls from control tower, of

1473
00:53:21,695 --> 00:53:23,824
course. It's also divide by

1474
00:53:23,824 --> 00:53:26,824
services. That means if you're using and

1475
00:53:26,824 --> 00:53:27,644
stuff like this

1476
00:53:28,264 --> 00:53:29,063
frameworks.

1477
00:53:30,570 --> 00:53:32,619
And uh uh and you can see

1478
00:53:32,619 --> 00:53:34,989
also uh which controllers are enabled

1479
00:53:35,739 --> 00:53:37,739
and this is also something cool to see

1480
00:53:37,739 --> 00:53:39,860
exactly uh on which accounts it's

1481
00:53:39,860 --> 00:53:42,000
enabled if you want to uh

1482
00:53:42,000 --> 00:53:43,699
I don't know invested how to say uh

1483
00:53:44,978 --> 00:53:47,099
like look yeah yeah if you wanna

1484
00:53:47,099 --> 00:53:49,239
look at like the impact that this is having

1485
00:53:49,239 --> 00:53:51,478
on like different accounts that you have which accounts

1486
00:53:51,869 --> 00:53:53,478
exactly and which framework also

1487
00:53:53,860 --> 00:53:54,659
which is also cool.

1488
00:53:55,789 --> 00:53:57,590
Yeah, any questions?

1489
00:53:57,989 --> 00:54:00,010
Oh. Increased from 100

1490
00:54:00,010 --> 00:54:01,030
deployable.

1491
00:54:01,780 --> 00:54:03,849
Uh, controls are the ones that are in.

1492
00:54:04,898 --> 00:54:05,989
It was like 50 back

1493
00:54:07,289 --> 00:54:08,128
From the quarter?

1494
00:54:10,570 --> 00:54:12,909
Yeah, did you open a sport case?

1495
00:54:15,030 --> 00:54:17,378
I, I think the, um, the, I,

1496
00:54:17,590 --> 00:54:19,668
I'm pretty sure that they use the same like

1497
00:54:19,668 --> 00:54:21,820
implementation of the control hook as

1498
00:54:21,820 --> 00:54:24,030
we have and we've completely rewrote it,

1499
00:54:24,199 --> 00:54:26,269
um, and so I'm pretty sure that that

1500
00:54:26,269 --> 00:54:28,219
limit is now gone um

1501
00:54:28,628 --> 00:54:30,909
we should double check to make sure yeah yeah

1502
00:54:30,909 --> 00:54:33,059
but we'll take it offline afterward and we'll take your

1503
00:54:33,059 --> 00:54:35,349
details, no problem, yeah, they, they had to rewrite

1504
00:54:35,349 --> 00:54:37,590
it basically for like uh

1505
00:54:37,590 --> 00:54:39,688
we, we wrote rewrote the implementation,

1506
00:54:39,789 --> 00:54:41,909
um, to support this, uh.

1507
00:54:42,478 --> 00:54:44,840
Because actually it was really funny, um, the hook,

1508
00:54:45,000 --> 00:54:47,119
the hook run times used to be constrained to like Java

1509
00:54:47,119 --> 00:54:47,739
and Python.

1510
00:54:48,000 --> 00:54:50,119
We added rust guard is written in rust.

1511
00:54:50,159 --> 00:54:51,840
All of these controls are written in GARD,

1512
00:54:52,320 --> 00:54:54,398
um, so we're able to like they were doing

1513
00:54:54,398 --> 00:54:56,519
truly gnarly things with the JVM in order

1514
00:54:56,519 --> 00:54:58,559
to like run rust, um, but we rewrote it and

1515
00:54:58,559 --> 00:55:00,639
now I think, um, probably a lot of these

1516
00:55:00,639 --> 00:55:02,679
limits are gone, but we should definitely double click for

1517
00:55:02,679 --> 00:55:03,219
that for you.

1518
00:55:04,168 --> 00:55:05,168
Any more questions?

1519
00:55:07,898 --> 00:55:09,260
Oh, there are a question in the back.

1520
00:55:10,449 --> 00:55:11,989
Pence confirmation versus.

1521
00:55:13,469 --> 00:55:15,280
Of course cloud formation, um,

1522
00:55:16,139 --> 00:55:18,398
just kidding, they're, they're paying my bills. I would say use,

1523
00:55:18,418 --> 00:55:20,849
use what's right for you and your

1524
00:55:20,849 --> 00:55:22,860
organization. I love, I think.

1525
00:55:23,199 --> 00:55:25,309
For for me for cloud

1526
00:55:25,309 --> 00:55:27,539
formation you get a lot of safety

1527
00:55:27,539 --> 00:55:28,820
and like auditability

1528
00:55:29,280 --> 00:55:31,280
built in if you have like if you're

1529
00:55:31,280 --> 00:55:33,309
using organizations um

1530
00:55:33,309 --> 00:55:35,320
and you like you have to manage an organization it's

1531
00:55:35,320 --> 00:55:37,398
really well integrated with that there's

1532
00:55:37,398 --> 00:55:39,438
a product called stack sets which basically you

1533
00:55:39,438 --> 00:55:40,340
can like provision

1534
00:55:40,878 --> 00:55:43,000
confirmation stacks across um

1535
00:55:43,199 --> 00:55:45,000
OEUs and accounts by default.

1536
00:55:45,739 --> 00:55:46,978
I would also say, and I,

1537
00:55:47,300 --> 00:55:49,458
I don't think this is a huge secret, so I don't mind telling you

1538
00:55:49,458 --> 00:55:51,539
that like most cloud formation customers

1539
00:55:51,539 --> 00:55:53,929
are also terraform customers, um,

1540
00:55:54,179 --> 00:55:56,289
so like a lot of shops just use what's right

1541
00:55:56,289 --> 00:55:57,199
for like the right thing,

1542
00:55:57,809 --> 00:55:59,860
yeah, and basically you also you have, uh,

1543
00:55:59,938 --> 00:56:01,260
if you want to multi

1544
00:56:01,590 --> 00:56:03,769
multi uh structure you have uh. The solution

1545
00:56:03,769 --> 00:56:05,929
of teleforms at the factory for telephone, which

1546
00:56:05,929 --> 00:56:07,449
is also very good, yeah,

1547
00:56:07,728 --> 00:56:09,849
but what you run into when you like

1548
00:56:09,849 --> 00:56:11,969
use terraform just from an AWS perspective

1549
00:56:11,969 --> 00:56:14,010
like I love terraform is that like

1550
00:56:14,010 --> 00:56:16,329
a lot of work that we do like hooks

1551
00:56:16,329 --> 00:56:18,728
like are like it's supported with an asterisk

1552
00:56:18,728 --> 00:56:20,688
so things like that sort of happen, um,

1553
00:56:21,010 --> 00:56:22,570
but uh yeah so.

1554
00:56:24,478 --> 00:56:27,628
Yeah. Also,

1555
00:56:27,668 --> 00:56:29,909
I love the CDK, so like I, I, HDL

1556
00:56:29,909 --> 00:56:32,208
is fine, but like I love the CDK and I love

1557
00:56:32,208 --> 00:56:34,688
like writing my code and um

1558
00:56:34,688 --> 00:56:35,860
type script so yeah.

1559
00:56:36,769 --> 00:56:39,050
Yeah Cool.

1560
00:56:39,110 --> 00:56:40,789
Any other questions y'all? Oh yeah.

1561
00:56:41,530 --> 00:56:43,800
Control to our site, you make a torn instead of failed.

1562
00:56:44,559 --> 00:56:45,159
It's a

1563
00:56:45,519 --> 00:56:47,579
wonderful idea. Uh, yeah, so, uh,

1564
00:56:47,840 --> 00:56:49,840
the technically, yes, uh,

1565
00:56:49,958 --> 00:56:52,119
and we're working with them to figure out like what the

1566
00:56:52,119 --> 00:56:53,659
right experience for that is.

1567
00:56:53,918 --> 00:56:55,739
I think some of that work is like, um,

1568
00:56:56,159 --> 00:56:58,679
under the, under the covers like the hooks

1569
00:56:58,679 --> 00:57:00,458
team has been doing some work on like.

1570
00:57:00,728 --> 00:57:01,800
Back port like um

1571
00:57:02,489 --> 00:57:04,889
sending invocation history backwards

1572
00:57:04,889 --> 00:57:07,030
to like the like root account

1573
00:57:07,250 --> 00:57:09,070
basically so like you can actually

1574
00:57:09,530 --> 00:57:11,969
do some observability on it and say like hey

1575
00:57:11,969 --> 00:57:14,489
like ok this is failing for 100%

1576
00:57:14,489 --> 00:57:16,469
of the accounts that it is deployed into

1577
00:57:16,728 --> 00:57:18,929
um so we're working with them to support that

1578
00:57:18,929 --> 00:57:19,688
so that's good.

1579
00:57:21,708 --> 00:57:23,958
pretty challenging from our side there's all the problems.

1580
00:57:26,539 --> 00:57:27,099
Yeah.

1581
00:57:30,918 --> 00:57:33,030
We had on warn right to see like what

1582
00:57:33,030 --> 00:57:36,188
the stats. Yes,

1583
00:57:37,570 --> 00:57:39,969
yeah, yeah, uh, I will show you one thing. So we did launch

1584
00:57:39,969 --> 00:57:42,489
some like, uh, like UX

1585
00:57:42,489 --> 00:57:44,110
improvements. It's, it's still not,

1586
00:57:44,409 --> 00:57:46,699
I, I will tell you two things about observability,

1587
00:57:46,929 --> 00:57:49,349
um. 100,

1588
00:57:49,438 --> 00:57:52,179
connections. Does anyone have any feedback for Amazon? Um,

1589
00:57:52,878 --> 00:57:55,539
uh, one is that, uh,

1590
00:57:55,599 --> 00:57:57,860
we don't talk about this much, but you can actually integrate,

1591
00:57:58,000 --> 00:58:00,000
uh, like there's an event

1592
00:58:00,349 --> 00:58:01,059
bridge

1593
00:58:01,539 --> 00:58:03,639
hook for hooks, so like you can create

1594
00:58:03,639 --> 00:58:05,878
a any time we invoke a hook, like

1595
00:58:05,878 --> 00:58:07,889
we'll send, we send invocations to event bridge,

1596
00:58:07,949 --> 00:58:10,159
you can route it to wherever you want. This is how we're implementing

1597
00:58:10,159 --> 00:58:11,659
this under the hood for control tower,

1598
00:58:11,918 --> 00:58:13,139
um, but also,

1599
00:58:13,559 --> 00:58:14,179
um,

1600
00:58:14,918 --> 00:58:16,878
we, so you can see.

1601
00:58:17,530 --> 00:58:18,869
Uh, like,

1602
00:58:19,329 --> 00:58:21,469
we've launched, uh, this new

1603
00:58:21,889 --> 00:58:23,929
screen, basically. I don't know why

1604
00:58:23,929 --> 00:58:26,050
I turn off results. Basically you can see

1605
00:58:26,050 --> 00:58:28,409
all the invocations that happen in this particular

1606
00:58:28,409 --> 00:58:29,628
account and see like

1607
00:58:30,239 --> 00:58:32,128
whether they passed or failed and like

1608
00:58:32,449 --> 00:58:34,849
what the validation error was the same

1609
00:58:34,849 --> 00:58:37,659
for the exact reason of like it's actually really difficult

1610
00:58:37,659 --> 00:58:39,849
without something like this to see like the impact

1611
00:58:39,849 --> 00:58:41,010
that a worn hook is having.

1612
00:58:41,668 --> 00:58:43,800
Um, yeah, so, and observability

1613
00:58:43,800 --> 00:58:45,500
is sort of like the next

1614
00:58:45,889 --> 00:58:47,949
is observability in

1615
00:58:47,949 --> 00:58:50,000
organizations more integrations is sort

1616
00:58:50,000 --> 00:58:52,239
of like the next set of features that Hooks is like really

1617
00:58:52,239 --> 00:58:53,418
like diving into,

1618
00:58:53,679 --> 00:58:54,840
um, but yeah.

1619
00:58:56,148 --> 00:58:56,829
Cool.

1620
00:58:58,099 --> 00:58:59,280
Any other questions?

1621
00:59:00,510 --> 00:59:02,510
Cool. Remember to like and subscribe. I mean, fill

1622
00:59:02,510 --> 00:59:04,510
out your survey on your app, um, for this

1623
00:59:04,510 --> 00:59:06,668
session if you give us great reviews they give us raises.

1624
00:59:06,708 --> 00:59:08,289
If not, they put us back in the pen. So,

1625
00:59:08,590 --> 00:59:10,769
uh, yeah, thank you so much.

1626
00:59:11,148 --> 00:59:12,010
Thank you.

