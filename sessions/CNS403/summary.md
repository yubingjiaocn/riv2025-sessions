# AWS re:Invent 2025 无服务器开发者最佳实践会议总结

## 会议概述

本次会议由AWS无服务器开发者倡导者Julian主讲，主题为"无服务器开发者最佳实践"，但实际适用于所有在云端构建应用的开发者。会议通过跟踪一个名为Amelie的糕点店从单一店铺发展为国际成功企业的故事，展示了无服务器架构在五年间的演进过程。

Julian强调无服务器很少是获得云端最大收益的默认方式，但通过正确的架构模式和最佳实践，可以支持从每月40个订单扩展到320,000个订单的巨大增长。会议涵盖了架构演进、性能优化、成本控制、错误处理、可观测性以及AI集成等多个关键领域的深度技术内容。

## 详细时间线与关键要点

### 0:00-5:00 开场介绍与架构演进概览
- 介绍Amelie糕点店五年发展历程
- 展示从40个订单到320,000个订单的规模增长
- 概述无服务器架构如何支持这种转型
- 强调每个阶段都带来新挑战和经验教训

### 5:00-15:00 基础架构：Lambda函数规模和组织
- **2020年起步阶段**：单一Lambda函数处理所有业务，200行代码，基础DynamoDB表
- **2021年简单扩展**：开始拆分Lambda函数处理支付和库存跟踪
- **2022年复杂化问题**：42个Lambda函数，复杂依赖链，错误处理不足
- **核心原则**：
  - 每个Lambda函数应有单一明确职责
  - 根据内存配置按比例分配CPU资源
  - 包大小直接影响冷启动时间
  - 避免过早创建微函数

### 15:00-25:00 异步架构：从同步链到事件驱动
- **同步架构问题**：2023年同步架构在高峰期造成级联故障
- **业务影响**：23%订单被放弃，客户投诉增加，收入损失
- **解决方案**：
  - 使用EventBridge进行服务解耦
  - 引入SQS进行可靠处理
  - 实现AppSync Events提供实时前端通知
  - 客户立即获得订单确认，后续异步处理

### 25:00-35:00 事件源映射和SQS最佳实践
- **Lambda事件源映射功能**：
  - 自动轮询事件源
  - 基于内容的过滤减少不必要调用
  - 批处理记录提高效率
- **SQS配置最佳实践**：
  - 可见性超时设置为Lambda函数超时的6倍
  - 重驱策略设置为3-5次重试
  - 必须配置死信队列(DLQ)
  - 使用过滤功能节省92%成本

### 35:00-45:00 Step Functions和直接服务集成
- **问题识别**：42个Lambda函数中许多仅做简单数据转换和路由
- **解决方案**：
  - 使用Step Functions的直接服务集成
  - 避免仅作为代理的Lambda函数
  - API Gateway直接连接DynamoDB、SQS等服务
  - EventBridge Pipes提供内置转换能力
- **新功能**：Lambda持久函数支持工作流在编程语言中构建

### 45:00-55:00 性能优化和成本控制
- **Lambda性能优化**：
  - 内存分配直接影响CPU性能和成本
  - 使用Lambda Power Tuning工具找到最佳配置
  - 冷启动优化：包大小、导入策略、初始化逻辑
  - Provisioned Concurrency和SnapStart消除冷启动
- **成本优化策略**：
  - 正确调整函数大小
  - 使用分层日志定价
  - 匹配保留期到实际需求
  - 监控和设置成本告警

### 55:00-59:00 AI集成和总结
- **AI作为无服务器工作负载**：
  - 相同的无服务器原则适用于AI
  - Bedrock作为无服务器服务
  - 使用AgentCore管理AI代理运行时
  - Lambda作为AI工具的理想选择
- **最终成果**：
  - 70%客户服务自动化
  - 12%收入增长
  - 35%成本降低
  - 支持60个全球位置