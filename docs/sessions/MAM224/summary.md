# AWS re:Invent 2025 - 使用 AWS Data Transfer Terminal 实现 3 倍速数据迁移

## 会议概述

本次技术分享会由 AWS 解决方案架构师 Haymon 和 Daniel 主讲，重点介绍了 AWS Data Transfer Terminal（数据传输终端）服务及其在高速数据迁移中的应用。该服务允许客户通过预约的方式使用 AWS 的物理位置，直接连接到 AWS 骨干网络，实现高达 200 Gbps 的数据传输速度。

AWS 骨干网络拥有超过 900 万公里的光纤，运行速度达 400 Gbps，连接全球 200 多个国家和地区。Data Transfer Terminal 服务解决了传统数据迁移方式的痛点，包括带宽限制、中间跳转延迟以及临时性高速传输需求。客户可以携带自己的存储设备到指定的安全物理位置，由专业团队协助完成数据传输。该服务特别适合处理 20TB 到 1PB 规模的数据迁移，相比传统方法可将传输时间从数月缩短至数小时。

演讲还详细介绍了优化高速传输的四个维度（软件、硬件、存储介质和网络），以及三种常见的使用模式。通过成本和时间对比分析，Data Transfer Terminal 在大规模数据迁移场景中展现出显著的优势，特别是在有紧迫时间要求或需要避免长期带宽租赁成本的情况下。

## 详细时间线

开场介绍
- 演讲者介绍自己为 AWS 解决方案架构师，专注于帮助客户高效迁移到云端并最大化价值
- 会议主题：AWS Data Transfer Terminal 服务、高速传输优化技巧和客户应用模式

AWS 骨干网络介绍
- AWS 骨干网络连接所有区域、可用区和接入点
- 网络运行速度：400 Gbps，使用 AWS 自有光纤和硬件
- 光纤总长度：900 万公里（Matt Garman 在前一天主题演讲中提到）
- 提供高速、低延迟的全球覆盖，连接 200 多个国家和地区

Data Transfer Terminal 服务介绍
- 提供可按需预约的安全物理位置
- 客户通过 AWS 账户预约并指定现场传输团队
- 支持客户自带存储设备，连接到 AWS 网络
- 传输速度：高达 200 Gbps
- 安全措施：需出示政府身份证件，记录所有设备序列号
- 物理设施：提供两条光纤连接，每条速度高达 100 Gbps

传统数据传输方式的挑战
- 通过互联网传输：存在中间跳转、带宽限制、吞吐量受限和潜在瓶颈问题
- Direct Connect：提供稳定和保证的吞吐量，但对于远程数据中心或临时传输需求，建立永久连接不经济
- Data Transfer Terminal 的优势：直接连接到 AWS 边界网络，消除中间跳转，实现更高速传输

服务可用位置
- 展示了 Data Transfer Terminal 当前可用位置地图
- 包括已规划和潜在的未来站点

高速数据传输优化的四个维度

1. 软件层面
- 推荐使用 AWS CLI 的 S3 copy 或 S3 sync 命令
- 建议使用 AWS Common Runtime（基于 C 语言实现的库，性能优于 Python 解释器）
- 对于更高传输需求：使用 SDK 实现 S3 传输代理，采用并行化和批处理提高效率
- 注意：加密虽然对安全至关重要，但会增加开销，特别是在没有硬件加密的系统上

2. 硬件层面
- 硬件组件直接影响传输性能：CPU、内存、收发器、交换机、网卡和存储服务器
- 存储服务器优势：支持 PB 级大规模传输，允许热插拔磁盘而不影响正在进行的操作

3. 存储介质
- 性能排序：NVMe 磁盘 > 固态硬盘（SSD）> 机械硬盘（HDD）
- 建议：对于低性能磁盘，可设置 RAID 将多个磁盘组合以提高传输效率

4. 网络层面
- 需考虑网络开销：TCP/IP 开销、存储性能和数据集特性
- Data Transfer Terminal 支持 ECMP（等价多路径），可组合两条光纤实现超过 100 Gbps 的速度

客户应用模式

模式一：基础配置
- 客户使用笔记本和硬盘连接到 Data Transfer Terminal
- 限制因素：存储介质的性能和可用带宽

模式二：并行集群
- 每条光纤可通过 DHCP 提供 5 个 IP 地址
- 使用最多 5 台机器组成集群，实现带宽倍增

模式三：存储服务器
- 客户携带存储服务器
- 可传输数百 TB 到 PB 级数据
- 充分利用可用带宽

数据迁移场景分析（Daniel 主讲）

迁移的四个关键考虑因素

1. 数据量
- 以 GB、TB 还是 PB 为单位？
- 最佳使用范围：20TB 到 1PB
- 小于 20TB：通常可用现有带宽处理
- 大于 1PB：数据通常存储在大型存储阵列上，不便携带（但有 AWS 合作伙伴提供紧凑型 1PB 存储方案）

2. 数据位置
- 数据是否靠近 Data Transfer Terminal 位置？
- 建议：如位置不便，可联系 AWS 客户团队探讨在更方便的位置部署服务

3. 数据类型
- 适合：文件、日志、遥测数据、合规数据、S3 或 Glacier 数据
- 容器化应用：传输蓝图而非整个系统，重新部署后使用 Data Transfer Terminal 传输后端数据库
- 数据库：使用 AWS Database Migration Service 或 DataSync 进行变更数据捕获（CDC）
- 虚拟机：推荐使用 AWS Application Migration Service，对于不支持的旧操作系统可传输快照到 S3 后使用 VM Import 转换为 EC2 实例

4. 时间要求
- 日志数据可能在 24 小时内过期，需立即传输
- 重大事件驱动：如大型合同续约前需将数据迁移到 AWS

最佳应用场景总结
- 数据量：数百 TB
- 距离：距离 Data Transfer Terminal 3-4 小时车程
- 时间：有紧迫或急迫的价值实现时间要求
- 数据类型：平面文件或数据库

传输时间和成本对比

传输时间对比（1TB 到 1PB）
- Data Transfer Terminal：1 分钟到 18 小时
- Site-to-Site VPN 和高带宽 VPN：传输时间显著增加，最长可达 4.5 个月
- Direct Connect（10 Gbps 和 100 Gbps）：性能有所改善但仍需较长时间

成本对比分析
- VPN：成本效益高，但时间长
- Direct Connect：需为低延迟私有连接支付溢价
- 理论成本 vs 实际成本：Direct Connect 的理论成本假设立即开始和结束，但实际需要：
  - 网络团队实施路由变更请求
  - 防火墙团队实施流量允许变更请求
  - 测试数据变更请求
  - 执行迁移
  - 拆除变更请求
- Site-to-Site VPN 需要底层电路支持：
  - 支持 1.25 Gbps：约每月 $1,000
  - 支持 5 Gbps：约每月 $2,500
- Data Transfer Terminal：在时间和成本上相比其他方法具有直接优势
- 建议：根据时间框架和成本考虑选择合适方案，Data Transfer Terminal 可作为补充选项

实际应用架构
- 从企业数据中心开始，使用 Data Transfer Terminal 一次性复制所有数据
- 对于实时数据库等有变更的数据，使用 AWS DataSync 进行 CDC 更新
- 数据进入 AWS 后可供本地应用和已迁移的应用/虚拟机/容器使用
- 数据可用于 AI/ML 工作负载进行分析，获取洞察并做出数据驱动决策

资源和总结
- 提供了 Data Transfer Terminal 服务页面链接
- Rivian 博客文章：介绍如何使用 Data Transfer Terminal 将数据摄取速度提高 3 倍
- 优化性能的博客文章：提供硬件使用的技巧和窍门
- 鼓励参会者提供反馈意见