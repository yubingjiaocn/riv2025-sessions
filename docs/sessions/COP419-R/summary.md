# AWS re:Invent 2025 - 高级多云成本报告与FOCUS

## 会议概述

本次技术会议由AWS支持团队的高级技术客户经理Justin Marks和AWS成本与使用报告及FOCUS产品经理Jason主讲，重点介绍了使用FOCUS（FinOps开放成本与使用规范）进行高级多云成本报告的方法。会议针对两类受众：职位中包含FinOps的专业人员，以及意外承担成本分配和报告职责的技术人员。

演讲者通过实际演示展示了如何使用FOCUS规范统一处理来自AWS、Azure和其他云服务提供商的成本数据，解决了传统多云环境中需要为每个提供商重复学习数据收集、标准化、分析和可视化流程的痛点。FOCUS作为FinOps基金会制定的开放规范，为不同云服务提供商的成本和使用数据提供了一致的格式标准，包括计费、定价和成本指标的统一定义。

## 详细时间线与关键要点

### 00:00-05:00 会议开场与受众调研
- 调研显示约1/4参会者职位包含FinOps，多数人意外承担成本报告职责
- 介绍演讲者：Justin Marks（AWS支持高级技术客户经理）和Jason（AWS成本使用报告及FOCUS产品经理）
- 概述传统多云成本管理面临的挑战：需要为每个云服务提供商重复学习数据收集、标准化、分析和可视化流程

### 05:00-10:00 FOCUS规范介绍
- FOCUS全称：FinOps开放成本与使用规范（FinOps Open Cost and Usage Specification）
- 由FinOps基金会组织制定，与不同行业的FinOps从业者合作创建
- 提供一致的成本和使用数据格式，包括计费、定价和成本指标
- 支持云服务提供商、SaaS提供商甚至数据中心提供商的数据统一

### 10:00-15:00 FOCUS采用现状调研与规范详解
- 现场调研显示约半数参会者了解FOCUS规范，部分已创建报告
- 展示FOCUS规范文档示例，包括可用区定义等标准化字段
- 介绍推荐列和必需列的区别，以及数据类型定义

### 15:00-20:00 AWS数据导出平台与FOCUS版本
- AWS数据导出平台支持四种表类型：CUR 2.0、FOCUS、成本优化建议、碳排放导出
- FOCUS 1.0包含48列（43个规范列+5个AWS自定义列），存在8个一致性差距
- FOCUS 1.2新增14列功能：容量预留管理、发票ID、SaaS定价支持、SKU使用分析、账户结构分类
- 支持小时、日、月时间粒度（1.0版本仅支持日粒度）

### 20:00-25:00 CUR 2.0与FOCUS对比
- 展示8个一对一映射的列：账户信息、计费周期、服务名称、资源ID、标签等
- 介绍相关但非一对一映射的列：混合成本、行项目类型等
- 重点介绍FOCUS新增列：有效成本（等同于Cost Explorer的净摊销视图）、服务类别等
- AWS提供5个自定义列（x_前缀），用于成本类别、操作、使用类型等CUR 2.0特有值

### 25:00-30:00 架构设计与数据流
- 推荐在独立的FinOps账户中进行分析，避免在主付款账户运行
- 数据流：从主付款账户复制FOCUS数据到FinOps账户的S3存储桶
- 使用AWS Glue进行数据爬取和目录化，通过Amazon Athena查询数据
- 支持多种数据源集成：Glue连接器、Lambda函数、直接推送到S3等方式

### 30:00-35:00 Athena演示环境设置
- 展示Athena控制台中的FOCUS样本数据库设置
- 介绍整合视图的构建，借鉴Cloud Intelligence Dashboards的方案
- 处理不同数据源的字段差异：使用NULL填充缺失列，统一时间戳格式
- 标签字段处理：将map类型转换为JSON格式以保持一致性

### 35:00-40:00 成本列详解与查询演示
- 介绍三种核心成本列：账单成本（发票基础）、列表成本（无折扣的按需成本）、有效成本（摊销成本）
- 演示计算折扣节省：列表成本-合同成本=折扣节省
- 演示计算承诺购买节省：合同成本-有效成本=承诺购买节省
- 强调使用费用类别过滤器仅分析使用记录，避免重复计算

### 40:00-45:00 高级查询技术与标签提取
- 对比CUR 2.0复杂的摊销成本计算（9行case语句）与FOCUS简单的有效成本列
- 演示跨账户和跨提供商的工作负载分布分析
- 介绍两种标签提取方法：JSON_EXTRACT函数和RegEx模式匹配
- 使用窗口函数和COALESCE处理不一致的标签命名

### 45:00-46:42 总结与资源推荐
- 推荐Cloud Intelligence Dashboards作为开箱即用的可视化解决方案
- 提供代码示例、CUR查询库、社交媒体联系方式等资源链接
- 介绍re:Invent期间的其他相关会议和AWS村庄的云运维展台
- 鼓励参会者完成会议调研并开始实际使用FOCUS