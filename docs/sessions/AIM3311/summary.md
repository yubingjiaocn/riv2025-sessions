# AWS re:Invent 2025 会议总结：使用第三方代理和工具在 AWS 上构建代理工作流

## 会议概述

本次会议由 AWS Marketplace 产品管理负责人 Andrea Kotnikov、全球 AI 合作伙伴负责人 Salman Tahhiran 以及 Workday Planning AI 核心服务负责人 Mera Rajaram 共同主讲。会议重点介绍了如何利用 AWS 的代理技术栈和第三方工具构建企业级 AI 代理解决方案。

会议展示了 AWS 在 AI 代理领域的完整生态系统，包括核心服务（Amazon Bedrock、Agent Core Runtime、Agent Core Gateway）、AWS Marketplace 上的第三方工具集成，以及 Workday 的实际生产案例。特别强调了从概念验证到生产部署的完整路径，以及如何通过 AWS Marketplace 加速代理开发和部署流程。Workday 的案例展示了使用 Agent Core Code Interpreter 在仅 3 天内将规划代理从原型推向生产的成功经验。

会议还包含了实际的代码演示，展示如何使用 LangChain 框架、Amazon Bedrock 模型和 Tavily 搜索工具构建一个公司研究代理，为开发者提供了可操作的技术指导。

## 详细时间线

### 开场介绍
[00:00 - 05:00] 会议开场与讲者介绍
- Andrea Kotnikov 介绍自己负责 AWS Marketplace 部署体验产品管理，特别是 AI 代理和工具类别
- Salman Tahhiran 介绍其全球 AI 合作伙伴负责人角色
- Mera Rajaram 作为特邀嘉宾，分享 Workday 构建和运营 AI 代理的实践经验
- 现场互动：询问观众中有多少人已构建 AI 代理，以及在生产环境中运行超过 5 个或 10 个代理的情况

[05:00 - 08:00] 会议议程说明
- 第一部分：AWS 代理技术栈概述，包括核心服务、架构原则和客户最佳实践
- 第二部分：AWS Marketplace 及第三方 AI 代理和工具的集成方式
- 第三部分：Workday 规划代理的构建案例分享
- 第四部分：使用第三方工具构建代理工作流的实操演示
- 第五部分：预构建代理的部署演示

### AI 代理基础概念
[08:00 - 12:00] AI 代理的定义与演进
- 代理的三个核心属性：行动能力（agency）、接受指令并形成目标的能力、推理和规划能力
- AI 代理的演进路径：从 RPA 机器人 → 认知自动化 → 生成式 AI 助手 → AI 代理 → 完全自主的代理系统
- 人类角色的转变：从执行工作到监督代理
- 代理能力的成熟度曲线：从低代理能力向高代理能力发展

[12:00 - 18:00] AWS 在 AI 代理领域的三大关注点
- **选择（Choice）**：提供最新的市场领先能力，让客户和合作伙伴自由创新、快速实现 ROI
  - AWS 原生能力（Quick Suite）和第三方能力（Marketplace）
  - Amazon Bedrock Agent Core 和 Strands Agents 框架用于构建自定义代理
  - AWS 生成式 AI 创新中心和合作伙伴专业服务支持
- **信任（Trust）**：AI 具有概率性特征，需要建立控制、治理和合规机制
  - 透明度：AI 服务卡片、模型训练数据说明、预期应用场景、偏见和可解释性评估
  - 控制：Bedrock Guardrails 用于模型安全防护
  - 审计：Agent Core 可观测性、CloudTrail 和 CloudWatch 集成
- **规模（Scale）**：提供企业级能力，支持从创新到生产的快速扩展

### Agent Core 服务详解
[18:00 - 25:00] Agent Core 的三大核心领域
- **工具和内存**：
  - 会话信息、短期和长期记忆管理
  - 原生工具：Code Interpreter（代码解释器）和 Browser Tool（浏览器工具）
  - Code Interpreter 可在沙箱环境中安全生成、测试和运行代码
  - Browser Tool 允许代理像人类一样浏览网页
- **安全部署与扩展**：
  - Agent Core Runtime：容器化部署，运行在客户 VPC 内，提供安全隔离
  - Agent Core Identity：解决访问控制问题，包括用户凭证和代理资源访问权限管理
- **端到端可观测性**：
  - Agent Core Observability：与 OpenTelemetry 标准集成
  - 集成 CloudWatch 和 CloudTrail，支持代理运行检查、根因分析和性能优化

### AWS Marketplace 的价值
[25:00 - 32:00] AWS Marketplace 为代理开发者带来的三大优势
- **采购时间大幅缩短**：从数月缩短至数天或数分钟
  - 开发者可一键订阅所需工具
  - 完全透明的定价和合同条款
  - 无需繁琐的供应商入驻、安全审查、法律审查和支付设置流程
- **统一账单和成本控制**：
  - 所有 Marketplace 支出通过 AWS 账单统一管理
  - 开发者无需使用个人信用卡和报销流程
  - 与 AWS Budgets 和 Cost Explorer 集成，实现支出目标设置和透明度
- **简化部署体验**：
  - Marketplace 产品与 AWS 服务原生集成
  - 一键部署代理到 Agent Core Runtime

[32:00 - 38:00] Marketplace 上的 AI 代理和工具分类
- **API 基础代理工具**（右侧）：
  - ISV 托管的远程工具（如 Tavily 搜索工具）
  - 作为外部目标集成到 Agent Core Gateway
  - 自动拉取 API 模式和元数据
  - 自动化 API 密钥轮换
  - 可在多个代理中重复使用
- **容器化代理和工具**（左侧）：
  - 专为 Agent Core Runtime 设计
  - 在客户 VPC 内运行，提供 VPC 隔离
  - 支持 IAM 身份和资源策略、工具级权限
  - 完整的可观测性支持
- **代理应用和专业服务**（底部）：
  - 预构建的代理应用
  - 合作伙伴网络提供的专业服务支持
- 截至会议时，Marketplace 已有超过 2300 个代理、工具和代理应用

### Workday 规划代理案例
[38:00 - 42:00] Workday 的 AI 代理战略
- Workday 定位：帮助客户管理资金、人员和代理
- 展示的代理列表将在年底前交付给客户
- Workday 拥有代理平台团队，提供通用技术栈和一致的代码规范
- 技术栈：LangGraph 框架、LangSmith（用于评估和追踪）、集中式 LLM 模型网关

[42:00 - 48:00] 规划代理的四个角色
- **分析师（Analyst）**：探索数据
- **建模师（Modeler）**：构建模型
- **规划师（Planner）**：制定计划
- **管理员（Admin）**：系统管理
- 根据用户角色提供相应的技能集

[48:00 - 55:00] 数据探索功能的迭代过程
- **迭代一（失败）**：
  - 方案：将所有数据发送给 LLM 进行分析
  - 问题：遇到 token 限制、成本高昂、LLM 数学计算不准确
- **迭代二（失败）**：
  - 方案：数据分块，多步骤处理
  - 问题：引入延迟、成本仍然高昂、准确性问题未解决
- **迭代三（成功）**：
  - 方案：让 LLM 生成 Python 代码进行数据分析，然后用自然语言解释结果
  - 优势：利用 LLM 擅长编写代码的能力，避免直接进行数学计算

[55:00 - 62:00] 沙箱代码解释器的必要性
- 类比：就像为高能量幼儿创建游戏围栏，代码可以在沙箱中"自由发挥"，不影响生产环境
- 评估了多个选项：自建（不符合 Workday 核心业务）、各种框架和工具
- 最终选择 Agent Core Code Interpreter 的原因：
  - **安全管理**：代码在虚拟计算机的安全环境中运行，客户数据上传后使用完即清除
  - **有状态的多步骤分析**：在整个会话期间支持多步骤分析流程
  - **可扩展性**：支持内联处理 100MB 文件（压缩后），通过 S3 可处理 GB 级数据

[62:00 - 68:00] 生产部署成果
- **开发资源**：1 名软件开发人员、2 名工程经理
- **开发时间**：3 天从 POC 到生产就绪
- **上线时间**：演讲前两周正式上线，客户已在生产环境使用
- **性能指标**：
  - 延迟增加：400-500 毫秒（中位数），1-2 秒（90 分位）
  - Token 数量减少：大负载情况下减少高达 50%
  - 成本显著降低
  - 准确性大幅提升
  - 可扩展性问题得到解决，无需担心 token 限制

### 实操演示：构建公司研究代理
[68:00 - 72:00] 演示准备与免责声明
- 演示将展示代码实现
- 使用 AI 辅助生成代码
- 时间限制 10 分钟，聚焦核心能力
- 重点：如何引入工具和代理能力、LLM 推理、查询处理

[72:00 - 78:00] 用例说明：销售团队的公司研究代理
- 目标：帮助销售团队在客户会议前创建定制的简报文档
- 这是生产环境中的常见用例
- 三个步骤：架构设计 → 云环境工具设置 → 编码和运行

[78:00 - 85:00] 解决方案架构
- **组件**：
  - 用户与代理执行器（Agent Executor）交互
  - 代理执行器作为编排器，决定使用哪个 LLM 和工具
  - 两个工具：Web 搜索（互联网信息）和本地文档搜索（企业内部信息，存储在 S3）
- **技术选择**：
  - 代理执行器：LangChain 框架
  - 推理 LLM：Amazon Bedrock（超过 200 个模型可选），演示使用 Anthropic Claude 3.5
  - 工具：Agent Core Gateway 连接 Tavily 搜索工具，Python 函数实现本地数据搜索

[85:00 - 92:00] 云环境设置
- **模型选择**：
  - 在 Amazon Bedrock 中选择 Claude 3.5 Haiku 模型
  - 可使用 Bedrock Evaluation 功能并排测试模型
  - 生成短期或长期密钥，存储在 Secrets Manager
- **工具配置**：
  - 从 tavily.com 获取 API 密钥
  - 将 API 密钥安全存储在 AWS Secrets Manager
  - 在 Agent Core Gateway 中注册工具，选择内置集成选项
  - Tavily 是可用的第三方工具之一
  - 生成 URL 和 ARN 用于代码集成

[92:00 - 98:00] 代码实现：代理执行器
- 导入 LangChain 库
- 创建代理执行器对象，编排 LLM、工具和提示词
- 使用 invoke 方法调用代理，传入用户查询
- 三个关键参数：LLM、工具、提示词

[98:00 - 105:00] 代码实现：三个核心参数
- **LLM 配置**：
  - 使用 LangChain 的 chat_bedrock 与 Amazon Bedrock 原生集成
  - 指定模型：Anthropic Claude 3.5 Haiku
  - 提供区域和 AWS 凭证信息
- **提示词（Prompt）**：
  - 定义代理目标："你是一个公司研究代理，目标是使用可用数据源回答有关公司的问题"
  - 说明可用工具：1) 搜索本地文档（内部公司文档）；2) 搜索网络（当前公司信息）
  - Agent Core 支持动态查询可用工具列表
- **工具数组**：
  - 包含 search_local_documents 和 search_web 两个工具

[105:00 - 112:00] 代码实现：配置和 Web 搜索工具
- **配置导入**：
  - AWS 区域
  - S3 存储桶（用于本地搜索）
  - Agent Core URL 和工具信息（来自 AWS 控制台）
- **search_web 函数**：
  - 使用 @tool 装饰器标记为工具
  - 从 Agent Core 服务获取工具名称
  - 将查询打包为 JSON-RPC 格式
  - 包含 ARN 参数和用户查询
  - 创建请求并作为 POST 操作发送到 AWS
  - 返回响应给 LLM 进行进一步决策（是否调用更多工具或生成最终输出）

[112:00 - 结束] 运行演示说明
- 演示如何将所有组件整合在一起
- 展示实际运行效果（由于字幕截断，具体演示内容未完整呈现）

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


会议关键要点：
1. AWS 提供完整的代理技术栈，从基础设施到工具集成
2. Marketplace 大幅简化第三方工具的采购和集成流程
3. Workday 案例证明了从 POC 到生产的快速路径（3 天）
4. Agent Core Code Interpreter 解决了数据分析的准确性、成本和可扩展性问题
5. 使用 LangChain + Bedrock + Agent Core Gateway 可快速构建生产级代理