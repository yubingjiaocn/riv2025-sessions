# AWS re:Invent 2025 - CNS 372: 大规模应用的无服务器模式与AWS Lambda

## 会议概述

本次技术分享会由AWS高级解决方案架构师Lefteris Carraer Yu和Michelle Chisman主讲，主题为"大规模应用的无服务器模式与AWS Lambda"。会议针对企业在无服务器架构迁移过程中遇到的常见挑战，提供了实用的解决方案和最佳实践。

演讲者从一个典型的企业场景开始：当管理者要求构建电商应用的无服务器平台时，开发者通常从几个Lambda函数开始，但3个月后可能发展到数百个函数，变得难以管理。会议重点解决三个核心痛点：如何正确组织和结构化大量Lambda函数、如何在函数间重用代码、以及如何在不同环境中保持一致的部署。

## 详细时间线与关键要点

### 0:00-10:00 问题背景与架构介绍
- **单一用途Lambda函数模式**：演示了典型的电商应用架构，包括获取产品、购物车操作、订单处理等独立的Lambda函数
- **API Gateway集成**：每个Lambda函数通过Amazon API Gateway暴露为REST端点
- **数据存储**：各功能模块使用独立的DynamoDB表存储数据
- **冷启动问题**：首次调用需要1.2秒，后续调用降至0.2秒，说明了冷启动对性能的影响

### 10:00-20:00 微服务原则与组织优化
- **有界上下文应用**：将相关的Lambda函数按业务域分组，如将购物车相关的add、get、remove函数归类到cart-service文件夹
- **多仓库架构**：每个微服务使用独立的Git仓库和SAM模板，实现独立开发、部署和扩展
- **Lambda Web Adapter模式**：使用FastAPI和Mangum将多个HTTP方法合并到单个Lambda函数中，减少基础设施开销
- **性能权衡**：合并后的函数冷启动时间增加到2.8秒，但后续相关操作无需额外冷启动

### 20:00-30:00 API Gateway直接集成
- **零Lambda模式**：对于简单的CRUD操作，使用API Gateway直接集成DynamoDB，完全移除Lambda函数
- **VTL模板**：使用Velocity Template Language构建请求和响应转换
- **性能提升**：直接集成实现0.2秒响应时间，无冷启动问题
- **适用场景**：适合无业务逻辑的简单操作，需要最低延迟和成本的场景

### 30:00-40:00 代码重用策略
- **Lambda Layers**：Michelle介绍了使用Lambda层共享代码库的方法，展示了Powertools for Lambda的实际应用
- **限制条件**：每个函数最多5个层，部署包大小限制（压缩50MB，解压250MB）
- **版本管理**：强调了层版本控制的重要性和潜在陷阱
- **Step Functions集成**：使用AWS Step Functions编排复杂工作流，减少Lambda函数数量

### 40:00-50:00 一致性部署与多账户策略
- **账户隔离**：讨论了单账户vs多账户部署策略的优缺点，强调生产环境隔离的重要性
- **动态模板**：使用SAM参数、映射和条件实现环境特定的配置
- **全局变量**：通过SAM的Globals部分为所有Lambda函数设置通用配置
- **CI/CD管道**：展示了使用GitHub Actions实现一致部署的工作流程

### 50:00-56:00 总结与资源推荐
- **核心要点回顾**：组织函数结构、代码重用、一致部署三大解决方案
- **实践建议**：建议参会者选择一个痛点开始应用这些原则
- **后续学习**：提供了相关会议推荐和学习资源的二维码
- **联系方式**：鼓励通过LinkedIn与演讲者交流实践经验