# AWS re:Invent 2025 - AWS DevOps Agent 会议总结

## 会议概述

本次会议介绍了AWS在re:Invent 2025大会上发布的AWS DevOps Agent公开预览版。该Agent是一个基于AI的自动化运维工具,旨在帮助开发和运维团队更快速地解决生产事故并预防未来问题的发生。

会议由产品经理Bill和资深首席工程师David共同主持。David在AWS拥有近20年工作经验,曾参与构建DynamoDB、Lambda、IoT和CloudWatch等核心服务,并在AWS内部推广DevOps文化方面发挥了重要作用。他的专业知识和最佳实践被深度融入到AWS DevOps Agent的设计中。

AWS DevOps Agent的核心价值在于它能够像团队成员一样工作,自动响应告警和事故,通过分析指标、日志、追踪数据和部署历史来快速定位根本原因,并提供具体的缓解措施。在AWS内部测试中,该Agent已成功处理超过1000个真实生产事故,根本原因分析准确率达到86%。会议通过多个实际演示展示了Agent如何在15分钟内解决原本需要5小时才能定位的网络问题,以及如何与Dynatrace、Datadog等第三方监控工具无缝集成。

## 详细时间线

### 开场介绍 (0:00 - 5:30)
- **0:00** - Bill介绍自己作为AWS DevOps Agent产品经理的身份
- **0:45** - 介绍David的背景:资深首席工程师,在AWS工作近20年,参与构建DynamoDB、Lambda、IoT、CloudWatch等服务
- **2:15** - David在AWS Builder Library上发表了11篇文章,是该平台最多产的作者
- **3:30** - David每周在AWS内部发布"本周可观测性"博客,帮助塑造AWS的DevOps文化
- **4:20** - 播放David日常工作的幽默视频,展示高级工程师如何响应生产告警

### AWS DevOps Agent核心功能介绍 (5:30 - 15:00)
- **6:00** - 视频演示:Agent在David打开笔记本电脑之前就已完成指标、日志、追踪分析并识别根本原因
- **7:15** - Agent生成包含预验证、执行和后验证步骤的变更文档(MCM)
- **8:00** - Agent提供代码修复建议并执行回滚操作
- **8:45** - 询问现场观众:约半数人有过on-call经验,数十人当前正在值班
- **9:30** - 核心功能一:帮助更快解决事故 - 分析指标、日志、追踪数据,查找相关部署,生成根本原因分析和缓解步骤
- **10:15** - 核心功能二:预防事故 - 定期扫描历史事故,基于AWS最佳实践和Well-Architected框架提供改进建议

### Agent工作原理的四大特点 (15:00 - 25:00)
- **15:30** - 特点一:团队成员 - 像on-call工程师一样响应工单、告警,将调查结果写入ServiceNow工单或Slack频道,支持与其他Agent协作
- **17:00** - 特点二:遥测专家 - 集成CloudWatch、Dynatrace、Datadog、New Relic和Splunk,支持通过MCP服务器连接Grafana、Prometheus、Loki等开源工具
- **18:30** - 提供可观测性改进建议,如添加缺失的指标或调整告警阈值
- **19:15** - 特点三:流水线专家 - 集成GitHub和GitLab,理解部署流水线和代码仓库,检测变更并提供流水线改进建议
- **20:45** - 特点四:了解应用和组织 - 自动生成应用拓扑(知识图谱),支持通过steering files(运行手册)和现有文档(如Confluence)提供组织特定的指导

### 应用拓扑和客户成功案例 (25:00 - 32:00)
- **25:30** - 展示应用拓扑可视化界面,说明如何从云账户资源发现开始构建
- **26:45** - 拓扑整合服务映射、日志组、指标、告警和部署信息
- **27:30** - Agent使用拓扑优化日志和指标查询,对比AWS最佳实践模式识别偏差
- **28:15** - 内部使用数据:自8月起在Amazon和AWS内部团队使用,已处理超过1000个真实事故
- **29:00** - 成功率:根本原因分析准确率达到86%,即使未完全准确也能节省调查时间
- **30:00** - 澳大利亚联邦银行案例:Agent在15分钟内解决了原本需要5小时的网络事故
- **31:00** - 合作伙伴集成:与Dynatrace合作,服务Clariant、西部州长大学(20万学生)、美联航等客户
- **31:45** - 西部州长大学在不到一天时间内部署Agent和Dynatrace Davis AI协同工作

### 实际演示:事故调查全流程 (32:00 - 50:00)
- **32:30** - David介绍演示环境:"机器人即服务"(Robots as a Service)微服务架构
- **33:15** - 架构包含网关服务、机器人服务、调度服务、动作服务和配置服务
- **34:00** - 在Kiro中故意引入bug:在缓存记录中添加timestamp字段
- **34:45** - 推送代码后触发告警,Dynatrace检测到故障率增加
- **35:30** - Dynatrace通过webhook自动通知AWS DevOps Agent开始调查
- **36:15** - 展示Operator应用界面,显示正在进行和历史调查记录
- **37:00** - 根本原因:代码部署引入缓存序列化格式不兼容,新增timestamp字段导致反序列化失败
- **38:00** - Agent注意到缓存未命中的请求成功,这是重要的诊断线索
- **38:45** - 回顾调查过程:Agent首先读取运行手册,执行DQL查询(Dynatrace查询语言)
- **39:30** - Agent构建服务拓扑,识别服务间依赖关系
- **40:15** - 逐层排查:前端服务→依赖服务→Bot Forge服务(最底层依赖)
- **41:00** - Agent并行执行多个调查任务:检查部署、EC2实例健康指标、DynamoDB容量、应用日志、流量模式
- **42:30** - 关键发现:CloudFormation栈部署了新的启动模板版本
- **43:15** - Agent识别实例替换(蓝绿部署),记录新旧实例ID
- **44:00** - Agent排除无关因素:新实例的CPU峰值是正常启动行为
- **45:00** - 从日志文件中发现堆栈跟踪,定位到具体代码行
- **46:00** - 融合代码变更和日志信息,确认缓存交互问题
- **47:00** - 连接GitHub Actions,识别具体的代码提交

### 缓解措施和修复 (50:00 - 58:00)
- **50:30** - 生成缓解计划:准备、预验证、执行、验证、回滚步骤
- **51:15** - Agent教授如何使用GitHub Actions执行回滚(David之前未使用过)
- **52:00** - 提供验证命令确认回滚成功
- **52:45** - 准备回滚的回滚方案(应急预案)
- **53:30** - 长期解决方案:提供代码修复规范,建议更新反序列化器以匹配序列化器,添加测试
- **54:15** - 在GitHub Actions中执行回滚:重新运行最后一次正常部署
- **55:00** - 在Dynatrace中确认系统恢复健康
- **55:30** - Davis告警清除,事故解决
- **56:00** - 使用Kiro(AI编码助手)实现长期修复
- **56:45** - 将Agent生成的规范粘贴到Kiro,自动生成详细需求、设计和任务列表
- **57:30** - Kiro实现代码修复并生成测试

### 自定义和高级功能演示 (58:00 - 1:10:00)
- **58:30** - 演示如何通过MCP服务器自定义Agent
- **59:00** - 展示Confluence集成:Agent可以访问存储在Confluence中的运行手册
- **59:45** - Atlassian展台将在下午5点演示MCP服务器集成
- **1:00:15** - 演示steering files(指导文件):为Agent提供组织特定的策略和程序
- **1:01:30** - 示例:添加关于变更管理流程的指导,要求在执行变更前获得批准
- **1:02:45** - Agent在生成缓解计划时会遵循steering file中的指导
- **1:03:30** - 演示聊天功能:可以在调查过程中与Agent交互
- **1:04:15** - 询问Agent关于特定服务的问题,Agent基于拓扑知识回答
- **1:05:00** - 要求Agent解释某个观察结果,Agent提供详细分析
- **1:06:00** - 可以引导Agent关注特定调查方向或请求额外分析

### 预防性建议功能 (1:10:00 - 1:15:00)
- **1:10:30** - 演示未来问题预防功能:Agent扫描历史事故寻找模式
- **1:11:00** - Agent识别重复出现的问题类型,如缓存相关故障
- **1:11:45** - 建议示例一:改进缓存序列化测试,添加向后兼容性测试
- **1:12:30** - 建议示例二:实施金丝雀部署策略,在全面推广前检测问题
- **1:13:15** - 建议示例三:添加缓存健康监控指标和告警
- **1:14:00** - 每条建议包含实施优先级、预期影响和具体行动步骤
- **1:14:45** - 建议可以导出为Jira工单或直接分配给开发团队

### 总结和问答 (1:15:00 - 结束)
- **1:15:30** - 重申AWS DevOps Agent已进入公开预览阶段
- **1:16:00** - 强调Agent与人类专家协作的能力:一键接入AWS Support工程师
- **1:16:45** - 提及定价信息可在AWS Pricing Calculator获取
- **1:17:15** - 鼓励观众访问AWS展台了解更多集成合作伙伴
- **1:17:45** - 开放现场问答环节