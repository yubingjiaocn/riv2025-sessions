# AWS re:Invent 2025 观测性智能代理技术分享总结

## 会议概述

本次技术分享由AWS的Kevin和Andrea主讲，主题为"使用智能代理工具改善观测性态势"。演讲者们展示了如何构建一个基于AI的观测性代理，帮助开发者避免凌晨3点被生产故障唤醒的痛苦经历。

随着现代应用架构变得越来越分布式，观测性数据呈爆炸式增长。虽然通过OpenTelemetry和CloudWatch等工具可以轻松生成所需的指标、日志和追踪数据，但真正的挑战在于如何快速从海量数据中找到问题根因。演讲者认为AI代理是解决这一问题的理想方案，能够将复杂的技术栈跟踪转换为自然语言的问题描述和解决建议。

## 详细时间线与关键要点

### 00:00-05:00 问题背景与解决方案概述
- Kevin开场提问：有多少人曾在凌晨3点被生产故障唤醒
- 介绍观测性领域的变化：从数据不足转向数据过载
- 提出AI代理作为解决方案，能够执行SQL查询、编写指标洞察查询并提供自然语言响应

### 05:00-10:00 技术架构与MCP工具介绍
- 介绍Model Context Protocol (MCP)工具的重要性
- 展示"宠物收养诊所"演示应用架构
- 说明分布式服务如何产生大量观测性数据（指标、日志、追踪）

### 10:00-15:00 代理构建策略
- 强调为代理提供丰富上下文的重要性
- 介绍服务级别目标(SLO)的定义和作用
- 展示代理如何分析趋势并随时间改进

### 15:00-25:00 实际报告演示分析
- Andrea展示代理生成的HTML观测性报告
- 报告包含执行摘要：基于EKS的宠物网站系统，发现安全扫描活动
- 代理自动创建了4个关键监控告警：高延迟、高故障率、Lambda持续时间告警
- 发现关键指标：0.07%的故障率、平坦的错误率时间序列、400毫秒平均延迟

### 25:00-35:00 代码实现详解
- 展示使用Strands Agent SDK构建代理的简易性
- 介绍MCP客户端管理器的实现
- 演示如何使用AWS Labs的CloudWatch、Application Signals和CloudTrail MCP服务器

### 35:00-45:00 系统提示词与代理配置
- 详细解释代理的系统提示词设计
- 强调"隧道视野"概念：限制代理专注于观测性任务
- 展示如何指导代理发现资源、分析健康状况、生成深度链接

### 45:00-52:00 自定义工具开发与告警创建
- 演示创建CloudWatch告警工具的代码实现
- 使用@tool注解将Python方法暴露为MCP工具
- 强调为LLM提供详细参数说明的重要性（比较操作符、统计方法等）

### 52:00-57:00 部署策略与问答环节
- 介绍自动化部署选项：定时任务、事件驱动触发
- 建议创建更激进阈值的告警来预先触发代理分析
- 回答观众关于令牌使用效率、扩展性、模型兼容性等问题
- 确认代码支持OpenAI等多种模型提供商，不限于AWS Bedrock