# AWS re:Invent 2025 会议总结：Eli Lilly 的现代云治理之旅

## 会议概述

本次会议主要讲述了 Eli Lilly 公司如何从传统的 AWS Landing Zone (ALZ) 解决方案迁移到现代化的 AWS Control Tower 和 Account Factory for Terraform (AFT) 的转型历程。会议由 AWS 云治理首席专家 Tim Honeyurch 主持，Eli Lilly 的云基础平台负责人 Dustin Jeffs 分享了实际案例，AWS 的 Alex Marita 则深入讲解了技术实现细节。

Eli Lilly 是一家成立于 1876 年的全球制药公司，在全球拥有超过 44,000 名员工，在 55 个以上的国家开展临床研究。面对全球业务规模的快速扩张，公司需要强大、可扩展且能够适应不断变化需求的治理技术。通过这次现代化转型，Eli Lilly 成功将 1,500 个 AWS 账户及数十万资源从 ALZ 迁移到 Control Tower，实现了手动工作量减少 75%、代码推送频率提高 300%、配置更新时间从 8 小时缩短至 5 小时以内的显著成果。

会议强调了云治理的四个关键特征：托管化（Managed）、可控制（Controlled）、敏捷性（Agility）和可扩展性（Scalability）。这些特征帮助企业在保持安全性、合规性和成本控制的同时，加速创新并支持开发团队的敏捷需求。

## 详细时间线与关键要点

### **开场与背景介绍 (0:00-5:30)**
- **0:00** - Tim Honeyurch 欢迎参会者，这是 re:Invent 周四的会议
- **1:15** - 调查参会者：许多首次参加 re:Invent 的新人，也有参加过 5 次以上的资深参会者
- **2:45** - 介绍会议议程：云治理基础、Eli Lilly 真实案例、技术深度解析
- **4:20** - 强调云的三大优势：更快的速度、敏捷性、可扩展性

### **云治理定义与挑战 (5:30-10:00)**
- **5:30** - 定义云治理：帮助企业将云使用与业务目标对齐的工具和能力集合
- **6:15** - 云治理包含四个互联组件：安全、运营、合规和成本
- **7:00** - 客户面临的四大挑战：
  - 资源限制（人力和预算）
  - 跨复杂环境部署和维护控制措施的难度
  - 平衡开发敏捷性与安全合规标准
  - 应对不断演变的合规框架（如 PCI DSS 4.0 新增 60 个控制项）

### **云治理的四大特征 (10:00-13:00)**
- **10:00** - 特征一：托管化服务 - Control Tower 可自动部署和管理 14 个底层服务
- **10:45** - 特征二：内置控制措施 - 提供开箱即用的主动、检测和预防性控制
- **11:30** - 特征三：敏捷性 - 通过自动化和基础设施即代码实现受控的资源部署
- **12:15** - 特征四：可扩展性 - 一次性跨所有账户和资源部署需求

### **Eli Lilly 公司介绍 (13:00-15:30)**
- **13:00** - Dustin Jeffs 登场介绍 Eli Lilly：成立于 1876 年，总部位于印第安纳波利斯
- **13:45** - 全球员工超过 44,000 人，在 55 个以上国家开展临床研究
- **14:30** - 需要强大、可扩展且适应性强的治理技术支持全球业务

### **Eli Lilly 的云治理历程 (15:30-22:00)**
- **15:30** - 2018 年采用 AWS Landing Zone (ALZ)，当时管理 400-500 个账户
- **16:15** - 2019 年 AWS 发布 Control Tower，但 Eli Lilly 已深度投资 ALZ
- **17:00** - 提供 3-4 种标准账户模式，关键自动化与 Landing Zone 紧密绑定
- **18:00** - 到 2023 年 ALZ 最终版本发布时，已管理 1,400-1,500 个账户
- **19:00** - 提供 6 种标准账户模式及多个定制模式
- **20:00** - ALZ 的单体管道执行时间达到 8 小时，且经常失败
- **21:15** - 中央团队成为业务创新的瓶颈

### **现代化需求与决策 (22:00-25:30)**
- **22:00** - 2024 年决定投资现代化治理解决方案
- **22:45** - 关键需求一：托管化解决方案，减少运营开销
- **23:30** - 关键需求二：提升中央团队和业务团队的敏捷性
- **24:15** - 关键需求三：提高可扩展性以应对持续的云扩张
- **24:50** - 关键需求四：简化治理，减少复杂的 SCP 和条件语句

### **迁移项目规划 (25:30-28:00)**
- **25:30** - 选择 Control Tower 和 Account Factory for Terraform (AFT)
- **26:15** - 启动为期 6 个月的项目（2024 年底至 2025 年初）
- **27:00** - 选择年底时段因为开发活动较少，减少对业务的影响
- **27:45** - 必须快速完成且透明，不能有任何停机时间

### **迁移技术流程 (28:00-35:00)**
- **28:00** - 步骤一：部署 Control Tower 并将所有账户和 OU 注册到 Control Tower
- **29:00** - 步骤二：解耦资源 - 更新所有资源定义使用 DeletionPolicy Retain
- **30:00** - 多次执行单体管道更新资源定义，耗时较长
- **31:00** - 步骤三：开发 Terraform 模块替换资源定义，简化自动化
- **32:00** - 步骤四：实施自动化 - 使用 Step Functions 和 Lambda
- **32:45** - 自动化抓取所有已部署的 Stack Sets 及其参数和输出值
- **33:30** - 使用 Amazon Bedrock (Claude 3 模型) 生成 Terraform import 命令
- **34:15** - 手动验证生成的命令，确保没有意外的创建或删除操作
- **34:50** - 执行导入并生成状态文件

### **迁移完成与验证 (35:00-38:00)**
- **35:00** - 将状态文件上传到 AFT 代码库并注册每个账户
- **35:45** - 执行 AFT 管道，进行第三次验证确保无资源变更
- **36:30** - AFT 与已部署资源同步，所有资源现由 Control Tower 管理
- **37:15** - 删除 CloudFormation Stacks 并停用 ALZ 环境
- **37:50** - 通过自动化，6 个月内完成 1,500 个账户和数十万资源的迁移

### **组织架构优化 (38:00-42:00)**
- **38:00** - 迁移带来的额外优势：解耦自动化与 OU 位置的绑定
- **39:00** - 原有架构：账户位置决定权限和网络配置，导致扁平的 OU 结构
- **40:00** - 问题：冗余的 SCP、复杂的条件语句、难以采用新功能（如 RCP）
- **41:00** - 新架构：采用基于工作负载的分层 OU 结构
- **41:45** - 显著减少冗余防护栏，简化 SCP 配置，更容易引入新模式

### **业务影响与成果 (42:00-45:30)**
- **42:00** - 新模式引入时间：从 1-2 个月缩短至 2 周（一个冲刺周期）
- **42:45** - 例如：为全球组织设置 EKS 集群的基础变更时间大幅缩短
- **43:30** - 量化成果：手动工作量减少 75%
- **44:00** - 代码推送频率提高 300%
- **44:20** - 安全和配置更新部署时间从 8 小时缩短至 5 小时以内
- **44:50** - 实际影响：2025 年 Q2 推送的配置变更超过 2024 年全年总和
- **45:15** - 中央团队不再是业务创新的阻碍

### **Control Tower 技术深度解析 (45:30-50:00)**
- **45:30** - Alex Marita 登场，介绍 Control Tower 新功能
- **46:00** - 调查：很少人知道上周发布的"仅控制措施体验"功能
- **47:00** - Control Tower 可在 30 分钟内完成设置
- **47:30** - 自动创建两个账户：日志归档账户和审计账户
- **48:15** - 创建两个 OU：安全 OU（必需）和沙箱 OU（可选）
- **49:00** - 安全 OU 包含 AWS Backup 保管库和委托管理员账户
- **49:45** - Account Factory 允许使用基线资源配置特定类型的账户

### **Control Tower 附加价值 (50:00-52:30)**
- **50:00** - 价值一：AWS Identity Center 联合访问
- **50:30** - 价值二：启用 AWS Config 和 CloudTrail，集中写入日志归档账户
- **51:15** - 价值三：托管控制措施由 Security Hub、CloudTrail 和 CloudFormation 支持
- **52:00** - 确保新配置的账户符合预设的合规标准

### **Account Factory 详解 (52:30-56:00)**
- **52:30** - Account Factory 用于配置预配置安全基线的 AWS 账户
- **53:15** - 新功能：Account Factory 完全在 Control Tower 内运行
- **53:45** - 使用 AWS Organizations 账户原语，不再需要 Service Catalog 集成
- **54:30** - 工作流程：在 Organizations 控制台创建账户或使用 CreateAccount API
- **55:15** - 将账户移至 Control Tower OU，自动应用托管控制措施
- **55:50** - 自动配置 CloudTrail、Config、Backup 等预配置服务

### **Account Factory for Terraform (AFT) 架构 (56:00-60:00)**
- **56:00** - AFT 需要先部署 Control Tower
- **56:30** - 设置 Account Factory 管理账户（专用于 AFT）
- **57:00** - GitOps 驱动模型：用户在配置仓库中创建账户请求文件
- **57:45** - 通过 git push 提交到代码仓库（支持 AWS CodeCommit 和 CodeStar 连接）
- **58:30** - 触发 CodePipeline，将变更写入 Amazon DynamoDB 提供可追溯性
- **59:00** - AFT 与 Control Tower 通信，判断是更新还是配置新账户
- **59:45** - 应用自定义配置（网络、安全防护栏等）

### **AFT 的优势 (60:00-63:00)**
- **60:00** - 优势一：通过基于管道的工作流自动化账户定制，满足可扩展性和敏捷性需求
- **61:00** - 优势二：部署和配置工件存储在版本控制仓库，确保代码最新且可追溯
- **61:45** - 优势三：支持 Terraform Registry 发布的模块和自定义模块
- **62:15** - 客户可根据 PCI、HIPAA 等合规框架完全定制环境
- **62:45** - 优势四：支持委托管理，无需每天登录管理账户

### **控制措施策略：左移 (63:00-66:00)**
- **63:00** - 讨论"左移"概念：从检测性控制转向主动和预防性控制
- **63:45** - 检测性控制：事件发生后发出警报
- **64:15** - 主动性控制：防止资源变更发生
- **64:45** - 预防性控制：确保不良代码永远不会部署到生产环境
- **65:30** - 控制措施目录是 AWS 托管控制措施的单一真实来源

### **控制措施目录新功能 (66:00-69:00)**
- **66:00** - 新发布的"仅控制措施体验"：无需设置 Landing Zone 即可使用
- **66:45** - 可直接浏览控制措施、元数据和对应的合规框架
- **67:30** - 检测性控制：在账户、OU 或组织级别激活 AWS Config
- **68:00** - 主动/预防性控制：启用可信访问并选择运营区域
- **68:45** - 强调：激活托管控制措施从未如此简单

### **整合 AFT 与托管控制措施 (69:00-72:00)**
- **69:00** - 如何结合 Account Factory 和托管控制措施
- **69:45** - 可在 AFT 管道中使用 Terraform 部署托管控制措施
- **70:30** - 优势：简化管理，单一管道方法，降低运营成本
- **71:15** - 缺点：Account Factory 管理员拥有永久提升的权限
- **71:45** - 风险：依赖单一 AFT 管道存在依赖风险

### **会议结束 (72:00+)**
- **72:00** - 会议内容在此处被截断，但核心内容已完整呈现

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


关键要点总结：
- Eli Lilly 成功将 1,500 个账户从 ALZ 迁移到 Control Tower + AFT
- 使用 AI (Amazon Bedrock) 自动生成 Terraform import 命令加速迁移
- 实现手动工作减少 75%、代码推送频率提高 300%、更新时间缩短至 5 小时
- 采用基于工作负载的分层 OU 架构，简化治理并提升敏捷性
- AWS Control Tower 提供托管化、可控、敏捷和可扩展的云治理能力