# AWS re:Invent 2025 会议总结：缩小速度与安全之间的差距

## 会议概述

本次分组会议的主题是"缩小速度与安全之间的差距，大规模快速交付"（Closing the Gap Between Speed and Safety, Shipping Faster at Scale）。会议由 Launch Darkly 的 CEO 兼联合创始人 Edith Harbaugh 主持，嘉宾包括 Click 公司的产品经理 Jeffrey Goldberg 和 Ally Financial（美国最大的数字银行）数字工程运营负责人 Nate Gray。

会议核心探讨了一个长期存在的软件开发悖论：速度与可靠性是否真的是一对矛盾？传统观念认为，要么像 Facebook 那样快速发布、频繁出错，要么采用季度发布的稳健模式确保质量。但 Edith 指出这是一个"伪命题"——实际上，更频繁的小规模发布反而能提高软件可靠性，因为更容易隔离和定位问题。

两位嘉宾分享了各自公司如何通过功能标志（feature flags）、解耦部署与发布、以及自动化测试等技术手段，实现了从季度发布到每月数十次发布的转变。这不仅提升了开发速度，还显著改善了开发者体验——工程师们不再需要在周末和深夜进行发布，同时故障率反而下降了。会议还讨论了 AI 时代如何将模型视为功能进行管理，以及自动化在未来发布流程中的重要性。

## 详细时间线与关键要点

### 开场介绍（00:00 - 03:30）
- **00:00** - Edith Harbaugh 欢迎参会者，介绍会议主题：缩小速度与安全之间的差距
- **00:45** - 介绍嘉宾：Nate Gray（Ally Financial 数字工程运营负责人）和 Jeffrey Goldberg（Click 产品经理）
- **01:30** - Nate 介绍 Ally Bank 是美国最大的数字银行，负责面向客户的应用程序和 API
- **02:00** - Jeffrey 介绍 Click 是一家数据集成、分析和 AI 软件公司，负责开发者工具和生产力提升

### Launch Darkly 平台介绍（03:30 - 08:00）
- **03:30** - Edith 分享创立 Launch Darkly 的初衷：解决发布过程中的焦虑和风险
- **04:15** - 回顾过去季度发布的痛苦：每次发布都充满不确定性，担心生产环境崩溃
- **05:00** - Launch Darkly 的核心理念：运行时功能控制平面，可以在发布后进行测量和控制
- **06:00** - 平台支持 20 多种 SDK，覆盖几乎所有编程语言和设备类型
- **07:00** - 目标是降低每次发布的风险，避免在压力下做出错误的回滚决策
- **07:45** - 强调开发者幸福感的重要性：有信心的发布流程能减少会议和运营拖累

### 发布节奏的演变（08:00 - 15:00）
- **08:30** - Edith 提出核心问题：速度与可靠性是否是伪命题？
- **09:00** - Jeffrey 分享 Click 的转型：从本地部署产品（每年 5 次发布）到云端持续交付
- **10:00** - 转型带来的变化：开发者感到更快乐，能够持续推进和迭代
- **10:45** - Click 现在面临新挑战：平衡持续发布与营销时机（如 Black Friday 促销）
- **11:30** - Jeffrey 介绍即将推出的功能：让客户自主选择发布渠道（月度、季度或持续发布）
- **12:30** - Click 现在有近 400 名开发者和工程师可以在生产环境中切换功能标志
- **13:00** - 去中心化管理带来的好处：故障率下降，开发者信心提升
- **14:00** - Nate 分享 Ally 的转型故事：写了一篇博客《Ally 如何夺回我们的夜晚和周末》

### Ally 的发布实践（15:00 - 22:00）
- **15:30** - Ally 从月度发布（加上紧急热修复）转变为每月平均 68 次发布
- **16:00** - 覆盖约 15 个应用程序，所有 UI 变更都使用功能标志
- **16:30** - 采用 API 优先开发，将 API 部署与 UI 部署分离
- **17:00** - 发布流程：先内部员工试点，然后 1% 客户，5% 客户，逐步扩展到 100%
- **17:30** - 强调在生产环境中测试的重要性："请务必在生产环境中测试"
- **18:30** - Nate 作为两个孩子的父亲，强调工作生活平衡的重要性
- **19:00** - 现在可以在下午 5 点股市收盘后发布，因为有信心快速回滚
- **19:30** - 如果出现问题，回滚只需 30 秒而不是 30 分钟的管道部署
- **20:00** - 这极大提升了开发者满意度

### 部署与发布的解耦（22:00 - 28:00）
- **22:30** - Jeffrey 强调部署与发布分离给开发者带来的信心
- **23:00** - 开发者可以持续部署"暗部署"（功能关闭状态），然后精细控制开启时机
- **23:45** - Click 刚刚实施了"保护性发布"（guarded rollouts）功能
- **24:30** - 开发者喜欢邀请同事到特定租户查看新功能的能力
- **25:00** - 本周的产品发布采用私有预览模式，与产品管理团队协作设置不同的客户细分
- **26:00** - 可以在生产环境中部署软件但保持功能关闭，通过多个标志的精细控制
- **27:00** - 同时结合访问控制，确保 UI 和后端权限同步发布

### 风险管理与合规要求（28:00 - 33:00）
- **28:30** - Edith 询问：在精细控制下，哪些是不可协商的护栏？
- **29:00** - Nate 强调金融行业的监管要求：审计人员会检查每个 GitLab 生产标签是否对应已批准的变更请求
- **29:45** - 合规风险和弹性是 Ally 的重要考量，需要能够立即发现问题并回滚
- **30:30** - Jeffrey 介绍 Click 的 FedRAMP 合规要求：商业环境和联邦环境必须分离
- **31:30** - 需要通过审计流程才能将重大变更引入联邦环境
- **32:00** - Click 的轻量级护栏：默认从 false 开始，使用目标规则作为保护措施
- **32:45** - Jeffrey 指出：过去过于严格的限制反而导致了更多故障

### 过度谨慎导致的问题（33:00 - 36:00）
- **33:30** - Edith 询问：过度谨慎如何导致故障？
- **34:00** - Jeffrey 解释：过去采用混合方式，有专门的"发布冠军"团队
- **34:30** - 问题在于发布冠军可能不了解具体功能，只是通过 Slack 被要求"帮忙切换"
- **35:00** - 结果导致支持电话涌入，错误日志激增，250 人涌入故障频道
- **35:45** - 现在将所有权完全转移给开发团队，他们不需要请求许可，可以自主控制
- **36:00** - 将开发者视为负责任的成年人，他们关心代码在生产环境中的表现，问题自然解决

### 开发者体验与快速迭代（36:00 - 40:00）
- **36:30** - Edith 分享：进入工程领域是因为喜欢构建东西
- **37:00** - 年度发布非常痛苦，因为功能完成时可能已经过时
- **37:30** - 每周或每天发布能带来小小的成就感，至少能更快知道用户是否喜欢
- **38:00** - Jeffrey 谈到下一阶段：深入实验和私有预览
- **38:45** - 启用所有可观测性功能，让设计团队通过 Launch Darkly 进行更多实验
- **39:30** - 构建能力让客户选择加入测试版和预览版，更早获得反馈

### 控制与反馈循环（40:00 - 43:00）
- **40:30** - Jeffrey 澄清：Meta 的"快速发布、频繁出错"方法并非坏事，关键是如何控制
- **41:00** - Launch Darkly 提供多种机会以积极方式控制反馈循环
- **41:45** - 可以是客户驱动的选择加入，也可以是 A/B 测试实验
- **42:15** - 还可以让客户在金丝雀模式或蓝绿部署中运行
- **42:45** - 这种灵活性让开发、设计和产品管理团队能够为客户提供更高质量的结果
- **43:00** - 最终目标是交付客户渴望和期待的"可爱"功能

### AI 在发布流程中的应用（43:00 - 49:00）
- **43:30** - Edith 询问：2025 年如何在发布周期和软件开发中应用 AI？
- **44:00** - Nate 回答：Ally 将模型视为功能来处理
- **44:30** - 企业 AI 团队有一个类似 ChatGPT 的员工前端，100% 使用功能标志
- **45:00** - AI 配置和模型像其他客户功能一样进行分阶段发布和测量
- **45:30** - Jeffrey 介绍 Click 平台：客户摄入大量数据，通过转换管道和分析处理
- **46:00** - 可以构建助手并嵌入到其他生态系统中
- **46:30** - 关键是让客户控制数据的处理方式和去向
- **47:00** - 跨区域推理（cross-region inference）对有数据驻留和主权要求的客户很重要
- **47:45** - 客户可以通过切换开关调用 Launch Darkly API，加入细分群体，启用跨区域技术
- **48:30** - 这种集成让客户能够控制特定功能集，丰富他们的 AI 产品
- **49:00** - Click 的 AI 负责人在之前的公司就是 Launch Darkly 用户，被收购后直接要求使用功能标志

### 速度与可靠性的关系（49:00 - 56:00）
- **49:30** - Edith 回到核心问题：速度与可靠性之间真的需要选择吗？
- **50:00** - Nate 承认：更快的速度带来新的复杂性和挑战
- **50:30** - Ally 将单体 API 拆分为微服务，将 Web 架构拆分为微前端
- **51:00** - 虽然有更多活动部件，但都可以独立部署
- **51:30** - 核心规则：每个应用程序、每个部署都必须能够独立部署
- **52:00** - 通过消除依赖关系来管理新的复杂性
- **52:30** - Edith 询问：这个过程困难吗？Nate 承认有一些教训，生产环境确实宕机过一两次
- **53:00** - Jeffrey 强调可靠性对 Click 的重要性：客户每天使用数据做决策
- **53:45** - 使用上下文感知确保产品了解用户、租户或特定服务
- **54:30** - 实施了基于字符串的功能标志：SRE 团队可以为特定租户开启调试模式
- **55:00** - 支持团队识别有问题的客户，提供租户 ID，开发团队针对该租户开启调试
- **55:30** - 这会改变进入 Splunk 的日志，便于对服务进行取证分析

### 精细化控制与可靠性（56:00 - 60:00）
- **56:00** - 关键是只针对该客户开启调试，不影响其他客户
- **56:30** - Click 有 OEM 产品，客户在生产环境中有数千个租户
- **57:00** - 能够追踪和控制这种级别的细节提升了可靠性
- **57:30** - Jeffrey 总结：速度和可靠性可以解耦，使用平台分别驱动这些用例
- **58:00** - 可靠性方面：通过开发者对功能的访问和控制实现更快交付
- **58:45** - 调试模式功能帮助快速识别问题，无需深入挖掘代码
- **59:15** - 通过细分可以按区域控制：即使在生产环境的 15 个不同区域中
- **59:45** - 可以隔离问题，上下文功能在可靠性方面真正发挥作用

### Launch Darkly 的自我应用（60:00 - 62:00）
- **60:00** - Edith 分享：Launch Darkly 是自己产品的大客户，每天提供数万亿次功能服务
- **60:45** - 用户不仅是人，也可以是机器或 API
- **61:15** - 如果收到不良会话调用，可以快速阻止 IP 或 API
- **61:45** - Jeffrey 补充：不仅是隔离能力，管理功能的可用性也很重要
- **62:00** - 作为 Launch Darkly 的产品负责人，喜欢授权和角色团队设置的精细化程度

### 访问控制与安全（62:00 - 64:00）
- **62:30** - 机器令牌和用户权限来自相同的访问控制模型
- **63:00** - 对于跨区域切换功能，API 令牌只能触及特定的两个细分群体
- **63:30** - 这种精细化控制水平非常出色
- **63:45** - Edith 补充：很多人使用 Launch Darkly 进行设备管理
- **64:00** - 例如，如果知道某功能在特定 Android 版本上不工作，直接阻止它，避免糟糕的用户体验

### 未来发展方向（64:00 - 68:00）
- **64:30** - Edith 询问：未来发布流程的规划是什么？
- **65:00** - Nate 回答：自动化是关键，但不确定在监管行业中自动化的极限在哪里
- **65:45** - 希望尽可能自动化管道和测试，但可能永远无法实现完全的一键自动化
- **66:15** - 在监管行业中，流程中必须有人工参与
- **66:45** - 生产验证的挑战：在真实银行账户中验证，开发者登录个人账户进行测试
- **67:30** - 举例：自动支付团队曾经没有人拥有 Ally 汽车贷款，需要招募志愿者验证
- **68:00** - 生产验证一直是挑战，任何能够自动化的方向都是目标

### 自动化与客户自主权（68:00 - 71:00）
- **68:30** - Jeffrey 同意自动化的重要性，保护性发布等功能将发挥作用
- **69:00** - 让开发者专注于交付功能，而不是接到"请为这个租户开启功能"的电话
- **69:45** - 支持客户在参与过程中自主选择的用例
- **70:15** - 更紧密地与产品集成，让开发者通过实验流程触发不同的工作流
- **70:45** - 工作流可以在 Launch Darkly 内部或外部，加速开发工作流程

### 自动化接受度的转变（71:00 - 74:00）
- **71:00** - Edith 分享：过去 10 年最大的变化是对自动化的接受度
- **71:45** - 10 年前询问客户是否要自动化发布，他们会说"绝对不行，必须有人手动切换"
- **72:30** - 现在的变化（AI 加速了这一趋势）：人们意识到机器可以比人更快地切换
- **73:00** - 支付处理客户的例子：如果出问题，希望在一秒内停止，而不是等五分钟找人
- **73:45** - 让机器立即停止，然后人工分析原因，不希望有延迟
- **74:00** - Jeffrey 完全同意：作为渴望成为开发者的人，拥抱自动化

### 总结：自动化让开发者专注创造（74:00 - 结束）
- **74:30** - 如果不必担心监控和回滚，可以继续专注于构建，这是工作中最享受的部分
- **75:00** - 自动化可以发送警报或自动回滚，让开发者专注于创造价值
- **75:30** - 会议结束，强调了速度与安全并非对立，而是通过现代工具和实践可以同时实现的目标