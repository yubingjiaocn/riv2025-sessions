# AWS re:Invent 2025 STG338 会议总结：AWS 存储的数据保护与弹性

## 会议概述

本次会议（STG338）聚焦于使用 AWS 存储服务实现数据保护和业务弹性。会议由三位专家主讲：Danny Johnston（专注于金融服务领域的网络事件恢复平台）、Brian Bencco（医疗保健和生命科学领域的首席解决方案架构师）以及 Steve Dvau（AWS Backup 服务的首席工程师）。

会议深入探讨了当前网络威胁形势的严峻性。根据 Sofos 的报告，59% 的金融服务组织遭遇过网络攻击，其中近半数攻击成功。更令人担忧的是，即使支付赎金，组织也只能恢复 70-80% 的数据。会议特别引用了 2017 年 AP Moller-Maersk（马士基）遭受 NotPetya 攻击的案例，该攻击在 9 分钟内摧毁了 49,000 台服务器和 3,500 个应用程序，被世界经济论坛评为"迄今为止最具破坏性的网络攻击"。这个案例强调了离线备份、了解关键业务服务（如 Active Directory）以及"不是如果而是何时"会遭受攻击的重要性。

会议系统介绍了 AWS 的数据弹性框架，包括高可用性（HA）与数据保护的区别、AWS 的共享责任模型、以及如何利用区域（Regions）和可用区（Availability Zones）构建弹性架构。重点讨论了 AWS 的 3-2-1-1-0 数据保护黄金标准：3 个数据副本、2 个不同位置、1 个本地快速恢复副本、1 个不可变的隔离副本，以及 0 错误的定期测试。会议还介绍了 AWS 作为首个获得 Sheltered Harbor 认证的云服务提供商，为金融服务行业设定了运营弹性的黄金标准。

## 详细时间线与关键要点

### 开场与威胁形势分析（0:00 - 15:00）

0:00 - 2:30 - 会议开场介绍
- Danny Johnston 介绍自己在金融服务领域帮助客户构建网络事件恢复平台的 5 年经验
- Brian Bencco 介绍其在医疗保健领域的背景及对云运营和数据保护的热情
- Steve Dvau 分享其 28 年本地备份解决方案经验，以及加入 AWS 8 年构建 AWS Backup 服务的历程

2:30 - 5:00 - 会议议程概览
- 主动防御的重要性
- 数据弹性的定义
- 增强弹性的方法论和策略
- AWS 网络事件恢复方法
- 具体的后续步骤和行动建议

5:00 - 10:00 - 网络威胁现状
- Sofos 报告显示 59% 的金融服务组织遭遇网络攻击
- 近半数攻击成功
- 即使支付赎金，也只能恢复 70-80% 的数据
- FBI、GCHQ 和 NCSC 建议不要支付赎金
- 每次事件的平均恢复成本约为 150-160 万美元（不包括声誉损失）
- Cyber Security Ventures 估计 2025 年全球网络犯罪成本将达到 10.5 万亿美元
- 网络犯罪的利润甚至超过全球非法毒品交易

10:00 - 15:00 - 内部威胁与人为错误
- 不满员工、内部恶意行为者的风险
- 善意员工的人为错误（如意外文件删除）
- 澳大利亚 UniSuper 案例：意外账户删除威胁到 1450 亿美元养老金和 64 万老年人的未来

### Maersk 案例研究（15:00 - 25:00）

15:00 - 18:00 - Maersk 公司背景
- 负责全球 20% 的贸易量
- 拥有 750 艘船舶，每艘可运载 19,000-24,000 个集装箱
- 运营 74 个全球港口和码头
- 每个港口每天接收约 5 艘船舶，相当于每天 100,000 个集装箱

18:00 - 22:00 - 2017 年 6 月 28 日 NotPetya 攻击
- 俄罗斯针对乌克兰税务平台 ME Docs 发动攻击
- 约 380 个组织受到影响
- 攻击发生后的前 9 分钟内，大部分损害已经造成
- 网络瘫痪，在线备份完全被摧毁
- 49,000 台服务器完全无法使用
- 3,500 台服务器被摧毁
- 1,200 个应用程序被摧毁
- 另有 1,000 个应用程序无法访问（访问会导致重新感染）
- 只能通过 WhatsApp 通信，因为 BlackBerry 设备被完全清除
- 甚至无法进入办公室，因为门禁系统与 IT 系统相连

22:00 - 25:00 - Maersk 的幸运恢复
- 由于尼日利亚的暴风雨导致停电，一台位于拉各斯的 x86 服务器在攻击时处于离线状态
- 该服务器恰好保存了 Active Directory 的副本
- 将该服务器头等舱空运至伦敦希思罗机场
- 专车高速运送至英国总部 Maidenhead
- 使用 Active Directory 逐步重启网络
- 花费数天时间恢复到正常运营能力
- 花费数周时间完全恢复

25:00 - 28:00 - Maersk 案例的关键教训
- 离线备份的重要性（通过设计而非运气实现与生产环境完全隔离）
- 了解重要业务服务（IBS）的重要性，如 Active Directory
- 即使不是攻击目标，也可能成为攻击的受害者
- 不是"如果"而是"何时"会遭受网络攻击

### 监管指导与标准（28:00 - 35:00）

28:00 - 30:00 - 全球监管趋势
- 澳大利亚内政部发布针对勒索软件的强有力行动计划（针对 Medibank 和 Optus 数据泄露事件）
- 香港银行协会和金融管理局要求建立 STDB（安全三级数据备份）

30:00 - 32:00 - 欧洲 DORA 法规
- 数字运营弹性法案（DORA）于 2025 年 1 月 17 日在欧洲生效
- 许多条款涉及网络隔离和备份
- 第 12 条包含关键规定

32:00 - 35:00 - 英国和美国标准
- 与英格兰银行和 CBOE（跨市场运营弹性小组）合作
- 云托管数据保险库（CHDV）的概念
- CHDV 是在 AWS 中构建的独立恢复环境，在气隙不可变保险库中维护关键数据资产的黄金副本
- 纽约金融服务部（NYDFS）要求外部备份"免受更改和破坏"
- AWS 是首个也是唯一获得 Sheltered Harbor 联盟合作伙伴认证的云服务提供商
- AWS 拥有云中首个 Sheltered Harbor 认证平台

35:00 - 38:00 - 客户对数据保护的需求
- 速度至关重要：最小化网络攻击的威胁窗口
- 云解决方案比本地解决方案更快、更灵活
- 敏捷和模块化的数据保护平台
- AWS Marketplace 支持模块化平台
- 从小规模开始但快速扩展的能力
- 避免昂贵的前期资本支出
- 优化数据平台的能力

### 数据弹性基础（38:00 - 55:00）

38:00 - 42:00 - 弹性的定义
- 工作负载承受部分或间歇性组件故障并有效恢复的能力
- 弹性不是单一的，由多个方面和组件组成

42:00 - 46:00 - 高可用性（HA）
- 在网络问题或组件故障时保持应用程序运行的系统能力
- 示例：黑色星期五电商网站，一台 Web 服务器故障，负载均衡器自动将流量导向其他健康服务器
- 自动故障转移以维持服务连续性
- 在秒级时间内运行

46:00 - 50:00 - 数据保护
- 当应用程序完全宕机时需要完全恢复站点
- 三个层次：
  1. 备份和恢复：定期快照，恢复到数据损坏事件之前的时间点
  2. 灾难恢复：在主站点不可用时将操作恢复到备用站点的能力
  3. 业务连续性：包括人员、流程和通信
- 通常在小时级时间内运行

50:00 - 55:00 - 故障类型矩阵
- 高可能性、低影响：人为错误、负载引起的错误
  - 需要高可用性解决方案：自动故障转移、负载均衡、冗余
- 低可能性、高影响：自然灾害、区域中断、网络事件
  - 需要数据保护解决方案：灾难恢复、全面备份、业务连续性规划
- 投资取决于应用程序的业务关键性
- 关键系统（如金融系统、票务系统）需要同时设计 HA 和数据保护

### AWS 共享责任模型与基础设施（55:00 - 70:00）

55:00 - 58:00 - 弹性的共享责任模型
- 客户负责"云中"的弹性
- AWS 负责"云的"弹性
- AWS 处理核心基础设施的弹性：区域、可用区、边缘位置
- 提供高可用性和冗余的计算、存储、网络、数据库服务

58:00 - 62:00 - 关键区别示例
- Amazon S3 提供 11 个 9 的持久性（99.999999999%）
- 如果对象被损坏，S3 会以 11 个 9 的持久性保存该损坏
- 这不会消除客户架构应用程序以实现数据保护的责任
- AWS 提供企业级基础设施，但应用程序级别的弹性模式仍是客户的责任

62:00 - 66:00 - 区域和可用区
- 区域：地理分布的位置，支持灾难恢复和数据驻留要求
- 可用区（AZ）：每个区域内的多个隔离故障域，支持高可用性设计
- 关键架构原则：
  - AZ 之间的分离足以避免相关故障
  - AZ 之间的距离足够近以支持同步复制和自动故障转移
- AZ 用于高可用性，区域用于跨地理边界的数据保护

66:00 - 70:00 - AWS 服务类型
1. 区域服务（Zonal Services）：
   - EBS、EC2 在单个可用区内运行
   - 独立故障
   - 提供细粒度控制
   - 客户负责定义跨区域的故障转移和流量导向

2. 区域服务（Regional Services）：
   - S3、DynamoDB 抽象复杂性
   - AWS 自动跨多个可用区分发数据
   - 自动处理故障转移
   - 在服务级别提供高可用性

3. 全球服务（Global Services）：
   - Route 53 在全球 200 多个接入点运行
   - 控制平面在单个区域，数据平面遍布全球
   - 在单个服务内提供 HA 和 DR 能力

70:00 - 72:00 - 重要注意事项
- 即使区域服务也可能有全球依赖关系
- S3 示例：命名服务是全球性的，控制平面在 US-East-1
- 如果 US-East-1 不可用，无法创建新存储桶（需要全球唯一名称）
- 但现有存储桶将继续高可用
- 在设计灾难恢复规划时考虑这些因素

### 恢复目标与策略（72:00 - 90:00）

72:00 - 76:00 - RTO 和 RPO
- **RTO（恢复时间目标）**：事件发生后系统需要多快恢复可用
- **RPO（恢复点目标）**：事件后可以承受丢失多少数据
- 同步复制：最短恢复时间，但无法解决数据损坏或意外删除
- 持续或定期备份：可以恢复到损坏前的时间点，但恢复时间较长，灵活性更高

76:00 - 82:00 - 四种弹性策略矩阵
1. 多可用区可用性（Multi-AZ Availability）：
   - 应用程序在单个可用区故障时保持可用
   - 使用 EBS、EFS、FSx、RDS 在多个可用区之间复制数据
   - 主动可用性方法
   - 不能防止数据损坏

2. 多可用区恢复（Multi-AZ Recovery）：
   - 对文件、块、对象、数据库存储系统进行备份
   - 将备份复制到另一个可用区
   - 在主可用区中断时恢复到备用可用区
   - 可以恢复到损坏事件之前

3. 多区域可用性（Multi-Region Availability）：
   - 将关键业务数据从主区域复制到次区域
   - 主动方法
   - 跨不同地理边界分布多个系统
   - 在区域中断时故障转移到次区域
   - 不能防止数据损坏

4. 多区域恢复（Multi-Region Recovery）：
   - 在主区域备份关键数据
   - 将备份复制到次区域
   - 被动方法
   - 在数据损坏事件且主区域访问受限时，可以在次区域恢复到时间点

82:00 - 86:00 - 关键要点
- 通常不会只选择一个象限
- 根据运行的不同应用程序类型和业务关键性使用多个策略

86:00 - 90:00 - 多可用区可用性实践示例
- 典型的三层应用程序架构
- 结合使用区域服务和区域服务
- 使用 NAT 网关和负载均衡器在不同可用区之间导向流量
- 最佳实践：
  - 将 Web 服务器放在负载均衡器后面（不仅为了性能，也为了跨多个可用区导向到健康服务器）
  - 跨多个可用区设置 EC2 Auto Scaling 组
  - 单个可用区故障时，负载均衡器将流量导向健康服务器
  - Auto Scaling 组在这些服务中启动额外资源以维持服务水平
- Amazon Aurora 和 RDS 可以跨多个可用区复制数据并支持自动故障转移
- 可以添加多个只读副本以实现读取级别的冗余
- 在应用程序中使用 S3 和 DynamoDB 默认在区域级别提供高可用性

### 数据保护框架（90:00 - 110:00）

90:00 - 94:00 - 可用性不足够
- 多可用区可用性可以在应用程序或可用区故障时保持运行
- 但仅有可用性是不够的
- 还需要从数据损坏事件、删除和勒索软件/网络事件中恢复的策略

94:00 - 100:00 - 3-2-1-1-0 框架（AWS 数据保护黄金标准）
- **3**：与主资源分离的 3 个数据副本
- **2**：2 个副本位于不同位置（跨账户、跨区域）
- **1**：1 个本地恢复副本（用于快速恢复运营问题）
- **1**：1 个不可变副本（隔离并存储在保险库中，防止网络事件或勒索软件）
- **0**：定期测试备份的流程，确保能够零错误恢复

100:00 - 104:00 - 灵活应用框架
- 并非每个应用程序都需要这种级别的保护
- 维护多个副本的成本可能很高
- 将保护计划与业务关键性和要求相匹配
- 框架是灵活的：一个副本可以服务于多个目的
  - 跨区域副本也可以是不可变的用于网络恢复
  - 本地运营副本可以利用原生服务能力（如 EBS 快照、S3 复制）

104:00 - 108:00 - 根据业务影响匹配策略
- 金融交易系统：可能需要完整的 3-2-1-1-0（非常关键）
- 月度报告系统：可能只需要 1 个副本就足够
- 将不同应用程序的 RPO 和 RTO 与选择的策略相匹配
- 将 3-2-1-1-0 作为关键任务应用程序的北极星
- 根据业务关键性和风险承受能力扩展方法

108:00 - 110:00 - 三种不同类型的副本
1. 本地副本用于快速恢复：
   - 与原始资源位于同一区域
   - 恢复时 RTO 最短
   - 用于典型的运营性意外删除
   - 对应矩阵中较高可能性但较低影响的故障场景
   - 权衡：快速恢复，但在区域灾难或勒索软件事件中用处不大

2. 远程副本用于灾难恢复：
   - 处理更多地理灾难类型的解决方案
   - 通常使用某种复制解决方案和故障转移机制
   - 用于处理较低可能性但较高影响的区域灾难

3. 网络恢复副本：
   - 不可变、隔离、与现有运营系统气隙隔离
   - 勒索软件场景中的"紧急情况下打破玻璃"副本
   - 定期测试以确保能够恢复
   - 当所有其他防御被复杂攻击击败时的最终保护
   - 能够恢复到特定时间点

### 实施考虑因素（110:00 - 结束）

110:00 - 115:00 - 副本数量、类型和位置的考虑因素
- 考虑每个资源的关键性
- 考虑试图缓解的风险
- 是否需要从地理区域完全丢失中恢复
- 是否需要将整个系统迁移到另一个区域
- 是否担心勒索软件和在失去账户访问权限时恢复的需求

关键要点总结：
- 每个副本对应不同的故障场景
- 本地副本用于快速运营恢复（IT 世界中常见的事情）
- 跨区域副本用于在区域灾难事件中故障转移
- 网络恢复副本是针对勒索软件事件的最后一道防线，受到良好保护和隔离