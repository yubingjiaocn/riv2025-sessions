# AWS re:Invent 2025 - AWS DRS (Elastic Disaster Recovery Service) 会议总结

## 会议概述

本次会议由AWS DRS高级产品经理Yanuji主讲，重点介绍了AWS弹性灾难恢复服务(AWS Elastic Disaster Recovery Service)如何帮助企业实现简单、经济且具有弹性的灾难恢复解决方案。会议通过真实案例展示了系统宕机对企业造成的巨大损失，强调了灾难恢复策略的重要性和紧迫性。

AWS DRS是一个基于代理的复制服务，能够持续复制服务器数据到AWS，将RPO(恢复点目标)降低到秒级，RTO(恢复时间目标)降低到分钟级。该服务支持从本地服务器、VMware、HyperV、其他云平台以及AWS EC2实例进行灾难恢复。通过轻量级的复制代理和自动化的恢复流程，AWS DRS大幅降低了灾难恢复的复杂度和成本，同时提供了一键式演练测试、时间点快照恢复、以及与AWS Systems Manager集成的启动后自动化操作等高级功能。

会议还详细介绍了四种DR模式、定价模型以及如何通过服务控制策略实现数据隔离保护，为企业提供了完整的灾难恢复实施指南。

## 详细时间线

开场介绍
- 演讲者介绍自己是AWS DRS的高级产品经理Yanuji，感谢参会者在漫长的re:Invent活动后仍然选择参加本场会议

灾难恢复的重要性 - 真实案例
- 展示了一家全球性公司因系统宕机损失820万美元收入的案例
- 提到一家美国领先航空公司因宕机损失1.5亿美元利润
- 引用IDC报告：财富1000强企业中，应用程序宕机每年造成50万至100万美元的损失
- 指出76%的企业在过去两年内经历过系统宕机

业务价值论证
- 已实施弹性策略的客户观察到利润率增长12-20%
- 强调灾难恢复不仅是避免损失，更是获得竞争优势
- 提出核心问题：不是"是否需要灾难恢复"，而是"能否承受没有灾难恢复的后果"

关键指标定义 - RPO和RTO
- RPO(恢复点目标)：定义企业能够承受丢失多少数据，以时间衡量(如1小时或1天的数据)
- RTO(恢复时间目标)：定义服务或应用程序需要多快恢复运行
- 强调对于财富1000强企业，每分钟的宕机都意味着重大损失

三种弹性策略对比
- **备份策略**：最基础的方法，复制数据以便在丢失或损坏时恢复；RPO和RTO均为小时级；成本最低
- **灾难恢复策略**：本次会议重点；不仅恢复数据，更要恢复运营；RPO降至秒级，RTO降至分钟级；成本适中，是高影响应用的理想投资
- **高可用性策略**：顶级方案；通过设计和运营机制抵御常见故障；RPO和RTO均接近实时；需要重大投资，适用于最关键应用

AWS DRS服务介绍
- AWS DRS是基于代理的复制服务
- 基于代理的方式实现高性能，区别于基于快照的模型
- 持续复制数据，提供秒级数据保护，将RPO降至秒级

AWS DRS工作原理
- 在源服务器上安装轻量级AWS复制代理
- 源服务器可以是：AWS EC2实例、本地服务器、VMware、HyperV或其他云托管实例
- 代理在后台持续运行，将源服务器的块级数据复制到AWS内的轻量级暂存区
- 用户可指定数据复制到的AWS区域
- 灾难发生时，AWS上的数据仅落后主站点数秒

测试和演练功能
- 设置完成后，AWS DRS允许运行演练或测试
- 可以轻松在AWS上进行测试，无需等到灾难发生

故障转移(Failover)流程
- 当发生灾难(如宕机、网络攻击、硬件故障)时，可快速在AWS上启动恢复实例
- 故障转移会启动完全预配置的EC2实例，映射自源服务器
- 实例链接到复制的数据，主站点上运行的服务器应用或数据库现在可以链接到AWS并准备处理流量

故障回切(Failback)流程
- 当主站点的灾难解决后，可以从AWS故障回切到主站点
- 可以随时准备好后进行故障回切
- 记得终止AWS实例以节省成本，避免未来费用

AWS DRS的主要优势
- **更低的RPO和RTO**：如前所述的秒级和分钟级
- **更低成本**：复制不是一对一的，使用AWS中成本极低的暂存区持续复制数据；无第三方许可费用或其他费用
- **高度自动化**：避免手动设置；转换过程中自动复制配置，包括磁盘转换、启动正确的实例类型、创建恢复网络
- **时间点快照支持**：可以故障转移到最新数据集，或选择特定时间点恢复；在勒索软件攻击情况下，可使用快照中的其他点作为恢复点
- **易于测试**：可在DRS控制台一键运行演练
- **网络设置支持**：如果源服务器在AWS上，可轻松复制源网络基础设施，包括安全组、端口或路由更改
- **数据隔离**：通过配置服务控制策略，使用特定账户，确保在认证攻击发生或有人试图删除数据时，拥有干净的环境并确保数据与攻击隔离

四种DR模式架构
- 所有四种DR模式的目标都是AWS云
- 源服务器可以是：本地服务器、其他云、或AWS上的服务器
- 如果已在AWS上，仍可设置DR：从一个区域到另一个区域，或从一个可用区到另一个可用区

从本地或其他云到AWS的架构详解
- 左侧显示本地的一些服务器
- 在每台服务器上安装AWS复制代理
- 安装后，代理自动持续运行，将数据复制到AWS上的轻量级暂存区
- 一个复制服务器最多可服务15台服务器
- 确保复制并行进行，保证高性能复制
- 灾难发生时，设置恢复区域，所有服务器将以映射的AWS EC2实例启动，并附加EBS卷

复制服务器的功能
- 向AWS DRS发送复制状态，可轻松检查当前复制状态
- DRS可自动创建和终止复制服务器
- 通过控制台完全控制此过程
- 在一个地方获取健康更新和其他状态信息

故障回切流程补充
- 恢复实例设置完成且应用成功运行后，解决主站点问题
- 启动故障回切，代理控制协议允许流量返回主站点

AWS区域间DR架构
- 工作流程非常相似
- 数据复制可利用原生AWS服务，包括S3跨区域复制
- DRS使用EC2到EC2传输
- 数据传输性能更高，可高效利用AWS骨干网，延迟最小
- 因为源服务器和目标服务器都在AWS上，整体工作流程完全相同，只是性能更高

定价模型
- **服务本身**：每台服务器每月20美元的固定费率
- **暂存区**：持续复制源服务器到AWS；根据数据量和使用的EC2实例收取最低EC2和EBS使用费
- **临时故障转移成本**：演练或灾难发生时，映射到源服务器的EC2实例费用；这是临时的，从灾难恢复后费用将终止

高级功能 - 启动后操作(Post-Launch Actions)
- 这是一个框架，可在启动恢复实例时自动执行预定义或自定义操作
- 可以在脚本中定义自动验证、配置或测试任务
- 以前实例启动后可能需要手动完成大量工作，现在可由预定义操作完全管理

Systems Manager集成
- 该功能利用Systems Manager文档
- 可以在恢复实例上运行命令和自动化脚本
- 管理员可以创建连接检查、权限验证等任务
- 该框架可减少灾难恢复整个过程中的复杂性和人为错误

更多资源
- 提供了QR码供扫描获取更多信息
- 包含详细的博客文章，介绍如何设置DRS
- 涵盖跨区域灾难恢复、跨账户灾难恢复
- 以及从不同源服务器(如其他云或本地)进行DR的详细步骤

会议结束
- 感谢参会者参加本次会议
- 请求参会者在应用程序上填写调查问卷