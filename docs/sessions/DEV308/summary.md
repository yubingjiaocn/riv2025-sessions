# AWS re:Invent 2025 DEV 308: 使用 Aurora DSQL 构建现代应用程序

## 会议概述

本次会议由 AWS 解决方案架构师 Oleksii Ivanchenko 和 IP Labs 开发主管、AWS Serverless Hero Vadym Kazulkin 共同主讲。会议深入探讨了 Amazon Aurora DSQL 这一新型无服务器数据库服务，详细介绍了其架构设计、性能特点以及在现代应用开发中的应用。

Aurora DSQL 是 AWS 在 2024 年 re:Invent 发布并在今年中期正式可用的无服务器关系型数据库。它旨在解决传统数据库在无服务器架构中的局限性，提供类似 DynamoDB 的无服务器体验，同时保持关系型数据库的 ACID 特性和 SQL 支持。会议通过代码示例、性能测试和实际应用场景，全面展示了 DSQL 的技术优势和使用限制。

## 详细时间线与关键要点

### 00:00-05:00 会议开场与背景介绍
- 介绍演讲者：Oleksii Ivanchenko（AWS 解决方案架构师）和 Vadym Kazulkin（IP Labs 开发主管、AWS Serverless Hero）
- 会议目标：深入了解 Aurora DSQL 的构建模块和架构
- 将通过代码示例展示 DSQL 的性能和挑战

### 05:00-15:00 现有数据库服务对比分析
- **DynamoDB**：无服务器工作负载的理想选择，但 NoSQL 设计思维复杂，存在一致性和事务限制
- **RDS**：需要大量基础设施管理，无法独立扩展计算和存储，连接管理复杂
- **Aurora Provisioned**：与 RDS 类似的优缺点，但可独立扩展存储
- **Aurora Serverless v2**：更适合无服务器场景，支持扩展到零，但冷启动可能需要 15 秒，会丢失缓存

### 15:00-25:00 Aurora DSQL 核心特性介绍
- 完全无服务器，无需基础设施管理
- 提供五个九的可用性保证
- 支持独立的读写扩展，提供几乎无限的扩展能力
- 在所有扩展级别保持强一致性
- 支持跨多区域的 ACID 事务

### 25:00-40:00 DSQL 架构深度解析
- **单区域集群**：跨多个可用区的主动-主动多写集群，数据复制到三个区域
- **分布式分解架构**：将传统数据库组件分离为独立服务
  - 连接管理
  - 查询处理（Query Processor）
  - 隔离执行（Adjudicator）
  - 事务日志（Journal）
  - 存储（Storage）
- **多区域集群**：提供五个九可用性，支持多区域一致写入，包含见证区域作为仲裁者

### 40:00-50:00 事务处理流程详解
- **读事务流程**：Query Processor 直接访问本地存储节点，支持谓词下推和聚合
- **写事务流程**：Query Processor 作为事务的暂存区，在本地内存中累积更改
- **快照隔离**：每个事务在一致的数据库快照上操作
- **冲突检测**：Adjudicator 分析事务负载，检测和解决冲突
- **持久性保证**：通过 Journal 组件实现，而非传统的存储层持久化

### 50:00-59:00 开发者体验与性能测试
- **身份验证**：使用短期令牌替代传统用户名密码，提高安全性
- **代码连接器**：支持 Java、Python、Node.js，自动处理令牌生成
- **性能测试结果**：
  - 单区域集群：3 次插入操作 P90 延迟约 20 毫秒
  - 多区域集群：写操作延迟约为单区域的两倍
  - 读操作：单区域和多区域性能相同
  - 冷启动：3 天未使用后首次查询延迟约 165 毫秒
- **服务限制**：
  - 最大连接数：10,000
  - 最大事务时间：5 分钟
  - 单事务最大修改行数：3,000 行
  - 当前不支持：JSON/JSONB、外键、触发器、序列等功能