# AWS re:Invent 2025 - 使用 Agentic AI 执行自定义代码转换的最佳实践

## 会议概述

本次会议由 AWS Transform 团队的高级产品经理 Morgan Lunt 和 NextGen 开发者体验团队的高级专家解决方案架构师 Venuasan 共同主讲，重点介绍了如何使用 AWS Transform Custom 工具通过 Agentic AI 技术大规模执行代码现代化转换。

会议深入探讨了技术债务带来的挑战，包括安全合规风险、维护负担、性能限制以及战略不一致等问题。传统的代码转换方法（如基于规则的自动化工具和通用编码 AI）虽然有用，但在大规模应用时存在灵活性不足、一致性难以保证、学习成果难以共享等局限性。AWS Transform Custom 作为一个创新解决方案，于本周一正式发布 GA 版本，旨在解决这些痛点。

该工具的核心优势在于：低门槛入门、支持自动化执行、可以通过自然语言教学并持续学习改进、能够在组织内共享转换定义。会议展示了多个真实客户案例，包括 Air Canada 升级数万个 Lambda 函数、Twitch 迁移 900 多个 Golang 应用的 AWS SDK、QAD 处理 ERP 系统的客户定制化代码、以及 MongoDB 升级 Java 版本等。演讲者还现场演示了如何使用该 CLI 工具执行 Python 运行时升级和创建自定义转换定义，充分展示了工具的实用性和强大功能。

## 详细时间线

### 开场介绍 (0:00-2:30)
- **0:00** - Morgan Lunt 和 Venuasan 介绍自己，Morgan 是 AWS Transform 团队的高级产品经理，Venuasan 是 NextGen 开发者体验团队的高级专家解决方案架构师
- **0:30** - 会议议程概览：技术债务挑战、规模化修复方案、AWS 内部最佳实践、现场代码演示

### 技术债务问题分析 (2:30-6:00)
- **2:30** - 技术债务的核心问题：成本高、耗时长、阻碍创新、影响招聘、带来安全漏洞
- **3:00** - 技术债务的四种类型：
  - 安全与合规风险（特别是医疗和金融行业）
  - 维护负担（持续修补漏洞和 CVE）
  - 性能限制（老旧应用运行缓慢、成本高）
  - 战略不一致（并购导致的技术栈不统一）

### 客户案例分享 (6:00-8:30)
- **6:00** - Air Canada：需要升级数万个运行在过时 Node 和 Python 版本上的 Lambda 函数
- **6:45** - Twitch：拥有 900 多个 Golang 应用，需要从 AWS SDK v1 迁移到 v2，预计需要 11 个开发人年
- **7:30** - QAD（ERP 供应商）：20 多年演进的软件，客户定制化代码使版本升级困难
- **8:00** - MongoDB：大量 Java 8/11 代码需要升级到 Java 21

### 现有代码转换方法的局限性 (8:30-12:00)
- **8:30** - 基于规则的自动化（如 AST Grep、OpenRewrite）：
  - 优点：确定性强、可靠
  - 缺点：不够灵活、需要专业知识、启动成本高
- **10:00** - 通用编码 AI（如 Amazon Q、CodeWhisperer）：
  - 优点：功能强大
  - 缺点：难以保证多开发者间的一致性、需要人工参与、团队学习成果难以共享

### AWS Transform Custom 产品介绍 (12:00-18:00)
- **12:00** - 产品发布公告：于本周一（会议当天）正式 GA
- **12:30** - 核心功能：
  - 发现和学习任何代码模式、API 升级、运行时升级
  - 支持各种转换场景（包括 VBA 转 Python、Bash 转 Rye 等）
  - 可纠正错误并持续改进
  - 易于大规模运行
- **14:00** - 主要组件：
  - CLI 工具（支持自然语言交互）
  - 内置 AWS 最佳实践
  - 转换定义（Transformation Definition）
  - 支持交互式和非交互式模式

### 工作流程说明 (18:00-22:00)
- **18:00** - 专家创建初始转换定义
- **18:30** - 在本地仓库上执行并测试
- **19:00** - 根据反馈迭代改进（通常 3-4 次即可达到满意效果）
- **19:30** - 通过转换定义注册表共享给组织内其他用户
- **20:30** - 大规模执行：支持推送式（中央团队执行）和拉取式（应用团队自行执行）两种模式
- **21:30** - 持续学习机制：执行过程中的发现会反馈到转换定义中

### 内置转换和定价 (22:00-26:00)
- **22:00** - AWS 托管的开箱即用转换：
  - Java、Python、Node 运行时版本升级
  - AWS SDK 版本升级（支持这些语言）
  - 技术债务分析/文档生成（早期访问）
  - x86 到 Graviton 迁移（早期访问）
- **24:00** - 定价模型：
  - 基于使用量计费：每代理分钟 $0.035
  - 典型成本：1000 行 Lambda 约 $1，5000 行 Java 运行时升级约 $4-5
  - 定价策略：低价鼓励大规模使用

### 最佳实践建议 (26:00-29:00)
- **26:00** - 先进行试点项目，小规模测试以了解效果和成本
- **27:00** - 计划、优化、试点的迭代循环
- **27:30** - 使用现有工作流：
  - CLI 工具依赖最小（仅需 Node、Git 和外部连接）
  - 支持 Linux、macOS、WSL
  - 可集成到管道、Docker 容器、AWS Batch 作业中
- **28:30** - 与 AWS Transform Web 应用集成，提供可视化仪表板和进度跟踪

### 现场演示：开箱即用转换 (29:00-35:00)
- **29:00** - Venuasan 开始演示，使用 WSL 环境
- **29:30** - 列出可用的转换定义：atx custom definitions list
- **30:00** - 展示 8 个 AWS 托管转换和用户自定义转换
- **31:00** - 演示 Python Lambda 函数升级（3.8 到 3.13）
- **32:00** - 命令解析：
  - -p：项目路径
  - -n：转换名称
  - -c：构建命令
  - --configuration：额外配置（如验证命令）
  - -x：非交互模式
  - -t：信任所有工具
- **33:30** - 展示之前执行的结果：运行时升级、添加 17-32 个测试用例、性能改进、无业务逻辑变更

### 现场演示：自定义转换创建 (35:00-45:00)
- **35:00** - 演示创建自定义转换：从 Fluxo 迁移到 Tickety（Amazon 内部工单系统）
- **36:00** - 强调 MCP（Model Context Protocol）服务器集成，可从任何来源拉取数据
- **37:00** - 交互式模式演示：atx 命令启动交互式 shell
- **38:00** - 描述转换需求："internal library migration from fluxo to tickety"
- **39:00** - 工具检查注册表中是否已存在类似转换定义
- **40:00** - 工具询问相关问题：
  - 应用库类型
  - 主要功能
  - 编程语言
  - 迁移指南、文档、示例代码
- **41:00** - 通过 GitHub MCP 服务器引用迁移指南文档
- **42:00** - Morgan 补充说明：该指南原本是为人类开发者编写的 Wiki 文档，现在直接提供给 AI 代理使用

### 问答和补充说明 (45:00-结束)
- **45:00** - 讨论 Fortran 到 Python 转换的可行性：取决于代码规模和复杂度
- **46:00** - 提到客户使用案例：Progress 语言转换、单元测试覆盖率提升等
- **47:00** - 强调工具的灵活性和可扩展性
- **48:00** - 会话恢复功能：网络中断后可通过会话 ID 恢复
- **49:00** - Git 集成：自动创建本地分支并提交更改，便于回滚和代码审查