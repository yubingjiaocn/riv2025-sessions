1
00:00:00,900 --> 00:00:02,213
- [Vaishnavi] Oh, it's one o'clock.

2
00:00:06,000 --> 00:00:08,460
Hey everyone, I hope you're having

3
00:00:08,460 --> 00:00:10,320
a great time at re:Invent.

4
00:00:10,320 --> 00:00:14,133
So before we get started,
quick show of hands,

5
00:00:15,090 --> 00:00:20,090
how many of you hate managing passwords,

6
00:00:20,760 --> 00:00:23,913
access keys, long term
credentials in general?

7
00:00:25,740 --> 00:00:29,640
Alright, that's pretty much
everybody in the audience here

8
00:00:29,640 --> 00:00:31,920
so we have some great news for you.

9
00:00:31,920 --> 00:00:34,260
A new launch.

10
00:00:34,260 --> 00:00:36,270
My name is Ram Maharajapuram.

11
00:00:36,270 --> 00:00:38,910
I am a senior software development manager

12
00:00:38,910 --> 00:00:42,630
and head of engineering
for security token service.

13
00:00:42,630 --> 00:00:45,630
And with me here today is Vaishnavi Merugu

14
00:00:45,630 --> 00:00:48,000
a senior product manager on the team.

15
00:00:48,000 --> 00:00:52,290
And we are here to talk to
you about our latest launch

16
00:00:52,290 --> 00:00:56,490
that makes it easy for you
to connect your workloads

17
00:00:56,490 --> 00:00:59,073
to external services.

18
00:01:01,410 --> 00:01:04,860
Oftentimes builders have to trade off

19
00:01:04,860 --> 00:01:09,150
between security and ease of use.

20
00:01:09,150 --> 00:01:11,610
And with this new solution,

21
00:01:11,610 --> 00:01:14,760
you no longer have to face that dilemma.

22
00:01:14,760 --> 00:01:18,570
You now have a native way

23
00:01:18,570 --> 00:01:22,170
to exchange your AWS credentials

24
00:01:22,170 --> 00:01:24,690
and use them to connect

25
00:01:24,690 --> 00:01:29,310
to any third party services.

26
00:01:29,310 --> 00:01:32,280
So this could be other
cloud service providers,

27
00:01:32,280 --> 00:01:37,143
it could be on-prem workloads,
it could be SaaS providers.

28
00:01:37,980 --> 00:01:41,070
So cloud service providers like Azure GCP,

29
00:01:41,070 --> 00:01:44,670
SaaS providers such as
Databricks, Snowflake,

30
00:01:44,670 --> 00:01:48,240
and you could do this natively
using the AWS credentials

31
00:01:48,240 --> 00:01:51,690
that are already available
to you for any role,

32
00:01:51,690 --> 00:01:53,970
any IAM user.

33
00:01:53,970 --> 00:01:57,690
These credentials more often
are actually delivered natively

34
00:01:57,690 --> 00:02:01,893
to the compute that you're
using, AWS Lambda, EC2,

35
00:02:03,300 --> 00:02:05,580
Amazon EKS, you name it.

36
00:02:05,580 --> 00:02:09,780
We have a secure way for you
to connect those workloads

37
00:02:09,780 --> 00:02:11,820
to these external services.

38
00:02:11,820 --> 00:02:15,900
And we do this using standards
aligned JSON web tokens

39
00:02:15,900 --> 00:02:17,733
or JWTs for shot.

40
00:02:18,810 --> 00:02:23,810
And with this you no longer
have to use complex workarounds

41
00:02:24,060 --> 00:02:26,730
and you certainly do not have to manage

42
00:02:26,730 --> 00:02:28,620
any long-term credentials.

43
00:02:28,620 --> 00:02:33,060
So I'm actually gonna do a
quick live demo of this feature.

44
00:02:33,060 --> 00:02:34,620
What I'm going to be doing

45
00:02:34,620 --> 00:02:39,620
is I'm going to be
connecting my EC2 instance

46
00:02:40,530 --> 00:02:45,330
to Azure and make calls to Azure APIs

47
00:02:45,330 --> 00:02:49,560
without ever having to
create an Azure access key,

48
00:02:49,560 --> 00:02:53,700
like a long-term credential
or setting up a password.

49
00:02:53,700 --> 00:02:57,183
So what I have here is an EC2 instance.

50
00:02:59,610 --> 00:03:03,090
So you can see here that it is live

51
00:03:03,090 --> 00:03:07,710
and I'm gonna kick this
off by running a script

52
00:03:07,710 --> 00:03:09,690
that I've prepared for you.

53
00:03:09,690 --> 00:03:12,030
We're gonna go through seven steps.

54
00:03:12,030 --> 00:03:14,730
The first of these is
to basically just check

55
00:03:14,730 --> 00:03:17,010
what credentials I have.

56
00:03:17,010 --> 00:03:20,760
I ran the command aws
sts get caller identity.

57
00:03:20,760 --> 00:03:24,573
It's basically the who am I
command that we have on AWS.

58
00:03:25,680 --> 00:03:29,280
And what you see here
is I have credentials

59
00:03:29,280 --> 00:03:32,760
that belong to an EC2 instance role.

60
00:03:32,760 --> 00:03:34,650
So when you spin up an EC2 instance,

61
00:03:34,650 --> 00:03:39,060
we actually have short term
credentials session tokens

62
00:03:39,060 --> 00:03:40,500
that are delivered for you.

63
00:03:40,500 --> 00:03:44,010
These are valid only for a few hours

64
00:03:44,010 --> 00:03:49,010
and these credentials can be
scoped down however you want.

65
00:03:49,050 --> 00:03:51,720
And I'm going to be
using these credentials

66
00:03:51,720 --> 00:03:54,780
for federating out into Azure.

67
00:03:54,780 --> 00:03:58,170
So in order for you to use this feature,

68
00:03:58,170 --> 00:04:01,530
you would first have to go ahead

69
00:04:01,530 --> 00:04:06,530
and enable the outbound
identity federation feature.

70
00:04:07,620 --> 00:04:11,730
I already have this feature
enabled on my account,

71
00:04:11,730 --> 00:04:14,805
so I'm just using the GET
version of this command

72
00:04:14,805 --> 00:04:19,680
aws iam get outbound web
identity federation info.

73
00:04:19,680 --> 00:04:24,210
And what I get here is a
JSON with two elements.

74
00:04:24,210 --> 00:04:26,970
The first element is an issue identifier.

75
00:04:26,970 --> 00:04:29,010
So when you enable this feature,

76
00:04:29,010 --> 00:04:34,010
we create a set of asymmetric
keys for your account.

77
00:04:34,830 --> 00:04:39,450
We also create a unique
identifier for your account

78
00:04:39,450 --> 00:04:43,530
and we host the public
keys corresponding to it

79
00:04:43,530 --> 00:04:44,890
on this URL

80
00:04:45,750 --> 00:04:49,740
and your relying party
can then call this URL

81
00:04:49,740 --> 00:04:50,580
and get those keys.

82
00:04:50,580 --> 00:04:53,310
We'll get to that in a
bit more detail later.

83
00:04:53,310 --> 00:04:57,120
And it also says that JWT
vending enabled is true.

84
00:04:57,120 --> 00:04:57,990
That's exciting.

85
00:04:57,990 --> 00:04:59,910
So let's actually go look at

86
00:04:59,910 --> 00:05:02,640
what that JWT actually looks like.

87
00:05:02,640 --> 00:05:07,640
So I now ran the command aws
sts get web identity token.

88
00:05:08,820 --> 00:05:11,730
The response that I got
has two elements in it,

89
00:05:11,730 --> 00:05:15,003
a web identity token and
an expiration timestamp.

90
00:05:15,870 --> 00:05:19,434
I truncated the token
just so that we don't,

91
00:05:19,434 --> 00:05:22,920
it's easier for us to
kind of talk through it.

92
00:05:22,920 --> 00:05:25,680
But essentially this token
has three parts to it.

93
00:05:25,680 --> 00:05:30,240
There is a header that's
shown in green color here.

94
00:05:30,240 --> 00:05:34,380
There is a payload and
there is a signature

95
00:05:34,380 --> 00:05:36,930
associated with that token.

96
00:05:36,930 --> 00:05:39,900
There's also an expiration timestamp.

97
00:05:39,900 --> 00:05:43,650
The expiration here by
default is five minutes.

98
00:05:43,650 --> 00:05:48,650
You could also extend that
beyond five minutes up to an hour

99
00:05:48,660 --> 00:05:50,520
if you would like to do so

100
00:05:50,520 --> 00:05:53,460
by just passing an API parameter to this.

101
00:05:53,460 --> 00:05:57,780
And you can also see that I
passed an audience parameter

102
00:05:57,780 --> 00:05:58,710
into this call

103
00:05:58,710 --> 00:06:00,990
because we are gonna be
using this token to exchange

104
00:06:00,990 --> 00:06:05,990
with Azure and we also have
a signing algorithm here.

105
00:06:06,180 --> 00:06:08,670
I chose RS256 but there are other options

106
00:06:08,670 --> 00:06:10,383
available for you as well.

107
00:06:11,430 --> 00:06:14,793
So let's just actually look
into what is inside this token.

108
00:06:16,080 --> 00:06:21,080
So all I did is I did a base64 D code

109
00:06:21,360 --> 00:06:26,360
on this token and ran it
through a JSON parser.

110
00:06:27,060 --> 00:06:30,870
So what you see here is a subject,

111
00:06:30,870 --> 00:06:32,670
on the subject here is nothing,

112
00:06:32,670 --> 00:06:35,970
it's basically the same
as my EC2 instance role

113
00:06:35,970 --> 00:06:38,463
that we used in order to get this JWT.

114
00:06:39,660 --> 00:06:42,450
You can also see a bunch
of other standard claims

115
00:06:42,450 --> 00:06:45,510
including the issuer that
we talked about earlier,

116
00:06:45,510 --> 00:06:46,830
an expiration timestamp

117
00:06:46,830 --> 00:06:49,050
and if issuer at timestamp and so on.

118
00:06:49,050 --> 00:06:53,460
And there is also a bunch
of interesting credentials

119
00:06:53,460 --> 00:06:57,780
specific or workload specific
claims that we have namespace

120
00:06:57,780 --> 00:07:01,380
to sts dotamazonaws.com.

121
00:07:01,380 --> 00:07:05,220
This includes things like
properties of your EC2 instance,

122
00:07:05,220 --> 00:07:08,850
it includes information about
your org if you have one.

123
00:07:08,850 --> 00:07:11,910
It also includes things like the tags

124
00:07:11,910 --> 00:07:14,130
that you actually have on the role

125
00:07:14,130 --> 00:07:15,930
and if you have session tags and so on

126
00:07:15,930 --> 00:07:18,300
those will also appear here.

127
00:07:18,300 --> 00:07:23,220
There's an interesting kind
of off-label use case here.

128
00:07:23,220 --> 00:07:26,010
Use this feature to go introspect

129
00:07:26,010 --> 00:07:28,740
your authorization context

130
00:07:28,740 --> 00:07:31,950
and get additional information
on like what tags you have

131
00:07:31,950 --> 00:07:34,290
and so on if you are kind of
going through troubleshooting

132
00:07:34,290 --> 00:07:35,190
and what have you.

133
00:07:36,480 --> 00:07:38,070
So here's the moment of truth,

134
00:07:38,070 --> 00:07:42,210
what I did is I took that credential

135
00:07:42,210 --> 00:07:47,010
and I exchanged this to
an Azure access token.

136
00:07:47,010 --> 00:07:51,090
So in order to do that,
I posted that token

137
00:07:51,090 --> 00:07:54,720
to the Azure Token Exchange endpoint.

138
00:07:54,720 --> 00:07:59,610
I passed the grant type
as client credentials.

139
00:07:59,610 --> 00:08:04,330
I said that the assertion
type is JWT bearer

140
00:08:05,490 --> 00:08:09,390
and I got essentially a token back.

141
00:08:09,390 --> 00:08:13,350
Now what I can do is then use these tokens

142
00:08:13,350 --> 00:08:16,620
to go call other Azure APIs.

143
00:08:16,620 --> 00:08:19,860
And what you see here is
that I'm using this token

144
00:08:19,860 --> 00:08:23,370
to call the graph API for an application

145
00:08:23,370 --> 00:08:25,350
that I've already set up.

146
00:08:25,350 --> 00:08:26,850
And the API that I'm calling

147
00:08:26,850 --> 00:08:29,790
is federated identity credentials.

148
00:08:29,790 --> 00:08:33,240
Interestingly, this is
all the setup that I had

149
00:08:33,240 --> 00:08:37,830
to do on Azure in order
to connect my application.

150
00:08:37,830 --> 00:08:41,790
So I gave Azure the subject,

151
00:08:41,790 --> 00:08:44,620
which is the EC2 instance role

152
00:08:45,480 --> 00:08:48,420
I gave Azure the if you
are URL, the unique URL

153
00:08:48,420 --> 00:08:50,970
for my account that we
talked about earlier.

154
00:08:50,970 --> 00:08:52,710
And the audience

155
00:08:52,710 --> 00:08:55,800
and I created a federated
credential using that

156
00:08:55,800 --> 00:09:00,427
and that was enough for me
to securely connect to AWS.

157
00:09:01,470 --> 00:09:05,130
Now we spoke about those issuer URLs.

158
00:09:05,130 --> 00:09:06,240
So you may be wondering

159
00:09:06,240 --> 00:09:09,030
how did Azure actually validate the token

160
00:09:09,030 --> 00:09:10,593
that we gave to it.

161
00:09:11,760 --> 00:09:16,530
So what we publish is
a couple of well-known

162
00:09:16,530 --> 00:09:19,110
endpoints on that issuer URL.

163
00:09:19,110 --> 00:09:20,790
The first is called the well-known

164
00:09:20,790 --> 00:09:23,340
Open ID configuration endpoint.

165
00:09:23,340 --> 00:09:28,230
This basically tells you what
kind of claims we support,

166
00:09:28,230 --> 00:09:31,440
what kind of token algorithms we support,

167
00:09:31,440 --> 00:09:35,610
and a URL for the JSON web key set.

168
00:09:35,610 --> 00:09:39,870
This is where our public
keys are actually hosted.

169
00:09:39,870 --> 00:09:43,410
And then what you see
here is I'm also curling

170
00:09:43,410 --> 00:09:46,680
the JSON web key document.

171
00:09:46,680 --> 00:09:51,120
And you see here that the
public keys corresponding

172
00:09:51,120 --> 00:09:54,000
to the RFA algorithm type

173
00:09:54,000 --> 00:09:57,210
and an ECDSA algorithm type are available.

174
00:09:57,210 --> 00:09:59,490
So what Azure did behind the scenes

175
00:09:59,490 --> 00:10:02,010
is they went to the configured point,

176
00:10:02,010 --> 00:10:07,010
they then figured out what
the the JWKS endpoint was

177
00:10:07,800 --> 00:10:10,980
and they then subsequently
call that endpoint

178
00:10:10,980 --> 00:10:13,650
to get the public keys
and validate my token.

179
00:10:13,650 --> 00:10:16,800
Now if you're using this
for your own workloads,

180
00:10:16,800 --> 00:10:18,570
we've made it super easy for you.

181
00:10:18,570 --> 00:10:22,650
You can pick any library
that understands parses

182
00:10:22,650 --> 00:10:25,590
JOSN web tokens and those
libraries would be able

183
00:10:25,590 --> 00:10:27,660
to natively do do this for you.

184
00:10:27,660 --> 00:10:31,140
We have some example
libraries on our documentation

185
00:10:31,140 --> 00:10:34,590
and to tell you more about the claims

186
00:10:34,590 --> 00:10:36,420
and additional fine-grain controls

187
00:10:36,420 --> 00:10:39,393
that we have I'll invite
Vaishnavi on stage.

188
00:10:42,000 --> 00:10:42,963
- Thank you Ram.

189
00:10:44,610 --> 00:10:48,090
So now that we've all seen an
exciting demo of this feature,

190
00:10:48,090 --> 00:10:50,670
let's talk about what
are the primary benefits

191
00:10:50,670 --> 00:10:52,170
of using this feature.

192
00:10:52,170 --> 00:10:53,640
The first one's obvious, right?

193
00:10:53,640 --> 00:10:55,020
This is enhanced security

194
00:10:55,020 --> 00:10:58,050
because you're now eliminating
long-term credentials

195
00:10:58,050 --> 00:10:59,820
from your environment.

196
00:10:59,820 --> 00:11:03,480
So quick interesting fact,
two thirds of the cases

197
00:11:03,480 --> 00:11:06,690
that come to the customer
incident response team

198
00:11:06,690 --> 00:11:08,400
are due to an initial access

199
00:11:08,400 --> 00:11:12,660
by an unintended actor using
valid long-term credentials.

200
00:11:12,660 --> 00:11:14,670
So take advantage of this feature

201
00:11:14,670 --> 00:11:16,380
and replace your long-term credentials

202
00:11:16,380 --> 00:11:19,080
with short-lived JSON web
tokens for secure access

203
00:11:19,080 --> 00:11:20,313
to external services.

204
00:11:21,720 --> 00:11:24,570
The second one is reduced
operational complexity.

205
00:11:24,570 --> 00:11:27,420
You no longer have to
manage these long-term creds

206
00:11:27,420 --> 00:11:29,460
or rotate them frequently.

207
00:11:29,460 --> 00:11:31,470
If you were using pre-signed URLs

208
00:11:31,470 --> 00:11:33,900
and complex authentication
flows to integrate

209
00:11:33,900 --> 00:11:37,050
with these external services,
you can replace all of that

210
00:11:37,050 --> 00:11:39,030
with a simple few lines of code.

211
00:11:39,030 --> 00:11:42,600
A simple API call to get
web identity token API

212
00:11:42,600 --> 00:11:45,603
and get a JWT for authentication
with external services.

213
00:11:46,530 --> 00:11:48,660
Third is the interoperability.

214
00:11:48,660 --> 00:11:51,240
So this feature was
designed to be interoperable

215
00:11:51,240 --> 00:11:56,010
with many of your cloud service
providers, SaaS providers,

216
00:11:56,010 --> 00:11:57,720
and even used for authentication

217
00:11:57,720 --> 00:11:59,970
between your own
applications hosted on cloud

218
00:11:59,970 --> 00:12:01,173
or on premises.

219
00:12:02,700 --> 00:12:04,860
Now let's actually do a
quick recap of the claims

220
00:12:04,860 --> 00:12:06,270
that you just saw in the demo.

221
00:12:06,270 --> 00:12:09,660
So the claims can be broadly
categorized into two.

222
00:12:09,660 --> 00:12:12,360
The first one is your standard YDC claims.

223
00:12:12,360 --> 00:12:14,760
So these are again designed
to be interoperable.

224
00:12:14,760 --> 00:12:18,300
So we have the standard
subject claim which identifies

225
00:12:18,300 --> 00:12:19,710
the role or the user

226
00:12:19,710 --> 00:12:22,500
or the IAM principle
that's being federated

227
00:12:22,500 --> 00:12:24,210
to the external service.

228
00:12:24,210 --> 00:12:26,160
We have the audience of the token,

229
00:12:26,160 --> 00:12:28,740
we have the expiration
time, a unique identifier

230
00:12:28,740 --> 00:12:31,680
for this JWT and the issuer URL.

231
00:12:31,680 --> 00:12:33,870
Then we have a set of custom claims

232
00:12:33,870 --> 00:12:36,720
that AWS puts in the token on your behalf.

233
00:12:36,720 --> 00:12:38,940
All of these claims are names spaced under

234
00:12:38,940 --> 00:12:43,940
sts.amazonaws.com and this
includes identity context,

235
00:12:44,130 --> 00:12:45,990
session context, compute context,

236
00:12:45,990 --> 00:12:48,720
and even your principle tags, request tags

237
00:12:48,720 --> 00:12:50,220
that you can add to the token.

238
00:12:51,900 --> 00:12:55,320
Let's actually pay special
attention to the issuer URL here.

239
00:12:55,320 --> 00:12:57,540
So when we were building this feature,

240
00:12:57,540 --> 00:13:01,680
we thought what would be a
good way to deliver a secure

241
00:13:01,680 --> 00:13:04,410
by design experience for customers?

242
00:13:04,410 --> 00:13:07,500
And we decided to go with a
issuer URL that's specific

243
00:13:07,500 --> 00:13:10,983
to your AWS account to
guarantee tenant isolation.

244
00:13:13,571 --> 00:13:17,520
So now let's look at the
custom claims within the token.

245
00:13:17,520 --> 00:13:20,430
The AWS account ID is
included in the token.

246
00:13:20,430 --> 00:13:22,560
This helps the downstream service validate

247
00:13:22,560 --> 00:13:25,620
that the token is coming from
the account that you trust.

248
00:13:25,620 --> 00:13:27,570
We also include the source region,

249
00:13:27,570 --> 00:13:29,460
which is the AWS region from which

250
00:13:29,460 --> 00:13:31,413
the token generation request was made.

251
00:13:32,940 --> 00:13:36,060
If your AWS account is
part of an organization,

252
00:13:36,060 --> 00:13:38,490
we include the organization ID

253
00:13:38,490 --> 00:13:41,313
and the OU path in the token as well.

254
00:13:42,750 --> 00:13:44,340
Then we have principle tags.

255
00:13:44,340 --> 00:13:45,660
So if your IAM principle,

256
00:13:45,660 --> 00:13:48,780
like your role or your user
has tags attached to them,

257
00:13:48,780 --> 00:13:51,330
those tags show up under
the principle tags.

258
00:13:51,330 --> 00:13:54,300
And if your assumed role
session has session tags

259
00:13:54,300 --> 00:13:56,490
attached to them, the
session tags also show up

260
00:13:56,490 --> 00:13:57,940
in the principle tag section.

261
00:13:58,800 --> 00:14:00,300
Both of these can be used

262
00:14:00,300 --> 00:14:03,150
for fine grained authorization
in the downstream service.

263
00:14:04,020 --> 00:14:05,730
Then we include some context

264
00:14:05,730 --> 00:14:07,680
that's particular to your compute.

265
00:14:07,680 --> 00:14:09,600
So in Ram's example, you may have seen

266
00:14:09,600 --> 00:14:13,410
that there were some claims
pertaining to the EC2 instance.

267
00:14:13,410 --> 00:14:15,690
So for example, if it
was a Lambda function

268
00:14:15,690 --> 00:14:18,240
that's actually federating its identity,

269
00:14:18,240 --> 00:14:22,530
you would see lambda function
specific claims in the token.

270
00:14:22,530 --> 00:14:24,780
And if the identity originally federated

271
00:14:24,780 --> 00:14:25,890
from an external provider,

272
00:14:25,890 --> 00:14:28,380
we also include the federated provider on.

273
00:14:28,380 --> 00:14:31,080
And there are a lot of other
claims that are very specific

274
00:14:31,080 --> 00:14:33,330
to your session context
and your compute context.

275
00:14:33,330 --> 00:14:36,243
You can go through the full
list on our documentation.

276
00:14:38,610 --> 00:14:42,420
Now, if you wanted to add
your own claims to the token,

277
00:14:42,420 --> 00:14:44,910
you could do that by
passing the tags parameter

278
00:14:44,910 --> 00:14:48,150
to the API call and specify
the key value pairs.

279
00:14:48,150 --> 00:14:50,970
All of these would show up
under the request tag section

280
00:14:50,970 --> 00:14:52,500
in the token,

281
00:14:52,500 --> 00:14:53,790
and you can use these again

282
00:14:53,790 --> 00:14:56,540
for fine-grained authorization
in the external service.

283
00:14:58,590 --> 00:15:01,560
Now let's talk about how
you can control access

284
00:15:01,560 --> 00:15:04,290
to this feature for your IAM principles.

285
00:15:04,290 --> 00:15:05,940
So the permission to keep in mind here

286
00:15:05,940 --> 00:15:08,370
is the STS get web identity token.

287
00:15:08,370 --> 00:15:10,830
Any IAM principle who has this permission

288
00:15:10,830 --> 00:15:13,620
in their policies will be able to generate

289
00:15:13,620 --> 00:15:17,700
JSON web tokens for authentication
with external services.

290
00:15:17,700 --> 00:15:19,470
So you can use this permission

291
00:15:19,470 --> 00:15:22,170
in any and all relevant policy types

292
00:15:22,170 --> 00:15:27,170
like your SCPs, RCPs identity
based policies, VPC policies.

293
00:15:29,341 --> 00:15:31,830
We are also introducing
three new condition keys

294
00:15:31,830 --> 00:15:33,360
as part of this feature.

295
00:15:33,360 --> 00:15:36,060
The first one is the
identity token audience.

296
00:15:36,060 --> 00:15:39,090
Using this condition key,
you can restrict the list

297
00:15:39,090 --> 00:15:40,860
of audiences and ensure

298
00:15:40,860 --> 00:15:44,370
that your I am principles
only generate tokens

299
00:15:44,370 --> 00:15:46,050
for these audiences.

300
00:15:46,050 --> 00:15:47,550
And if they try to generate a token

301
00:15:47,550 --> 00:15:49,850
for any other audience,
the request will fail.

302
00:15:51,420 --> 00:15:54,000
We also have the STS duration seconds.

303
00:15:54,000 --> 00:15:56,550
So this condition key can be used

304
00:15:56,550 --> 00:15:58,770
to enforce maximum token lifetimes.

305
00:15:58,770 --> 00:16:02,100
So tokens are valid for
five minutes by default,

306
00:16:02,100 --> 00:16:05,670
but the token lifetime can range
anywhere between 60 seconds

307
00:16:05,670 --> 00:16:07,980
to one hour and you can set maximum

308
00:16:07,980 --> 00:16:10,950
so token lifetimes that
suit your operational needs

309
00:16:10,950 --> 00:16:12,513
and your security requirements.

310
00:16:14,010 --> 00:16:16,830
Finally, we have the
STS signing algorithm.

311
00:16:16,830 --> 00:16:19,159
So we currently support
two signing algorithms,

312
00:16:19,159 --> 00:16:21,810
ES384 and RS256.

313
00:16:21,810 --> 00:16:23,550
So you can use this condition key

314
00:16:23,550 --> 00:16:25,230
to specify the signing algorithm

315
00:16:25,230 --> 00:16:27,303
to be used to sign the token.

316
00:16:29,700 --> 00:16:32,790
Now let's talk about a few best practices.

317
00:16:32,790 --> 00:16:35,040
Before that, let me tell
you that this feature

318
00:16:35,040 --> 00:16:37,830
is available in all
AWS commercial regions,

319
00:16:37,830 --> 00:16:41,190
GovCloud regions, and
China regions at launch.

320
00:16:41,190 --> 00:16:42,540
And this feature is available

321
00:16:42,540 --> 00:16:44,343
at no additional cost to customers.

322
00:16:45,390 --> 00:16:46,920
So like I mentioned before,

323
00:16:46,920 --> 00:16:49,320
the primary goal of building this feature

324
00:16:49,320 --> 00:16:52,320
is to eliminate long-term
credentials from your environment.

325
00:16:52,320 --> 00:16:54,360
So please replace all your API keys,

326
00:16:54,360 --> 00:16:57,400
your passwords with
short-term, short-lived JWTs

327
00:16:58,500 --> 00:17:01,020
and make them as short as possible

328
00:17:01,020 --> 00:17:02,973
to prevent unintended access.

329
00:17:04,110 --> 00:17:06,600
Look at the authorization
context in your token

330
00:17:06,600 --> 00:17:08,070
after you validate the signature.

331
00:17:08,070 --> 00:17:11,220
So ensure that the tokens
actually issued by AWS

332
00:17:11,220 --> 00:17:15,810
and it's valid before you look
at the authorization context.

333
00:17:15,810 --> 00:17:17,880
Also look at the custom
claims in the token

334
00:17:17,880 --> 00:17:20,310
that AWS populates whenever possible

335
00:17:20,310 --> 00:17:22,170
to do more fine-grained access control

336
00:17:22,170 --> 00:17:23,880
in the downstream service.

337
00:17:23,880 --> 00:17:26,370
Make sure you don't log these tokens.

338
00:17:26,370 --> 00:17:29,760
You can request for a fresh
token anytime you need.

339
00:17:29,760 --> 00:17:32,583
And also make sure you send
these requests over TLS.

340
00:17:35,190 --> 00:17:38,280
You can refer to these QR
codes for more resources.

341
00:17:38,280 --> 00:17:39,870
The first one is our blog post,

342
00:17:39,870 --> 00:17:43,440
which talks about a walkthrough
of how to use this feature.

343
00:17:43,440 --> 00:17:44,760
And for an in-depth guide

344
00:17:44,760 --> 00:17:46,860
you can look at our documentation as well.

345
00:17:48,690 --> 00:17:50,790
So thank you so much for joining us today.

346
00:17:52,920 --> 00:17:57,240
- Alright, and please do
take the session survey

347
00:17:57,240 --> 00:17:59,460
once it pops up on the app.

348
00:17:59,460 --> 00:18:01,010
Thank you very much once again.

