# AWS re:Invent 2025 代码会话：Agent SOPs 和 AI 编程最佳实践

## 会议概述

本次会议由 Amazon 首席软件工程师 James Hood 和 AWS 高级开发者倡导者 Maish Saidel-Keesing 共同主持，重点介绍了 Amazon 内部如何使用生成式 AI 工具进行日常开发工作。会议分为两个主要部分：首先由 Maish 介绍 Amazon 内部使用的 AI 提示工程技术和最佳实践，然后由 James 演示刚刚开源的 Agent SOPs（Agent 标准操作程序）系统。

两位演讲者强调，Amazon 已经全面拥抱生成式 AI 工具，并将其应用于日常开发的各个环节。他们通过实际代码演示展示了如何通过结构化的方法和工具来提高 AI 辅助编程的效果，而不是简单的"氛围编程"。会议内容基于 Amazon 内部的实际使用经验，并提供了开源工具供外部开发者使用。

## 详细时间线与关键要点

### 0:00-10:00 会议开场和背景介绍
- James Hood 和 Maish Saidel-Keesing 自我介绍
- 说明会议将包含实际代码演示，可能会遇到非确定性的 AI 行为
- 介绍 Amazon 内部的"机制"概念：将有效的工具和流程标准化并在公司内部推广
- 提供 GitHub 仓库链接供观众跟随学习

### 10:00-25:00 AI 提示工程基础技术
- **零样本提示（Zero-shot）**：直接向 LLM 提问，演示创建 IAM 策略验证脚本
- **单样本提示（One-shot）**：提供一个示例来指导 AI 输出格式和风格
- **少样本提示（Few-shot）**：提供多个示例以获得更精确的结果
- **系统提示、上下文提示和角色提示**：
  - 系统提示：基本的任务描述
  - 上下文提示：提供具体的工作环境和需求信息
  - 角色提示：让 AI 扮演特定角色（如 AWS 解决方案架构师）

### 25:00-35:00 高级提示技术
- **自一致性提示（Self-consistency prompting）**：
  - 要求 AI 生成多个不同的解决方案并选择最佳方案
  - 演示多区域高可用架构设计的三种不同方法
  - 适用于复杂架构决策、故障排除、安全分析等场景
- **思维树（Tree of thought）**：
  - 结构化地探索问题的多个分支
  - 演示 Lambda 性能优化问题的系统性分析方法
  - 可与自一致性提示结合使用

### 35:00-45:00 上下文增强和工作流程
- **添加上下文信息**：演示如何将 Amazon 内部文档写作风格加载到 AI 上下文中
- **探索-计划-编码-提交工作流程**：
  - 探索：让 AI 理解现有代码库
  - 计划：基于理解制定实现计划
  - 编码：生成符合现有风格的代码
  - 提交：生成符合最佳实践的提交信息
- 演示如何为现有 JavaScript 认证系统添加密码重置功能

### 45:00-55:00 Agent SOPs 介绍和演示
- James Hood 介绍 Agent SOPs（Agent 标准操作程序）概念
- **代码库摘要演示**：
  - 运行 code-base-summary SOP 分析整个代码库
  - 自动生成项目结构、架构图（使用 Mermaid）、组件文档
  - 创建统一的 agents.md 文件供后续使用
- **SOP 格式结构**：
  - 标题和概述
  - 参数定义（必需和可选）
  - 分步骤执行指令
  - 每步骤的约束条件（使用 RFC 2119 关键词）
  - 示例和故障排除指南

### 55:00-63:30 实时功能开发演示
- **创建简单 SOP**：演示创建姓名诗歌生成器的过程
- **GitHub 问题分类 SOP**：
  - 创建自动分类 GitHub 问题的 SOP
  - 包含干运行模式用于演示
  - 实际运行并分析真实的 GitHub 问题
- **实时功能实现**：
  - 使用 PDD（属性驱动开发）SOP 进行需求澄清
  - 通过 Code Task Generator 创建详细的实现任务
  - 使用 Code Assist SOP 进行测试驱动开发
  - 演示红-绿-重构的开发周期

### 关键技术要点
- Amazon 内部使用 Amazon Bedrock 确保数据隐私和安全
- Agent SOPs 是工具无关的，可以与任何支持的 LLM 配合使用
- 强调结构化方法相比"氛围编程"的优势
- MCP（模型上下文协议）用于连接各种外部系统和工具
- 内部已有数千个 SOPs 用于自动化各种操作、编码和生产力任务