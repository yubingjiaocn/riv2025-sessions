1
00:00:00,750 --> 00:00:02,400
- [Saurabh] How's everyone doing?

2
00:00:02,400 --> 00:00:05,340
Monday, got through it, right? (laughs)

3
00:00:05,340 --> 00:00:07,890
Probably we are in between you

4
00:00:07,890 --> 00:00:10,170
and your drinks, so we'll try to keep it

5
00:00:10,170 --> 00:00:11,523
as smooth as possible.

6
00:00:13,050 --> 00:00:15,540
So before we start, let
me ask the question,

7
00:00:15,540 --> 00:00:19,140
how many of you are using
Lambda functions in production

8
00:00:19,140 --> 00:00:20,540
or playing around with them?

9
00:00:21,570 --> 00:00:23,940
Alright, that's majority of you.

10
00:00:23,940 --> 00:00:25,830
And how many of you are performing some

11
00:00:25,830 --> 00:00:27,813
sort of resilience testing for it?

12
00:00:29,820 --> 00:00:31,969
Alright, you are in the right room.

13
00:00:31,969 --> 00:00:35,070
(speakers laughing)

14
00:00:35,070 --> 00:00:38,850
So as evident from the room

15
00:00:38,850 --> 00:00:41,880
that more and more
companies like yourselves

16
00:00:41,880 --> 00:00:43,200
are adopting service

17
00:00:43,200 --> 00:00:45,960
technologies like AWS Lambda functions

18
00:00:45,960 --> 00:00:48,960
and Lambda functions make
it easy for you to deploy

19
00:00:48,960 --> 00:00:50,670
and run your applications

20
00:00:50,670 --> 00:00:53,070
because it takes away the
undifferentiated heavy lifting

21
00:00:53,070 --> 00:00:54,813
of managing the infrastructure.

22
00:00:55,710 --> 00:00:58,860
But at the same time it
makes it difficult for you

23
00:00:58,860 --> 00:01:02,040
to perform chaos engineering
or resilience testing

24
00:01:02,040 --> 00:01:04,860
and that's where AWS FIS Native Fault

25
00:01:04,860 --> 00:01:06,600
Actions come into picture.

26
00:01:06,600 --> 00:01:09,600
It helps you to get started
with chaos engineering

27
00:01:09,600 --> 00:01:12,720
or serverless workloads
quickly and easily.

28
00:01:12,720 --> 00:01:15,000
In this session we are going to talk about

29
00:01:15,000 --> 00:01:17,910
what those FIS fault actions are,

30
00:01:17,910 --> 00:01:19,080
how do they work

31
00:01:19,080 --> 00:01:22,530
and demonstrate you some
practical ways of getting started

32
00:01:22,530 --> 00:01:23,703
with chaos engineering,

33
00:01:25,140 --> 00:01:27,813
resilience testing for
serverless technologies.

34
00:01:29,250 --> 00:01:30,390
My name is Saurabh Kumar

35
00:01:30,390 --> 00:01:32,940
I'm a senior solutions architect at AWS.

36
00:01:32,940 --> 00:01:35,280
I'm also a member of a technical community

37
00:01:35,280 --> 00:01:37,140
that focuses on guiding customers

38
00:01:37,140 --> 00:01:39,120
on resilience and chaos injury.

39
00:01:39,120 --> 00:01:40,323
And for this talk today,

40
00:01:40,323 --> 00:01:42,213
I'm joined by my colleague Haresh.

41
00:01:44,550 --> 00:01:45,720
- [Haresh] Thanks Saurabh.

42
00:01:45,720 --> 00:01:47,400
And hello everyone.

43
00:01:47,400 --> 00:01:48,421
So Haresh Nandwani,

44
00:01:48,421 --> 00:01:50,490
I'm a solution architect like Saurabh.

45
00:01:50,490 --> 00:01:54,210
I predominantly work with
financial services customers

46
00:01:54,210 --> 00:01:57,360
and I'm also part of the same
technical field community

47
00:01:57,360 --> 00:02:00,060
that focuses on all things resilience.

48
00:02:00,060 --> 00:02:01,443
So moving on.

49
00:02:03,390 --> 00:02:04,560
So the session today,

50
00:02:04,560 --> 00:02:05,820
we'll be covering a few things.

51
00:02:05,820 --> 00:02:09,360
I think as Saurabh mentioned,
the focus is really

52
00:02:09,360 --> 00:02:11,550
to walkthrough how you can actually

53
00:02:11,550 --> 00:02:12,840
get started using these

54
00:02:12,840 --> 00:02:15,230
Lambda actions for testing the resilience

55
00:02:15,230 --> 00:02:17,061
of your Lambda functions.

56
00:02:17,061 --> 00:02:18,540
So we'll first start off

57
00:02:18,540 --> 00:02:20,850
with chaos engineering benefits

58
00:02:20,850 --> 00:02:22,560
and just a very high level overview

59
00:02:22,560 --> 00:02:24,858
of the fault injection service.

60
00:02:24,858 --> 00:02:28,320
Then we'll give you a quick
introduction to Lambda.

61
00:02:28,320 --> 00:02:30,780
Hopefully you all know based on, you know,

62
00:02:30,780 --> 00:02:31,890
the number of hands that went up.

63
00:02:31,890 --> 00:02:34,020
You probably all know Lambda very well.

64
00:02:34,020 --> 00:02:36,390
But we'll just cover some of the basics

65
00:02:36,390 --> 00:02:39,420
and then start talking
through the FIS Lambda actions

66
00:02:39,420 --> 00:02:41,700
that have been recently added.

67
00:02:41,700 --> 00:02:45,720
Then we move on to how the
Lambda actions actually work.

68
00:02:45,720 --> 00:02:47,710
So the FIS actions that we are going

69
00:02:48,690 --> 00:02:50,940
to talk about how they
actually really work

70
00:02:50,940 --> 00:02:52,740
and how they've been implemented.

71
00:02:52,740 --> 00:02:55,110
They use a concept called extensions.

72
00:02:55,110 --> 00:02:58,680
So we'll cover how those
extensions are really set up

73
00:02:58,680 --> 00:03:02,100
and then we'll move on
to the real fun element

74
00:03:02,100 --> 00:03:05,790
of the session, which is
a live coding session.

75
00:03:05,790 --> 00:03:06,623
So,

76
00:03:08,610 --> 00:03:09,443
cool.

77
00:03:10,290 --> 00:03:13,590
So chaos engineering, again, I think

78
00:03:13,590 --> 00:03:14,700
we asked a question already,

79
00:03:14,700 --> 00:03:18,270
but in terms of, you know,
using chaos engineering

80
00:03:18,270 --> 00:03:19,800
or having heard of chaos engineering,

81
00:03:19,800 --> 00:03:20,633
can I have a quick show

82
00:03:20,633 --> 00:03:23,610
of hands on how many
people here know the term

83
00:03:23,610 --> 00:03:25,080
or even better have used

84
00:03:25,080 --> 00:03:27,660
it to implement chaos engineering?

85
00:03:27,660 --> 00:03:28,493
Brilliant.

86
00:03:28,493 --> 00:03:32,460
Okay, what, a few hands that's
really positive to hear.

87
00:03:32,460 --> 00:03:33,690
A couple of years back,

88
00:03:33,690 --> 00:03:36,420
I'm sure I would've had a pretty silent

89
00:03:36,420 --> 00:03:37,470
room to that question.

90
00:03:37,470 --> 00:03:38,820
It's a chaos engineering

91
00:03:38,820 --> 00:03:42,060
as an approach is actually
getting quite popular

92
00:03:42,060 --> 00:03:45,610
and the approach is about
experimenting with your system

93
00:03:46,470 --> 00:03:48,450
to basically build confidence

94
00:03:48,450 --> 00:03:51,270
that when things go wrong

95
00:03:51,270 --> 00:03:52,230
your system can actually

96
00:03:52,230 --> 00:03:55,660
sort of survive in fact even

97
00:03:56,940 --> 00:03:58,620
address any challenges

98
00:03:58,620 --> 00:04:01,443
and get back to normal
as soon as possible.

99
00:04:02,670 --> 00:04:06,870
The chaos engineering process is all about

100
00:04:06,870 --> 00:04:09,840
sort of introducing
faults into your system

101
00:04:09,840 --> 00:04:10,996
and then basically validating

102
00:04:10,996 --> 00:04:15,030
how your system reacts to those faults.

103
00:04:15,030 --> 00:04:17,250
The key benefit here obviously

104
00:04:17,250 --> 00:04:19,680
is that as you test your system

105
00:04:19,680 --> 00:04:21,790
by running these failure scenarios

106
00:04:22,680 --> 00:04:24,510
you get a better understanding

107
00:04:24,510 --> 00:04:26,100
of the resilience posture of a system.

108
00:04:26,100 --> 00:04:28,380
So really how resilient your system is.

109
00:04:28,380 --> 00:04:30,750
Where are some of the key
challenges from a resilience

110
00:04:30,750 --> 00:04:32,910
perspective and most importantly,

111
00:04:32,910 --> 00:04:34,960
what are the key unknowns in your system.

112
00:04:36,090 --> 00:04:38,490
It's far better as you can imagine,

113
00:04:38,490 --> 00:04:39,480
finding those unknowns

114
00:04:39,480 --> 00:04:42,240
early rather than finding them on

115
00:04:42,240 --> 00:04:45,210
a Sunday at 3:00 AM in
your production system.

116
00:04:45,210 --> 00:04:48,010
So you know, you can see the
value of chaos engineering.

117
00:04:50,340 --> 00:04:53,040
So how do you actually
implement chaos engineering?

118
00:04:53,040 --> 00:04:54,480
And again, there are a number

119
00:04:54,480 --> 00:04:56,970
of options in this space to be honest.

120
00:04:56,970 --> 00:04:57,840
Our recommendation

121
00:04:57,840 --> 00:05:00,240
is to use the AWS fault injection service

122
00:05:00,240 --> 00:05:02,853
or FIS as we'll refer to
it during the session.

123
00:05:03,780 --> 00:05:07,410
And there are three key
reasons why we recommend FIS.

124
00:05:07,410 --> 00:05:10,380
The first is that it's
a completely serverless

125
00:05:10,380 --> 00:05:12,060
and fully managed service.

126
00:05:12,060 --> 00:05:14,460
So no service supervision

127
00:05:14,460 --> 00:05:17,190
for actually running your chaos tooling.

128
00:05:17,190 --> 00:05:19,240
That's all kind of pre-provision for you.

129
00:05:20,430 --> 00:05:22,500
There is also a pretty healthy

130
00:05:22,500 --> 00:05:25,380
set of what we call a
failures in our library

131
00:05:25,380 --> 00:05:27,180
that exists within the tool.

132
00:05:27,180 --> 00:05:30,030
So you know, one of the key asks

133
00:05:30,030 --> 00:05:31,260
from customers when they want

134
00:05:31,260 --> 00:05:32,250
to implement chaos engineering

135
00:05:32,250 --> 00:05:33,630
is that how do I quickly get

136
00:05:33,630 --> 00:05:35,910
onto implementing chaos experiments

137
00:05:35,910 --> 00:05:36,750
and I don't want to spend

138
00:05:36,750 --> 00:05:38,460
a lot of time actually sort of,

139
00:05:38,460 --> 00:05:40,380
you know, documenting inferior scenarios

140
00:05:40,380 --> 00:05:41,400
or even doing all the hard

141
00:05:41,400 --> 00:05:42,900
lifting that you have to do.

142
00:05:42,900 --> 00:05:44,400
So this is where FIS really shines.

143
00:05:44,400 --> 00:05:48,030
So we again talk about these
scenario library shortly.

144
00:05:48,030 --> 00:05:49,500
So that was the first.

145
00:05:49,500 --> 00:05:51,986
The second is that FIS

146
00:05:51,986 --> 00:05:55,290
includes native integration

147
00:05:55,290 --> 00:05:57,750
with AWS services like for example EC2.

148
00:05:57,750 --> 00:06:00,540
So one common example,

149
00:06:00,540 --> 00:06:01,397
the other would be if you wanted

150
00:06:01,397 --> 00:06:05,970
to say for example, pause
autoscaling for your system

151
00:06:05,970 --> 00:06:08,730
in live or in your test system,

152
00:06:08,730 --> 00:06:10,620
then FIS provides you

153
00:06:10,620 --> 00:06:13,290
with the ability to effectively perform

154
00:06:13,290 --> 00:06:16,980
those actions natively.

155
00:06:16,980 --> 00:06:18,090
Not something that a lot

156
00:06:18,090 --> 00:06:19,890
of the other tools actually provide.

157
00:06:20,820 --> 00:06:22,410
And then the third most important thing

158
00:06:22,410 --> 00:06:25,530
is that when we talk
about chaos engineering,

159
00:06:25,530 --> 00:06:26,610
as I mentioned before,

160
00:06:26,610 --> 00:06:28,530
a lot of it is effectively

161
00:06:28,530 --> 00:06:30,720
sort of introducing
faults into your system.

162
00:06:30,720 --> 00:06:32,010
But the key thing is that you want

163
00:06:32,010 --> 00:06:34,230
to introduce faults in
a controlled manner.

164
00:06:34,230 --> 00:06:35,400
So this is where again FIS

165
00:06:35,400 --> 00:06:36,750
provides you with the controls

166
00:06:36,750 --> 00:06:39,270
and guardrails that allow you to,

167
00:06:39,270 --> 00:06:40,560
when you are introducing faults

168
00:06:40,560 --> 00:06:41,940
into your system, you want

169
00:06:41,940 --> 00:06:43,110
to be able to control

170
00:06:43,110 --> 00:06:45,180
the execution of those faults

171
00:06:45,180 --> 00:06:47,310
and the execution of the experiments.

172
00:06:47,310 --> 00:06:48,930
So for example, there is a feature in FIS

173
00:06:48,930 --> 00:06:50,340
called safety levers.

174
00:06:50,340 --> 00:06:51,900
So when you run an experiment

175
00:06:51,900 --> 00:06:53,940
and if the experiment
actually does far more than

176
00:06:53,940 --> 00:06:56,130
what you thought it would,
you can actually pull

177
00:06:56,130 --> 00:06:58,470
that safety lever in all the experiments

178
00:06:58,470 --> 00:07:00,243
that are running will get stopped.

179
00:07:01,140 --> 00:07:03,030
So those are some of the key reasons

180
00:07:03,030 --> 00:07:04,200
why FIS is actually a

181
00:07:04,200 --> 00:07:05,973
great tool to get started with.

182
00:07:06,930 --> 00:07:08,460
There are a few key things

183
00:07:08,460 --> 00:07:10,950
that you need to just maybe know

184
00:07:10,950 --> 00:07:12,360
as we go into the live coding session.

185
00:07:12,360 --> 00:07:13,530
There are a few key terms

186
00:07:13,530 --> 00:07:16,440
that will be helpful to know.

187
00:07:16,440 --> 00:07:18,990
We obviously, when we talk
about chaos engineering,

188
00:07:18,990 --> 00:07:20,160
we talk about experiments.

189
00:07:20,160 --> 00:07:22,390
So we will be setting
up experiments in FIS

190
00:07:23,370 --> 00:07:24,973
and the way to set up experiments

191
00:07:24,973 --> 00:07:26,550
and FIS is to write something

192
00:07:26,550 --> 00:07:28,040
called an experiment template.

193
00:07:28,040 --> 00:07:29,130
So an experiment template

194
00:07:29,130 --> 00:07:30,990
is basically a failure scenario.

195
00:07:30,990 --> 00:07:32,220
Like for example,

196
00:07:32,220 --> 00:07:35,157
in the case of say if you run a multi

197
00:07:35,157 --> 00:07:37,770
AZ application, you might want

198
00:07:37,770 --> 00:07:40,410
to set up a scenario
which tests the impact

199
00:07:40,410 --> 00:07:42,390
of a single AZ being impaired.

200
00:07:42,390 --> 00:07:44,430
So that would be an experiment

201
00:07:44,430 --> 00:07:46,394
template that you set up

202
00:07:46,394 --> 00:07:48,480
and then you run it

203
00:07:48,480 --> 00:07:50,910
and then that becomes an experiment.

204
00:07:50,910 --> 00:07:51,870
The other key terms

205
00:07:51,870 --> 00:07:54,210
that you will hear us use a lot are

206
00:07:54,210 --> 00:07:56,220
actions and targets.

207
00:07:56,220 --> 00:07:59,010
Actions are basically
faults that you introduce.

208
00:07:59,010 --> 00:08:03,060
So for example, if you
want to degrade the network

209
00:08:03,060 --> 00:08:05,070
between the network latency,

210
00:08:05,070 --> 00:08:07,920
introduce network latency
between multiple components

211
00:08:07,920 --> 00:08:09,960
or shut down EC2 instances or as I said

212
00:08:09,960 --> 00:08:12,300
before, pause autoscaling groups.

213
00:08:12,300 --> 00:08:14,520
Those are actions that you introduce

214
00:08:14,520 --> 00:08:17,100
and targets as the name
suggest are effectively you

215
00:08:17,100 --> 00:08:18,540
know, where those actions run.

216
00:08:18,540 --> 00:08:20,460
So if you are running an action

217
00:08:20,460 --> 00:08:23,340
or introducing a fault
against a Lambda function,

218
00:08:23,340 --> 00:08:25,440
then the Lambda function will be a target.

219
00:08:27,420 --> 00:08:30,450
The other key element to kind of know

220
00:08:30,450 --> 00:08:33,000
and to be aware of is CloudWatch.

221
00:08:33,000 --> 00:08:35,640
So again, one of the key
elements of chaos engineering

222
00:08:35,640 --> 00:08:37,380
that is really, really critical

223
00:08:37,380 --> 00:08:39,540
to get right is observability.

224
00:08:39,540 --> 00:08:40,890
If you can't observe it,

225
00:08:40,890 --> 00:08:43,080
it hasn't happened as
far as you're concerned.

226
00:08:43,080 --> 00:08:45,810
So it's really important that CloudWatch

227
00:08:45,810 --> 00:08:46,890
and whatever you're using

228
00:08:46,890 --> 00:08:49,260
for observability is set up correctly so

229
00:08:49,260 --> 00:08:50,400
that you can actually observe

230
00:08:50,400 --> 00:08:52,350
the impact of the experiment

231
00:08:52,350 --> 00:08:53,943
or the fault being introduced.

232
00:08:56,370 --> 00:08:58,140
So next we come to Lambda.

233
00:08:58,140 --> 00:08:59,910
Lambda is our serverless compute service.

234
00:08:59,910 --> 00:09:02,223
So you obviously all know that very well.

235
00:09:03,300 --> 00:09:06,060
You know, the intent of
Lambda is that you don't have

236
00:09:06,060 --> 00:09:08,100
to think about or worry
about server provisioning

237
00:09:08,100 --> 00:09:10,350
and all the kind of
infrastructure management stuff.

238
00:09:10,350 --> 00:09:13,113
You can focus on writing
your business logic.

239
00:09:14,160 --> 00:09:16,710
Lambda is a regional service

240
00:09:16,710 --> 00:09:19,530
and what that means is
basically it uses the multiple

241
00:09:19,530 --> 00:09:22,110
availability zones that
come with the region

242
00:09:22,110 --> 00:09:25,170
that provide redundancy
and fault isolation.

243
00:09:25,170 --> 00:09:26,940
And that is then used as far

244
00:09:26,940 --> 00:09:28,762
as you're concerned for your function,

245
00:09:28,762 --> 00:09:30,570
by effectively what happens is

246
00:09:30,570 --> 00:09:32,550
that if there is a infrastructure failure

247
00:09:32,550 --> 00:09:34,530
or there's an impairment
to the infrastructure

248
00:09:34,530 --> 00:09:36,380
that is running your Lambda function,

249
00:09:37,740 --> 00:09:39,960
that is kind of taken care of

250
00:09:39,960 --> 00:09:41,640
and the impact to you is minimal

251
00:09:41,640 --> 00:09:44,970
because of the multiple AZs

252
00:09:44,970 --> 00:09:47,313
that are effectively
running in the region.

253
00:09:48,450 --> 00:09:49,283
So,

254
00:09:50,970 --> 00:09:55,443
effectively Lambda is a
resilient service by design.

255
00:09:56,430 --> 00:09:58,440
So what does that really mean?

256
00:09:58,440 --> 00:09:59,460
Does that mean that if you are

257
00:09:59,460 --> 00:10:00,960
running a Lambda function

258
00:10:00,960 --> 00:10:02,070
or you've set up a Lambda function,

259
00:10:02,070 --> 00:10:05,010
you're running a predominantly
Lambda based system,

260
00:10:05,010 --> 00:10:07,590
you don't have to worry about resilience?

261
00:10:07,590 --> 00:10:12,590
Well no, you still need to
take care of resilience.

262
00:10:14,190 --> 00:10:16,350
Your Lambda functions will typically not

263
00:10:16,350 --> 00:10:17,580
operate in isolation.

264
00:10:17,580 --> 00:10:20,310
They're not really sort of
standalone in most cases they

265
00:10:20,310 --> 00:10:22,530
integrate with upstream
and downstream systems

266
00:10:22,530 --> 00:10:24,810
or components in your architecture

267
00:10:24,810 --> 00:10:26,490
and you still need to validate

268
00:10:26,490 --> 00:10:29,940
that when these Lambda
functions encounter failures

269
00:10:29,940 --> 00:10:31,710
or encounter issues,

270
00:10:31,710 --> 00:10:35,370
how does the overall system's
resilience get impacted?

271
00:10:35,370 --> 00:10:37,020
So what is the impact
on upstream downstream

272
00:10:37,020 --> 00:10:39,030
systems and so on and so forth.

273
00:10:39,030 --> 00:10:40,920
So as you can imagine,

274
00:10:40,920 --> 00:10:43,200
that is quite a critical ask.

275
00:10:43,200 --> 00:10:45,150
Something that our
customers have been asking

276
00:10:45,150 --> 00:10:47,250
for, for quite some time.

277
00:10:47,250 --> 00:10:49,919
And the approach that we have recommended

278
00:10:49,919 --> 00:10:52,200
to customers is to use chaos engineering

279
00:10:52,200 --> 00:10:53,700
for effectively for you

280
00:10:53,700 --> 00:10:55,920
to test your Lambda systems

281
00:10:55,920 --> 00:10:57,810
from a resilience perspective.

282
00:10:57,810 --> 00:11:00,660
And to help you with that,

283
00:11:00,660 --> 00:11:05,343
we recently introduced
three actions within FIS.

284
00:11:07,110 --> 00:11:10,530
So the first one is
called add start delay.

285
00:11:10,530 --> 00:11:13,710
What that does is that basically you can,

286
00:11:13,710 --> 00:11:18,710
by specifying amount of
time, you can delay the start

287
00:11:19,380 --> 00:11:20,583
of the Lambda function.

288
00:11:21,900 --> 00:11:22,740
So for example,

289
00:11:22,740 --> 00:11:26,190
if you have your Lambda
consuming components

290
00:11:26,190 --> 00:11:28,140
and you want to understand
what's the impact

291
00:11:28,140 --> 00:11:30,300
of a delay in your Lambda function

292
00:11:30,300 --> 00:11:33,000
to those Lambda consuming functions,

293
00:11:33,000 --> 00:11:36,693
then that would be a
great experiment to run.

294
00:11:37,950 --> 00:11:40,860
The second one is around
modifying integration response.

295
00:11:40,860 --> 00:11:43,830
So again, if you have Lambda
functions that are either

296
00:11:43,830 --> 00:11:45,630
returning incorrect responses

297
00:11:45,630 --> 00:11:48,180
or if they are then themselves integrating

298
00:11:48,180 --> 00:11:49,680
with other downstream systems,

299
00:11:49,680 --> 00:11:51,750
which then might be returning
incorrect responses,

300
00:11:51,750 --> 00:11:53,940
which the Lambda function returns back

301
00:11:53,940 --> 00:11:55,710
to the consuming applications.

302
00:11:55,710 --> 00:11:57,750
If you want to test
those kind of scenarios,

303
00:11:57,750 --> 00:11:59,310
then that is where the modified

304
00:11:59,310 --> 00:12:01,160
integration response comes into play.

305
00:12:02,220 --> 00:12:04,500
And the third one is the
invocation errors one.

306
00:12:04,500 --> 00:12:06,690
So this is where you
want to test the impact

307
00:12:06,690 --> 00:12:09,480
of your Lambda functions
basically being marked

308
00:12:09,480 --> 00:12:12,060
as failed when they are invoked.

309
00:12:12,060 --> 00:12:13,833
So what's the impact on, again,

310
00:12:14,902 --> 00:12:16,110
the components in your architecture

311
00:12:16,110 --> 00:12:18,110
that are calling these Lambda functions?

312
00:12:19,230 --> 00:12:22,920
So how do you actually now use FIS

313
00:12:22,920 --> 00:12:25,740
and these actions to integrate

314
00:12:25,740 --> 00:12:28,650
that chaos engineering
approach into your system?

315
00:12:28,650 --> 00:12:31,740
So I'll hand over to
Saurabh to talk about that.

316
00:12:31,740 --> 00:12:33,000
- [Saurabh] Alright,

317
00:12:33,000 --> 00:12:35,580
so before we get into the fault actions,

318
00:12:35,580 --> 00:12:38,430
let's quickly look at
the Lambda components

319
00:12:38,430 --> 00:12:40,950
and this should be familiar with you.

320
00:12:40,950 --> 00:12:43,980
Most of you'll probably be aware of it.

321
00:12:43,980 --> 00:12:46,470
So central to the Lambda function

322
00:12:46,470 --> 00:12:48,930
is the business logic code that you write.

323
00:12:48,930 --> 00:12:50,850
And this is the code
that you care the most

324
00:12:50,850 --> 00:12:53,100
about your function code.

325
00:12:53,100 --> 00:12:55,250
You write the business
logic along with its

326
00:12:56,550 --> 00:12:59,793
entry point called the
functional handler function.

327
00:13:01,110 --> 00:13:04,170
And along with that
comes the library code.

328
00:13:04,170 --> 00:13:06,240
This is the runtime specific code.

329
00:13:06,240 --> 00:13:09,150
For example, if you're
writing your code in Java,

330
00:13:09,150 --> 00:13:11,880
then the library code would
be the Java runtime library

331
00:13:11,880 --> 00:13:14,763
isn't necessary to run the function code.

332
00:13:16,110 --> 00:13:18,630
Another component that you can have,

333
00:13:18,630 --> 00:13:22,980
and this function and
library code runs in a secure

334
00:13:22,980 --> 00:13:26,850
and isolated runtime
environment, which is managed

335
00:13:26,850 --> 00:13:29,493
by Lambda execution environment.

336
00:13:30,660 --> 00:13:33,660
And Lambda runtime
environment communicates

337
00:13:33,660 --> 00:13:35,550
with the execution environment

338
00:13:35,550 --> 00:13:37,860
through an HTTP runtime, API.

339
00:13:37,860 --> 00:13:41,160
And that's where your
events are triggered under

340
00:13:41,160 --> 00:13:43,260
Lambda functions invoked.

341
00:13:43,260 --> 00:13:47,670
Now another component your
Lambda function can have

342
00:13:47,670 --> 00:13:48,963
is an extension.

343
00:13:50,160 --> 00:13:54,210
Extension is a custom
code that enables you

344
00:13:54,210 --> 00:13:57,300
to write custom code
with your function code.

345
00:13:57,300 --> 00:13:58,770
And the Lambda extensions

346
00:13:58,770 --> 00:14:01,290
are packaged as a separate layer.

347
00:14:01,290 --> 00:14:03,300
It runs as a separate process

348
00:14:03,300 --> 00:14:04,893
within the runtime environment.

349
00:14:05,850 --> 00:14:07,050
So now the next question

350
00:14:07,050 --> 00:14:11,100
is how does FIS provide
native fault actions?

351
00:14:11,100 --> 00:14:12,003
Any guess?

352
00:14:15,540 --> 00:14:16,840
It's not a trick question.

353
00:14:18,480 --> 00:14:20,210
The extensions.

354
00:14:20,210 --> 00:14:24,630
AWS provides FIS extension to be able

355
00:14:24,630 --> 00:14:27,570
to inject falls in your
Lambda invocations.

356
00:14:27,570 --> 00:14:28,680
And how does it do that,

357
00:14:28,680 --> 00:14:33,680
is that it implements a API proxy pattern,

358
00:14:33,750 --> 00:14:38,280
thereby hooking into the Lambda
function execution request

359
00:14:38,280 --> 00:14:40,680
response lifecycle enabling

360
00:14:40,680 --> 00:14:41,880
you to inject the faults

361
00:14:41,880 --> 00:14:43,203
that Haresh talked about.

362
00:14:44,730 --> 00:14:47,370
So you have seen how the
FIS extension enables

363
00:14:47,370 --> 00:14:50,640
you to implement chaos engineering.

364
00:14:50,640 --> 00:14:51,903
Let's see how it works.

365
00:14:52,740 --> 00:14:55,470
When you configure the FIS extension,

366
00:14:55,470 --> 00:14:58,890
you also configure an S3
bucket and this is the bucket

367
00:14:58,890 --> 00:15:01,500
this FIS extension would keep on pulling

368
00:15:01,500 --> 00:15:04,290
to see if you're running an experiment.

369
00:15:04,290 --> 00:15:07,143
And when you start an experiment from FIS,

370
00:15:08,100 --> 00:15:12,480
FIS puts a fault configuration
to the S3 bucket.

371
00:15:12,480 --> 00:15:16,080
So next time when the FIS

372
00:15:16,080 --> 00:15:19,980
extension pulls for it,
it sees the active fault

373
00:15:19,980 --> 00:15:22,773
and starts applying
those faults accordingly.

374
00:15:23,760 --> 00:15:25,710
Now I'll deep dive a little bit

375
00:15:25,710 --> 00:15:28,113
on the pooling aspect of it.

376
00:15:29,370 --> 00:15:32,682
So when you are not running any fault

377
00:15:32,682 --> 00:15:36,030
for Lambda functions, the normal lifecycle

378
00:15:36,030 --> 00:15:40,314
is that the runtime would
initialize extension followed

379
00:15:40,314 --> 00:15:42,960
by initializing the runtime itself,

380
00:15:42,960 --> 00:15:45,360
followed by initialization
of the function.

381
00:15:45,360 --> 00:15:47,940
When all of the
initializations are successful,

382
00:15:47,940 --> 00:15:50,280
then your Lambda function
would be invoked one

383
00:15:50,280 --> 00:15:51,540
or multiple times

384
00:15:51,540 --> 00:15:54,690
and this is where no
fault are being injected.

385
00:15:54,690 --> 00:15:56,550
And when there are no more events,

386
00:15:56,550 --> 00:15:58,700
the shutdown would
happen in reverse order.

387
00:15:59,700 --> 00:16:02,790
Now when the FIS extension is initialized,

388
00:16:02,790 --> 00:16:04,950
it starts a timer.

389
00:16:04,950 --> 00:16:08,430
It starts a timer, which
pulls the S3 bucket

390
00:16:08,430 --> 00:16:10,890
to see if you're running an experiment.

391
00:16:10,890 --> 00:16:13,830
It sees that there is
no experiment being run.

392
00:16:13,830 --> 00:16:17,370
Then it sets the timer on slow poll mode,

393
00:16:17,370 --> 00:16:19,413
which is 60 seconds by default.

394
00:16:20,550 --> 00:16:22,860
But when you start the experiment,

395
00:16:22,860 --> 00:16:24,240
it's next time it pulls

396
00:16:24,240 --> 00:16:26,970
and sees that there is active experiment,

397
00:16:26,970 --> 00:16:30,300
then it sets the timer on hot poll mode,

398
00:16:30,300 --> 00:16:31,710
which is 20 seconds

399
00:16:31,710 --> 00:16:34,050
and you can't configure that.

400
00:16:34,050 --> 00:16:36,330
Now this dual mode of hot poll

401
00:16:36,330 --> 00:16:38,220
and slow poll is a trade off

402
00:16:38,220 --> 00:16:40,980
between the performance
when you're not running any

403
00:16:40,980 --> 00:16:44,250
experiment versus recovery, quick recovery

404
00:16:44,250 --> 00:16:45,210
to the normal state

405
00:16:45,210 --> 00:16:47,163
when the experiment has concluded.

406
00:16:51,210 --> 00:16:54,060
Now with that I'll hand it over to Haresh

407
00:16:54,060 --> 00:16:56,643
and we'll get into the
live codings part of it.

408
00:16:58,080 --> 00:16:58,943
- [Haresh] Thank you.

409
00:17:00,690 --> 00:17:01,523
Right.

410
00:17:01,523 --> 00:17:02,640
So what we'll do as part

411
00:17:02,640 --> 00:17:04,680
of the live coding session,

412
00:17:04,680 --> 00:17:06,780
part of the session is
that we'll first walk you

413
00:17:06,780 --> 00:17:08,790
through the app
architecture that we'll use

414
00:17:08,790 --> 00:17:13,790
for demonstrating the use
of Lambda FIS actions.

415
00:17:13,830 --> 00:17:15,990
Then we'll walk you through the CDK code.

416
00:17:15,990 --> 00:17:18,510
So we have a ton of CDK code

417
00:17:18,510 --> 00:17:19,980
that we're going to use today,

418
00:17:19,980 --> 00:17:22,890
some of it to actually
deploy the application

419
00:17:22,890 --> 00:17:25,770
that we are going to
use for as a demo today.

420
00:17:25,770 --> 00:17:27,930
And then there is some CDK code

421
00:17:27,930 --> 00:17:28,763
that is actually going

422
00:17:28,763 --> 00:17:30,470
to set up the experiments themselves.

423
00:17:31,350 --> 00:17:33,659
We will then run the experiment

424
00:17:33,659 --> 00:17:36,300
and then effectively also show you

425
00:17:36,300 --> 00:17:37,800
as Saurabh was mentioning

426
00:17:37,800 --> 00:17:39,700
the impact of these slow fast polling.

427
00:17:45,090 --> 00:17:46,020
- [Saurabh] So I switch.

428
00:17:46,020 --> 00:17:47,190
- [Haresh] Demo.

429
00:17:47,190 --> 00:17:48,030
Yeah.

430
00:17:48,030 --> 00:17:48,863
Okay.

431
00:17:48,863 --> 00:17:51,030
Can people right at the end see

432
00:17:51,030 --> 00:17:52,920
clearly what's on the screen?

433
00:17:52,920 --> 00:17:55,893
Okay, please let me know
if it's not visible.

434
00:17:56,760 --> 00:17:58,830
So what you have here is the CDK code

435
00:17:58,830 --> 00:18:00,570
that we mentioned we'll walk through,

436
00:18:00,570 --> 00:18:04,053
but first I'll quickly go
through the architecture.

437
00:18:06,360 --> 00:18:08,790
The architecture is pretty
straightforward to be honest.

438
00:18:08,790 --> 00:18:13,790
All we've done here is set
up a DynamoDB database,

439
00:18:13,980 --> 00:18:17,430
few tables, and then there
is a set of Lambda functions

440
00:18:17,430 --> 00:18:18,960
that are accessing and running cloud

441
00:18:18,960 --> 00:18:22,020
operations on the DynamoDB table.

442
00:18:22,020 --> 00:18:26,940
Then you have a set of
APIs hosted on API gateway,

443
00:18:26,940 --> 00:18:29,613
which is then accessed
by an external consumer.

444
00:18:31,140 --> 00:18:32,610
The intent here is not

445
00:18:32,610 --> 00:18:35,640
to focus too much on the
application itself, but on FIS.

446
00:18:35,640 --> 00:18:38,373
So that's why the application
is as simple as it is,

447
00:18:39,330 --> 00:18:42,480
so that's the bottom
half of the application.

448
00:18:42,480 --> 00:18:47,400
What you see at the top is, try this.

449
00:18:47,400 --> 00:18:51,420
So the top half here
is all that is required

450
00:18:51,420 --> 00:18:54,270
for the FIS experiment.

451
00:18:54,270 --> 00:18:57,018
So there is the S3 bucket
that Saurabh mentioned

452
00:18:57,018 --> 00:18:59,130
and then we will kind of cover

453
00:18:59,130 --> 00:19:00,573
some of how that is set up.

454
00:19:05,190 --> 00:19:06,023
Right.

455
00:19:07,462 --> 00:19:08,613
I think I might sit.

456
00:19:13,291 --> 00:19:15,210
Okay, so getting into the code

457
00:19:15,210 --> 00:19:17,460
then there are two stacks

458
00:19:17,460 --> 00:19:19,050
that we have today.

459
00:19:19,050 --> 00:19:20,635
So as I mentioned,

460
00:19:20,635 --> 00:19:23,607
the APS stack is the
one which we deploying

461
00:19:23,607 --> 00:19:26,333
the API elements directly
the serverless elements

462
00:19:26,333 --> 00:19:27,343
of the stack, which is the
API gateway lab and DynamoDB

463
00:19:31,097 --> 00:19:32,751
and even the S3 to be honest.

464
00:19:32,751 --> 00:19:34,798
And then there is the
other part of the stack,

465
00:19:34,798 --> 00:19:38,130
which is the FIS experiment,
part of the stack

466
00:19:38,130 --> 00:19:40,713
which we'll be deploying
the FIS experiments.

467
00:19:41,640 --> 00:19:45,330
So first to go through the API code,

468
00:19:45,330 --> 00:19:46,950
again, a lot of the code

469
00:19:46,950 --> 00:19:48,150
that we'll show you here is

470
00:19:48,150 --> 00:19:49,470
pretty standard stuff.

471
00:19:49,470 --> 00:19:50,610
So we'll not be walking you

472
00:19:50,610 --> 00:19:51,750
through every line of code.

473
00:19:51,750 --> 00:19:54,150
That's probably not a
great use of your time.

474
00:19:54,150 --> 00:19:55,260
We'll kind of just focus

475
00:19:55,260 --> 00:19:56,700
on the key elements of the code

476
00:19:56,700 --> 00:19:58,680
that are necessary for setting up FIS

477
00:19:58,680 --> 00:20:00,630
and running the FIS experiments.

478
00:20:00,630 --> 00:20:02,620
So to start off with, first up

479
00:20:03,810 --> 00:20:05,843
is the serverless API.

480
00:20:09,510 --> 00:20:11,100
And this is where effectively

481
00:20:11,100 --> 00:20:12,486
we have written the code

482
00:20:12,486 --> 00:20:15,450
for setting up the APIs

483
00:20:15,450 --> 00:20:17,763
and running the code operations.

484
00:20:18,600 --> 00:20:19,620
The key element we wanted

485
00:20:19,620 --> 00:20:21,845
to point you towards are

486
00:20:21,845 --> 00:20:25,260
these parameters that you set up for each

487
00:20:25,260 --> 00:20:26,610
of the Lambda function that you want

488
00:20:26,610 --> 00:20:28,503
to run an FIS experiment against.

489
00:20:29,340 --> 00:20:30,250
So ignore the first two.

490
00:20:30,250 --> 00:20:32,190
Those are for effectively the Lambda

491
00:20:32,190 --> 00:20:34,320
to access the DynamoDB

492
00:20:34,320 --> 00:20:37,320
But the next four are really the key ones.

493
00:20:37,320 --> 00:20:39,430
So starting off with the AWS FIS

494
00:20:40,430 --> 00:20:42,630
configuration location.

495
00:20:42,630 --> 00:20:46,620
So that is again as Saurabh mentioned

496
00:20:46,620 --> 00:20:49,020
S3 effectively acts as the in-between,

497
00:20:49,020 --> 00:20:51,990
between FIS and your Lambda function.

498
00:20:51,990 --> 00:20:55,290
S3 effectively stores the
experiment configuration.

499
00:20:55,290 --> 00:20:58,590
So that's where you need
to point Lambda towards

500
00:20:58,590 --> 00:20:59,580
so that Lambda can actually

501
00:20:59,580 --> 00:21:02,163
sort of access that FIS bucket.

502
00:21:03,360 --> 00:21:05,400
The next one is around
the Lambda exec wrapper.

503
00:21:05,400 --> 00:21:07,020
So again, as Saurabh mentioned,

504
00:21:07,020 --> 00:21:07,980
we are using the concept

505
00:21:07,980 --> 00:21:10,830
of extensions and what you need

506
00:21:10,830 --> 00:21:13,650
to specify there is the
location of a wrapper script

507
00:21:13,650 --> 00:21:15,870
that we have that we provide

508
00:21:15,870 --> 00:21:17,870
that basically bootstraps the extension.

509
00:21:19,800 --> 00:21:20,730
The FIS extension,

510
00:21:20,730 --> 00:21:24,420
again, as Saurabh mentioned
runs in its own process.

511
00:21:24,420 --> 00:21:27,420
You might want to measure elements

512
00:21:27,420 --> 00:21:30,120
of how the extension itself is performing.

513
00:21:30,120 --> 00:21:33,420
So that's beyond how the
Lambda function is performing.

514
00:21:33,420 --> 00:21:34,530
So you might want to understand how

515
00:21:34,530 --> 00:21:36,240
the extension is performing.

516
00:21:36,240 --> 00:21:37,140
So there are again metrics

517
00:21:37,140 --> 00:21:40,260
that can be emitted from the extension

518
00:21:40,260 --> 00:21:42,480
and for enabling that we set

519
00:21:42,480 --> 00:21:44,793
that AWS FIS extension metrics to all.

520
00:21:46,050 --> 00:21:48,540
And then finally the slow poll interval.

521
00:21:48,540 --> 00:21:52,110
Again, this is basically
as Saurabh mentioned

522
00:21:52,110 --> 00:21:54,570
this is to effectively tell

523
00:21:54,570 --> 00:21:56,700
the extension on how quickly

524
00:21:56,700 --> 00:21:58,350
or how slowly it has to pull

525
00:21:58,350 --> 00:22:00,633
for the experiment configuration from S3.

526
00:22:02,040 --> 00:22:04,470
So those are some of
the key elements there.

527
00:22:04,470 --> 00:22:07,293
Moving on to the next bit of the stack,

528
00:22:09,780 --> 00:22:12,180
this part of the stack
effectively deploys,

529
00:22:12,180 --> 00:22:14,250
this is a CDK code to
actually do the deployment

530
00:22:14,250 --> 00:22:15,720
of the Lambda function.

531
00:22:15,720 --> 00:22:17,190
Again, I won't go through

532
00:22:17,190 --> 00:22:18,780
all the hundreds of lines of code,

533
00:22:18,780 --> 00:22:20,220
but this particular bit

534
00:22:20,220 --> 00:22:21,660
that you see on the screen

535
00:22:21,660 --> 00:22:24,150
is of some importance.

536
00:22:24,150 --> 00:22:25,860
So there is some code there,

537
00:22:25,860 --> 00:22:27,600
which is the key one here.

538
00:22:27,600 --> 00:22:30,450
One is called resource stack.

539
00:22:30,450 --> 00:22:32,370
So one of the ways you can actually,

540
00:22:32,370 --> 00:22:34,450
when you are running experiments in FIS

541
00:22:35,670 --> 00:22:38,477
and you want to basically
clearly define which parts

542
00:22:38,477 --> 00:22:42,420
of your stack you want to
run the experiments on,

543
00:22:42,420 --> 00:22:44,010
you can use a concept of tags.

544
00:22:44,010 --> 00:22:46,050
So you can basically tell FIS

545
00:22:46,050 --> 00:22:47,580
that only target Lambda functions

546
00:22:47,580 --> 00:22:48,570
will have a specific tag.

547
00:22:48,570 --> 00:22:50,850
So that's what we are doing here.

548
00:22:50,850 --> 00:22:53,880
The second one is the Lambda layer ARN.

549
00:22:53,880 --> 00:22:56,760
So again, as Saurabh mentioned,

550
00:22:56,760 --> 00:22:59,340
because we are using concept
of a managed extension

551
00:22:59,340 --> 00:23:01,890
that we have provided, you need

552
00:23:01,890 --> 00:23:04,260
to point Lambda towards the extension.

553
00:23:04,260 --> 00:23:07,980
So the ARN there is the location

554
00:23:07,980 --> 00:23:09,213
of the extension code.

555
00:23:10,380 --> 00:23:12,033
That is defined here.

556
00:23:14,070 --> 00:23:17,070
So this is the location

557
00:23:17,070 --> 00:23:21,030
of the Lambda layer ARN
or the extension code.

558
00:23:21,030 --> 00:23:22,110
As you can see it's actually

559
00:23:22,110 --> 00:23:23,250
an ARN that is pointing

560
00:23:23,250 --> 00:23:27,390
to a specific account
and a specific region.

561
00:23:27,390 --> 00:23:28,800
You'll be happy to know

562
00:23:28,800 --> 00:23:30,270
that not every code you run

563
00:23:30,270 --> 00:23:31,530
in every region needs to point

564
00:23:31,530 --> 00:23:36,180
to US east one, effectively
you will have a version

565
00:23:36,180 --> 00:23:38,223
of this in every region you run.

566
00:23:39,600 --> 00:23:44,600
And then you have the tags.

567
00:23:44,940 --> 00:23:47,800
So as I mentioned before,
you have the tag name

568
00:23:48,840 --> 00:23:52,680
that you want, the FIS
experiments to target

569
00:23:52,680 --> 00:23:55,560
and the value that you will want to use.

570
00:23:55,560 --> 00:23:58,110
So these are some of the
key elements of the stack

571
00:23:58,110 --> 00:24:00,780
that we wanted to just explain to you.

572
00:24:00,780 --> 00:24:04,110
Now the stack, if we deploy it in runtime,

573
00:24:04,110 --> 00:24:06,750
that is now, takes about
four to five minutes.

574
00:24:06,750 --> 00:24:09,000
Again, in the interest of time,

575
00:24:09,000 --> 00:24:12,180
what we have done is we
have pre-deployed the stack.

576
00:24:12,180 --> 00:24:14,130
So let me go to the AWS console

577
00:24:14,130 --> 00:24:18,153
and show you the output of
the stack being deployed.

578
00:24:28,470 --> 00:24:30,240
- [Saurabh] Firefox.

579
00:24:30,240 --> 00:24:33,453
- [Haresh] Yeah, okay.

580
00:24:34,320 --> 00:24:36,570
So this is the AWS console.

581
00:24:36,570 --> 00:24:38,820
Hopefully it's not something

582
00:24:38,820 --> 00:24:40,470
that people haven't seen before.

583
00:24:40,470 --> 00:24:41,730
Anybody here who needs an

584
00:24:41,730 --> 00:24:43,830
introduction to the AWS console?

585
00:24:43,830 --> 00:24:45,240
Okay, thank God.

586
00:24:45,240 --> 00:24:46,440
That's pretty useful.

587
00:24:46,440 --> 00:24:49,020
So going back to the stacks then

588
00:24:49,020 --> 00:24:51,690
the stacks that we have here.

589
00:24:51,690 --> 00:24:53,403
So we have the API stack.

590
00:24:54,480 --> 00:24:56,490
So once the CDK code
is deployed, it's going

591
00:24:56,490 --> 00:24:58,893
to deploy the APIs.

592
00:25:00,120 --> 00:25:02,010
Let's quickly look at a
couple of things again.

593
00:25:02,010 --> 00:25:03,270
So there are a couple of outputs

594
00:25:03,270 --> 00:25:06,843
that we expect from this stack.

595
00:25:08,220 --> 00:25:11,210
The first one is the
CloudWatch dashboard, ARN.

596
00:25:11,210 --> 00:25:14,880
So again, what we do as
part of the FIS experiments

597
00:25:14,880 --> 00:25:16,680
is that when we run the experiment,

598
00:25:16,680 --> 00:25:18,240
we also generate reports.

599
00:25:18,240 --> 00:25:19,368
Again, we'll show that to you

600
00:25:19,368 --> 00:25:21,930
when we run the experiment

601
00:25:21,930 --> 00:25:23,310
and the report can actually

602
00:25:23,310 --> 00:25:25,260
use outputs from a CloudWatch

603
00:25:25,260 --> 00:25:28,110
dashboard to then effectively demonstrate

604
00:25:28,110 --> 00:25:30,060
the impact of running the experiment.

605
00:25:30,060 --> 00:25:32,280
So that's the ARN that it'll use.

606
00:25:32,280 --> 00:25:34,800
And then the FIS bucket, ARN, again,

607
00:25:34,800 --> 00:25:38,400
this is the we've created an S3 bucket

608
00:25:38,400 --> 00:25:41,100
and we are going to pass the ARN for that

609
00:25:41,100 --> 00:25:45,153
to the FIS stack or the experiment stack.

610
00:25:46,050 --> 00:25:47,910
The resources that this has generated,

611
00:25:47,910 --> 00:25:50,700
these are all the resources
that have been generated.

612
00:25:50,700 --> 00:25:53,283
So again, the bucket
and so on and so forth.

613
00:25:54,660 --> 00:25:58,140
What I'll do is I'll
just dive deep into one

614
00:25:58,140 --> 00:26:00,360
of the Lambda functions just to show you

615
00:26:00,360 --> 00:26:01,890
how the deployment actually looks.

616
00:26:01,890 --> 00:26:05,640
So let's pick up the get item function.

617
00:26:05,640 --> 00:26:08,160
This is a Lambda function
that basically is going

618
00:26:08,160 --> 00:26:10,863
to fetch items from an DynamoDB database.

619
00:26:12,004 --> 00:26:13,404
If I navigate to the Lambda,

620
00:26:16,890 --> 00:26:19,260
what you can see is there is a layer

621
00:26:19,260 --> 00:26:20,430
now which has been added.

622
00:26:20,430 --> 00:26:22,800
So this is effectively the FIS extension

623
00:26:22,800 --> 00:26:24,000
that has been introduced

624
00:26:25,050 --> 00:26:26,850
into the Lambda function as a layer.

625
00:26:28,920 --> 00:26:31,200
Let's also look at a few of the parameters

626
00:26:31,200 --> 00:26:33,450
that we have set up.

627
00:26:33,450 --> 00:26:38,450
So let's navigate to the
environment variables.

628
00:26:39,300 --> 00:26:40,380
So again, as you can see

629
00:26:40,380 --> 00:26:42,300
these are all the configurations

630
00:26:42,300 --> 00:26:44,550
that we were introducing in the code.

631
00:26:44,550 --> 00:26:46,770
So that is the FIS configuration location,

632
00:26:46,770 --> 00:26:48,390
which is the location to the S3 bucket

633
00:26:48,390 --> 00:26:53,390
where FIS will copy the
experiment configuration,

634
00:26:54,420 --> 00:26:56,640
you have then the extension metrics,

635
00:26:56,640 --> 00:26:57,473
we've set it all.

636
00:26:57,473 --> 00:26:58,930
So it'll actually generate a ton of

637
00:27:00,450 --> 00:27:02,340
metrics from the extension,

638
00:27:02,340 --> 00:27:04,020
the slow polling interval

639
00:27:04,020 --> 00:27:06,450
and then the Lambda
exec wrapper and so on.

640
00:27:06,450 --> 00:27:09,630
So effectively the Lambda
now is set up with all

641
00:27:09,630 --> 00:27:13,650
that needs to be set up
to be ready to accept

642
00:27:13,650 --> 00:27:15,603
a fault introduction from FIS.

643
00:27:19,080 --> 00:27:20,970
The last thing I think I'll show is maybe

644
00:27:20,970 --> 00:27:22,080
the CloudWatch dashboard.

645
00:27:22,080 --> 00:27:22,920
- [Saurabh] Yeah.
- [Haresh] Okay.

646
00:27:22,920 --> 00:27:23,753
So.

647
00:27:28,710 --> 00:27:31,260
- [Saurabh] And this is for
knowing your steady state

648
00:27:31,260 --> 00:27:32,940
before you run the experiment.

649
00:27:32,940 --> 00:27:36,270
So pre-experiment state, experiment state

650
00:27:36,270 --> 00:27:37,473
and the recovery state.

651
00:27:39,990 --> 00:27:43,680
- [Haresh] So yeah, this
is the FIS dashboard.

652
00:27:43,680 --> 00:27:45,330
Again, as I've mentioned

653
00:27:45,330 --> 00:27:47,460
before, observability is absolutely

654
00:27:47,460 --> 00:27:48,300
the most critical thing

655
00:27:48,300 --> 00:27:50,640
that you do when you do chaos engineering.

656
00:27:50,640 --> 00:27:52,770
So having a clearly set

657
00:27:52,770 --> 00:27:54,360
of identified metrics that you want

658
00:27:54,360 --> 00:27:56,310
to track so that when you run

659
00:27:56,310 --> 00:27:57,420
the experiment you can actually see

660
00:27:57,420 --> 00:27:58,770
the impact is absolutely critical.

661
00:27:58,770 --> 00:28:00,980
So what this dashboard does is

662
00:28:00,980 --> 00:28:04,560
it basically shows you the impact of if

663
00:28:04,560 --> 00:28:06,360
and when an experiment runs,

664
00:28:06,360 --> 00:28:07,650
it'll show you an impact so for example,

665
00:28:07,650 --> 00:28:10,860
the FIS latency impact
should change when if we

666
00:28:10,860 --> 00:28:13,473
introduce a latency error
into the Lambda function.

667
00:28:14,430 --> 00:28:19,380
Similarly, if you introduce an error

668
00:28:19,380 --> 00:28:21,150
that actually sort of causes

669
00:28:21,150 --> 00:28:23,310
the Lambda invocations to fail,

670
00:28:23,310 --> 00:28:26,463
then you should see some
change in the metrics here.

671
00:28:28,530 --> 00:28:29,363
Cool.

672
00:28:29,363 --> 00:28:31,500
So I think the next
stage is basically for us

673
00:28:31,500 --> 00:28:34,860
to effectively write the CDK code

674
00:28:34,860 --> 00:28:36,420
that will set up the FIS experience.

675
00:28:36,420 --> 00:28:38,670
So I'll pass that on to Saurabh.

676
00:28:38,670 --> 00:28:43,380
- [Saurabh] Alright, before
that, quickly looking at

677
00:28:43,380 --> 00:28:44,490
what we have covered so far.

678
00:28:44,490 --> 00:28:47,010
So we looked at the
application architecture,

679
00:28:47,010 --> 00:28:50,490
we looked at the application code

680
00:28:50,490 --> 00:28:52,500
and we looked at the hypothesis

681
00:28:52,500 --> 00:28:53,850
where Haresh pointed out

682
00:28:53,850 --> 00:28:56,310
that the observability metrics

683
00:28:56,310 --> 00:28:58,710
and you can build like if
you're injecting errors,

684
00:28:58,710 --> 00:29:02,340
what would the impact
latency wise, error wise.

685
00:29:02,340 --> 00:29:04,260
So that's the hypothesis.

686
00:29:04,260 --> 00:29:06,003
Now we'll get into the CDK code.

687
00:29:07,260 --> 00:29:08,553
All right.

688
00:29:13,677 --> 00:29:14,844
What happened?

689
00:29:15,900 --> 00:29:16,733
What happened?

690
00:29:24,944 --> 00:29:28,111
- [Haresh] I think we might have lost,

691
00:29:30,300 --> 00:29:31,943
- [Saurabh] I think that should do it.

692
00:29:34,290 --> 00:29:37,140
Sorry about that, technical glitch, sorry.

693
00:29:37,140 --> 00:29:38,903
- [Haresh] Network connectivity issues.

694
00:29:40,620 --> 00:29:42,533
- [Saurabh] Just move
it and plug it back in.

695
00:29:45,930 --> 00:29:47,273
- [Haresh] No?
- [Saurabh] Yeah.

696
00:29:48,360 --> 00:29:49,410
Alright. Yep.

697
00:29:49,410 --> 00:29:51,183
We are back in business.

698
00:29:52,950 --> 00:29:53,970
Right?

699
00:29:53,970 --> 00:29:55,740
Are you still able to see or you might,

700
00:29:55,740 --> 00:29:57,190
you want me to zoom in a bit?

701
00:30:00,060 --> 00:30:00,893
Good. Okay.

702
00:30:00,893 --> 00:30:01,726
All right.

703
00:30:10,590 --> 00:30:12,270
So here the piece of code

704
00:30:12,270 --> 00:30:14,190
that I'm going to show you is

705
00:30:14,190 --> 00:30:17,580
a CDK stack written in Java.

706
00:30:17,580 --> 00:30:22,580
And when you're thinking
about writing code

707
00:30:22,590 --> 00:30:24,360
for generating the experiments,

708
00:30:24,360 --> 00:30:25,350
there are a couple of things

709
00:30:25,350 --> 00:30:27,090
that you have to build out.

710
00:30:27,090 --> 00:30:29,370
So starting from like the bucket

711
00:30:29,370 --> 00:30:30,630
that we created, you have

712
00:30:30,630 --> 00:30:33,570
to configure the bucket and
the CloudWatch dashboard.

713
00:30:33,570 --> 00:30:37,020
So then I will write that code.

714
00:30:37,020 --> 00:30:39,360
And in the interest of time you

715
00:30:39,360 --> 00:30:40,193
and I know

716
00:30:41,665 --> 00:30:44,550
you don't want to see me typing.

717
00:30:44,550 --> 00:30:48,723
So I will take a little bit of shortcut.

718
00:30:50,610 --> 00:30:52,950
What this piece of code is doing

719
00:30:52,950 --> 00:30:56,010
is importing the S3 bucket

720
00:30:56,010 --> 00:30:58,740
that has been created
in the previous step.

721
00:30:58,740 --> 00:30:59,790
And this is the bucket

722
00:30:59,790 --> 00:31:03,183
where FIS would write
the configurations to.

723
00:31:04,588 --> 00:31:05,730
We are also importing

724
00:31:05,730 --> 00:31:07,620
the dashboard that was created

725
00:31:07,620 --> 00:31:09,390
and that dashboard would be used

726
00:31:09,390 --> 00:31:11,103
in the report that is generated.

727
00:31:12,420 --> 00:31:15,580
So next step is we will create a bucket

728
00:31:16,620 --> 00:31:20,643
which would be the
destination of the FIS report.

729
00:31:22,350 --> 00:31:23,183
- [Haresh] And sorry, we're not trying

730
00:31:23,183 --> 00:31:24,990
to confuse you folks,

731
00:31:24,990 --> 00:31:26,550
but there are two buckets here.

732
00:31:26,550 --> 00:31:30,570
One bucket is used by the
FIS to effectively share

733
00:31:30,570 --> 00:31:32,520
or send the experiment configuration.

734
00:31:32,520 --> 00:31:33,510
And then the second bucket

735
00:31:33,510 --> 00:31:34,720
is used again by FIS

736
00:31:35,700 --> 00:31:37,470
but for storing the reports

737
00:31:37,470 --> 00:31:39,723
that it generates when
you run an experiment.

738
00:31:40,560 --> 00:31:41,580
- [Saurabh] Right.

739
00:31:41,580 --> 00:31:44,130
So with those two things
done now we are going

740
00:31:44,130 --> 00:31:46,170
to create some policies

741
00:31:46,170 --> 00:31:51,150
and these are the policies
that your FIS needs

742
00:31:51,150 --> 00:31:55,150
to be able to run that
experiment on your behalf

743
00:31:56,040 --> 00:31:59,103
and I'll going to walk you
through what these are.

744
00:32:08,550 --> 00:32:12,810
Alright, so we are creating this policy

745
00:32:12,810 --> 00:32:15,700
for the bucket so that it can

746
00:32:17,520 --> 00:32:20,403
write the experiment
report to that bucket.

747
00:32:21,330 --> 00:32:24,437
And since FIS needs to
write the configuration

748
00:32:24,437 --> 00:32:28,050
to the S3 bucket, we are
giving permissions to FIS

749
00:32:28,050 --> 00:32:29,040
to be able to read

750
00:32:29,040 --> 00:32:31,803
and write from that
bucket that we configured.

751
00:32:32,820 --> 00:32:35,613
Same thing for the policy report bucket.

752
00:32:36,720 --> 00:32:40,080
Moving on, since we are
targeting the Lambda functions,

753
00:32:40,080 --> 00:32:43,110
we are providing in this Lambda policy

754
00:32:43,110 --> 00:32:45,150
and tag policy, these are the set

755
00:32:45,150 --> 00:32:47,820
of policies which would
enable FIS to be able

756
00:32:47,820 --> 00:32:50,820
to fetch the Lambda functions

757
00:32:50,820 --> 00:32:52,083
that you want to target.

758
00:32:53,790 --> 00:32:55,710
And since we are using resource,

759
00:32:55,710 --> 00:32:59,400
so we are tag for
identifying the resources,

760
00:32:59,400 --> 00:33:01,413
we are also adding a tag policy here.

761
00:33:03,210 --> 00:33:06,573
Now we want to send the FIS experiment,

762
00:33:07,410 --> 00:33:09,696
logs to the CloudWatch.

763
00:33:09,696 --> 00:33:11,250
So that's why we are configuring

764
00:33:11,250 --> 00:33:13,023
the CloudWatch policy as well.

765
00:33:14,310 --> 00:33:19,020
And then final bit here
is the CloudWatch policy,

766
00:33:19,020 --> 00:33:20,640
CloudWatch dashboard policy,

767
00:33:20,640 --> 00:33:22,440
which would allow FIS

768
00:33:22,440 --> 00:33:24,270
to fetch the dashboard

769
00:33:24,270 --> 00:33:26,643
and all the metrics
inside the dashboard so

770
00:33:26,643 --> 00:33:28,290
that it can pull all of those

771
00:33:28,290 --> 00:33:29,540
and put it in the report.

772
00:33:31,410 --> 00:33:32,670
With all those policies

773
00:33:32,670 --> 00:33:35,790
now we are ready to create the role.

774
00:33:35,790 --> 00:33:39,520
- [Haresh] I think there is
a error in the previous one.

775
00:33:39,520 --> 00:33:40,937
- [Saurabh] Okay.

776
00:33:44,910 --> 00:33:45,743
Which one?

777
00:33:47,010 --> 00:33:50,130
My friend pointed out the error in this,

778
00:33:50,130 --> 00:33:51,663
we'll see when we run this.

779
00:33:56,850 --> 00:33:59,190
- [Haresh] Live coding has its advantages,

780
00:33:59,190 --> 00:34:00,570
disadvantages, I guess

781
00:34:00,570 --> 00:34:02,103
so bear with us please.

782
00:34:03,360 --> 00:34:05,160
- [Saurabh] So what you see here

783
00:34:05,160 --> 00:34:07,380
is that we are creating a role

784
00:34:07,380 --> 00:34:09,300
with the name FIS role

785
00:34:09,300 --> 00:34:11,520
and passing in all the policies

786
00:34:11,520 --> 00:34:14,013
that we have created in the previous step.

787
00:34:16,110 --> 00:34:18,630
Now comes the part

788
00:34:18,630 --> 00:34:19,650
where we are creating

789
00:34:19,650 --> 00:34:21,363
the experiment template for it.

790
00:34:22,200 --> 00:34:24,120
For this session we are going

791
00:34:24,120 --> 00:34:26,130
to create two experiment templates.

792
00:34:26,130 --> 00:34:28,854
One is going to create
experiment template,

793
00:34:28,854 --> 00:34:33,330
which would inject the start up delay

794
00:34:33,330 --> 00:34:36,480
of two seconds for five minutes

795
00:34:36,480 --> 00:34:39,030
to all Lambda invocations

796
00:34:39,030 --> 00:34:40,830
for all the functions which are tagged

797
00:34:40,830 --> 00:34:42,213
with the specific value.

798
00:34:45,330 --> 00:34:47,820
So I would now go ahead

799
00:34:47,820 --> 00:34:50,823
and add the code for it.

800
00:35:00,330 --> 00:35:02,830
So I'll walk you through
the key components of it.

801
00:35:07,590 --> 00:35:10,050
Here we are giving a description

802
00:35:10,050 --> 00:35:11,940
to the experiment template.

803
00:35:11,940 --> 00:35:15,030
And this is where like
you can be verbose here so

804
00:35:15,030 --> 00:35:18,540
that the description
itself is self-explanatory.

805
00:35:18,540 --> 00:35:21,270
When you go into the
console you can clearly see

806
00:35:21,270 --> 00:35:23,280
what the experiment is.

807
00:35:23,280 --> 00:35:27,270
Then I'm giving it a name of inject delay

808
00:35:27,270 --> 00:35:30,840
and specifying the action.

809
00:35:30,840 --> 00:35:33,660
Action here is the invoke add delay.

810
00:35:33,660 --> 00:35:34,710
This is one of the actions

811
00:35:34,710 --> 00:35:37,950
that Haresh walked us before.

812
00:35:37,950 --> 00:35:40,770
And then couple of parameters here.

813
00:35:40,770 --> 00:35:43,020
Start up delay.

814
00:35:43,020 --> 00:35:45,660
What is the amount of delay
that you want to inject?

815
00:35:45,660 --> 00:35:47,160
So in this case we are injecting

816
00:35:47,160 --> 00:35:51,480
two seconds of delay for how long?

817
00:35:51,480 --> 00:35:52,380
For five minutes.

818
00:35:52,380 --> 00:35:54,660
This PT5M parameter specifies

819
00:35:54,660 --> 00:35:57,010
the duration you want
this fall to be injected.

820
00:35:58,440 --> 00:36:00,240
So any invocations during

821
00:36:00,240 --> 00:36:03,570
that time would see this delay.

822
00:36:03,570 --> 00:36:06,780
And then lastly there is
the invocation percent.

823
00:36:06,780 --> 00:36:09,030
So right now it is set to 100.

824
00:36:09,030 --> 00:36:09,870
What does that mean,

825
00:36:09,870 --> 00:36:13,290
is that all the invocations
of all the functions

826
00:36:13,290 --> 00:36:16,590
that are tagged would be impacted.

827
00:36:16,590 --> 00:36:18,360
But if you don't want this all

828
00:36:18,360 --> 00:36:19,863
or nothing kind of experience,

829
00:36:20,880 --> 00:36:24,960
you can set a different value, say 50%.

830
00:36:24,960 --> 00:36:27,270
So it would be more sporadic

831
00:36:27,270 --> 00:36:28,440
and you can see a different

832
00:36:28,440 --> 00:36:30,033
behavior of your application.

833
00:36:33,043 --> 00:36:34,320
And then moving on to the target.

834
00:36:34,320 --> 00:36:36,963
So target is like what
Lambda functions do you

835
00:36:36,963 --> 00:36:38,430
want to impact?

836
00:36:38,430 --> 00:36:40,560
So the resource type is Lambda function

837
00:36:40,560 --> 00:36:42,780
because we want to impact
the Lambda functions

838
00:36:42,780 --> 00:36:45,420
and we want to impact the
Lambda functions which are

839
00:36:45,420 --> 00:36:49,650
specified with this specific tag value.

840
00:36:49,650 --> 00:36:51,900
And lastly, the selection is all.

841
00:36:51,900 --> 00:36:54,030
So all Lambda functions, again,

842
00:36:54,030 --> 00:36:57,060
you can specify if you
want certain percentage

843
00:36:57,060 --> 00:36:59,253
of Lambda functions to be impacted here.

844
00:37:01,980 --> 00:37:03,730
And this last bit of

845
00:37:04,650 --> 00:37:07,320
section here in this experiment template

846
00:37:07,320 --> 00:37:09,720
is configuring the report.

847
00:37:09,720 --> 00:37:12,540
So we are specifying
what is the report bucket

848
00:37:12,540 --> 00:37:14,040
where it should go

849
00:37:14,040 --> 00:37:17,640
and what is the CloudWatch
dashboard that we want

850
00:37:17,640 --> 00:37:20,970
to integrate in this report.

851
00:37:20,970 --> 00:37:25,200
And here we are specifying
what is the duration

852
00:37:25,200 --> 00:37:26,880
of the pre-experiment state,

853
00:37:26,880 --> 00:37:28,800
which is your steady state

854
00:37:28,800 --> 00:37:30,300
and the experiment state

855
00:37:30,300 --> 00:37:32,460
and after that, what is the duration

856
00:37:32,460 --> 00:37:34,230
of the post-experiment state.

857
00:37:34,230 --> 00:37:36,150
Think of it as a recovery state,

858
00:37:36,150 --> 00:37:38,070
when your experiment has concluded

859
00:37:38,070 --> 00:37:41,283
how quickly your system goes
back to its normal state.

860
00:37:42,900 --> 00:37:44,640
So with that, this particular

861
00:37:44,640 --> 00:37:47,040
experiment template is ready.

862
00:37:47,040 --> 00:37:51,630
So now similarly I'm going to add code for

863
00:37:51,630 --> 00:37:53,823
adding the Lambda invocation error.

864
00:38:04,590 --> 00:38:07,450
- [Haresh] So you obviously
don't have to use code for

865
00:38:08,580 --> 00:38:10,380
setting up the experiment templates.

866
00:38:10,380 --> 00:38:12,480
You can obviously use the console,

867
00:38:12,480 --> 00:38:13,770
but because this is a code walkthrough,

868
00:38:13,770 --> 00:38:16,320
we are basically showing you the gory

869
00:38:16,320 --> 00:38:17,823
details of the code.

870
00:38:19,890 --> 00:38:20,790
- [Saurabh] Right?

871
00:38:20,790 --> 00:38:23,460
And this experiment
template is almost similar

872
00:38:23,460 --> 00:38:24,690
to the previous one.

873
00:38:24,690 --> 00:38:26,940
The difference being the action.

874
00:38:26,940 --> 00:38:30,420
So here we are saying
that instead of add delay,

875
00:38:30,420 --> 00:38:33,690
we are saying that
inject invocation error,

876
00:38:33,690 --> 00:38:36,273
everything is same.

877
00:38:37,170 --> 00:38:39,960
So now this experiment
template code is ready

878
00:38:39,960 --> 00:38:42,993
and we will deploy this in our account.

879
00:38:45,060 --> 00:38:46,593
This won't compile?

880
00:38:48,374 --> 00:38:51,541
(attendee chattering)

881
00:38:55,860 --> 00:38:56,693
Yeah.

882
00:38:56,693 --> 00:38:57,526
So I think the question is

883
00:38:57,526 --> 00:39:00,630
that if we have the prevent execution

884
00:39:00,630 --> 00:39:03,716
to false, what would happen?

885
00:39:03,716 --> 00:39:06,030
So prevent execution,

886
00:39:06,030 --> 00:39:08,250
if it is set to true,

887
00:39:08,250 --> 00:39:10,230
then your Lambda would not be invoked.

888
00:39:10,230 --> 00:39:11,460
The code inside the Lambda

889
00:39:11,460 --> 00:39:13,180
function would not be executed

890
00:39:14,430 --> 00:39:16,350
but the error would be returned.

891
00:39:16,350 --> 00:39:18,360
If you set that to false,

892
00:39:18,360 --> 00:39:21,630
then the Lambda code would run

893
00:39:21,630 --> 00:39:24,030
and then it would inject that fault.

894
00:39:24,030 --> 00:39:25,170
So there could be scenarios

895
00:39:25,170 --> 00:39:27,300
where let's say I don't know,

896
00:39:27,300 --> 00:39:30,780
like if you're creating a transaction

897
00:39:30,780 --> 00:39:32,490
and adding a transaction might

898
00:39:32,490 --> 00:39:34,590
have a side effect on your system,

899
00:39:34,590 --> 00:39:38,730
then you might want to
set that to false or true.

900
00:39:38,730 --> 00:39:40,200
Sorry.

901
00:39:40,200 --> 00:39:43,833
Alright, my typo somewhere.

902
00:39:46,200 --> 00:39:48,000
- [Haresh] So while
Saurabh is fixing that,

903
00:39:48,000 --> 00:39:51,210
so there are two of the actions,

904
00:39:51,210 --> 00:39:54,990
they both support this
kind of operating mode.

905
00:39:54,990 --> 00:39:56,970
So both the invocation error

906
00:39:56,970 --> 00:40:01,970
and the one which returns
integration responses.

907
00:40:02,550 --> 00:40:03,510
You can actually decide

908
00:40:03,510 --> 00:40:05,160
whether you want the Lambda function

909
00:40:05,160 --> 00:40:08,010
to execute or not when the error

910
00:40:08,010 --> 00:40:10,983
or the errors in response
is being returned.

911
00:40:19,500 --> 00:40:20,760
- [Saurabh] Sorry, it tells me

912
00:40:20,760 --> 00:40:23,790
that I already specified FIS role.

913
00:40:23,790 --> 00:40:26,220
Hopefully I covered.

914
00:40:26,220 --> 00:40:28,020
- [Haresh] I think maybe just,

915
00:40:29,233 --> 00:40:32,147
I think when you copied the first element,

916
00:40:35,807 --> 00:40:38,730
so you maybe (indistinct) everything,

917
00:40:38,730 --> 00:40:40,380
go back and copy the question.

918
00:40:40,380 --> 00:40:41,480
- [Saurabh] Which one?

919
00:40:43,740 --> 00:40:47,013
Anyone able to spot the error?

920
00:40:49,920 --> 00:40:50,753
Yeah.

921
00:40:51,660 --> 00:40:52,493
Where?

922
00:40:54,147 --> 00:40:54,980
51 15.

923
00:41:00,360 --> 00:41:01,593
So report bucket.

924
00:41:02,850 --> 00:41:03,683
All right.

925
00:41:03,683 --> 00:41:05,910
- [Haresh] I think it's
been copied twice maybe?

926
00:41:05,910 --> 00:41:07,060
- [Saurabh] Everything.

927
00:41:08,370 --> 00:41:09,960
So first bucket error end,

928
00:41:09,960 --> 00:41:11,910
first report bucket.

929
00:41:11,910 --> 00:41:14,447
Alright, so first report bucket.

930
00:41:17,130 --> 00:41:19,800
Yeah, should be good right?

931
00:41:19,800 --> 00:41:20,633
- [Haresh] Yeah.

932
00:41:27,870 --> 00:41:31,093
- [Saurabh] This is the fun
of live coding. (laughs)

933
00:41:32,130 --> 00:41:35,320
Alright, so now the
stack is being deployed

934
00:41:37,080 --> 00:41:39,310
and while it is being deployed I'll

935
00:41:42,747 --> 00:41:44,820
go over to the stack

936
00:41:44,820 --> 00:41:48,633
and show you the steady state.

937
00:41:52,410 --> 00:41:56,110
So you see the steady state here

938
00:41:57,690 --> 00:42:00,150
and you see the Lambda
invocations are happening

939
00:42:00,150 --> 00:42:03,030
and in this particular one you see there

940
00:42:03,030 --> 00:42:05,103
is no faults being injected.

941
00:42:07,560 --> 00:42:10,800
So now when the stack
gets completed we will run

942
00:42:10,800 --> 00:42:14,580
the experiment and in the
interest of time we'll run one

943
00:42:14,580 --> 00:42:17,403
and then we'll walk over the findings.

944
00:42:24,450 --> 00:42:26,013
Any questions in the meantime?

945
00:42:30,015 --> 00:42:31,369
Sure.

946
00:42:31,369 --> 00:42:34,536
(attendee chattering)

947
00:42:37,411 --> 00:42:38,790
- [Haresh] It's a good question.

948
00:42:38,790 --> 00:42:41,820
I guess the thing is that you will need

949
00:42:41,820 --> 00:42:44,220
to set the permissions accordingly.

950
00:42:44,220 --> 00:42:45,660
I'm assuming you should be able

951
00:42:45,660 --> 00:42:48,870
to use the same location,

952
00:42:48,870 --> 00:42:50,070
but whether it can be the same bucket

953
00:42:50,070 --> 00:42:53,340
or not, I'm not sure, it should be fine.

954
00:42:53,340 --> 00:42:54,367
I can't see any reason why that works.

955
00:42:54,367 --> 00:42:55,830
- [Saurabh] So is the question that,

956
00:42:55,830 --> 00:42:58,020
can you use the same bucket

957
00:42:58,020 --> 00:43:00,090
for FIS configuration and the report?

958
00:43:00,090 --> 00:43:01,200
- [Haresh] Yes.

959
00:43:01,200 --> 00:43:02,730
- [Saurabh] Well technically you can.

960
00:43:02,730 --> 00:43:03,563
- [Haresh] Yeah.

961
00:43:03,563 --> 00:43:05,670
- [Saurabh] But they're
representing two different things.

962
00:43:05,670 --> 00:43:07,950
So if you think from the modularity

963
00:43:07,950 --> 00:43:10,290
or separation of concerns perspective,

964
00:43:10,290 --> 00:43:12,358
you might want to keep them separate.

965
00:43:12,358 --> 00:43:14,340
(attendee chattering)

966
00:43:14,340 --> 00:43:15,344
- [Attendee] Is there a real requirement

967
00:43:15,344 --> 00:43:17,880
or it's just more (indistinct)?

968
00:43:17,880 --> 00:43:19,230
- [Saurabh] It's not a requirement,

969
00:43:19,230 --> 00:43:20,880
it's more of a best practice

970
00:43:20,880 --> 00:43:24,960
how we think we should follow.

971
00:43:24,960 --> 00:43:26,580
- [Haresh] Yeah, I think again it's

972
00:43:26,580 --> 00:43:28,710
the kind of the permissioning model

973
00:43:28,710 --> 00:43:30,060
might be slightly different

974
00:43:30,060 --> 00:43:32,249
depending on what you're
doing with the bucket.

975
00:43:32,249 --> 00:43:34,020
So that might be one reason you might

976
00:43:34,020 --> 00:43:35,370
want to keep them separate.

977
00:43:36,670 --> 00:43:39,300
(attendee chattering)

978
00:43:39,300 --> 00:43:40,199
So yeah.

979
00:43:40,199 --> 00:43:41,548
- [Attendee] Maybe not a question

980
00:43:41,548 --> 00:43:45,048
but some feedback about the three buckets.

981
00:43:46,579 --> 00:43:47,477
- [Saurabh] Yep.

982
00:43:47,477 --> 00:43:51,227
- [Attendee] And like
for the regular people,

983
00:43:52,142 --> 00:43:53,847
like everybody knows like

984
00:43:53,847 --> 00:43:55,897
what the bucket essentially.

985
00:43:55,897 --> 00:43:58,480
And so I'm trying to understand

986
00:44:00,221 --> 00:44:02,178
like the (indistinct) of the buckets,

987
00:44:02,178 --> 00:44:05,661
how information all the service itself,

988
00:44:05,661 --> 00:44:07,776
it's like there is a chance

989
00:44:07,776 --> 00:44:10,682
that I might push like
a wrong configuration

990
00:44:10,682 --> 00:44:12,182
to the bucket,

991
00:44:12,182 --> 00:44:15,849
why is not something
that tells FIS directly

992
00:44:16,965 --> 00:44:18,858
use this template

993
00:44:18,858 --> 00:44:23,858
and (indistinct) my
template when I (indistinct)

994
00:44:24,136 --> 00:44:27,619
the result I (indistinct) the results.

995
00:44:27,619 --> 00:44:28,452
- [Haresh] Okay.

996
00:44:28,452 --> 00:44:30,654
- [Attendee] Not
something that's explored.

997
00:44:30,654 --> 00:44:31,487
- [Haresh] Okay.

998
00:44:31,487 --> 00:44:33,000
So just to kind of repeat the question.

999
00:44:33,000 --> 00:44:36,030
If I understand correctly,
let me know if not,

1000
00:44:36,030 --> 00:44:38,170
I guess the question is why is the FIS

1001
00:44:39,600 --> 00:44:43,320
Lambda set up, Lambda
actions using S3 at all

1002
00:44:43,320 --> 00:44:45,240
to share the configuration

1003
00:44:45,240 --> 00:44:47,310
and why can't we just directly get FIS

1004
00:44:47,310 --> 00:44:49,800
to write the configuration?

1005
00:44:49,800 --> 00:44:50,633
I think-

1006
00:44:50,633 --> 00:44:52,067
- [Attendee] It seems
like some (indistinct).

1007
00:44:53,108 --> 00:44:53,941
- [Haresh] Yeah.

1008
00:44:53,941 --> 00:44:57,990
- [Attendee] Just to
get there (indistinct).

1009
00:44:57,990 --> 00:44:59,550
- [Haresh] Yeah, I guess I mean, you know,

1010
00:44:59,550 --> 00:45:01,350
there are two things to consider here.

1011
00:45:01,350 --> 00:45:04,200
One is that the Lambda function

1012
00:45:04,200 --> 00:45:08,160
will exist even without an
experiment running on it.

1013
00:45:08,160 --> 00:45:09,780
So effectively as you can imagine, right?

1014
00:45:09,780 --> 00:45:12,210
So when you are setting
up the Lambda function,

1015
00:45:12,210 --> 00:45:13,500
you're setting up the extension,

1016
00:45:13,500 --> 00:45:15,630
but there is no FIS experiment running,

1017
00:45:15,630 --> 00:45:16,980
at that point of time,

1018
00:45:16,980 --> 00:45:19,290
there is no need for it
to actually have access

1019
00:45:19,290 --> 00:45:21,720
to the FIS experiment configuration.

1020
00:45:21,720 --> 00:45:22,740
It's only when you're running

1021
00:45:22,740 --> 00:45:24,690
the experiment through FIS

1022
00:45:24,690 --> 00:45:26,370
that is when the configuration

1023
00:45:26,370 --> 00:45:27,330
needs to be shared

1024
00:45:27,330 --> 00:45:29,160
with the FIS extension.

1025
00:45:29,160 --> 00:45:30,240
So that might be the reason,

1026
00:45:30,240 --> 00:45:31,590
I mean we can confirm

1027
00:45:31,590 --> 00:45:32,460
with the service team

1028
00:45:32,460 --> 00:45:37,460
on what was the specific
sort of thinking around that.

1029
00:45:38,610 --> 00:45:39,443
- [Saurabh] Yes.

1030
00:45:39,443 --> 00:45:41,820
So if I understood that
question correctly,

1031
00:45:41,820 --> 00:45:45,120
why you have to configure an S3 work end,

1032
00:45:45,120 --> 00:45:47,670
the reason is that the extension

1033
00:45:47,670 --> 00:45:49,270
code is written by AWS

1034
00:45:50,790 --> 00:45:55,020
but the experiment would
run in your account.

1035
00:45:55,020 --> 00:45:57,720
So when an experiment is
running in your account,

1036
00:45:57,720 --> 00:46:01,440
there needs to be a place
where it can, you know,

1037
00:46:01,440 --> 00:46:02,940
put the configuration

1038
00:46:02,940 --> 00:46:05,313
and that can be used by the extension.

1039
00:46:06,420 --> 00:46:07,530
So that's why-

1040
00:46:07,530 --> 00:46:09,572
(attendee chattering)

1041
00:46:09,572 --> 00:46:11,230
- [Attendee] For many services.

1042
00:46:11,230 --> 00:46:12,360
- [Saurabh] Yeah. Yeah.

1043
00:46:12,360 --> 00:46:14,460
So maybe that's a feature request

1044
00:46:14,460 --> 00:46:17,913
that we will take it back
with our service team, yeah.

1045
00:46:20,970 --> 00:46:23,370
Alright, so the stack is deployed

1046
00:46:23,370 --> 00:46:25,410
and this is the stack which I'm showing

1047
00:46:25,410 --> 00:46:27,630
for invocation error.

1048
00:46:27,630 --> 00:46:30,570
I'll walk you through a
couple of key pieces here.

1049
00:46:30,570 --> 00:46:32,790
So the action itself

1050
00:46:32,790 --> 00:46:36,810
as we specified in the code
duration is five minutes,

1051
00:46:36,810 --> 00:46:38,910
100% invocation.

1052
00:46:38,910 --> 00:46:41,313
And let's look at the targets.

1053
00:46:43,200 --> 00:46:46,050
So here we specified all Lambda functions,

1054
00:46:46,050 --> 00:46:47,250
which are tagged

1055
00:46:47,250 --> 00:46:49,170
with the specific value.

1056
00:46:49,170 --> 00:46:51,960
Now in this generate preview,

1057
00:46:51,960 --> 00:46:53,100
you can actually look

1058
00:46:53,100 --> 00:46:55,290
at the resources which would be

1059
00:46:55,290 --> 00:46:57,840
impacted when you run this experiment.

1060
00:46:57,840 --> 00:47:00,750
So think of it as another pair of eyes

1061
00:47:00,750 --> 00:47:02,910
or safety net where you
can look at the resources

1062
00:47:02,910 --> 00:47:06,840
and see something that
you don't want to impact.

1063
00:47:06,840 --> 00:47:09,830
For example, for whatever
reasons you didn't want

1064
00:47:09,830 --> 00:47:12,810
to impact the create item function.

1065
00:47:12,810 --> 00:47:16,470
So by generating this
preview you can go back

1066
00:47:16,470 --> 00:47:19,353
and change the tags on
those functions accordingly.

1067
00:47:21,600 --> 00:47:24,210
Then we talked about the
report configuration.

1068
00:47:24,210 --> 00:47:27,240
So here we are specifying
the report destination

1069
00:47:27,240 --> 00:47:28,920
where the report would go

1070
00:47:28,920 --> 00:47:30,420
and along with the CloudWatch

1071
00:47:30,420 --> 00:47:32,620
dashboard that it would

1072
00:47:33,960 --> 00:47:36,003
take the metrics from.

1073
00:47:37,080 --> 00:47:40,300
Now I would run the experiment

1074
00:47:41,580 --> 00:47:43,203
in the interest of time.

1075
00:47:46,710 --> 00:47:48,960
- [Haresh] And the warning
that you see there is

1076
00:47:48,960 --> 00:47:51,183
that when you are starting an experiment,

1077
00:47:51,183 --> 00:47:53,340
it's going to actually
impact your resources.

1078
00:47:53,340 --> 00:47:55,110
So this is not a simulation,

1079
00:47:55,110 --> 00:47:56,880
this will actually run an action,

1080
00:47:56,880 --> 00:47:59,480
it will introduce a fault
into your Lambda function.

1081
00:48:01,110 --> 00:48:02,370
- [Saurabh] And while it is running,

1082
00:48:02,370 --> 00:48:05,580
I'll walk you through a sample report.

1083
00:48:05,580 --> 00:48:08,730
So the report would look similar

1084
00:48:08,730 --> 00:48:12,690
to it, it would have the
experiment ID and template ID

1085
00:48:12,690 --> 00:48:15,369
and the details about when
it ran and which account

1086
00:48:15,369 --> 00:48:18,750
and what region.

1087
00:48:18,750 --> 00:48:20,160
It would also have the timeline

1088
00:48:20,160 --> 00:48:21,010
if you're running

1089
00:48:22,161 --> 00:48:26,580
multiple faults in a
sequence or in a combination.

1090
00:48:26,580 --> 00:48:28,410
In this case we just had one

1091
00:48:28,410 --> 00:48:31,140
so it doesn't look any differently.

1092
00:48:31,140 --> 00:48:33,210
You just see one experiment there.

1093
00:48:33,210 --> 00:48:34,350
And then it also has,

1094
00:48:34,350 --> 00:48:38,280
and this is the dashboard
which we were talking about.

1095
00:48:38,280 --> 00:48:42,240
So you see the filled out area here.

1096
00:48:42,240 --> 00:48:46,920
This region is the
duration where the Lambda

1097
00:48:46,920 --> 00:48:49,530
faults were actually injected.

1098
00:48:49,530 --> 00:48:51,600
This is the experiment duration,

1099
00:48:51,600 --> 00:48:54,480
to the left of it is the steady state,

1100
00:48:54,480 --> 00:48:56,340
which is the pre-experiment state.

1101
00:48:56,340 --> 00:49:00,000
So this is what a pre-experiment
state would look like.

1102
00:49:00,000 --> 00:49:02,610
Towards the right is the recovery state

1103
00:49:02,610 --> 00:49:04,410
or post experiment state.

1104
00:49:04,410 --> 00:49:08,730
So ideally you would want
to see your post recovery

1105
00:49:08,730 --> 00:49:11,910
or post experiment state to look similar

1106
00:49:11,910 --> 00:49:13,113
to your study state.

1107
00:49:15,300 --> 00:49:16,620
And one thing I would call

1108
00:49:16,620 --> 00:49:19,560
out here is the errors injection.

1109
00:49:19,560 --> 00:49:21,720
So we talked about polling.

1110
00:49:21,720 --> 00:49:24,330
Now when the experiment starts,

1111
00:49:24,330 --> 00:49:26,970
that's where FIS puts the bucket,

1112
00:49:26,970 --> 00:49:29,020
puts the configuration on the bucket

1113
00:49:29,910 --> 00:49:30,843
and the pollings,

1114
00:49:33,254 --> 00:49:35,280
the extension would poll the bucket

1115
00:49:35,280 --> 00:49:38,970
and based upon that your
faults would be injected.

1116
00:49:38,970 --> 00:49:41,010
So the gap between here is

1117
00:49:41,010 --> 00:49:42,240
what you would see the time

1118
00:49:42,240 --> 00:49:44,340
when the experiment was started

1119
00:49:44,340 --> 00:49:45,750
versus the configurations.

1120
00:49:45,750 --> 00:49:48,600
But were read by the extension

1121
00:49:48,600 --> 00:49:51,960
and it was implemented

1122
00:49:51,960 --> 00:49:53,553
on the Lambda invocations.

1123
00:49:59,010 --> 00:50:01,080
Alright, I think we
covered the experiments,

1124
00:50:01,080 --> 00:50:04,473
we covered the report, we covered that.

1125
00:50:05,490 --> 00:50:07,890
Now the experiment is running.

1126
00:50:07,890 --> 00:50:11,040
So what we can show you

1127
00:50:11,040 --> 00:50:14,550
is duration, like a previous

1128
00:50:14,550 --> 00:50:17,310
run before coming into this.

1129
00:50:17,310 --> 00:50:19,890
And we can show you that duration

1130
00:50:19,890 --> 00:50:21,933
when the experiments,

1131
00:50:23,580 --> 00:50:25,170
this is the steady state

1132
00:50:25,170 --> 00:50:27,616
where you see in this FIS error,

1133
00:50:27,616 --> 00:50:31,470
there is no error on
the steady state side.

1134
00:50:31,470 --> 00:50:35,640
And then that's where the
fault started happening.

1135
00:50:35,640 --> 00:50:39,330
And then when the experiment completed,

1136
00:50:39,330 --> 00:50:40,950
it went back to zero.

1137
00:50:40,950 --> 00:50:42,240
And this is what you can see here.

1138
00:50:42,240 --> 00:50:44,370
So this is what your Lambda duration was

1139
00:50:44,370 --> 00:50:46,140
and this is the experiment state

1140
00:50:46,140 --> 00:50:48,423
and then it's going back
to the steady state.

1141
00:50:52,470 --> 00:50:57,223
Now going back to the
polling aspect of it.

1142
00:51:08,730 --> 00:51:12,270
Now in this graph do
you see any difference

1143
00:51:12,270 --> 00:51:16,170
in these are the snippets
from two different

1144
00:51:16,170 --> 00:51:17,670
experiment reports

1145
00:51:17,670 --> 00:51:19,170
where in the left hand side

1146
00:51:19,170 --> 00:51:22,380
the polling interval
was set to 120 seconds.

1147
00:51:22,380 --> 00:51:24,480
On the right hand side
the polling interval

1148
00:51:24,480 --> 00:51:26,163
was set to 30 seconds.

1149
00:51:28,110 --> 00:51:31,260
The difference here is that you see here,

1150
00:51:31,260 --> 00:51:34,410
the polling is happening
at a longer duration.

1151
00:51:34,410 --> 00:51:36,870
So the time when FIS started

1152
00:51:36,870 --> 00:51:39,780
the experiment versus the time

1153
00:51:39,780 --> 00:51:43,740
when the experiments
were actually effective

1154
00:51:43,740 --> 00:51:47,790
is longer on the left
hand side graph versus

1155
00:51:47,790 --> 00:51:49,440
on the right hand side one.

1156
00:51:49,440 --> 00:51:51,210
And this is because the polling

1157
00:51:51,210 --> 00:51:53,700
was happening more frequently.

1158
00:51:53,700 --> 00:51:56,700
So more frequent polling would make sure

1159
00:51:56,700 --> 00:51:57,960
that your experiments

1160
00:51:57,960 --> 00:52:01,123
are effective sooner than the duration

1161
00:52:01,123 --> 00:52:02,853
which is set to longer time.

1162
00:52:03,990 --> 00:52:07,620
Basically this is the trade off between

1163
00:52:07,620 --> 00:52:12,079
quickly applying your
experiments versus performance

1164
00:52:12,079 --> 00:52:13,860
overhead when you're

1165
00:52:13,860 --> 00:52:15,560
doing the polling more frequently.

1166
00:52:18,570 --> 00:52:20,340
All right I think we have covered a lot

1167
00:52:20,340 --> 00:52:22,410
of ground in this.

1168
00:52:22,410 --> 00:52:26,820
What I would pull up
next is the code sample

1169
00:52:26,820 --> 00:52:28,320
that we walked you through

1170
00:52:28,320 --> 00:52:31,200
is based on this public repo

1171
00:52:31,200 --> 00:52:32,910
which we published earlier

1172
00:52:32,910 --> 00:52:35,040
and it has all the fault actions

1173
00:52:35,040 --> 00:52:38,730
and implementation for
multiple Lambda run times.

1174
00:52:38,730 --> 00:52:41,130
So if you want to try out on your own,

1175
00:52:41,130 --> 00:52:42,630
you can clone this GitHub repo

1176
00:52:43,530 --> 00:52:45,693
and run these experiments in your account.

1177
00:52:47,310 --> 00:52:51,300
You can also reach out
to your AWS account teams

1178
00:52:51,300 --> 00:52:52,740
and this fault action

1179
00:52:52,740 --> 00:52:54,870
is also available in FIS workshop,

1180
00:52:54,870 --> 00:52:56,250
chaos engineering workshop.

1181
00:52:56,250 --> 00:52:57,450
They can host a workshop

1182
00:52:57,450 --> 00:52:59,283
for you to get you started on it.

1183
00:53:01,800 --> 00:53:03,420
Alright, with that we go back

1184
00:53:03,420 --> 00:53:04,893
to the presentation, I think.

1185
00:53:06,600 --> 00:53:07,823
- [Haresh] Yep.
- [Saurabh] Yep.

1186
00:53:10,050 --> 00:53:13,560
So we have seen the
experiment code walkthrough,

1187
00:53:13,560 --> 00:53:15,120
we have run the experiment.

1188
00:53:15,120 --> 00:53:17,910
We looked at the polling mechanism

1189
00:53:17,910 --> 00:53:20,190
and the difference between slow poll timer

1190
00:53:20,190 --> 00:53:21,453
and hot poll timer.

1191
00:53:24,510 --> 00:53:25,343
- [Haresh] Yep.

1192
00:53:25,343 --> 00:53:27,900
So just a really quick introduction

1193
00:53:27,900 --> 00:53:30,330
to two new failure scenarios

1194
00:53:30,330 --> 00:53:33,510
that have been introduced lately in FIS.

1195
00:53:33,510 --> 00:53:34,770
So when you think about failures,

1196
00:53:34,770 --> 00:53:35,603
you think about,

1197
00:53:35,603 --> 00:53:37,890
well we want to introduce failures

1198
00:53:37,890 --> 00:53:39,390
that are potentially,

1199
00:53:39,390 --> 00:53:40,470
you know, more absolute.

1200
00:53:40,470 --> 00:53:43,710
So if you already have
scenarios in the FIS library

1201
00:53:43,710 --> 00:53:44,790
where you can actually test

1202
00:53:44,790 --> 00:53:46,440
the impact of an AZ impairment.

1203
00:53:46,440 --> 00:53:48,590
So what happens if you have a service

1204
00:53:48,590 --> 00:53:49,423
or an application

1205
00:53:49,423 --> 00:53:51,450
that is running across multiple AZs

1206
00:53:51,450 --> 00:53:53,220
and then one AZ gets impaired?

1207
00:53:53,220 --> 00:53:54,690
How do you actually test that scenario,

1208
00:53:54,690 --> 00:53:56,190
that is already available

1209
00:53:56,190 --> 00:53:58,650
in the FIS scenario library.

1210
00:53:58,650 --> 00:54:00,360
But that's more of an absolute scenario.

1211
00:54:00,360 --> 00:54:02,940
Either something is available
or something is not.

1212
00:54:02,940 --> 00:54:04,950
But we've heard a lot

1213
00:54:04,950 --> 00:54:07,500
from our customers asking for

1214
00:54:07,500 --> 00:54:08,783
scenarios which are more

1215
00:54:08,783 --> 00:54:11,370
in the partial disruption domain

1216
00:54:11,370 --> 00:54:12,603
or things you know.

1217
00:54:14,022 --> 00:54:14,855
You must have come across

1218
00:54:14,855 --> 00:54:15,720
a term called gray failure.

1219
00:54:15,720 --> 00:54:17,550
So these are where there

1220
00:54:17,550 --> 00:54:21,810
is no complete
unavailability of a service,

1221
00:54:21,810 --> 00:54:23,820
but this service has been partially

1222
00:54:23,820 --> 00:54:25,740
degraded in some form or manner.

1223
00:54:25,740 --> 00:54:27,210
So to allow you to run

1224
00:54:27,210 --> 00:54:29,550
those kind of scenarios
in your application,

1225
00:54:29,550 --> 00:54:30,810
we have two new scenarios

1226
00:54:30,810 --> 00:54:32,130
that we've been introduced.

1227
00:54:32,130 --> 00:54:34,740
One is the AZ application slowdown.

1228
00:54:34,740 --> 00:54:36,960
So this is where you basically add latency

1229
00:54:36,960 --> 00:54:39,270
between resources within a single AZ.

1230
00:54:39,270 --> 00:54:42,000
So you might want to sort of
understand what's the impact

1231
00:54:42,000 --> 00:54:43,440
of some of your resources,

1232
00:54:43,440 --> 00:54:46,200
maybe not performing to the right level

1233
00:54:46,200 --> 00:54:47,940
and what's the impact of that.

1234
00:54:47,940 --> 00:54:50,040
And then the second one is where you want

1235
00:54:50,040 --> 00:54:52,980
to understand if there
is maybe packet loss

1236
00:54:52,980 --> 00:54:54,330
between an application

1237
00:54:54,330 --> 00:54:55,477
that is deployed across multiple AZs

1238
00:54:55,477 --> 00:54:58,920
and there is packet loss
between the components

1239
00:54:58,920 --> 00:55:00,480
of their interfacing

1240
00:55:00,480 --> 00:55:02,490
or they are interacting between AZs.

1241
00:55:02,490 --> 00:55:03,341
So for that,

1242
00:55:03,341 --> 00:55:05,940
again you have the cross AZ

1243
00:55:05,940 --> 00:55:08,793
traffic slowdown scenario, again,

1244
00:55:10,071 --> 00:55:11,280
we are happy to sort of point

1245
00:55:11,280 --> 00:55:13,380
you towards more detailed documentation

1246
00:55:13,380 --> 00:55:15,873
on those scenarios if you want us to.

1247
00:55:19,800 --> 00:55:22,920
This is again the FIS scenario library.

1248
00:55:22,920 --> 00:55:25,530
We did not go through
that in detail today,

1249
00:55:25,530 --> 00:55:26,880
but you can find the scenarios

1250
00:55:26,880 --> 00:55:27,990
there in the FIS scenario

1251
00:55:27,990 --> 00:55:29,403
library in the AWS console.

1252
00:55:32,880 --> 00:55:35,730
Yeah, I think we are pretty much there.

1253
00:55:35,730 --> 00:55:39,240
There are a few more QR quotes for you.

1254
00:55:39,240 --> 00:55:41,640
So a lot of what we spoke about in terms

1255
00:55:41,640 --> 00:55:43,020
of chaos engineering,

1256
00:55:43,020 --> 00:55:44,430
the benefits of chaos engineering

1257
00:55:44,430 --> 00:55:45,630
and the kind of testing

1258
00:55:45,630 --> 00:55:48,690
you can do throughout the lifecycle

1259
00:55:48,690 --> 00:55:51,030
of your application is
covered in the AWS lifecycle

1260
00:55:51,030 --> 00:55:53,396
framework, right on the left hand side.

1261
00:55:53,396 --> 00:55:55,290
And then there are, for
example, if you want

1262
00:55:55,290 --> 00:55:57,390
to look at fault isolation boundaries,

1263
00:55:57,390 --> 00:55:58,830
which is an important concept for you

1264
00:55:58,830 --> 00:56:00,030
to understand when you are

1265
00:56:00,030 --> 00:56:03,390
designing a highly available application,

1266
00:56:03,390 --> 00:56:04,740
then you can look at fault isolation

1267
00:56:04,740 --> 00:56:07,740
boundaries, multi-region fundamentals.

1268
00:56:07,740 --> 00:56:08,880
Again, if you have applications

1269
00:56:08,880 --> 00:56:10,500
that are deployed across multiple regions

1270
00:56:10,500 --> 00:56:12,180
and understanding how you actually

1271
00:56:12,180 --> 00:56:13,920
ensure their resilient

1272
00:56:13,920 --> 00:56:16,500
can be found in the
multi-region fundamentals.

1273
00:56:16,500 --> 00:56:20,220
And FIS now comes under
the resilience hub webpage.

1274
00:56:20,220 --> 00:56:22,830
So if you want to understand more about

1275
00:56:22,830 --> 00:56:24,960
what features are available within FIS,

1276
00:56:24,960 --> 00:56:25,860
then you can navigate

1277
00:56:25,860 --> 00:56:27,360
to the resilience hub webpage.

1278
00:56:29,940 --> 00:56:30,773
- [Saurabh] Cloud ops.

1279
00:56:30,773 --> 00:56:34,650
Yeah, lastly, drop by in AWS village,

1280
00:56:34,650 --> 00:56:36,480
drop by cloud ops kiosks,

1281
00:56:36,480 --> 00:56:38,970
can we have a resilience booth there

1282
00:56:38,970 --> 00:56:41,370
where you can have more one-on-one demos

1283
00:56:41,370 --> 00:56:43,220
and don't miss out on the swag there.

1284
00:56:45,300 --> 00:56:47,760
- [Haresh] Cool. Right.

1285
00:56:47,760 --> 00:56:48,720
So thank you folks.

1286
00:56:48,720 --> 00:56:49,893
I guess, you know,

1287
00:56:50,850 --> 00:56:53,340
doing a code walkthrough looking at a ton

1288
00:56:53,340 --> 00:56:56,580
of FIS code is perhaps not
the last thing you want

1289
00:56:56,580 --> 00:56:59,790
to do on a day, but I hope,

1290
00:56:59,790 --> 00:57:02,490
and we hope you found the session useful.

1291
00:57:02,490 --> 00:57:03,323
A lot of the code

1292
00:57:03,323 --> 00:57:07,740
is as Saurabh said already available.

1293
00:57:07,740 --> 00:57:09,645
If you want to kind of play around,

1294
00:57:09,645 --> 00:57:11,640
please do access the QR code

1295
00:57:11,640 --> 00:57:13,050
that Saurabh shared before.

1296
00:57:13,050 --> 00:57:13,890
If you have any questions,

1297
00:57:13,890 --> 00:57:15,930
please come along and ask us now

1298
00:57:15,930 --> 00:57:18,660
or we are available throughout the week

1299
00:57:18,660 --> 00:57:21,750
and we will be also there
at the cloud ops kiosk.

1300
00:57:21,750 --> 00:57:23,190
So please come and ask us

1301
00:57:23,190 --> 00:57:24,640
any questions you might have.

1302
00:57:25,890 --> 00:57:26,723
- [Saurabh] Yep.

1303
00:57:26,723 --> 00:57:27,556
Once again, thank you.

1304
00:57:27,556 --> 00:57:29,400
And we have two minutes for questions

1305
00:57:29,400 --> 00:57:31,890
and then we can take more
questions in the hallway.

1306
00:57:31,890 --> 00:57:33,062
Yep.

1307
00:57:33,062 --> 00:57:36,897
(attendee chattering)

1308
00:57:36,897 --> 00:57:37,730
Yeah.

1309
00:57:37,730 --> 00:57:41,563
- [Attendee] So (indistinct).

1310
00:57:43,050 --> 00:57:44,013
- [Saurabh] Yes.

1311
00:57:44,013 --> 00:57:47,846
- [Attendee] So (indistinct).

1312
00:57:54,313 --> 00:57:55,830
- [Saurabh] So I think if I understand

1313
00:57:55,830 --> 00:57:57,180
the question correctly is the fact

1314
00:57:57,180 --> 00:58:00,210
that when we are specifying the ARN,

1315
00:58:00,210 --> 00:58:04,623
it's to a specific version
of the Lambda extension.

1316
00:58:06,600 --> 00:58:07,980
I don't believe it's points

1317
00:58:07,980 --> 00:58:09,930
to a specific version though, actually.

1318
00:58:11,790 --> 00:58:12,623
Sorry.

1319
00:58:12,623 --> 00:58:15,480
So if we go back to AWS console

1320
00:58:15,480 --> 00:58:18,810
and there's a FIS extension documentation

1321
00:58:18,810 --> 00:58:20,430
that we can pull up to.

1322
00:58:20,430 --> 00:58:22,980
So when you're specifying the layer,

1323
00:58:22,980 --> 00:58:23,970
where is it?

1324
00:58:23,970 --> 00:58:25,680
- [Haresh] So I think maybe
what you're trying to do is,

1325
00:58:25,680 --> 00:58:26,513
what you're trying to understand

1326
00:58:26,513 --> 00:58:27,346
is how do you actually

1327
00:58:27,346 --> 00:58:28,947
remove the maintainability challenges

1328
00:58:28,947 --> 00:58:31,020
with once a new version comes along?

1329
00:58:31,020 --> 00:58:31,853
Right?

1330
00:58:33,300 --> 00:58:35,610
- [Saurabh] Yeah, that's a good question.

1331
00:58:35,610 --> 00:58:39,870
So again, like the,

1332
00:58:39,870 --> 00:58:42,030
there is a public documentation

1333
00:58:42,030 --> 00:58:44,110
on it by Lambda function, the latest

1334
00:58:46,440 --> 00:58:47,733
extension version.

1335
00:58:48,660 --> 00:58:50,160
But that's something
you'll have to test out

1336
00:58:50,160 --> 00:58:51,640
and make sure that it is not

1337
00:58:52,500 --> 00:58:54,480
interfering in your Lambda function.

1338
00:58:54,480 --> 00:58:56,400
- [Haresh] But it's a good question.

1339
00:58:56,400 --> 00:58:58,318
We are happy to take that away.

1340
00:58:58,318 --> 00:58:59,364
(attendee chattering)

1341
00:58:59,364 --> 00:59:01,340
- [Haresh] Yeah.

1342
00:59:01,340 --> 00:59:03,386
(attendee chattering)

1343
00:59:03,386 --> 00:59:04,275
Yeah.

1344
00:59:04,275 --> 00:59:07,442
(attendee chattering)

1345
00:59:13,645 --> 00:59:16,812
(attendee chattering)

1346
00:59:22,933 --> 00:59:24,120
(attendee chattering)

1347
00:59:24,120 --> 00:59:25,410
- [Attendee] It's not going to change.

1348
00:59:25,410 --> 00:59:28,110
unless you update the stack, right?

1349
00:59:28,110 --> 00:59:29,130
- [Saurabh] Yeah, that's true.

1350
00:59:29,130 --> 00:59:29,963
That's true.

1351
00:59:29,963 --> 00:59:33,930
So the latest version of
this extension is available

1352
00:59:33,930 --> 00:59:36,630
to specific accounts
and you can do a lookup,

1353
00:59:36,630 --> 00:59:37,463
but you're right,

1354
00:59:37,463 --> 00:59:39,180
like once you have deployed the stack,

1355
00:59:39,180 --> 00:59:40,950
unless you're managing

1356
00:59:40,950 --> 00:59:42,900
or maintaining it actively,

1357
00:59:42,900 --> 00:59:44,340
you wouldn't know you're falling

1358
00:59:44,340 --> 00:59:45,660
behind on the Lambda version.

1359
00:59:45,660 --> 00:59:46,493
- [Haresh] Exactly.

1360
00:59:46,493 --> 00:59:47,760
- [Saurabh] Lambda extension version.

1361
00:59:47,760 --> 00:59:49,060
Yeah, that's a good point.

1362
00:59:51,450 --> 00:59:54,037
- [Haresh] We can come back to
you with a response on that.

1363
00:59:54,037 --> 00:59:55,353
Take that offline.

1364
00:59:58,290 --> 01:00:01,170
Okay, I think we are at time folks,

1365
01:00:01,170 --> 01:00:02,003
thank you so much.

1366
01:00:02,003 --> 01:00:03,990
Thanks for your patience

1367
01:00:03,990 --> 01:00:06,061
with all the challenges around the code.

1368
01:00:06,061 --> 01:00:06,903
Thank you.

