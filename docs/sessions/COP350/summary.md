# COP350: 构建和验证云控制

## 会议概述

本次AWS re:Invent 2025分会场会议由AWS高级解决方案架构师Pal Patel和首席解决方案架构师Rodolfo Brenes主讲，主题聚焦于如何在AWS环境中构建和验证云治理控制。会议通过一个虚构公司AnyCompany的案例，展示了如何利用生成式AI（特别是Kiro CLI）来加速云治理流程，从传统的"守门员"角色转变为"赋能者"角色。

演讲者通过生动的购物车类比引入主题，说明了AWS环境同样需要智能护栏来确保安全合规的同时不阻碍创新速度。会议重点介绍了AWS治理服务的最新功能更新，包括CloudTrail、Config和Control Tower的新特性，并通过三个实际演示展示了如何使用Kiro CLI实现自动化治理控制部署。

## 详细时间线与关键要点

### 00:00-05:00 开场介绍与问题背景
- 演讲者自我介绍：Pal Patel（高级解决方案架构师）和Rodolfo Brenes（首席解决方案架构师）
- 通过Amazon购物车类比说明云环境需要智能护栏
- 提出核心挑战：创新速度与治理保障之间的平衡
- 介绍会议议程：创新压力、AWS治理服务基础、生成式AI加速治理

### 05:00-10:00 治理挑战与机遇
- 单个团队可在几分钟内启动价值数十万美元的云资源
- 业务期望速度，治理需要保障，两者节奏不同
- 生成式AI可以将治理从"守门员"转变为"赋能者"
- 介绍案例角色：Nita（CloudOps工程师，管理300+AWS账户）
- Nita面临的挑战：大规模一致性控制、被动治理、账户定制化耗时

### 10:00-20:00 AWS治理服务基础（Rodolfo讲解）
- **CloudTrail服务更新**：
  - 数据事件洞察：检测异常活动
  - 事件聚合：识别高容量事件模式
  - CloudTrail Lake事件丰富化：提供业务上下文
  - 事件大小从256KB增加到1MB
- **Config服务功能**：
  - 提供资源配置历史和合规性评估
  - 支持自动修复和审计功能

### 20:00-30:00 Control Tower与最新发布
- Control Tower核心功能：部署着陆区、建立多账户基础、控制目录
- **最新发布功能**：
  - 综合控制目录：可独立于着陆区访问
  - 自动注册账户：简化账户迁移到Control Tower
  - 服务链接配置规则：不可变规则保护
- 引入Kiro：AI驱动的对话助手，支持代码编写、测试运行、AWS API访问
- AWS托管MCP服务器：标准化API访问

### 30:00-40:00 演示1：创建组织配置规则
- 使用Kiro CLI创建检测EC2公网IP的配置规则
- 演示环境：Control Tower着陆区，5个组织单元，18个账户
- 配置AWS MCP核心服务器，加载解决方案架构师和基础角色
- 成功部署ec2-instance-no-public-ip管理规则
- 自动故障排除：Kiro识别并修复CloudFormation部署问题
- 查询配置聚合器发现3个跨2个账户的不合规实例

### 40:00-50:00 演示2：实施左移策略控制
- 创建专门的"shift-left-specialist"代理
- 查询识别最多不合规资源的配置规则：KMS标签和Lambda X-Ray追踪
- 通过Control Tower定制化（CfCT）部署：
  - KMS服务控制策略：仅允许带有成本和环境标签的KMS密钥
  - CloudFormation Guard Hook：阻止不合规Lambda函数创建
- 成功部署预防性和主动性控制
- 验证测试：合规Lambda部署成功，不合规Lambda被阻止

### 50:00-54:48 演示3：创建AWS账户与SRA补丁解决方案
- 使用"create-AWS-account"代理创建新AWS账户
- 通过Service Catalog产品自动化账户创建流程
- 部署SRA（安全参考架构）对齐的补丁解决方案：
  - 使用Systems Manager Patch Manager和维护窗口
  - 创建三个维护窗口：SSM代理更新、Windows补丁、Linux补丁
  - 自动生成CloudFormation模板和配置参数
- 成功通过代码管道部署到Labs组织单元
- 控制台验证：确认堆栈集、维护窗口和执行结果

### 总结与资源
- 成功因素：专用代理、充分上下文、良好示例、从小开始
- 推荐资源：云治理最新发布、Kiro CLI文档、AWS MCP服务器GitHub
- 邀请参观CloudOps展台进行深入交流