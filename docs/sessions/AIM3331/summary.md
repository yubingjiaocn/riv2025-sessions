# AWS re:Invent 2025 Strands TypeScript 发布会议总结

## 会议概述

本次会议由 AWS Strands 团队的产品经理 Ryan 和高级软件工程师 Nick 主讲,重点介绍了 Strands 框架的 TypeScript 版本发布以及构建 AI 代理的最佳实践。Strands 是 Amazon 开发的开源代理编排框架,旨在帮助开发者用极少的代码快速构建生产级 AI 代理系统。

会议强调了 Strands 的核心设计理念:采用"模型驱动"而非"工作流驱动"的方式构建代理。这意味着开发者只需定义目标和工具,让大语言模型自主决定执行步骤,而不是预先编写复杂的确定性工作流。这种方法可以将开发周期从数月缩短到数周,同时保持系统的灵活性和适应性。Ryan 详细介绍了如何通过系统提示、SOP(标准操作程序)、结构化输出和 Hooks 等机制来引导和约束代理行为。

Nick 分享了团队如何使用 Strands 自身和 AI 代理来构建 TypeScript SDK 的经验。团队没有采用传统的"vibe coding"方式,而是开发了基于 SOP 的方法来指导 AI 编写高质量代码,并通过多代理协作系统实现了代码审查和质量保证。这个实践案例展示了 Strands 框架在实际大规模软件开发中的应用价值。

## 详细时间线

### 开场与背景介绍
[00:00:00 - 00:03:00] Ryan 开场致辞,介绍自己和 Nick 来自 Strands 代理团队,说明因前一天失声可能会影响演讲。介绍会议主题:Strands TypeScript 发布、简单的代理构建接口以及模型驱动的代理循环方法。

[00:03:00 - 00:05:00] 展示简单代码示例,说明只需几行代码即可运行一个完整的代理循环。强调如果安装了 Strands 和 Strands tools 包,并配置了 Bedrock 作为默认模型提供商,这段代码就能直接运行。

### TypeScript 版本发布
[00:05:00 - 00:07:30] 正式宣布 Strands TypeScript 版本发布(0.1 预览版),已在 GitHub 和 npm 上线。强调保持了与 Python 版本相同的简单接口风格,但目前有一些限制:主要支持单代理系统,多代理模式和部分功能(如 OpenTelemetry)将在后续版本中添加。当前支持 Bedrock 和 OpenAI 模型、异步/非异步流式处理、完整的代理状态管理和 Hooks 功能。

### 模型驱动代理架构
[00:07:30 - 00:12:00] 深入解释"模型驱动代理"的概念。定义代理为"在循环中运行工具以解决目标"的系统。描述代理循环的工作原理:输入提示词(系统提示和用户提示),强大的推理模型配备工具,模型自主推理如何使用工具,判断信息是否足够,必要时运行更多工具,最终返回满意的响应。

[00:12:00 - 00:15:30] 介绍代理循环的核心组件:
- 推理模型:支持多种模型提供商(Gemini、OpenAI、Anthropic、Nova 等),可通过 Bedrock 或直接 API 访问,支持自定义网关(如 LiteLLM)
- 工具系统:支持 MCP 服务器、自定义函数、内置工具库
- 开放标准:支持 MCP、A2A(代理间通信)、OpenTelemetry

[00:15:30 - 00:18:00] 详细介绍工具选择:MCP 服务器集成、自定义函数工具、内置工具包。特别强调"代理作为工具"模式(supervisor 模式):可以将专门的子代理封装为工具,供更高层的编排代理使用,实现模块化设计。举例说明客户如何使用 Jira MCP 服务器构建专门的 Jira 交互代理。

### Strands 设计原则
[00:18:00 - 00:22:00] 介绍 Strands 的核心设计原则(tenants):
- 简单性:从笔记本原型到生产环境保持一致的抽象
- 可扩展性:模型提供商、工具、Hooks 等都可扩展
- 协同工作:所有功能设计为无缝配合
- 良好的默认值:内置最佳实践
- 人类和代理可访问:支持 lm.txt 标准,为模型提供 Markdown 格式文档
- 通用标准:支持行业标准协议

### Strands 的起源故事
[00:22:00 - 00:26:00] 讲述 Strands 的开发背景。团队最初在 Amazon Q 和 Curo 项目中工作,需要帮助多个 Amazon 团队扩展 Q 的功能。观察到团队要么自己构建基于 Converse API 的解决方案,要么使用现成框架,但都不够"代理化",缺乏真正的代理循环,需要大量确定性工作流编程,导致从想法到原型需要数月时间。

[00:26:00 - 00:28:00] 团队开发了新方法,使 Curo 团队等能够在数周内从概念到生产。2024 年 5 月公开发布 Strands 预览版,Python SDK 下载量已超过 500 万次。开发者反馈显示构建速度显著提升。

### 模型驱动 vs 工作流驱动
[00:28:00 - 00:35:00] 通过 EC2 远程连接故障排查的实例对比两种方法:

工作流驱动方法:开发者预先定义每个步骤(检查网络连接、安全组等),需要处理工具结果解析,添加新场景(如容器或非 EC2 计算)需要修改工作流代码。系统脆弱,维护成本高。

模型驱动方法:只需提供目标和工具,模型自主决定工作流程。虽然听起来过于简单,但可以快速构建原型。

[00:35:00 - 00:40:00] 介绍控制谱系:从完全自主到精细约束
- 左端(纯自主):目标导向的系统提示 + 工具,适合研究助手等场景,可添加结构化输出
- 中间(引导):使用 SOP 提供结构化步骤建议,模型遵循指导但保持适应性(如 API 失败时自动重试)
- 右端(约束):使用 Hooks 检查工具调用、PII 防护等;使用 Agent Core Gateway 的策略引擎在工具调用前实施确定性策略

### SOP(标准操作程序)
[00:40:00 - 00:45:00] 详细介绍 SOP 功能:
- 自然语言指令格式
- 支持 Python 导入和 MCP 服务器(TypeScript 可用)
- 格式包含步骤标题和 RFC 2119 关键词(MUST、SHOULD 等)
- 模型在训练数据中已接触这些关键词,能很好地遵循
- 提供目标导向的步骤,模型表现良好

[00:45:00 - 00:48:00] 介绍"模块化提示"(Steering 功能):
- 实验性功能,本周在 Python SDK 中发布
- 将关键指令分解并在生命周期 Hooks 中注入
- 使用"LLM as judge"或确定性 Python 库(如 Cedar)判断代理轨迹
- 检查代理状态,判断是否符合指令(如品牌语调)
- 不符合时返回反馈,代理重试
- 优势:减少前置指令,扩大上下文窗口,更高效的 token 使用,可结合情景记忆系统持续改进

### 评估库
[00:48:00 - 00:51:00] 介绍本周发布的评估库:
- 填补 Strands 在代理评估方面的空白
- 帮助快速构建评估器
- 支持生成与用例相关的合成数据集
- 支持自定义和内置评估器
- 与在线评估系统集成(包括本周发布的 Agent Core 评估系统)
- 将本地 SDK 体验与大规模在线评估系统配对

### TypeScript SDK 构建过程
[00:51:00 - 00:55:00] Nick 接手演讲,介绍作为技术负责人构建 TypeScript SDK 的经验。团队希望从 Python SDK 开发经验中学习,不仅关注简单的开发体验,更关注编写代码的开发者体验。

[00:55:00 - 00:58:00] 反思 Python SDK 开发:
- 最初由 Amazon 工程师团队使用早期 GenAI 工具快速启动开发
- 大量使用 AI 生成代码工具,但产生了很多"vibe coding"低质量代码
- 工程师花费大量时间审查、理解、引导和调整代理生成的代码
- Python 初始版本约 15,000 行代码,TypeScript 规模相似
- 需要找到更好的方法让代理编写更好、更快的代码

### 使用 SOP 改进代码质量
[00:58:00 - 01:03:00] 介绍使用 Agent SOP 提升代码质量:
- SOP 是编写代理指令的规范,是代理完成任务的标准操作程序
- 擅长引导代理实现可重复行为
- 由首席工程师 James Hood 创建,源于对早期 AI 编码工具的挫败感
- 在 Amazon 内部建设者社区分享后非常成功,已有超过 5,000 个内部 SOP
- 决定作为 Strands 的一部分发布

[01:03:00 - 01:06:00] SOP 结构详解:
- 包含概述、参数和步骤列表
- 易于理解代理的可重复行为
- 对开发者来说可调试:如果代理在第三步出现意外行为,可以轻松定位问题

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


注:字幕在此处截断,完整会议内容可能还包括更多关于 TypeScript SDK 开发的技术细节和演示。