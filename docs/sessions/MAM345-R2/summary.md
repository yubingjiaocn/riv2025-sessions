# AWS re:Invent 2025 技术会话总结

## 会话概述

本次会话主要介绍了如何使用 Amazon Bedrock Agent Core 和 Strands SDK 为现有的遗留应用程序添加 AI 代理功能，而无需重写任何代码。演讲者团队（Deepali Tandere、Fran、Stefan 和 Yantois）通过现场编码演示，展示了从零开始创建 AI 代理、部署到云端、以及与遗留系统集成的完整流程。

会话强调了遗留应用虽然可靠，但在适应性和自动化方面存在挑战，特别是当开发者不熟悉代码库时。通过使用 Strands SDK 定义代理能力、Agent Core 提供可扩展的运行时环境、以及 MCP（Model Context Protocol）标准化通信协议，开发者可以快速构建能够自主思考和行动的 AI 代理。

演示中使用了一个"独角兽商店"的 Java 遗留应用作为实例，展示了如何通过 Amazon Q Developer 生成 OpenAPI 规范，使用 Agent Core Gateway 暴露工具，最终实现用户通过 AI 代理购物的功能，整个过程无需修改遗留应用的任何代码。

## 详细时间线与关键要点

### 开场介绍（0:00-3:30）
- **0:00** - 会话开始，提出核心问题：遗留应用虽然可靠，但在适应性和自动化方面存在挑战
- **0:45** - 介绍演讲团队成员及会话目标：演示如何使用 Amazon Bedrock Agent Core 创建 AI 代理
- **1:30** - 说明会话结构：先讲解核心概念，然后由 Fran 演示在空项目中创建代理，最后由 Yan 演示与遗留系统集成

### 核心概念讲解（3:30-8:00）
- **3:30** - 解释 Agentic Loop（代理循环）工作原理：提示词 → 代理 → 模型 → 工具
- **4:45** - 介绍工具（Tools）的作用：允许代理访问外部信息，如数据库查询、API 调用等
- **5:30** - 介绍 Strands SDK：开源 Python SDK，用几行代码即可构建 AI 代理，采用模型驱动方法
- **6:15** - 介绍 Agent Core：AWS 托管的运行时和基础设施，提供可扩展性、安全性和性能
- **7:00** - 讲解 Agent Core 的关键组件：运行时、内存、工具支持、网关和身份验证
- **7:45** - 介绍 MCP（Model Context Protocol）：定义代理与应用通信的开放标准

### 实战演示：创建基础代理（8:00-15:00）
- **8:00** - Fran 接手演示，开始现场编码
- **8:30** - 创建虚拟环境并安装三个核心包：strands、strands-tools、bedrock-agent-core
- **9:00** - 创建最简单的代理：仅需导入 Agent 类、实例化、获取输入并传递给代理
- **9:45** - 测试基础代理：询问"美国首都是什么"，成功获得答案
- **10:15** - 测试实时信息查询："拉斯维加斯今天天气如何"，代理无法回答（因为缺少工具）
- **11:00** - 添加 HTTP 请求工具，使代理能够访问外部 API
- **11:30** - 添加系统提示词（System Prompt），设置代理行为边界
- **12:15** - 再次测试天气查询，代理成功使用工具获取实时天气信息

### 部署到云端（15:00-22:00）
- **15:00** - 介绍如何将代理转换为 Bedrock Agent Core 代理
- **15:30** - 导入 bedrock_agent_core 包，创建 HTTP 服务器（监听 8080 端口）
- **16:00** - 添加入口点装饰器（@app.entry_point），处理 JSON 格式的输入
- **16:45** - 启动代理服务器，使用 curl 命令测试调用
- **17:30** - 演示 Agentic Loop 的迭代过程，解释为何某些查询需要多次迭代
- **18:30** - 使用 Agent Core Starter Toolkit 配置部署参数
- **19:15** - 选择部署方式：ZIP 包部署（类似 Lambda）或 Docker 容器部署
- **20:00** - 配置执行角色、S3 存储桶、授权方式和内存选项
- **21:00** - 执行 agent-core launch 命令，将代理部署到 AWS
- **21:45** - 在 AWS 控制台查看已部署的代理

### 集成遗留应用（22:00-35:00）
- **22:00** - Yan 接手演示，介绍遗留应用场景："独角兽商店"（Java 应用）
- **22:45** - 展示遗留应用界面，说明目标是添加 AI 代理购物功能
- **23:30** - 使用 Amazon Q Developer 生成 OpenAPI 规范，无需手动分析代码
- **24:15** - 在 Agent Core Gateway 中添加 REST API 目标，粘贴 OpenAPI 规范
- **25:00** - 配置网关授权方式（本例使用公开访问，生产环境可使用 OAuth 或 API Key）
- **26:00** - 解释架构：前端 → 代理 → 网关 → 遗留应用，无需修改遗留应用代码
- **27:00** - 强调关键点：OpenAPI 规范自动转换为工具，网关处理所有转换逻辑
- **28:00** - 修改代理代码，添加网关配置和身份验证逻辑
- **29:00** - 添加日志记录、环境变量（网关 URL、OAuth 提供者 URL）
- **30:00** - 使用 @requires_access_token 装饰器自动获取访问令牌
- **31:00** - 配置代理使用网关工具，传递系统提示词
- **32:30** - 部署更新后的代理到 AWS
- **34:00** - 演示完整流程：用户通过 AI 代理查询和购买独角兽

### 高级功能与最佳实践（35:00-结束）
- **35:00** - 讨论可观测性：支持 OpenTelemetry、CloudWatch 日志、追踪和跨度
- **36:00** - 介绍内存功能：短期和长期内存，保持对话上下文
- **37:00** - 讨论多代理协作：通过 ping 端点实现健康检查
- **38:00** - 回答观众问题：为何某些查询需要多次迭代、如何调试代理行为
- **39:00** - 强调通用工具（如 HTTP 请求）可能导致 LLM 过度使用，建议使用特定工具
- **40:00** - 讨论其他编程语言支持：通过 Docker 包装器可支持 Java、Go 等语言
- **41:00** - 总结关键要点：Strands 定义能力、Agent Core 提供可扩展性、MCP 标准化通信
- **42:00** - 会话结束，邀请观众提问和交流