1
00:00:01,050 --> 00:00:03,720
- [Deepali] Alright, so let
me start with a statement

2
00:00:03,720 --> 00:00:05,970
which is older application

3
00:00:05,970 --> 00:00:08,520
or legacy applications are reliable.

4
00:00:08,520 --> 00:00:11,610
100%. No doubt in that, right?

5
00:00:11,610 --> 00:00:16,380
But when it comes to the
adaptation or automation,

6
00:00:16,380 --> 00:00:17,850
it becomes a little bit tricky

7
00:00:17,850 --> 00:00:19,950
with the legacy application

8
00:00:19,950 --> 00:00:23,700
and it becomes really
tough when you are new

9
00:00:23,700 --> 00:00:24,900
to that application,

10
00:00:24,900 --> 00:00:27,060
you do not understand the code base

11
00:00:27,060 --> 00:00:28,680
and you want to modernize it,

12
00:00:28,680 --> 00:00:32,010
but you're still figuring
it out how it works, right?

13
00:00:32,010 --> 00:00:37,010
So if I tell you that you
can create an AI agent

14
00:00:37,830 --> 00:00:41,850
who will interact with that
legacy system and can act

15
00:00:41,850 --> 00:00:45,078
and think on its own
without rewriting anything,

16
00:00:45,078 --> 00:00:47,640
that would be pretty awesome, right?

17
00:00:47,640 --> 00:00:50,130
That will make our life
a little bit easier

18
00:00:50,130 --> 00:00:53,193
as a developer or architect,
something like that.

19
00:00:54,120 --> 00:00:57,150
So well, to show you
exactly how to do that,

20
00:00:57,150 --> 00:00:58,740
I am Deepali Talande,

21
00:00:58,740 --> 00:01:01,320
along with my colleagues Franz Stefan,

22
00:01:01,320 --> 00:01:02,430
and Jan Thewes,

23
00:01:02,430 --> 00:01:05,130
together we will demonstrate how to use

24
00:01:05,130 --> 00:01:07,169
Amazon Bedrock AgentCore to create

25
00:01:07,169 --> 00:01:11,103
that agentic AI into the
existing legacy application.

26
00:01:13,178 --> 00:01:14,730
Okay, so before we dive in,

27
00:01:14,730 --> 00:01:17,280
I know we all are here to
see us coding, you know,

28
00:01:17,280 --> 00:01:19,740
troubleshooting online,
everything like that.

29
00:01:19,740 --> 00:01:23,280
But give me few minutes to
go through the core concepts

30
00:01:23,280 --> 00:01:26,850
so that it is easy for all of
us to follow what we are doing

31
00:01:26,850 --> 00:01:28,350
and why we are doing it.

32
00:01:28,350 --> 00:01:30,360
And after that, Franz is gonna take over

33
00:01:30,360 --> 00:01:33,180
and he's gonna start by
showing you how easy it is

34
00:01:33,180 --> 00:01:36,360
to create an AI agent using Strands SDK,

35
00:01:36,360 --> 00:01:39,690
and run it on AgentCore runtime,

36
00:01:39,690 --> 00:01:41,340
all in an empty project.

37
00:01:41,340 --> 00:01:43,260
And after that, Jan is gonna show you

38
00:01:43,260 --> 00:01:44,850
how to do the same thing

39
00:01:44,850 --> 00:01:48,063
within an existing legacy system.

40
00:01:50,080 --> 00:01:52,890
Okay, so let's start by understanding

41
00:01:52,890 --> 00:01:55,230
the agentic loop itself

42
00:01:55,230 --> 00:01:58,440
or how the LLMs work on a very high level.

43
00:01:58,440 --> 00:02:02,220
So you begin with a prompt
that you provide to the agent

44
00:02:02,220 --> 00:02:04,230
and which could be something like,

45
00:02:04,230 --> 00:02:06,240
what's the weather in London today?

46
00:02:06,240 --> 00:02:10,110
This will basically
trigger the initial loop

47
00:02:10,110 --> 00:02:12,810
and agent you can think
it of as a controller

48
00:02:12,810 --> 00:02:16,050
or an orchestrator who knows what to do.

49
00:02:16,050 --> 00:02:19,110
Based on its logic it will determine

50
00:02:19,110 --> 00:02:20,910
when and how to call a model.

51
00:02:20,910 --> 00:02:23,973
And model is the underlying intelligence.

52
00:02:24,930 --> 00:02:28,230
These are the foundation
models which powers your agent

53
00:02:28,230 --> 00:02:29,520
and generate the responses

54
00:02:29,520 --> 00:02:33,270
based on the data that
they were trained on.

55
00:02:33,270 --> 00:02:34,653
Next we have,

56
00:02:35,910 --> 00:02:39,600
but sometimes model
cannot answer the direct,

57
00:02:39,600 --> 00:02:41,400
cannot answer you directly.

58
00:02:41,400 --> 00:02:43,110
For example, if I ask model,

59
00:02:43,110 --> 00:02:46,140
give me the 10 recent Jira tickets

60
00:02:46,140 --> 00:02:48,450
or Jira tickets for this project.

61
00:02:48,450 --> 00:02:50,160
Model doesn't have the access

62
00:02:50,160 --> 00:02:52,470
to that kind of information.

63
00:02:52,470 --> 00:02:54,690
And that's why we have tools.

64
00:02:54,690 --> 00:02:58,860
And tools are the external
entities that allows your agent

65
00:02:58,860 --> 00:03:01,380
to talk to outside world other than model

66
00:03:01,380 --> 00:03:05,610
to perform tasks like web
searches, database lookups,

67
00:03:05,610 --> 00:03:07,980
code execution, calling APIs,

68
00:03:07,980 --> 00:03:09,690
anything that your agent wants to do

69
00:03:09,690 --> 00:03:11,760
for the task completion.

70
00:03:11,760 --> 00:03:15,390
In fact, the agent can create
a new prompt internally

71
00:03:15,390 --> 00:03:17,290
that goes through the same loop again.

72
00:03:18,660 --> 00:03:19,493
And this is the...

73
00:03:19,493 --> 00:03:23,820
This process of acting,
interpreting, planning

74
00:03:23,820 --> 00:03:25,770
is what we call as agentic loop,

75
00:03:25,770 --> 00:03:28,833
and it continues until the
task or the ask is completed.

76
00:03:30,240 --> 00:03:32,190
The framework which we are gonna use today

77
00:03:32,190 --> 00:03:35,550
to build the agent is Strands SDK,

78
00:03:35,550 --> 00:03:37,530
and to define Strands,

79
00:03:37,530 --> 00:03:40,380
it is an open source Python SDK,

80
00:03:40,380 --> 00:03:43,110
which will let you build the AI agent

81
00:03:43,110 --> 00:03:45,300
with just few lines of code.

82
00:03:45,300 --> 00:03:46,530
What that means is

83
00:03:46,530 --> 00:03:47,970
compared to other frameworks

84
00:03:47,970 --> 00:03:50,710
where developers are required

85
00:03:52,599 --> 00:03:55,440
to create the complex
workflows for their agents,

86
00:03:55,440 --> 00:03:57,810
Strands Agent follows the model agnostic

87
00:03:57,810 --> 00:03:59,550
or model driven approach,

88
00:03:59,550 --> 00:04:02,583
the similar thing which
we saw in agentic loop.

89
00:04:04,230 --> 00:04:06,591
So what happens is a

90
00:04:06,591 --> 00:04:09,720
Strands can run on any infrastructure

91
00:04:09,720 --> 00:04:11,790
and it can call a model

92
00:04:11,790 --> 00:04:13,800
that are either hosted on Amazon Bedrock

93
00:04:13,800 --> 00:04:15,543
or even open AI model.

94
00:04:16,770 --> 00:04:19,440
So to clear quickly,

95
00:04:19,440 --> 00:04:20,273
summarize this one.

96
00:04:20,273 --> 00:04:23,580
Strands will let you define
how your agent can think

97
00:04:23,580 --> 00:04:25,020
and act on his own.

98
00:04:25,020 --> 00:04:26,190
But the next question is,

99
00:04:26,190 --> 00:04:29,362
how can you make or make this agent

100
00:04:29,362 --> 00:04:33,153
run in a scalable and
production way great?

101
00:04:34,050 --> 00:04:36,750
The answer is use AgentCore.

102
00:04:36,750 --> 00:04:39,810
So the AgentCore is a managed runtime

103
00:04:39,810 --> 00:04:42,210
and infrastructure offering from AWS,

104
00:04:42,210 --> 00:04:44,730
which will let you build, develop,

105
00:04:44,730 --> 00:04:47,703
and operate your AI agent at scale.

106
00:04:50,219 --> 00:04:52,860
It provides a lot of
out of box components,

107
00:04:52,860 --> 00:04:53,693
which you can,

108
00:04:53,693 --> 00:04:55,770
some of them you can see it on the screen.

109
00:04:55,770 --> 00:04:57,990
And if you are hearing about AgentCore

110
00:04:57,990 --> 00:05:00,633
or listening about the
AgentCore for the first time,

111
00:05:01,560 --> 00:05:02,910
do not worry about it.

112
00:05:02,910 --> 00:05:05,310
I will go on very high
level about the components

113
00:05:05,310 --> 00:05:06,963
so that it is easy to follow.

114
00:05:08,280 --> 00:05:11,670
So we have an agent who can think and act,

115
00:05:11,670 --> 00:05:14,620
but it needs a runtime
which will basically

116
00:05:16,651 --> 00:05:20,010
allows to fulfill the
business goals we have.

117
00:05:20,010 --> 00:05:23,070
For example, multiple users access,

118
00:05:23,070 --> 00:05:25,143
autoscaling, sandboxing sessions,

119
00:05:27,180 --> 00:05:31,110
interacting with the tools
which we will have in the agent,

120
00:05:31,110 --> 00:05:33,750
and most importantly the performance.

121
00:05:33,750 --> 00:05:35,220
For everything like that,

122
00:05:35,220 --> 00:05:36,663
you will need an AgentCore.

123
00:05:38,970 --> 00:05:40,530
You can think of Strands

124
00:05:40,530 --> 00:05:43,440
as providing the
intelligence to your agents

125
00:05:43,440 --> 00:05:47,400
and AgentCore will provide the structure,

126
00:05:47,400 --> 00:05:51,930
the scalability, the security
that your agent needs.

127
00:05:51,930 --> 00:05:54,690
On top of that, if I want my agent

128
00:05:54,690 --> 00:05:58,170
to remember the
conversation I had in past,

129
00:05:58,170 --> 00:06:00,243
I could use memory in capability,

130
00:06:01,500 --> 00:06:03,870
which will store the context information

131
00:06:03,870 --> 00:06:06,690
across the session and the agents.

132
00:06:06,690 --> 00:06:08,880
Along with memory and the runtime

133
00:06:08,880 --> 00:06:12,120
AgentCore does have built in tool support.

134
00:06:12,120 --> 00:06:15,385
And in AWS it provides
the native integrations

135
00:06:15,385 --> 00:06:18,340
so that your agents can either

136
00:06:19,920 --> 00:06:23,820
store your data in S3 buckets
or trigger a Lambda function

137
00:06:23,820 --> 00:06:27,540
or even write into DynamoDB databases.

138
00:06:27,540 --> 00:06:29,160
Other than native integrations,

139
00:06:29,160 --> 00:06:32,313
you can also register
your APIs as MCP tools,

140
00:06:33,510 --> 00:06:36,393
so that your agent can
access them securely.

141
00:06:38,460 --> 00:06:39,930
So there is more,

142
00:06:39,930 --> 00:06:40,950
you can see on top.

143
00:06:40,950 --> 00:06:42,060
It's gateways.

144
00:06:42,060 --> 00:06:44,670
AgentCore gateways will allow you

145
00:06:44,670 --> 00:06:47,850
to expose your internal APIs

146
00:06:47,850 --> 00:06:51,150
and Lambda functions if
you have any, as MCP tools.

147
00:06:51,150 --> 00:06:53,236
And finally, we have identity

148
00:06:53,236 --> 00:06:57,780
which will give you plenty
of options for authentication

149
00:06:57,780 --> 00:07:00,813
and authorization to basically
lock down everything.

150
00:07:03,420 --> 00:07:05,700
So we have seen Strands

151
00:07:05,700 --> 00:07:08,160
or you just heard me about Strands

152
00:07:08,160 --> 00:07:10,680
which will define the agent capabilities

153
00:07:10,680 --> 00:07:13,020
and you will run it on AgentCore run time

154
00:07:13,020 --> 00:07:15,180
for the scalability it requires.

155
00:07:15,180 --> 00:07:17,793
So what is missing in these two?

156
00:07:20,070 --> 00:07:23,040
So the answer,

157
00:07:23,040 --> 00:07:24,180
before the answering it,

158
00:07:24,180 --> 00:07:25,080
let me ask you

159
00:07:25,080 --> 00:07:28,110
how do you think that the context,

160
00:07:28,110 --> 00:07:30,300
the memory or the tooling information

161
00:07:30,300 --> 00:07:33,930
or any other thing is flowing
reliably between the agent

162
00:07:33,930 --> 00:07:37,830
and the system it needs to interact with?

163
00:07:37,830 --> 00:07:40,110
That missing link is MCP.

164
00:07:40,110 --> 00:07:43,710
So MCP is the open
standard which will let you

165
00:07:43,710 --> 00:07:45,720
define how your agents can connect

166
00:07:45,720 --> 00:07:49,113
or communicate with the
applications and the services.

167
00:07:50,880 --> 00:07:55,560
It provides a consistent way
to expose the capabilities.

168
00:07:55,560 --> 00:07:59,310
And what I mean is like your
database queries or APIs

169
00:07:59,310 --> 00:08:01,980
or any other services as tools

170
00:08:01,980 --> 00:08:04,833
so that your agent can
access them securely.

171
00:08:06,661 --> 00:08:09,420
Additionally, MCP doesn't just expose

172
00:08:09,420 --> 00:08:11,400
the capabilities as tool,

173
00:08:11,400 --> 00:08:15,480
but it also provides three key
capabilities for your agent.

174
00:08:15,480 --> 00:08:18,750
And first off that one is tools,

175
00:08:18,750 --> 00:08:21,780
and these are the actions
that your agent can perform.

176
00:08:21,780 --> 00:08:23,490
Essentially you are telling your agent,

177
00:08:23,490 --> 00:08:25,380
this is what you can do.

178
00:08:25,380 --> 00:08:27,900
For example, you can fetch the weather

179
00:08:27,900 --> 00:08:29,580
or trigger a workflow

180
00:08:29,580 --> 00:08:32,880
or even retrieve the customer data.

181
00:08:32,880 --> 00:08:34,410
Second, we have prompts

182
00:08:34,410 --> 00:08:36,150
and these are the data,

183
00:08:36,150 --> 00:08:39,150
external data sources that
your agent can access,

184
00:08:39,150 --> 00:08:42,720
like database, list,
documents, files, URLs,

185
00:08:42,720 --> 00:08:46,590
basically all the information
that your agent can read.

186
00:08:46,590 --> 00:08:48,540
And lastly, we have prompts

187
00:08:48,540 --> 00:08:53,540
which is a instruction manual
including text and arguments.

188
00:08:53,550 --> 00:08:55,530
So it is basically telling the model

189
00:08:55,530 --> 00:08:57,360
that this is the given context

190
00:08:57,360 --> 00:08:58,910
for the response you will send.

191
00:08:59,760 --> 00:09:02,910
Okay, so to conclude everything.

192
00:09:02,910 --> 00:09:04,500
Once again we have Strands

193
00:09:04,500 --> 00:09:07,470
that will let you define
the agent capabilities.

194
00:09:07,470 --> 00:09:10,830
AgentCore will allow you to
run in a scalable manner,

195
00:09:10,830 --> 00:09:15,180
and MCP will expose the
capabilities as a tool

196
00:09:15,180 --> 00:09:17,340
so that your agent can access them.

197
00:09:17,340 --> 00:09:19,890
Altogether you will build an AI agent

198
00:09:19,890 --> 00:09:22,293
into the existing legacy application.

199
00:09:24,180 --> 00:09:25,800
So we have the scene now,

200
00:09:25,800 --> 00:09:28,350
we know we have gone through the concept.

201
00:09:28,350 --> 00:09:30,660
Now I'll ask my colleague Franz,

202
00:09:30,660 --> 00:09:33,660
who will demonstrate to
you how to create an agent

203
00:09:33,660 --> 00:09:37,350
using Strands SDK and run
it on agentic runtime,

204
00:09:37,350 --> 00:09:38,973
all in an empty project.

205
00:09:39,840 --> 00:09:40,673
Over to you Franz.

206
00:09:40,673 --> 00:09:42,660
- [Franz] Thank you, Deepali.

207
00:09:42,660 --> 00:09:45,753
Let me switch over to the other screen.

208
00:09:46,590 --> 00:09:48,480
And hello, everyone,

209
00:09:48,480 --> 00:09:49,770
Franz is my name.

210
00:09:49,770 --> 00:09:52,770
So next to Jan we will try to

211
00:09:52,770 --> 00:09:55,860
for the remaining 50 minutes
to do some coding stuff.

212
00:09:55,860 --> 00:09:58,230
So as we started with the preparation

213
00:09:58,230 --> 00:09:59,613
for this code talk today,

214
00:10:00,570 --> 00:10:02,220
we had initially much more slides,

215
00:10:02,220 --> 00:10:03,510
but that's a code talk.

216
00:10:03,510 --> 00:10:04,630
So we are not here for

217
00:10:05,550 --> 00:10:07,290
going through a lot of concepts

218
00:10:07,290 --> 00:10:09,930
and then theoretical aspects.

219
00:10:09,930 --> 00:10:12,150
But we had to set the scene
to give an understanding

220
00:10:12,150 --> 00:10:14,820
that we want to use and
to build an agent today

221
00:10:14,820 --> 00:10:18,150
with the Strands, Strands
Agents is the key,

222
00:10:18,150 --> 00:10:21,900
transform it to a Bedrock AgentCore Agent

223
00:10:21,900 --> 00:10:25,080
deployed then to the cloud

224
00:10:25,080 --> 00:10:26,580
and then adding some capabilities.

225
00:10:26,580 --> 00:10:29,100
So we will start a little bit low level,

226
00:10:29,100 --> 00:10:31,410
but the level will increase.

227
00:10:31,410 --> 00:10:35,760
Yeah, the second step we had
then to take a trade off.

228
00:10:35,760 --> 00:10:38,400
Do we want to code
everything from scratch,

229
00:10:38,400 --> 00:10:40,170
would not fit within the time.

230
00:10:40,170 --> 00:10:44,760
So we will have some parts now
that we want to go through.

231
00:10:44,760 --> 00:10:46,410
So we will also cope with some code

232
00:10:46,410 --> 00:10:48,330
and then trying to give an understanding.

233
00:10:48,330 --> 00:10:50,543
Feel free to ask questions as well.

234
00:10:50,543 --> 00:10:54,570
We are here after the session
as well in case of questions,

235
00:10:54,570 --> 00:10:57,273
but it's encouraged to
ask questions in between.

236
00:10:58,500 --> 00:11:00,420
I hope you apologize if I sit down,

237
00:11:00,420 --> 00:11:02,640
but it makes it much more easier

238
00:11:02,640 --> 00:11:05,043
than to start with decoding,

239
00:11:06,360 --> 00:11:08,760
and to give an understanding

240
00:11:08,760 --> 00:11:10,560
what we wanna start with first.

241
00:11:10,560 --> 00:11:13,020
I think you can see the screen,

242
00:11:13,020 --> 00:11:16,319
just let me try to make this
a little bit more readable.

243
00:11:16,319 --> 00:11:17,876
- [Deepali] Franz.

244
00:11:17,876 --> 00:11:18,709
Yeah.
- Yeah, that was

245
00:11:18,709 --> 00:11:20,670
my question (faintly speaking)

246
00:11:20,670 --> 00:11:21,503
- [Deepali] Okay.

247
00:11:21,503 --> 00:11:22,864
- Is this good?
- Yes.

248
00:11:22,864 --> 00:11:24,360
(Franz laughs)

249
00:11:24,360 --> 00:11:26,802
- [Franz] So what we are gonna start with,

250
00:11:26,802 --> 00:11:29,220
as you can see or maybe not see,

251
00:11:29,220 --> 00:11:32,250
this will be primarily
based on Python today.

252
00:11:32,250 --> 00:11:33,700
So we will use Python

253
00:11:34,620 --> 00:11:38,400
as this is the main
supported language as of now

254
00:11:38,400 --> 00:11:40,230
to get started.

255
00:11:40,230 --> 00:11:42,900
There are other options
how to use other languages.

256
00:11:42,900 --> 00:11:44,640
I will come to that in a second.

257
00:11:44,640 --> 00:11:47,610
But the first thing I want to go through

258
00:11:47,610 --> 00:11:49,650
is to make use of these free packages.

259
00:11:49,650 --> 00:11:52,410
So I have defined these free packages

260
00:11:52,410 --> 00:11:54,570
in my requirements, TXT file,

261
00:11:54,570 --> 00:11:57,570
and those packages are all we need

262
00:11:57,570 --> 00:12:02,570
to transform the agent that
we're gonna start now with,

263
00:12:03,330 --> 00:12:06,690
to deploy it and also to
AWS and intend to extend it.

264
00:12:06,690 --> 00:12:10,503
So let me increase this here a bit.

265
00:12:14,520 --> 00:12:16,560
So in addition,

266
00:12:16,560 --> 00:12:18,190
what I'm going to do now is

267
00:12:19,200 --> 00:12:21,363
also to create a virtual environment.

268
00:12:31,560 --> 00:12:35,680
So next thing I'm going to do is to import

269
00:12:36,810 --> 00:12:37,690
the packages

270
00:12:38,940 --> 00:12:41,310
and as these packages
are getting imported,

271
00:12:41,310 --> 00:12:44,373
I need to create a file
so that I'm able to,

272
00:12:45,870 --> 00:12:47,973
that's my main file for the agent itself.

273
00:12:49,743 --> 00:12:54,743
Reinventdemoagentmam345 for instance.

274
00:12:58,440 --> 00:13:02,850
So what is now needed to
start with a Strands Agent,

275
00:13:02,850 --> 00:13:05,700
it's pretty easy and straightforward.

276
00:13:05,700 --> 00:13:09,630
First what we want to go do is to import

277
00:13:09,630 --> 00:13:12,810
the agent class from the Strands package.

278
00:13:12,810 --> 00:13:14,670
So as you can see there,

279
00:13:14,670 --> 00:13:17,340
there is a class from the Strands package

280
00:13:17,340 --> 00:13:19,950
that is needed that we
need to instantiate,

281
00:13:19,950 --> 00:13:21,900
which is receiving user input,

282
00:13:21,900 --> 00:13:24,600
processing the input
and so on and so forth.

283
00:13:24,600 --> 00:13:27,450
So that's the first thing
we need to start with

284
00:13:27,450 --> 00:13:31,080
when taking care of
building our first agent

285
00:13:31,080 --> 00:13:32,400
or our initial agent,

286
00:13:32,400 --> 00:13:34,560
and then the remaining free lines

287
00:13:34,560 --> 00:13:37,260
to say that we have now
built the first agent

288
00:13:37,260 --> 00:13:38,400
are those ones.

289
00:13:38,400 --> 00:13:42,930
So what we are going to do is
now to instantiate the class.

290
00:13:42,930 --> 00:13:45,600
The second thing here is to take an input.

291
00:13:45,600 --> 00:13:46,950
So usually we are used

292
00:13:46,950 --> 00:13:49,080
to take an input from a user interface.

293
00:13:49,080 --> 00:13:50,430
We have also a user interface

294
00:13:50,430 --> 00:13:52,050
that I will show you in a second.

295
00:13:52,050 --> 00:13:52,883
But in that case

296
00:13:52,883 --> 00:13:55,020
we are taking the user
interface from the CLI.

297
00:13:55,020 --> 00:13:57,513
So in Python, that's input.

298
00:13:58,590 --> 00:13:59,550
Yeah, give my name,

299
00:13:59,550 --> 00:14:01,740
and I give myself a name

300
00:14:01,740 --> 00:14:04,410
and then passing the
user input to the agent.

301
00:14:04,410 --> 00:14:06,630
And that's pretty much it to get started.

302
00:14:06,630 --> 00:14:09,903
So where I'm going back to my CLI,

303
00:14:11,640 --> 00:14:12,663
just started.

304
00:14:18,180 --> 00:14:21,150
And can now ask a question like

305
00:14:21,150 --> 00:14:25,500
what is the capital of the USA?

306
00:14:25,500 --> 00:14:27,273
So based on that question,

307
00:14:28,110 --> 00:14:30,360
that's something the LMS are trained on.

308
00:14:30,360 --> 00:14:32,640
So that's nothing very sophisticated.

309
00:14:32,640 --> 00:14:34,710
So we will get immediately a response.

310
00:14:34,710 --> 00:14:36,630
But if I would ask now something

311
00:14:36,630 --> 00:14:39,060
as mentioned by my
colleague Deepali before

312
00:14:39,060 --> 00:14:42,300
that requires some real
time information like

313
00:14:42,300 --> 00:14:45,850
what is the weather today in

314
00:14:47,670 --> 00:14:48,663
Las Vegas?

315
00:14:50,160 --> 00:14:52,680
I would expect that the
LLM cannot return it back.

316
00:14:52,680 --> 00:14:53,730
And as you can see here,

317
00:14:53,730 --> 00:14:57,120
the LLM is not trained on
real time data as we know.

318
00:14:57,120 --> 00:14:59,670
So this is something now
where we need to introduce

319
00:14:59,670 --> 00:15:01,830
that was mentioned by my colleague before

320
00:15:01,830 --> 00:15:03,210
making use of tools.

321
00:15:03,210 --> 00:15:04,380
So these tools,

322
00:15:04,380 --> 00:15:08,820
either you can write as
part of your agent itself

323
00:15:08,820 --> 00:15:12,990
or you can use an SDK that has
already some tools included.

324
00:15:12,990 --> 00:15:14,970
That's what we are going to do now

325
00:15:14,970 --> 00:15:16,320
or making use of MCP,

326
00:15:16,320 --> 00:15:18,090
which we will see then later on

327
00:15:18,090 --> 00:15:19,620
by getting some tools returned.

328
00:15:19,620 --> 00:15:23,100
So primarily when talking
to agents question is

329
00:15:23,100 --> 00:15:24,570
what can you do for me?

330
00:15:24,570 --> 00:15:26,790
And I will get in response some tools

331
00:15:26,790 --> 00:15:30,240
that give you some
understanding so that the loop

332
00:15:30,240 --> 00:15:33,750
between the agent and
the LLM is about tools

333
00:15:33,750 --> 00:15:36,840
and their reasoning so that it can say,

334
00:15:36,840 --> 00:15:40,020
okay, I found a tool that
might fit the prompt,

335
00:15:40,020 --> 00:15:41,880
I will make use of it.

336
00:15:41,880 --> 00:15:46,440
So this means we need to
add something in addition,

337
00:15:46,440 --> 00:15:50,010
which is now the second
package that we imported,

338
00:15:50,010 --> 00:15:52,050
we want to make use of,

339
00:15:52,050 --> 00:15:56,070
which is coming from the
Strands tool package.

340
00:15:56,070 --> 00:15:59,190
So what I'm trying to import here

341
00:15:59,190 --> 00:16:03,780
is a tool that already exists

342
00:16:03,780 --> 00:16:07,110
as part of the Strands package.

343
00:16:07,110 --> 00:16:08,730
And you can see here a bunch of tools

344
00:16:08,730 --> 00:16:09,870
that we can make use of.

345
00:16:09,870 --> 00:16:11,130
We have here,

346
00:16:11,130 --> 00:16:12,360
we know that the LMS are not

347
00:16:12,360 --> 00:16:15,271
that great on doing mathematical stuff.

348
00:16:15,271 --> 00:16:16,971
So we have a calculator tool,

349
00:16:16,971 --> 00:16:19,410
we have also an RSS tool.

350
00:16:19,410 --> 00:16:21,570
So we can use that tool imported.

351
00:16:21,570 --> 00:16:23,271
So to get back...

352
00:16:23,271 --> 00:16:27,840
Give me the 10 most recent
blog posts on the AWS channel

353
00:16:27,840 --> 00:16:30,003
in that category, for instance.

354
00:16:31,230 --> 00:16:35,190
HTTP request itself is more
generic but very helpful

355
00:16:35,190 --> 00:16:39,840
because it has the capability to get

356
00:16:39,840 --> 00:16:41,580
outside to the internet,

357
00:16:41,580 --> 00:16:44,670
invokes some other APIs

358
00:16:44,670 --> 00:16:47,100
and give us something in return.

359
00:16:47,100 --> 00:16:49,050
And that's what we want to make use of.

360
00:16:49,050 --> 00:16:52,530
So something we need just
to add on top of that is,

361
00:16:52,530 --> 00:16:55,710
or what I want to make
use of is a system prompt.

362
00:16:55,710 --> 00:16:59,340
System prompt primarily is like a persona.

363
00:16:59,340 --> 00:17:04,340
I want to set some guard
rails or some pathways

364
00:17:05,600 --> 00:17:09,240
and maybe also some boundaries

365
00:17:09,240 --> 00:17:11,880
so that it is easier to get further.

366
00:17:11,880 --> 00:17:13,560
So in that case I'm asking,

367
00:17:13,560 --> 00:17:17,760
and giving as prompt that
it should only use APIs

368
00:17:17,760 --> 00:17:20,910
that are not requiring any
kind of authentication,

369
00:17:20,910 --> 00:17:23,190
API keys authorization, et cetera.

370
00:17:23,190 --> 00:17:25,830
Usually we want to do that
for sake of simplicity.

371
00:17:25,830 --> 00:17:29,130
We are trying to get access
to some external endpoints

372
00:17:29,130 --> 00:17:30,840
that are not requiring that.

373
00:17:30,840 --> 00:17:35,760
And the last remaining part
that we need to take care of

374
00:17:35,760 --> 00:17:38,020
is to pass the system prompt

375
00:17:39,351 --> 00:17:42,450
to the agent.

376
00:17:42,450 --> 00:17:43,713
And in addition,

377
00:17:44,640 --> 00:17:46,030
we also need to pass

378
00:17:47,190 --> 00:17:48,814
the tool.

379
00:17:48,814 --> 00:17:50,700
In that case we only make use of one tool,

380
00:17:50,700 --> 00:17:53,583
we can have more tools
that we can make use of.

381
00:17:54,420 --> 00:17:56,310
In that case we are
passing the system prompt

382
00:17:56,310 --> 00:18:00,078
and the tool to our agent.

383
00:18:00,078 --> 00:18:00,911
So let's try it again.

384
00:18:00,911 --> 00:18:03,600
If there is a change compared

385
00:18:03,600 --> 00:18:06,720
to the initial question that we have seen.

386
00:18:06,720 --> 00:18:09,543
So again calling my agent.

387
00:18:14,088 --> 00:18:17,297
So what is the weather today in Las Vegas?

388
00:18:20,220 --> 00:18:23,610
And as you can see here already

389
00:18:23,610 --> 00:18:26,850
it found a tool that it
wants to make use of.

390
00:18:26,850 --> 00:18:28,680
I'm not debugging all information.

391
00:18:28,680 --> 00:18:31,860
We can take a look into that in a second.

392
00:18:31,860 --> 00:18:35,490
And what it tries now to
do is to find some APIs

393
00:18:35,490 --> 00:18:39,017
with help of this agentic loop routing

394
00:18:41,010 --> 00:18:43,410
and to go somewhere to find now

395
00:18:43,410 --> 00:18:45,780
the recent information about the weather.

396
00:18:45,780 --> 00:18:48,040
And it found something as we got in return

397
00:18:48,960 --> 00:18:50,700
something that seems very reliable

398
00:18:50,700 --> 00:18:54,270
and is a difference compared
to what we have seen before.

399
00:18:54,270 --> 00:18:58,800
So we extended now our agent with tools.

400
00:18:58,800 --> 00:19:02,310
The next step is as we have seen,

401
00:19:02,310 --> 00:19:05,510
we have three packages
we want to make use of.

402
00:19:05,510 --> 00:19:08,010
So we use the first one as the base one

403
00:19:08,010 --> 00:19:09,450
for creating an agent,

404
00:19:09,450 --> 00:19:13,080
the tools agents package for
making use of existing tools.

405
00:19:13,080 --> 00:19:16,350
And the third one is the
Bedrock AgentCore package.

406
00:19:16,350 --> 00:19:20,640
So that we can transform this
to a Bedrock AgentCore agent

407
00:19:20,640 --> 00:19:23,490
and being able to deploy
it into the cloud.

408
00:19:23,490 --> 00:19:24,960
So what is needed to...

409
00:19:24,960 --> 00:19:29,550
There's not much needed
to to transform this one,

410
00:19:29,550 --> 00:19:33,430
but what a surprise, we
need to import another

411
00:19:34,590 --> 00:19:39,060
class which is coming from
the Bedrock AgentCore package.

412
00:19:39,060 --> 00:19:42,420
So we need to have an,

413
00:19:42,420 --> 00:19:46,320
we need to instantiate the
class Bedrock AgentCore rep

414
00:19:46,320 --> 00:19:48,393
which we will do here.

415
00:19:58,110 --> 00:19:59,190
And by doing this,

416
00:19:59,190 --> 00:20:01,410
so what is it taking care of?

417
00:20:01,410 --> 00:20:05,070
If you are instantiating this one,

418
00:20:05,070 --> 00:20:08,760
it's creating an HTTP server
listening on port 8080.

419
00:20:08,760 --> 00:20:12,930
And it has two endpoints
that are important

420
00:20:12,930 --> 00:20:16,500
for an Bedrock AgentCore agent

421
00:20:16,500 --> 00:20:17,970
there is a ping endpoint.

422
00:20:17,970 --> 00:20:19,380
So kind of a health endpoint

423
00:20:19,380 --> 00:20:22,557
especially also interesting
for multi-agent communication.

424
00:20:22,557 --> 00:20:25,650
And the most important one
is the invocations endpoint

425
00:20:25,650 --> 00:20:27,810
because the invocations
endpoint is the one

426
00:20:27,810 --> 00:20:30,900
that is taking the prompt,

427
00:20:30,900 --> 00:20:32,280
listening to the input.

428
00:20:32,280 --> 00:20:34,530
So the JSON file in most cases.

429
00:20:34,530 --> 00:20:36,750
And then to proceed with the first of.

430
00:20:36,750 --> 00:20:38,150
We will see this in a second

431
00:20:39,390 --> 00:20:40,950
how this is gonna work.

432
00:20:40,950 --> 00:20:42,270
And in addition,

433
00:20:42,270 --> 00:20:45,753
some minor changes that
we need to take care of.

434
00:20:46,980 --> 00:20:51,980
So we need to also have a decorator

435
00:20:53,070 --> 00:20:54,690
being part of the agent.

436
00:20:54,690 --> 00:20:58,470
This is mandatory for any AgentCore agent

437
00:20:58,470 --> 00:20:59,730
to have an entry point.

438
00:20:59,730 --> 00:21:01,960
So we have this decorator app entry point

439
00:21:02,940 --> 00:21:06,120
and then a function that has the payload

440
00:21:06,120 --> 00:21:07,770
that we pass through.

441
00:21:07,770 --> 00:21:11,340
It's trying to find in the JSON

442
00:21:11,340 --> 00:21:13,770
attribute for prompt.

443
00:21:13,770 --> 00:21:15,150
We are passing the user input.

444
00:21:15,150 --> 00:21:17,250
So it's primarily the
same that we did here

445
00:21:17,250 --> 00:21:19,710
but no longer from the CLI

446
00:21:19,710 --> 00:21:22,140
but passing it then as a JSON,

447
00:21:22,140 --> 00:21:23,820
and then returning it back.

448
00:21:23,820 --> 00:21:27,610
And last remaining point
we need to take care of is

449
00:21:29,280 --> 00:21:33,510
to add this here to make the app running.

450
00:21:33,510 --> 00:21:35,310
So that's pretty much it.

451
00:21:35,310 --> 00:21:37,353
Let's see how this is gonna work.

452
00:21:41,910 --> 00:21:43,440
And the first thing you can see here,

453
00:21:43,440 --> 00:21:44,820
your agent is live,

454
00:21:44,820 --> 00:21:45,653
and it's blinking.

455
00:21:45,653 --> 00:21:47,820
That's because now we have
an HTTP server listening

456
00:21:47,820 --> 00:21:52,820
on port 8080 and waiting for
requests coming from a client.

457
00:21:53,130 --> 00:21:57,210
So what I will do is to
switch over to a second tab,

458
00:21:57,210 --> 00:21:59,430
and now I could use a postman

459
00:21:59,430 --> 00:22:01,770
or something that is integrated in the IDE

460
00:22:01,770 --> 00:22:03,930
or I can use curl,

461
00:22:03,930 --> 00:22:06,030
which I'm going to make use of here.

462
00:22:06,030 --> 00:22:10,020
So I'm having here a curl command

463
00:22:10,020 --> 00:22:11,850
and trying to ask a question.

464
00:22:11,850 --> 00:22:16,850
So like what is the
weather today in New York?

465
00:22:22,050 --> 00:22:23,250
So this is gonna,

466
00:22:23,250 --> 00:22:27,900
this is getting passed
to the running agent,

467
00:22:27,900 --> 00:22:29,550
list in port 8080.

468
00:22:29,550 --> 00:22:31,800
You can already see that
it is trying to make use

469
00:22:31,800 --> 00:22:36,120
of the tool that is passed through.

470
00:22:36,120 --> 00:22:38,580
And here we are waiting for the response.

471
00:22:38,580 --> 00:22:42,120
This agentic loop introduced
on the slides at the beginning,

472
00:22:42,120 --> 00:22:43,440
this iteration.

473
00:22:43,440 --> 00:22:45,030
This can take once,

474
00:22:45,030 --> 00:22:47,010
this can take multiple times.

475
00:22:47,010 --> 00:22:49,470
So what I've seen also were questions like

476
00:22:49,470 --> 00:22:50,640
I'm using Lambda,

477
00:22:50,640 --> 00:22:53,013
can I now use instead AgentCore?

478
00:22:54,420 --> 00:22:58,230
Probably most cases not depends
on what the use case is,

479
00:22:58,230 --> 00:23:00,780
usually to transform something.

480
00:23:00,780 --> 00:23:02,146
But you should not forget

481
00:23:02,146 --> 00:23:06,000
this kind of loop might
take a couple of seconds,

482
00:23:06,000 --> 00:23:09,059
especially in that case as
we are trying to find an API,

483
00:23:09,059 --> 00:23:13,110
we are not aware of because
this is decision taken

484
00:23:13,110 --> 00:23:16,380
by the LLM and the cycle
between the agent and the LLM.

485
00:23:16,380 --> 00:23:18,720
In that case, you can see already

486
00:23:18,720 --> 00:23:21,720
that this took more than one iteration.

487
00:23:21,720 --> 00:23:25,320
You can see that there was
at least a second invocation

488
00:23:25,320 --> 00:23:27,750
but in return, we got them something

489
00:23:27,750 --> 00:23:29,820
that already makes sense,

490
00:23:29,820 --> 00:23:31,263
and this is the response

491
00:23:31,263 --> 00:23:33,353
that we got back from the (indistinct).

492
00:23:33,353 --> 00:23:34,876
There's a question if we.

493
00:23:34,876 --> 00:23:36,000
- [Attendee] Can you get a

494
00:23:36,000 --> 00:23:39,270
screening response from a get call?

495
00:23:39,270 --> 00:23:41,492
- Yes.
- Simple answer yes.

496
00:23:41,492 --> 00:23:45,300
- [Franz] In a minute. (laughs)

497
00:23:45,300 --> 00:23:47,070
But good question.

498
00:23:47,070 --> 00:23:47,903
Great.

499
00:23:49,476 --> 00:23:51,993
So still we are running locally.

500
00:23:53,190 --> 00:23:54,690
That's not what we want to do.

501
00:23:54,690 --> 00:23:56,460
But yeah,

502
00:23:56,460 --> 00:23:58,410
usually when we start developing,

503
00:23:58,410 --> 00:23:59,520
it's locally.

504
00:23:59,520 --> 00:24:01,680
The next step we're
gonna want to achieve is

505
00:24:01,680 --> 00:24:04,290
how to deploy it to the cloud.

506
00:24:04,290 --> 00:24:06,990
As mentioned before by my colleague,

507
00:24:06,990 --> 00:24:08,520
we have this serverless runtime,

508
00:24:08,520 --> 00:24:09,930
AgentCore runtime

509
00:24:09,930 --> 00:24:12,390
where we can run our agents in

510
00:24:12,390 --> 00:24:15,000
and the next step is now to deploy it.

511
00:24:15,000 --> 00:24:16,740
There are multiple ways
how to achieve that.

512
00:24:16,740 --> 00:24:19,080
So you could use a for prompt environment,

513
00:24:19,080 --> 00:24:21,100
you would use infrastructure as code,

514
00:24:21,100 --> 00:24:23,043
CloudFormation, Terraform, et cetera.

515
00:24:24,030 --> 00:24:27,640
Something that exists
when making use especially

516
00:24:29,070 --> 00:24:32,250
or using Python is a toolkit

517
00:24:32,250 --> 00:24:36,300
that I haven't introduced so far.

518
00:24:36,300 --> 00:24:39,090
So because this becomes very handy,

519
00:24:39,090 --> 00:24:41,790
it gives you some possibilities

520
00:24:41,790 --> 00:24:45,540
with help of the AgentCore CLI to deploy

521
00:24:45,540 --> 00:24:47,190
and to configure some stuff.

522
00:24:47,190 --> 00:24:49,710
When you are doing this
with infrastructure as code,

523
00:24:49,710 --> 00:24:51,600
you need to pass some attributes

524
00:24:51,600 --> 00:24:53,370
and some configuration items.

525
00:24:53,370 --> 00:24:56,700
And this is something we we will see here

526
00:24:56,700 --> 00:25:00,480
in a second by making
use of another package.

527
00:25:00,480 --> 00:25:03,270
And I'm trying to install this now.

528
00:25:03,270 --> 00:25:04,103
This is called,

529
00:25:04,103 --> 00:25:06,000
and this is not mentioned
in the requirements TXT

530
00:25:06,000 --> 00:25:09,277
because I just want to
make use of it in the IDE.

531
00:25:10,170 --> 00:25:14,073
Bedrock AgentCore starter toolkit.

532
00:25:15,720 --> 00:25:18,753
And as is this is getting downloaded,

533
00:25:19,740 --> 00:25:23,790
I can now just say configure,

534
00:25:23,790 --> 00:25:26,010
AgentCore configure

535
00:25:26,010 --> 00:25:31,010
and pass through my agent class.

536
00:25:31,200 --> 00:25:35,310
So it's now going to ask me some questions

537
00:25:35,310 --> 00:25:39,870
that are mandatory and
important to mention

538
00:25:39,870 --> 00:25:42,090
or you need to consider when you are using

539
00:25:42,090 --> 00:25:43,920
CloudFormation or Terraform.

540
00:25:43,920 --> 00:25:46,680
First question is what
should we name the agent?

541
00:25:46,680 --> 00:25:49,560
If you don't pass a name,
it'll take the file name.

542
00:25:49,560 --> 00:25:50,640
We are good with that.

543
00:25:50,640 --> 00:25:53,340
And taking this as standard.

544
00:25:53,340 --> 00:25:55,020
Do you have a requirements TXT file?

545
00:25:55,020 --> 00:25:56,700
Is it named the requirements TXT?

546
00:25:56,700 --> 00:25:57,693
Yes. We are good.

547
00:25:58,680 --> 00:26:00,480
What kind of deployment configuration

548
00:26:00,480 --> 00:26:01,920
you want to make use of?

549
00:26:01,920 --> 00:26:05,700
So Bedrock AgentCore is
GE for a couple of weeks,

550
00:26:05,700 --> 00:26:06,780
a few weeks,

551
00:26:06,780 --> 00:26:10,053
started with container
or Docker deployment.

552
00:26:10,920 --> 00:26:12,510
Now it's even more easier,

553
00:26:12,510 --> 00:26:15,450
very comparable to how
you would deploy Lambdas.

554
00:26:15,450 --> 00:26:18,360
So you can use the first one,

555
00:26:18,360 --> 00:26:20,880
which is not a default one.

556
00:26:20,880 --> 00:26:25,050
It would then sip all the
assets needed together,

557
00:26:25,050 --> 00:26:29,310
uploaded to S3 and behind all the magic

558
00:26:29,310 --> 00:26:32,130
is going to get deployed to runtime.

559
00:26:32,130 --> 00:26:36,480
Why you should then consider
Docker as a second option,

560
00:26:36,480 --> 00:26:38,970
especially in that case if you have

561
00:26:38,970 --> 00:26:41,280
specific requirements dependencies

562
00:26:41,280 --> 00:26:44,460
that you want to adjust
in your Dockerfile?

563
00:26:44,460 --> 00:26:47,010
But also one question might be,

564
00:26:47,010 --> 00:26:50,340
okay, Python is good,
it's fully supported.

565
00:26:50,340 --> 00:26:53,820
What about Java, Go or other languages?

566
00:26:53,820 --> 00:26:57,030
So you could theoretically make
use of these other languages

567
00:26:57,030 --> 00:26:57,863
as well

568
00:26:59,970 --> 00:27:01,440
as long they're not fully supported

569
00:27:01,440 --> 00:27:03,510
as Python in that case,

570
00:27:03,510 --> 00:27:05,280
by building then a wrapper

571
00:27:05,280 --> 00:27:08,190
so that you have these
endpoints that are mandatory,

572
00:27:08,190 --> 00:27:10,410
the invocation endpoint
and the ping endpoint,

573
00:27:10,410 --> 00:27:11,940
that's where you would probably then

574
00:27:11,940 --> 00:27:13,380
also make use of Docker.

575
00:27:13,380 --> 00:27:15,000
So we are good with the default option,

576
00:27:15,000 --> 00:27:16,200
which is the number one,

577
00:27:17,160 --> 00:27:19,800
which Python and environment
we want to make use of.

578
00:27:19,800 --> 00:27:21,870
And yeah, execution role,

579
00:27:21,870 --> 00:27:24,286
very comparable to Lambda.

580
00:27:24,286 --> 00:27:29,286
You have a role that has
the necessary policies,

581
00:27:29,430 --> 00:27:32,970
actions needed to run the
agent in your environment.

582
00:27:32,970 --> 00:27:34,350
If you don't have one,

583
00:27:34,350 --> 00:27:36,720
we are good to go with the default one.

584
00:27:36,720 --> 00:27:38,850
So it'll take care of this as well.

585
00:27:38,850 --> 00:27:41,100
As free bucket, where to upload it?

586
00:27:41,100 --> 00:27:42,000
I don't have one,

587
00:27:42,000 --> 00:27:45,420
I'm good to let one create it.

588
00:27:45,420 --> 00:27:46,920
Authorization configuration.

589
00:27:46,920 --> 00:27:48,570
So you can use OAuth,

590
00:27:48,570 --> 00:27:52,050
or in that case I'm good
with IAM authorization.

591
00:27:52,050 --> 00:27:53,640
Take this one.

592
00:27:53,640 --> 00:27:57,540
You can also define some request headers,

593
00:27:57,540 --> 00:28:00,060
especially if you have
multi-agent collaboration.

594
00:28:00,060 --> 00:28:00,893
Very handy.

595
00:28:00,893 --> 00:28:03,540
We are good to ignore that as well.

596
00:28:03,540 --> 00:28:05,303
And last but not least,

597
00:28:05,303 --> 00:28:06,630
we have memory.

598
00:28:06,630 --> 00:28:09,180
Was mentioned in the slides
at the beginning as well.

599
00:28:09,180 --> 00:28:11,700
If we are passing and
having the communication

600
00:28:11,700 --> 00:28:12,840
in the user interface,

601
00:28:12,840 --> 00:28:14,760
we don't want to have,

602
00:28:14,760 --> 00:28:16,650
we have the context existing.

603
00:28:16,650 --> 00:28:20,610
We don't want to pass 50,
100 lines of information.

604
00:28:20,610 --> 00:28:22,470
We want to memorize it.

605
00:28:22,470 --> 00:28:23,970
That's where we have short term

606
00:28:23,970 --> 00:28:27,300
and long term memory that you
can make use of here as well.

607
00:28:27,300 --> 00:28:29,166
We will come to that in a minute.

608
00:28:29,166 --> 00:28:31,410
I'm good to skip this.

609
00:28:31,410 --> 00:28:33,423
And that's primarily it.

610
00:28:34,290 --> 00:28:39,010
So what is happening now in addition

611
00:28:40,230 --> 00:28:42,750
is-
- We have not skipped it yet.

612
00:28:42,750 --> 00:28:43,583
- [Franz] I have not skipped it.

613
00:28:43,583 --> 00:28:44,613
Yeah, sorry, thanks.

614
00:28:45,900 --> 00:28:47,460
Yeah.

615
00:28:47,460 --> 00:28:48,870
And one of the advantages is

616
00:28:48,870 --> 00:28:50,850
if you're using this data toolkit,

617
00:28:50,850 --> 00:28:52,830
it gives you immediately also some

618
00:28:52,830 --> 00:28:54,750
best practices how to proceed.

619
00:28:54,750 --> 00:28:57,510
So AgentCore launch would be the command

620
00:28:57,510 --> 00:28:59,550
to deploy the agent,

621
00:28:59,550 --> 00:29:01,410
which would be now the next step.

622
00:29:01,410 --> 00:29:05,816
And in addition what also happened is

623
00:29:05,816 --> 00:29:09,720
it's creating YAML file locally,

624
00:29:09,720 --> 00:29:11,550
based on what you have passed through

625
00:29:11,550 --> 00:29:16,550
and for further communication
with this startup toolkit,

626
00:29:18,450 --> 00:29:20,313
it will reference to this one.

627
00:29:21,510 --> 00:29:24,000
So I will skip this.

628
00:29:24,000 --> 00:29:26,320
What we want to do now is to

629
00:29:28,320 --> 00:29:30,213
invoke AgentCore launch.

630
00:29:31,170 --> 00:29:34,440
And it'll show you now
what is happening next.

631
00:29:34,440 --> 00:29:37,713
So it's packaging all assets needed,

632
00:29:38,550 --> 00:29:41,460
all imports that were considered

633
00:29:41,460 --> 00:29:43,200
in the requirements TXT file

634
00:29:43,200 --> 00:29:45,330
and it's creating now the zip file,

635
00:29:45,330 --> 00:29:46,680
uploading it to S3,

636
00:29:46,680 --> 00:29:49,230
creating the execution role

637
00:29:49,230 --> 00:29:52,110
and deploying it to the runtime.

638
00:29:52,110 --> 00:29:55,563
And to showcase you this in the console,

639
00:30:03,030 --> 00:30:04,440
it is gonna look like this.

640
00:30:04,440 --> 00:30:06,140
Let me increase this a little bit.

641
00:30:09,267 --> 00:30:12,940
So you have this AgentCore service

642
00:30:14,430 --> 00:30:16,560
which you wanna start.

643
00:30:16,560 --> 00:30:18,810
You have then here some
of these capabilities

644
00:30:18,810 --> 00:30:20,700
that we introduced at the beginning,

645
00:30:20,700 --> 00:30:22,620
and let's start with runtime.

646
00:30:22,620 --> 00:30:25,080
And you can then see here

647
00:30:25,080 --> 00:30:28,350
immediately all the agents
that you have deployed

648
00:30:28,350 --> 00:30:29,730
and running in your account,

649
00:30:29,730 --> 00:30:30,840
in your region.

650
00:30:30,840 --> 00:30:34,530
So in that case I'm in US East one,

651
00:30:34,530 --> 00:30:35,490
North Virginia,

652
00:30:35,490 --> 00:30:39,210
and I have here already my running agent.

653
00:30:39,210 --> 00:30:40,950
So if I'm switching back,

654
00:30:40,950 --> 00:30:42,220
I also have here

655
00:30:43,710 --> 00:30:45,453
response in a positive way.

656
00:30:46,290 --> 00:30:48,480
You will get also here immediately

657
00:30:48,480 --> 00:30:51,330
a possibility to tail
on your CloudWatch logs.

658
00:30:51,330 --> 00:30:53,340
So in case something happens,

659
00:30:53,340 --> 00:30:57,420
observability is a very important
aspect also of AgentCore.

660
00:30:57,420 --> 00:30:59,493
So open telemetry is fully supported.

661
00:31:00,972 --> 00:31:02,580
We have all the traces

662
00:31:02,580 --> 00:31:06,963
and spawns that we might
see also in a second.

663
00:31:08,010 --> 00:31:11,190
And now we can invoke this from the CLI

664
00:31:11,190 --> 00:31:14,440
or let me switch now to introduce you

665
00:31:15,540 --> 00:31:17,530
to a user interface

666
00:31:22,650 --> 00:31:25,710
which more or less is
listening all the agents

667
00:31:25,710 --> 00:31:27,660
that you have deployed in your account.

668
00:31:27,660 --> 00:31:31,203
And that's the one that we
have deployed a minute ago.

669
00:31:33,060 --> 00:31:34,710
And I can now ask more

670
00:31:34,710 --> 00:31:37,443
or less the same questions
as we have done before.

671
00:31:38,310 --> 00:31:41,280
What is the capital of,

672
00:31:41,280 --> 00:31:44,133
state something different, Germany?

673
00:31:49,866 --> 00:31:54,363
And the initial invocation
of the agent may take one

674
00:31:57,300 --> 00:32:01,390
or two seconds longer as it's starting

675
00:32:02,310 --> 00:32:03,190
to spawn up

676
00:32:04,260 --> 00:32:06,333
but will then remain in the session.

677
00:32:07,410 --> 00:32:10,980
Yeah, and you can see in a very dirty way,

678
00:32:10,980 --> 00:32:13,620
just adjacent output it's get getting us

679
00:32:13,620 --> 00:32:15,390
something back from the LLM.

680
00:32:15,390 --> 00:32:17,580
I can do now the same with something,

681
00:32:17,580 --> 00:32:19,410
we have now seen three times.

682
00:32:19,410 --> 00:32:23,490
So to not bother you with
something we have already seen,

683
00:32:23,490 --> 00:32:25,800
I'm happy to switch over
to my colleague Jan.

684
00:32:25,800 --> 00:32:28,500
- Yes.
- Who will try to make

685
00:32:28,500 --> 00:32:29,820
use of the existing agent

686
00:32:29,820 --> 00:32:32,010
and extend it with more capabilities

687
00:32:32,010 --> 00:32:35,370
and also to attach it to the legacy app

688
00:32:35,370 --> 00:32:37,053
without touching the legacy app.

689
00:32:38,220 --> 00:32:39,323
- [Deepali] Yeah, go ahead.

690
00:32:41,160 --> 00:32:42,120
- Sure.
- Before you deploy

691
00:32:42,120 --> 00:32:45,628
the application to the cloud
in the second iteration,

692
00:32:45,628 --> 00:32:50,628
why did it take reagent price
to get (faintly speaking)

693
00:32:51,579 --> 00:32:55,110
- [Franz] You can debug

694
00:32:55,110 --> 00:32:57,333
the whole cycle and what is going.

695
00:32:58,920 --> 00:33:00,360
So the whole communication,

696
00:33:00,360 --> 00:33:02,970
the cycle between agent and the LLM,

697
00:33:02,970 --> 00:33:05,190
you can for sure trace this

698
00:33:05,190 --> 00:33:06,210
for sake of simplicity.

699
00:33:06,210 --> 00:33:08,130
I have skipped this now,

700
00:33:08,130 --> 00:33:10,290
but you would then see it could be

701
00:33:10,290 --> 00:33:12,630
because it did not found the API

702
00:33:12,630 --> 00:33:14,970
or it found an API that was not able

703
00:33:14,970 --> 00:33:17,520
to respond in a given time.

704
00:33:17,520 --> 00:33:19,890
You will get all this information out

705
00:33:19,890 --> 00:33:22,320
as part of your debug information.

706
00:33:22,320 --> 00:33:25,440
In that case it was not
disclosed in this demo,

707
00:33:25,440 --> 00:33:28,560
but usually there are reasons why API is

708
00:33:28,560 --> 00:33:30,180
taking too much time.

709
00:33:30,180 --> 00:33:31,110
It's not responding.

710
00:33:31,110 --> 00:33:32,820
I'm not getting it in expect manner.

711
00:33:32,820 --> 00:33:36,360
Everything is disclosed in
the output as you define

712
00:33:36,360 --> 00:33:39,903
in your debug configuration.

713
00:33:40,980 --> 00:33:44,340
But fair question,
especially for HTTP requests,

714
00:33:44,340 --> 00:33:46,290
this may take longer

715
00:33:46,290 --> 00:33:50,490
because it's kind of a
black box where it goes.

716
00:33:50,490 --> 00:33:53,910
If you then use something that
you have more control over,

717
00:33:53,910 --> 00:33:56,070
which you will see now in a second,

718
00:33:56,070 --> 00:33:58,140
it usually it's much faster

719
00:33:58,140 --> 00:34:02,370
because we have the
expectation on endpoints

720
00:34:02,370 --> 00:34:03,694
we want take care of.

721
00:34:03,694 --> 00:34:05,550
Jan will introduce you to that.

722
00:34:05,550 --> 00:34:08,040
- [Jan] Yeah, also to add on this one,

723
00:34:08,040 --> 00:34:11,849
adding a general tool like
HTTP request means the LLM

724
00:34:11,849 --> 00:34:14,550
is like tempted to use
it for everything, right?

725
00:34:14,550 --> 00:34:16,710
It might know what the
capital of Germany is

726
00:34:16,710 --> 00:34:19,530
but it might ask an HTTP endpoint

727
00:34:19,530 --> 00:34:22,230
nonetheless to validate
if it's really true.

728
00:34:22,230 --> 00:34:25,170
So these general tools might tempt the LLM

729
00:34:25,170 --> 00:34:27,273
to do stuff which we don't want to do.

730
00:34:28,200 --> 00:34:29,880
Okay, looking at your faces,

731
00:34:29,880 --> 00:34:31,980
you want to see some
Legacy Applications, right?

732
00:34:31,980 --> 00:34:33,300
You're missing it already.

733
00:34:33,300 --> 00:34:37,560
So we do have a Legacy Application,

734
00:34:37,560 --> 00:34:40,440
and I have no idea what it is doing,

735
00:34:40,440 --> 00:34:41,273
of course, I have.

736
00:34:41,273 --> 00:34:45,390
But let's assume we just
got this on the table

737
00:34:45,390 --> 00:34:50,390
and we have to add some
agentic AI stuff to it, okay.

738
00:34:50,490 --> 00:34:52,980
So it's running on ECS,

739
00:34:52,980 --> 00:34:54,600
it's some Java application,

740
00:34:54,600 --> 00:34:56,730
it's using some database.

741
00:34:56,730 --> 00:34:58,560
Let's check it out what it is doing,

742
00:34:58,560 --> 00:35:01,170
and I heard you all love unicorns.

743
00:35:01,170 --> 00:35:05,670
So the great part is it's a unicorn store,

744
00:35:05,670 --> 00:35:07,260
and we can shop unicorns.

745
00:35:07,260 --> 00:35:08,250
That's great.

746
00:35:08,250 --> 00:35:10,080
So let's go ahead

747
00:35:10,080 --> 00:35:13,080
and add an agentic
capability for our users

748
00:35:13,080 --> 00:35:15,660
to not only use this website,

749
00:35:15,660 --> 00:35:17,910
which is well quite old

750
00:35:17,910 --> 00:35:21,513
but also use an agent
to shop unicorns, okay?

751
00:35:22,980 --> 00:35:26,220
For this, we have the first issue here.

752
00:35:26,220 --> 00:35:29,340
I don't know the endpoints
the application provides,

753
00:35:29,340 --> 00:35:32,790
I have no idea which rest
endpoints are available.

754
00:35:32,790 --> 00:35:36,060
So my first idea would be

755
00:35:36,060 --> 00:35:38,640
let's use Amazon Q Developer

756
00:35:38,640 --> 00:35:43,020
and ask it to create an
open API specification

757
00:35:43,020 --> 00:35:45,360
out of my application, right?

758
00:35:45,360 --> 00:35:46,350
That's quite simple.

759
00:35:46,350 --> 00:35:49,350
I don't know what's going
on inside the application

760
00:35:49,350 --> 00:35:51,900
but let's use Q Developer
to figure it out.

761
00:35:51,900 --> 00:35:56,850
So please create an open API

762
00:35:56,850 --> 00:36:01,850
spec out of my Legacy Application.

763
00:36:01,920 --> 00:36:05,550
Please ignore text plain endpoints

764
00:36:05,550 --> 00:36:07,443
because we don't want these.

765
00:36:08,310 --> 00:36:11,760
Okay, so while Q developer is not working,

766
00:36:11,760 --> 00:36:13,500
I will show you the result in a second

767
00:36:13,500 --> 00:36:15,750
but I prepared the result already.

768
00:36:15,750 --> 00:36:20,430
And I will pick this up to to use.

769
00:36:20,430 --> 00:36:22,950
So we do have an open API spec,

770
00:36:22,950 --> 00:36:26,160
and I swear this has been
generated by Q developer.

771
00:36:26,160 --> 00:36:29,520
We will just pick this open API spec,

772
00:36:29,520 --> 00:36:34,520
and we will go and switch over
into the AgentCore console

773
00:36:35,580 --> 00:36:36,600
into the gateway.

774
00:36:36,600 --> 00:36:38,324
So the gateway has been introduced,

775
00:36:38,324 --> 00:36:41,640
it's a way to host tools basically.

776
00:36:41,640 --> 00:36:44,910
And we have provisioned
one gateway already

777
00:36:44,910 --> 00:36:48,840
and you can add several
targets to a gateway.

778
00:36:48,840 --> 00:36:50,130
Targets can be,

779
00:36:50,130 --> 00:36:51,960
and we will see that in a second.

780
00:36:51,960 --> 00:36:55,080
Targets can be MCP servers, right?

781
00:36:55,080 --> 00:37:00,030
So which you find on any open
source GitHub, for example.

782
00:37:00,030 --> 00:37:03,870
It can be a lambda function
and it can be REST APIs.

783
00:37:03,870 --> 00:37:06,780
So we can go ahead and say REST API

784
00:37:06,780 --> 00:37:08,580
open API schema

785
00:37:08,580 --> 00:37:09,870
and inline schema.

786
00:37:09,870 --> 00:37:10,710
That's great.

787
00:37:10,710 --> 00:37:13,440
We are just pasting the whole API schema

788
00:37:13,440 --> 00:37:18,440
that has been generated
by Q Developer in here.

789
00:37:18,990 --> 00:37:20,010
For authorization,

790
00:37:20,010 --> 00:37:22,350
We are selecting an API key,

791
00:37:22,350 --> 00:37:23,250
which we don't need.

792
00:37:23,250 --> 00:37:26,520
Our application is accessible
from the public internet,

793
00:37:26,520 --> 00:37:31,050
but in case you could also
configure OAuth or an API key.

794
00:37:31,050 --> 00:37:34,530
I will add this as a target to my gateway.

795
00:37:34,530 --> 00:37:35,550
That's great.

796
00:37:35,550 --> 00:37:38,370
So now we have a second target,

797
00:37:38,370 --> 00:37:40,140
we will get to the lambda target later on.

798
00:37:40,140 --> 00:37:44,400
But now this gateway is able to interact

799
00:37:44,400 --> 00:37:47,940
with our application
using the open API schema.

800
00:37:47,940 --> 00:37:51,510
So what we have to do next is
we have to update our agent

801
00:37:51,510 --> 00:37:54,240
to make use of this gateway, right?

802
00:37:54,240 --> 00:37:57,030
That's the next step.

803
00:37:57,030 --> 00:37:59,550
To show you what we are going to do.

804
00:37:59,550 --> 00:38:02,850
I will quickly switch
over to this architecture.

805
00:38:02,850 --> 00:38:06,153
You can see the Legacy
Application part, right?

806
00:38:07,857 --> 00:38:10,650
And we are going to add the gateway.

807
00:38:10,650 --> 00:38:14,340
We are going to use our
agent on the left side.

808
00:38:14,340 --> 00:38:17,430
We are using the front end
that you have seen already,

809
00:38:17,430 --> 00:38:20,280
and yeah, we will...

810
00:38:20,280 --> 00:38:23,940
The goal is that our client,

811
00:38:23,940 --> 00:38:25,780
our agent is using the gateway

812
00:38:26,640 --> 00:38:29,610
and then the open API specification

813
00:38:29,610 --> 00:38:32,190
to invoke endpoints in
our Legacy Application.

814
00:38:32,190 --> 00:38:35,460
So we are not touching the
Legacy Application in any way.

815
00:38:35,460 --> 00:38:37,023
We are really enhancing it.

816
00:38:38,160 --> 00:38:39,540
- [Franz] Just to add a sentence,

817
00:38:39,540 --> 00:38:42,450
'cause I had a recently a
conversation with a customer

818
00:38:42,450 --> 00:38:43,650
who had the same challenge.

819
00:38:43,650 --> 00:38:45,690
They have Legacy Application,

820
00:38:45,690 --> 00:38:47,220
there is an open API schema

821
00:38:47,220 --> 00:38:51,493
that you can write or
exist or generate with AI,

822
00:38:52,950 --> 00:38:54,679
and the question was, okay,

823
00:38:54,679 --> 00:38:57,630
but where do I need to write the code?

824
00:38:57,630 --> 00:38:59,340
You don't need to write the code,

825
00:38:59,340 --> 00:39:00,240
the translation.

826
00:39:00,240 --> 00:39:01,800
That's where the gateway comes in,

827
00:39:01,800 --> 00:39:05,790
and makes it so super easy
is the open API schema

828
00:39:05,790 --> 00:39:08,850
that translates then
all the paths into tools

829
00:39:08,850 --> 00:39:11,640
that you can run and
invoke from your agents.

830
00:39:11,640 --> 00:39:13,740
So you don't need to
touch your Legacy App,

831
00:39:13,740 --> 00:39:15,300
you don't need to write a code,

832
00:39:15,300 --> 00:39:17,490
you're writing a code to
connect to the gateway

833
00:39:17,490 --> 00:39:19,920
which can has multiple targets

834
00:39:19,920 --> 00:39:22,680
but you can communicate
without making any changes,

835
00:39:22,680 --> 00:39:24,444
writing any code

836
00:39:24,444 --> 00:39:27,093
to make use of your Legacy Application.

837
00:39:28,350 --> 00:39:29,370
- [Jan] Okay.

838
00:39:29,370 --> 00:39:32,100
Then we are going back to the IDE,

839
00:39:32,100 --> 00:39:33,663
I have great news.

840
00:39:34,560 --> 00:39:36,840
Q developer was able to create

841
00:39:36,840 --> 00:39:40,590
this open API specification file,

842
00:39:40,590 --> 00:39:41,423
I will show you.

843
00:39:41,423 --> 00:39:43,170
So he was able to create it,

844
00:39:43,170 --> 00:39:44,010
we could have used it

845
00:39:44,010 --> 00:39:46,740
but I wanted to speed up things, right?

846
00:39:46,740 --> 00:39:50,070
So what we are going to do now is we have

847
00:39:50,070 --> 00:39:52,233
to enhance our agent like Franz said,

848
00:39:53,130 --> 00:39:55,410
we have to add the capability

849
00:39:55,410 --> 00:39:57,540
for the agent to invoke the gateway,

850
00:39:57,540 --> 00:39:59,790
which means fetching some credentials

851
00:39:59,790 --> 00:40:01,530
and configuring the gateway.

852
00:40:01,530 --> 00:40:02,850
I will guide you through it.

853
00:40:02,850 --> 00:40:03,900
I will copy stuff,

854
00:40:03,900 --> 00:40:06,180
stuff over to make it more quick.

855
00:40:06,180 --> 00:40:09,720
But we will get there.

856
00:40:09,720 --> 00:40:12,630
So the first thing we have to do is,

857
00:40:12,630 --> 00:40:15,415
can you increase the size a bit?

858
00:40:15,415 --> 00:40:17,350
The size to increase it in general?

859
00:40:17,350 --> 00:40:19,320
- [Franz] Yeah, yeah, I will increase it.

860
00:40:19,320 --> 00:40:20,153
Sure.
- Thanks.

861
00:40:21,259 --> 00:40:23,070
So what we are going to do is

862
00:40:23,070 --> 00:40:25,983
we are adding some more
imports at this point.

863
00:40:27,180 --> 00:40:28,200
I will guide you through it.

864
00:40:28,200 --> 00:40:29,850
I'm setting up the logging

865
00:40:29,850 --> 00:40:34,170
because I want to be able to
see what the agent is doing

866
00:40:34,170 --> 00:40:36,990
and as I mentioned we do have to get

867
00:40:36,990 --> 00:40:39,300
some power meters or some secrets, right?

868
00:40:39,300 --> 00:40:42,673
We have to authenticate
towards the gateway

869
00:40:42,673 --> 00:40:46,350
and we also have to get the gateway URL.

870
00:40:46,350 --> 00:40:49,650
So what I'm doing here is
I'm defining some variables

871
00:40:49,650 --> 00:40:51,330
which is the gateway URL.

872
00:40:51,330 --> 00:40:54,453
So this is the address where
our gateway is reachable.

873
00:40:55,410 --> 00:40:56,910
I'm defining the memory,

874
00:40:56,910 --> 00:40:58,890
we will get there later on.

875
00:40:58,890 --> 00:41:01,890
And I'm also defining the

876
00:41:01,890 --> 00:41:04,650
AgentCore gateway OAuth provider URL.

877
00:41:04,650 --> 00:41:07,230
This is used to get an
access token, right?

878
00:41:07,230 --> 00:41:10,350
So the agent is calling the auth provider

879
00:41:10,350 --> 00:41:11,340
getting an access token

880
00:41:11,340 --> 00:41:12,840
and with this access token

881
00:41:12,840 --> 00:41:17,130
he's allowed to access the gateway.

882
00:41:17,130 --> 00:41:19,530
I'm defining a model ID as well

883
00:41:19,530 --> 00:41:21,280
and a system formed

884
00:41:22,189 --> 00:41:24,330
which is a bit different saying

885
00:41:24,330 --> 00:41:27,423
you are an agent which is
helping with shopping unicorns.

886
00:41:28,410 --> 00:41:29,850
So that's it.

887
00:41:29,850 --> 00:41:30,750
That's it for now.

888
00:41:30,750 --> 00:41:32,250
We are getting the parameters.

889
00:41:32,250 --> 00:41:33,083
Next step,

890
00:41:33,083 --> 00:41:37,260
what we have to do is we have
to get this access token.

891
00:41:37,260 --> 00:41:39,690
And the great thing is
in this Strands SDK,

892
00:41:39,690 --> 00:41:43,680
there's a decorator requires access token.

893
00:41:43,680 --> 00:41:46,890
We are just passing in
the OAuth provider URL

894
00:41:46,890 --> 00:41:49,380
and we are getting back an access token,

895
00:41:49,380 --> 00:41:50,973
that's quite nice.

896
00:41:52,379 --> 00:41:56,820
Now we have to change the agent
initialization a little bit.

897
00:41:56,820 --> 00:42:00,600
When we are talking about
tool usage and gateway usage.

898
00:42:00,600 --> 00:42:03,360
We have to take care of
several user sessions, right?

899
00:42:03,360 --> 00:42:06,480
So users do have sessions with an agent

900
00:42:06,480 --> 00:42:09,870
and we have to handle that internally

901
00:42:09,870 --> 00:42:12,480
to make sure that a tool is bound

902
00:42:12,480 --> 00:42:14,523
to the session context of a user.

903
00:42:16,050 --> 00:42:21,050
For this we will just add
the init agent method,

904
00:42:21,180 --> 00:42:23,250
and yes, that's a bigger one.

905
00:42:23,250 --> 00:42:25,800
But I will guide you
through it what it is doing.

906
00:42:25,800 --> 00:42:29,460
So in this in init agent,

907
00:42:29,460 --> 00:42:32,040
we are trying to get the
agent from the context.

908
00:42:32,040 --> 00:42:34,410
All the context stuff
that you're seeing here

909
00:42:34,410 --> 00:42:37,320
is completely related
to session management.

910
00:42:37,320 --> 00:42:39,900
So it's all about separating user sessions

911
00:42:39,900 --> 00:42:42,633
and getting an agent
for this user session.

912
00:42:43,980 --> 00:42:46,020
If we already have an agent that's great,

913
00:42:46,020 --> 00:42:49,230
we just return it because
it has been initialized

914
00:42:49,230 --> 00:42:51,090
for this user session already.

915
00:42:51,090 --> 00:42:53,340
If not, we want to initialize it.

916
00:42:53,340 --> 00:42:55,770
Get the gateway access token, right?

917
00:42:55,770 --> 00:42:56,603
As I mentioned,

918
00:42:56,603 --> 00:43:00,540
you need to authenticate
towards the AgentCore gateway.

919
00:43:00,540 --> 00:43:04,200
We are doing this using
the method we just created,

920
00:43:04,200 --> 00:43:06,333
which is getting the access token.

921
00:43:07,650 --> 00:43:09,240
Then some sanity tracks.

922
00:43:09,240 --> 00:43:10,230
That's fine.

923
00:43:10,230 --> 00:43:13,830
And the next step is we
are creating an MCPClient.

924
00:43:13,830 --> 00:43:15,630
So our agent is now,

925
00:43:15,630 --> 00:43:20,490
will now use MCP to
communicate with the gateway

926
00:43:20,490 --> 00:43:24,210
And the MCPClient takes our gateway URL

927
00:43:24,210 --> 00:43:26,160
and the gateway access token.

928
00:43:26,160 --> 00:43:29,130
And we are doing some timeout, right?

929
00:43:29,130 --> 00:43:31,740
So two minutes timeout for a call,

930
00:43:31,740 --> 00:43:34,530
that's fine for our demo.

931
00:43:34,530 --> 00:43:37,170
So afterwards we do
have the gateway client,

932
00:43:37,170 --> 00:43:38,583
we have to start it, right?

933
00:43:39,420 --> 00:43:40,350
We are starting it

934
00:43:40,350 --> 00:43:42,123
and then we save it in the session,

935
00:43:42,960 --> 00:43:44,190
that's happening here.

936
00:43:44,190 --> 00:43:46,620
So for the next week

937
00:43:46,620 --> 00:43:49,170
where the user does the
session is already started

938
00:43:49,170 --> 00:43:51,480
and we will just pick
up the existing agent

939
00:43:51,480 --> 00:43:53,283
including the sessions.

940
00:43:55,050 --> 00:43:58,260
We are creating the model.

941
00:43:58,260 --> 00:44:00,900
We are selecting a specific
model in this case,

942
00:44:00,900 --> 00:44:04,290
and then we are initializing
the agent like we did before.

943
00:44:04,290 --> 00:44:06,450
We are passing in the model

944
00:44:06,450 --> 00:44:08,127
and we are passing in the gateway tools.

945
00:44:08,127 --> 00:44:10,170
And I was jumping over this one,

946
00:44:10,170 --> 00:44:12,060
this is quite important.

947
00:44:12,060 --> 00:44:15,027
After initializing the MCPClient,

948
00:44:15,900 --> 00:44:16,950
we have to do,

949
00:44:16,950 --> 00:44:19,110
fetch the tools which
are available, right?

950
00:44:19,110 --> 00:44:21,240
Our agent is wanting in one time

951
00:44:21,240 --> 00:44:23,430
and the gateway is wanting somewhere else

952
00:44:23,430 --> 00:44:26,400
and the agent has to
fetch the available tools

953
00:44:26,400 --> 00:44:30,210
from the gateway to inject
it into the prompt, right?

954
00:44:30,210 --> 00:44:32,880
For the LLM to be able to make a decision

955
00:44:32,880 --> 00:44:35,190
and that's what happening here.

956
00:44:35,190 --> 00:44:36,810
So on the gateway client

957
00:44:36,810 --> 00:44:39,840
we are invoking the
list towards sync method

958
00:44:39,840 --> 00:44:43,560
and we are retrieving all
the tools meaning targets,

959
00:44:43,560 --> 00:44:46,710
and for the open API specification target,

960
00:44:46,710 --> 00:44:48,420
all the methods available.

961
00:44:48,420 --> 00:44:50,310
So we are getting back the tools,

962
00:44:50,310 --> 00:44:52,410
we are passing this to the agent,

963
00:44:52,410 --> 00:44:54,060
stowing the agent in the context

964
00:44:54,060 --> 00:44:57,390
so we don't have to do it
again in the next session.

965
00:44:57,390 --> 00:44:59,610
And we are nearly done,

966
00:44:59,610 --> 00:45:01,830
just a small step left,

967
00:45:01,830 --> 00:45:04,620
which is the lifespan manager.

968
00:45:04,620 --> 00:45:07,980
So you can see that we have been using

969
00:45:07,980 --> 00:45:11,190
the Bedrock AgentCore app before

970
00:45:11,190 --> 00:45:13,980
but now we are passing in the lifespan.

971
00:45:13,980 --> 00:45:16,770
That's also completely
related to session management.

972
00:45:16,770 --> 00:45:18,547
I will not go too deeply into it,

973
00:45:18,547 --> 00:45:21,360
but basically it's tying the agent

974
00:45:21,360 --> 00:45:24,840
and the gateway client
towards this session

975
00:45:24,840 --> 00:45:25,800
and Bedrock AgentCore,

976
00:45:25,800 --> 00:45:29,910
the SDK extension is taking care of this.

977
00:45:29,910 --> 00:45:30,930
Great.

978
00:45:30,930 --> 00:45:33,913
Then we are nearly done.

979
00:45:33,913 --> 00:45:36,360
I just want to make it a
little bit more beautiful.

980
00:45:36,360 --> 00:45:38,310
And there was a question about streaming.

981
00:45:38,310 --> 00:45:39,573
We are doing that now.

982
00:45:40,470 --> 00:45:42,393
So the agent invocation.

983
00:45:45,090 --> 00:45:46,650
The agent invocation,

984
00:45:46,650 --> 00:45:49,050
let me go over, there we go.

985
00:45:49,050 --> 00:45:51,750
So as you have seen in the user interface,

986
00:45:51,750 --> 00:45:54,210
we were returning the JSON,

987
00:45:54,210 --> 00:45:56,460
and that was not really user friendly.

988
00:45:56,460 --> 00:45:59,850
If we want to offer an end user experience

989
00:45:59,850 --> 00:46:01,770
for shopping unicorns,

990
00:46:01,770 --> 00:46:03,180
we have to do some parsing.

991
00:46:03,180 --> 00:46:07,260
So I'm invoking the agent async here.

992
00:46:07,260 --> 00:46:10,230
And I'm then parsing the results

993
00:46:10,230 --> 00:46:12,093
and just returning the wheel checks.

994
00:46:13,170 --> 00:46:15,390
Also the other things,

995
00:46:15,390 --> 00:46:17,100
I'm just doing some sanity checks

996
00:46:17,100 --> 00:46:19,110
to check if we do have a session ID,

997
00:46:19,110 --> 00:46:20,730
if we do have a user message.

998
00:46:20,730 --> 00:46:22,440
So a prompt coming in

999
00:46:22,440 --> 00:46:26,610
and then I'm initializing the agent

1000
00:46:26,610 --> 00:46:28,650
and invoking it,

1001
00:46:28,650 --> 00:46:30,780
that's all what we had to change.

1002
00:46:30,780 --> 00:46:32,640
And this is a one time,

1003
00:46:32,640 --> 00:46:34,770
one time change that you have to do.

1004
00:46:34,770 --> 00:46:37,020
Now it's as easy like Franz mentioned,

1005
00:46:37,020 --> 00:46:40,380
it's as easy as adding a
second target to the gateway

1006
00:46:40,380 --> 00:46:43,560
and the agent will
automatically pick it up.

1007
00:46:43,560 --> 00:46:47,130
So let's see how that works

1008
00:46:47,130 --> 00:46:49,173
by updating our agent.

1009
00:46:50,520 --> 00:46:52,570
I will just do an AgentCore launch

1010
00:46:53,520 --> 00:46:55,260
like we have seen before.

1011
00:46:55,260 --> 00:46:56,760
I've configured this stuff.

1012
00:46:56,760 --> 00:46:58,860
So I have a YAML file here

1013
00:46:58,860 --> 00:47:01,650
and we will now update the agent

1014
00:47:01,650 --> 00:47:04,470
and see if we can get some information out

1015
00:47:04,470 --> 00:47:06,753
of our Legacy Application.

1016
00:47:17,879 --> 00:47:19,860
- [Franz] You want to
switch to the console?

1017
00:47:19,860 --> 00:47:22,470
- [Jan] I mean yeah, we can
quickly go to the console

1018
00:47:22,470 --> 00:47:24,630
and take a look.

1019
00:47:24,630 --> 00:47:27,810
So we do have one time here.

1020
00:47:27,810 --> 00:47:31,290
This is the session name agent

1021
00:47:31,290 --> 00:47:34,690
and it has been last updated at 12:18.

1022
00:47:34,690 --> 00:47:38,460
Yeah, that's exactly what happened.

1023
00:47:38,460 --> 00:47:41,820
So let's switch over to the browser

1024
00:47:41,820 --> 00:47:46,410
and take a look into our front end.

1025
00:47:46,410 --> 00:47:48,003
I will just reload this one,

1026
00:47:50,100 --> 00:47:54,960
and we are creating a shopping session.

1027
00:47:54,960 --> 00:47:56,940
So these are the sessions.

1028
00:47:56,940 --> 00:47:58,925
Shopping session is the session ID

1029
00:47:58,925 --> 00:48:01,890
that's getting passed
to the agent one time

1030
00:48:01,890 --> 00:48:03,270
and based on the session ID,

1031
00:48:03,270 --> 00:48:04,950
it will initialize an agent.

1032
00:48:04,950 --> 00:48:07,540
Okay, which unicorns

1033
00:48:09,990 --> 00:48:11,853
do we have in store?

1034
00:48:12,930 --> 00:48:13,800
Let's see.

1035
00:48:13,800 --> 00:48:15,930
So the first request as Franz mentioned,

1036
00:48:15,930 --> 00:48:17,820
the one time has to spin up

1037
00:48:17,820 --> 00:48:19,530
and the agent is being initialized,

1038
00:48:19,530 --> 00:48:21,360
including fetching the excess token,

1039
00:48:21,360 --> 00:48:23,190
fetching the tools from the gateway.

1040
00:48:23,190 --> 00:48:26,280
So the first request is taking some time,

1041
00:48:26,280 --> 00:48:29,820
but afterwards the
requests are quite fast.

1042
00:48:29,820 --> 00:48:31,020
Okay,

1043
00:48:31,020 --> 00:48:31,980
that's quite nice.

1044
00:48:31,980 --> 00:48:33,990
So we get an answer that we have

1045
00:48:33,990 --> 00:48:36,420
three types of magical unicorn products,

1046
00:48:36,420 --> 00:48:37,380
a unicorn float,

1047
00:48:37,380 --> 00:48:39,120
a unicorn party dress,

1048
00:48:39,120 --> 00:48:40,980
and unicorn HipHop.

1049
00:48:40,980 --> 00:48:41,813
That's great.

1050
00:48:41,813 --> 00:48:44,310
So based on the open API spec,

1051
00:48:44,310 --> 00:48:47,490
the agent was now able to
figure out the user's intention

1052
00:48:47,490 --> 00:48:48,903
and giving me the products.

1053
00:48:50,460 --> 00:48:52,590
And I would like to shop a unicorn.

1054
00:48:52,590 --> 00:48:54,510
So I would like to go ahead

1055
00:48:54,510 --> 00:48:58,290
and say let's buy a
party dress, for example.

1056
00:48:58,290 --> 00:49:00,960
But for this to work,

1057
00:49:00,960 --> 00:49:02,670
we have to create a user account,

1058
00:49:02,670 --> 00:49:06,030
and the agent has to remember
which unicorn I want to shop.

1059
00:49:06,030 --> 00:49:07,290
So we will use,

1060
00:49:07,290 --> 00:49:09,420
and make use of the memory now

1061
00:49:09,420 --> 00:49:12,000
because memory allows the agent

1062
00:49:12,000 --> 00:49:15,150
to retrieve previous
messages that I have sent

1063
00:49:15,150 --> 00:49:16,740
and that he answered,

1064
00:49:16,740 --> 00:49:20,340
and I promise compared
to what we did before,

1065
00:49:20,340 --> 00:49:22,680
it's a really small change.

1066
00:49:22,680 --> 00:49:24,603
So let me quickly switch over.

1067
00:49:25,470 --> 00:49:28,443
The memory one is really quite easy.

1068
00:49:30,570 --> 00:49:34,590
So we are going back into the IDE.

1069
00:49:34,590 --> 00:49:35,760
There we go.

1070
00:49:35,760 --> 00:49:40,760
And when we are initializing
the agent right here,

1071
00:49:41,880 --> 00:49:42,970
we are just adding

1072
00:49:44,370 --> 00:49:46,500
the AgentCore memory configuration.

1073
00:49:46,500 --> 00:49:49,770
So we are passing in the session ID,

1074
00:49:49,770 --> 00:49:51,420
I've shown you in the user interface,

1075
00:49:51,420 --> 00:49:53,250
we can create a new session,

1076
00:49:53,250 --> 00:49:55,800
and of course, we want to the memory

1077
00:49:55,800 --> 00:49:57,810
to be separated between sessions, right?

1078
00:49:57,810 --> 00:50:02,070
I don't want user A to retrieve
information from user B.

1079
00:50:02,070 --> 00:50:04,560
And we could add the actor ID,

1080
00:50:04,560 --> 00:50:05,580
not doing that today,

1081
00:50:05,580 --> 00:50:08,155
but we will separate on the session ID.

1082
00:50:08,155 --> 00:50:12,030
And next step is now that we
have the AgentCore config,

1083
00:50:12,030 --> 00:50:15,510
we are creating a session manager, right?

1084
00:50:15,510 --> 00:50:20,370
And in this case it's an
AgentCoreMemorySessionManager,

1085
00:50:20,370 --> 00:50:23,670
and we are just passing
this one over to the agent.

1086
00:50:23,670 --> 00:50:26,220
So that's the whole thing.

1087
00:50:26,220 --> 00:50:29,100
The memory has created by me before,

1088
00:50:29,100 --> 00:50:32,580
but as you have seen in
the CLI which ones used,

1089
00:50:32,580 --> 00:50:35,760
you could use this CLI to
create a memory for you.

1090
00:50:35,760 --> 00:50:37,920
So that's quite convenient.

1091
00:50:37,920 --> 00:50:40,560
Okay, change to the agent has been done.

1092
00:50:40,560 --> 00:50:42,843
Next step, we have to update the agent,

1093
00:50:44,100 --> 00:50:46,170
and oh, that's local.

1094
00:50:46,170 --> 00:50:47,970
AgentCore launch.

1095
00:50:47,970 --> 00:50:50,490
So it'll now just update the agent

1096
00:50:50,490 --> 00:50:53,283
and afterwards we are
going to shop unicorn.

1097
00:50:54,900 --> 00:50:57,180
Let's go back to the console

1098
00:50:57,180 --> 00:50:59,790
to check what's happening.

1099
00:50:59,790 --> 00:51:01,650
I can quickly show you the memory

1100
00:51:01,650 --> 00:51:03,633
that has been provisioned here.

1101
00:51:04,710 --> 00:51:08,403
So as you can see we do
have a memory available.

1102
00:51:09,330 --> 00:51:14,130
We can also see that events
expire after 30 days.

1103
00:51:14,130 --> 00:51:16,649
So nothing super interesting here.

1104
00:51:16,649 --> 00:51:18,000
But-

1105
00:51:18,000 --> 00:51:21,120
- [Franz] Not to forget
about the observability

1106
00:51:21,120 --> 00:51:22,030
to showcase this as well.

1107
00:51:22,030 --> 00:51:23,400
- [Jan] Yeah, yeah.

1108
00:51:23,400 --> 00:51:25,650
We can take a look at
observability in a second.

1109
00:51:25,650 --> 00:51:28,623
I quickly want to buy
one unicorn at least.

1110
00:51:29,730 --> 00:51:32,640
So the agent has been updated.

1111
00:51:32,640 --> 00:51:34,270
We will go back to our front end

1112
00:51:36,360 --> 00:51:37,800
and create a new session,

1113
00:51:37,800 --> 00:51:40,897
which is the MemoryShoppingSession.

1114
00:51:44,362 --> 00:51:45,195
Okay.

1115
00:51:46,110 --> 00:51:49,533
I want to buy a unicorn.

1116
00:51:51,124 --> 00:51:55,590
Now I want to show the guided experience

1117
00:51:55,590 --> 00:51:56,940
that the agent will provide.

1118
00:51:56,940 --> 00:52:01,770
So I mean I was quite
unspecific in my intention,

1119
00:52:01,770 --> 00:52:04,440
or yeah, quite unspecific.

1120
00:52:04,440 --> 00:52:08,370
I expect the agent to deliver
the available unicorns to me

1121
00:52:08,370 --> 00:52:09,390
and then he will guide me

1122
00:52:09,390 --> 00:52:11,280
through account creation and stuff.

1123
00:52:11,280 --> 00:52:12,150
Yeah, that's great.

1124
00:52:12,150 --> 00:52:16,404
So he's offering me
the available unicorns.

1125
00:52:16,404 --> 00:52:19,413
I'm for a party dress, definitely.

1126
00:52:20,250 --> 00:52:23,673
Let's go with the party dress.

1127
00:52:24,660 --> 00:52:25,493
Okay.

1128
00:52:27,570 --> 00:52:30,360
The next question should be,

1129
00:52:30,360 --> 00:52:31,710
do you have an account,

1130
00:52:31,710 --> 00:52:34,350
or would you like me to create one?

1131
00:52:34,350 --> 00:52:37,050
Okay, I want to create an account.

1132
00:52:37,050 --> 00:52:38,550
It needs my name,

1133
00:52:38,550 --> 00:52:39,540
first name, last name,

1134
00:52:39,540 --> 00:52:40,590
and my email address,

1135
00:52:40,590 --> 00:52:42,430
which is this

1136
00:52:43,500 --> 00:52:48,090
345monday@amazon.

1137
00:52:48,090 --> 00:52:49,650
Okay, let's see.

1138
00:52:49,650 --> 00:52:51,990
He should figure out all the details

1139
00:52:51,990 --> 00:52:53,070
and in the background,

1140
00:52:53,070 --> 00:52:54,630
now this loop will take some time

1141
00:52:54,630 --> 00:52:56,820
because he will create an account.

1142
00:52:56,820 --> 00:53:01,380
And he will add the unicorn
to my basket in this account.

1143
00:53:01,380 --> 00:53:04,980
And this Legacy Application
has now checkout process to it.

1144
00:53:04,980 --> 00:53:07,140
But we will log into the application

1145
00:53:07,140 --> 00:53:09,780
and see that it really worked, right?

1146
00:53:09,780 --> 00:53:11,550
So account has been created,

1147
00:53:11,550 --> 00:53:15,990
and I do have a unicorn
party dress inside my basket.

1148
00:53:15,990 --> 00:53:18,000
That sounds fantastic.

1149
00:53:18,000 --> 00:53:19,770
Let's go to the store.

1150
00:53:19,770 --> 00:53:21,153
I'm going to log in.

1151
00:53:22,080 --> 00:53:23,790
The password is not being checked

1152
00:53:23,790 --> 00:53:26,280
so I'm just using in this case,

1153
00:53:26,280 --> 00:53:28,260
but we can see I'm logging in

1154
00:53:28,260 --> 00:53:30,450
and I do have one item in my cart.

1155
00:53:30,450 --> 00:53:35,010
So by just adding an open
API spec to the gateway,

1156
00:53:35,010 --> 00:53:37,440
the agent is now really able to interact

1157
00:53:37,440 --> 00:53:38,550
with my application,

1158
00:53:38,550 --> 00:53:42,780
which I have not touched in
any way for this example.

1159
00:53:42,780 --> 00:53:43,950
- [Franz] You could maybe show

1160
00:53:43,950 --> 00:53:45,960
in the open API the post method

1161
00:53:45,960 --> 00:53:47,853
that was used for that case.

1162
00:53:49,110 --> 00:53:51,870
- [Jan] Yeah, I would like to show you

1163
00:53:51,870 --> 00:53:54,110
some observability parts for the last-

1164
00:53:54,110 --> 00:53:56,370
- Yeah, yeah.
- One or two seconds.

1165
00:53:56,370 --> 00:53:59,610
Because adding all this
capabilities to the agent,

1166
00:53:59,610 --> 00:54:01,740
it might get quite hard to understand

1167
00:54:01,740 --> 00:54:03,690
what is happening, right?

1168
00:54:03,690 --> 00:54:07,710
And for this, we can enable tracing

1169
00:54:07,710 --> 00:54:11,790
on the agent one time on
the memory on the gateway.

1170
00:54:11,790 --> 00:54:14,380
And what this allows us to see is

1171
00:54:15,540 --> 00:54:17,290
a whole overview of

1172
00:54:18,780 --> 00:54:19,920
what is going on.

1173
00:54:19,920 --> 00:54:21,850
So we can have

1174
00:54:25,890 --> 00:54:27,870
application map.

1175
00:54:27,870 --> 00:54:32,870
So if we go into the
application map and expand that,

1176
00:54:34,680 --> 00:54:37,680
we can see our agent, right here.

1177
00:54:37,680 --> 00:54:41,430
That's the agent wanting
on AgentCore one time.

1178
00:54:41,430 --> 00:54:43,800
We can see that it is using

1179
00:54:43,800 --> 00:54:46,230
the Bedrock AgentCore
core service, of course.

1180
00:54:46,230 --> 00:54:49,710
We can see that it is using our gateway.

1181
00:54:49,710 --> 00:54:52,090
We can see that it's using the memory

1182
00:54:53,310 --> 00:54:54,810
and the OAuth, right?

1183
00:54:54,810 --> 00:54:57,450
We are getting an access token.

1184
00:54:57,450 --> 00:55:00,780
We can also see that
it is invoking Bedrock

1185
00:55:00,780 --> 00:55:03,060
and the LLM really,

1186
00:55:03,060 --> 00:55:05,250
and did eight request to the LLM.

1187
00:55:05,250 --> 00:55:07,950
And we can also see that we
are using Secrets Manager

1188
00:55:07,950 --> 00:55:12,510
to fetch the OAuth secret
and the gateway URL.

1189
00:55:12,510 --> 00:55:16,770
So we gather a wheel inside
into what's happening.

1190
00:55:16,770 --> 00:55:18,720
And the real cool thing is,

1191
00:55:18,720 --> 00:55:22,620
the gateway is invoking
our unknown remote service.

1192
00:55:22,620 --> 00:55:26,610
So we can see that the gateway
is invoking our application

1193
00:55:26,610 --> 00:55:30,930
and we do see that several
requests happen to this one.

1194
00:55:30,930 --> 00:55:33,750
And I think that's a
great way to really see

1195
00:55:33,750 --> 00:55:37,920
what the agent is doing
and also how many requests

1196
00:55:37,920 --> 00:55:40,953
to an LLM it's doing
in a great visual way.

1197
00:55:42,000 --> 00:55:43,530
- [Franz] To wrap this up,

1198
00:55:43,530 --> 00:55:45,570
these three QR codes,

1199
00:55:45,570 --> 00:55:47,280
especially the third one.

1200
00:55:47,280 --> 00:55:50,670
All those demos that exist

1201
00:55:50,670 --> 00:55:54,180
especially the third one is
a large GitHub repository

1202
00:55:54,180 --> 00:55:55,650
with a lot of tutorials.

1203
00:55:55,650 --> 00:55:57,600
The second one with a lot of use cases.

1204
00:55:57,600 --> 00:56:00,930
So they're ready to deploy
CloudFormation templates

1205
00:56:00,930 --> 00:56:02,670
that are primarily showcasing

1206
00:56:02,670 --> 00:56:05,520
that what we tried to
do now in 60 minutes.

1207
00:56:05,520 --> 00:56:07,590
We had some stretch tasks

1208
00:56:07,590 --> 00:56:10,020
that we wanted to show you today as well,

1209
00:56:10,020 --> 00:56:13,170
but with respect to the
time, not feasible and easy.

1210
00:56:13,170 --> 00:56:17,460
But really encourage you
to make use of GitHub repo.

1211
00:56:17,460 --> 00:56:19,966
Deepali, you want to wrap
up with the last one?

1212
00:56:19,966 --> 00:56:20,970
- [Deepali] No, I think you did it.

1213
00:56:20,970 --> 00:56:23,791
I hope you guys enjoyed
our cold walkthrough.

1214
00:56:23,791 --> 00:56:27,150
Hopefully you're taking
something back home

1215
00:56:27,150 --> 00:56:29,910
to try that out in your
personal environments

1216
00:56:29,910 --> 00:56:31,533
or company's environment.

1217
00:56:32,520 --> 00:56:35,190
So yeah, enjoy the rest of your day.

1218
00:56:35,190 --> 00:56:36,150
Thank you for attending

1219
00:56:36,150 --> 00:56:38,850
and please provide your feedback
if you loved our session.

1220
00:56:38,850 --> 00:56:39,780
Thank you.

1221
00:56:39,780 --> 00:56:40,892
- [Franz] In the moment, thanks.

1222
00:56:40,892 --> 00:56:44,703
- Thank you.
(attendees applauding)

