# AWS re:Invent 2025 DDoS防护会话总结

## 会话概述

本次会话由AWS Shield响应团队负责人Elena Wanik主讲，介绍了AWS如何将DDoS攻击转化为防御优势。会话为300级别的技术深度讲座，重点展示了AWS DDoS防护系统的内部运作机制，以及如何将DDoS转化为可操作的威胁情报。

Elena使用天气预报的类比来解释AWS的威胁情报方法：就像气象学家使用复杂系统追踪飓风一样，AWS也发展了不仅能应对DDoS攻击，还能适应新兴威胁的防御系统。会话采用了"360度DDoS飞轮"方法，展示了从威胁行为者识别到威胁情报生成，再到AWS服务集成的完整流程。

## 详细时间线与关键要点

### 开场介绍 (0:00-5:00)
- **演讲者介绍**：Elena Wanik (Shield响应团队负责人)、Brian Van Hook (高级专家)、Bashar Alawi (Figma软件工程师)
- **会话目标**：展示AWS DDoS防护系统内部机制，将DDoS转化为威胁情报
- **天气类比**：将互联网比作天气系统，从小雨到暴风雨的演变类似DDoS从简单攻击到复杂威胁的升级

### DDoS威胁演进历史 (5:00-10:00)
- **2000年代早中期**：主要是反射和放大攻击，通过手动编辑IP表进行防护
- **2010年代**：攻击演进为利用僵尸网络，AWS部署数据包清洗硬件
- **2012年**：引入集中化缓解措施
- **2013年**：推出自动化缓解，减少人工干预
- **2020年代**：HTTP代理洪水攻击兴起，推出Shield应用层自动缓解(2021年)和WAF反DDoS规则组(2024年)

### AWS 360度DDoS飞轮方法 (10:00-15:00)
- **威胁行为者分析**：深入研究攻击者行为模式
- **遥测数据收集**：跨目标端点收集全面数据
- **信号分析**：将原始数据转化为可操作的威胁情报
- **服务集成**：将威胁情报内置到AWS服务中
- **主动干扰**：采取措施破坏和摧毁威胁行为者

### 大规模遥测数据收集 (15:00-20:00)
- **流量规模**：每日峰值60TB/秒、120亿包/秒、1.05亿请求/秒
- **多层检测系统**：
  - 网络层检测：捕获顶级流量和IP/协议层向量
  - 边缘服务检测：CloudFront、Global Accelerator、ELB中的请求和连接信息
  - WAF检测：HTTP头顺序和请求组合
  - 蜜罐系统(Madpot)：通过直接威胁行为者交互进行检测

### 威胁情报生成挑战与解决方案 (20:00-30:00)
- **主要挑战**：
  - 海量数据处理需求
  - IP地址重用问题(开放代理、被攻陷的家用路由器)
  - 非恶意流量激增(闪存人群)
  - 被攻陷主机的修复和恢复
- **解决方法**：持续改进循环，分析匹配率，调整算法捕获行为属性

### Madpot蜜罐系统 (30:00-35:00)
- **功能**：伪装成易受攻击的服务，诱导攻击者交互
- **僵尸网络检测**：捕获利用尝试，自动下载、引爆和分析恶意软件
- **渗透能力**：infiltrate僵尸网络，监控C&C服务器DDoS命令
- **预警机制**：提供积极的DDoS检测信号，帮助发现逃避检测的攻击

### 已知攻击者列表 (35:00-45:00)
- **应用层(L7)已知攻击者列表**：
  - 2022年创建，应对HTTP代理洪水攻击增长
  - 专注于HTTP/HTTPS流量
  - 集成到CloudFront、WAF和应用负载均衡器
- **网络层已知攻击者列表**：
  - 2024年开发，专注于字节和数据包重型攻击
  - 主要保护AWS网络基础设施

### 案例研究 (45:00-55:00)
- **UDP向量案例**：随机化源端口和目标端口的分布式UDP洪水攻击
- **区域性案例**：发现特定区域的独特攻击IP地址，调整包含标准以提高防护覆盖

### AWS服务集成 - 非HTTP工作负载 (55:00-65:00)
- **架构建议**：私有子网、自动扩展、智能负载均衡(NLB)
- **Global Accelerator**：静态IP、任播路由、AWS全球网络
- **内置缓解措施**：
  - 已知攻击者速率限制
  - SYN洪水防护(SYN代理)
  - PUSH ACK洪水防护
  - 可疑UDP流量阻断
- **Shield Advanced**：双倍敏感阈值、指数TTL、Shield响应团队支持

### AWS服务集成 - HTTP工作负载 (65:00-75:00)
- **CloudFront集成**：VPC源站、私有子网支持
- **WAF保护**：反DDoS管理规则组、DDoS IP列表
- **新功能介绍**：
  - 规则标签：允许多个规则协作做出最终决策
  - 挑战操作：通过计算成本区分人类和机器人流量

### WAF反DDoS规则组详解 (75:00-85:00)
- **基线学习**：15分钟内建立基线，每5秒更新
- **异常检测**：区分恶意和合法流量激增
- **可疑度评分**：低、中、高三个级别
- **三个核心规则**：
  - 事件期间全部挑战：最大敏感度
  - DDoS请求挑战：可调敏感度(默认高)
  - DDoS请求阻断：低敏感度避免误报

### 高级定制化配置 (85:00-结束)
- **流量类型分析**：正常用户、不同威胁级别的攻击者
- **误报/漏报避免**：通过组合规则和标签实现精确控制
- **实际应用场景**：展示如何处理使用开放代理的正常用户vs恶意攻击者的复杂情况