# AWS re:Invent 2025 会议总结：从 Google Cloud Platform 迁移到 AWS

## 会议概述

本次会议由 AWS 首席现代化和迁移架构师 Glenn Buckz、解决方案架构师 Harleen Carr 以及纽约时报首席工程师 Ahmed Babaris 共同主讲，重点介绍了纽约时报从 Google Cloud Platform (GCP) 迁移到 AWS 的完整历程。

会议强调了云到云迁移与传统本地迁移的不同之处。对于云到云迁移，传统的五大差异化因素（全球覆盖、减少繁重工作、按需付费、可扩展性、快速实验）不再是主要卖点。相反，AWS 为纽约时报提供的核心价值体现在三个方面：**弹性和容量保障**（确保无论流量大小都能无缝交付内容）、**深度合作伙伴关系**（AWS 解决方案架构师团队提供持续的技术支持和业务咨询）、以及 AWS 构建模块（帮助纽约时报构建符合其使命的云平台愿景）。

整个迁移项目的起点是 2017 年的一个业务问题：改善客户服务体验。纽约时报采用了 Amazon Connect 作为托管服务解决了呼叫中心的痛点，这次成功的经历让他们认识到 AWS 托管服务的价值，从而启动了更大规模的云迁移战略。迁移的核心理念是建立"铺好的道路"（paved roads）和"祝福路径"（blessed paths），通过标准化和自动化让产品工程团队专注于差异化的业务功能，而不是基础设施管理。

## 详细时间线与关键要点

### 00:00 - 会议开场与价值主张
- **演讲者介绍**：Glenn Buckz（AWS 首席现代化和迁移架构师）、Harleen Carr（AWS 解决方案架构师）、Ahmed Babaris（纽约时报首席工程师）
- **核心主题**：从 GCP 迁移到 AWS，但强调这不是一次"冒险"，而是一个有计划、可量化的工程项目

### 02:30 - 云到云迁移的差异化价值
- **传统迁移价值不再适用**：全球覆盖、按需付费、可扩展性等在云提供商之间不再是差异化因素
- **AWS 的三大核心价值**：
  1. 弹性和容量：确保无论流量如何波动都能交付内容
  2. 合作伙伴关系：AWS 客户至上的理念，解决方案架构师作为长期合作伙伴
  3. 构建模块：AWS 服务帮助构建符合纽约时报使命的云平台

### 05:45 - 克服云到云迁移的障碍
- **最大障碍**：对未知的恐惧
- **两类服务的处理方式**：
  1. **商品化服务**（如虚拟机、SQL 数据库）：通过培训、沉浸式学习、实践加速等方式消除恐惧，利用成熟的迁移路径和工具（如 DMS）
  2. **托管服务**（如特定的 NoSQL 数据库、分析套件）：AWS 解决方案架构师团队召集专家，提供结构化的迁移方案，量化成本和工程投入，甚至进行概念验证

### 09:20 - 迁移的起点：Amazon Connect
- **2017 年的业务问题**：订阅者致电客服时，从 IVR 系统转接到人工客服后需要重复问题和验证身份
- **解决方案**：采用 Amazon Connect 作为托管服务，实现上下文无缝传递
- **关键收获**：Amazon Connect 与其他 AWS 服务（Lex、数据库、SDK）的原生集成能力，让纽约时报认识到托管服务的价值

### 12:00 - 纽约时报的云愿景
- **核心使命**：交付新闻、游戏等内容给读者，而不是运营最快的 Kubernetes 集群
- **平台战略**：构建统一的计算、存储、AI 工具平台，建立标准化流程，让产品工程团队专注于业务功能而非基础设施

### 14:30 - 标准化与自动化理念
- **工程生命周期分析**：从业务问题 → 解决方案 → 规划设计 → 编码 → 部署 → 发布 → 监控
- **平台团队的职责**：将部署、监控、CI/CD 等环节标准化和自动化，让产品团队只需关注业务逻辑和代码
- **"无聊但正确"的方式**：通过标准化让流程变得可预测和可靠

### 17:45 - 容器化与 Kubernetes 战略
- **技术选择**：
  1. Kubernetes 作为跨云提供商的统一计算平台
  2. 容器化应用，减少对底层基础设施的依赖
  3. 并行化迁移，让多个团队同时推进
- **构建模式库**：通过迁移过程积累可复用的模式和最佳实践

### 20:30 - 共享 Kubernetes 架构设计
- **多账户架构**：每个产品工程团队拥有独立的 AWS 账户
- **共享集群策略**：避免为每个团队创建独立集群（会导致数百个集群难以管理），采用单一账户跨多环境的共享架构
- **多区域弹性**：内置多区域支持，在 US-East-1 故障期间自动扩展到 West 区域
- **关键技术组件**：
  - Cilium：网络隔离，确保多租户安全
  - Karpenter：快速自动扩展
  - Istio：服务网格，管理东西向流量
  - OPA（Open Policy Agent）：自动化策略执行

### 24:00 - 容器迁移的关键模式
- **应用层标准化**：日志、追踪等通用功能采用开源或自建包装器
- **共享配置**：统一配置管理
- **迁移路径**：GCE → GKE（Kubernetes 原生）→ EKS，逐步迁移
- **成果**：建立可跨项目复用的工具包和模式库

### 26:30 - 数据库迁移挑战
- **零停机要求**：纽约时报作为全球顶级媒体公司，没有维护窗口，必须实现零停机迁移
- **应用无感知**：应用程序不应察觉到底层数据库迁移正在进行
- **高可用性要求**：无论何时发生新闻事件或流量激增，服务必须持续可用

### 28:15 - NoSQL 祝福路径（Blessed Path）
- **迁移目标**：从 GCP Datastore 迁移到 AWS DynamoDB
- **五大要求**：
  1. 零停机迁移
  2. 迁移期间保持数据同步
  3. 实时数据迁移
  4. 创建切换机制
  5. 具备回滚能力（如果迁移失败）

### 30:00 - 双写（Double Write）策略
- **起始状态**：应用运行在 GCP，数据写入 Datastore
- **双写机制**：
  - 应用同时写入 GCP Datastore 和 AWS DynamoDB
  - 使用 GCP Pub/Sub 作为消息分发层（每个表一个 topic）
  - AWS Lambda 处理数据转换，将 GCP 格式转换为 DynamoDB 兼容格式
- **目的**：确保当前活跃事务在两个数据库中保持一致

### 33:20 - 历史数据回填
- **一次性批量上传**：
  1. 从 Datastore 导出数据到 BigQuery（因为 Datastore 使用专有二进制格式）
  2. 作业从 BigQuery 拉取数据并存储到 S3
  3. AWS Glue 进行 ETL 转换
  4. 转换后的数据导入 DynamoDB
- **结果**：历史数据和当前数据都在 AWS DynamoDB 中同步

### 36:00 - 滚动切换（Rolling Cutover）
- **启动 AWS 应用**：在 AWS 上启动应用实例
- **反向双写**：AWS 应用写入 DynamoDB 的同时，也回写到 GCP（通过 BigQuery → Datastore）
- **保险机制**：如果迁移失败，可以快速回滚到 GCP，用户不会察觉

### 38:30 - 静默期（Quiescence Period）
- **定义**：迁移后的观察和稳定期
- **活动**：
  - 验证事务在 AWS 上正常处理
  - 进行健全性测试
  - 监控 KPI 和指标
  - 确保没有用户报告问题
- **目的**：确保迁移成功且稳定后再进行下一步

### 40:00 - 退役 GCP 服务
- **最终步骤**：应用在 AWS 上稳定运行后，关闭 GCP 上的服务和工作流
- **迁移完成**：应用完全运行在 AWS 上

### 41:30 - 迁移成果与业务价值
- **并行化成功**：建立的模式库可以跨多个团队和项目复用
- **工程师满意度**：平台团队专注于"管道"工作，让产品工程团队专注于差异化功能
- **托管服务优势**：使用 EKS 等托管服务而非自建，减少运维负担，获得多区域高可用性
- **服务创建时间减少 90%**：标准化平台让新服务从想法到生产就绪的时间大幅缩短
- **专注业务逻辑**：工程师可以专注于业务逻辑，所有标准（监控、部署、安全）都已内置

### 44:00 - 总结与问答
- **核心理念**：迁移不是目的，建立标准化的模式库和加速工程创新才是目标
- **合作伙伴关系**：AWS 作为长期合作伙伴，帮助纽约时报实现其交付优质内容的使命

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


会议核心洞察：成功的云到云迁移不仅仅是技术迁移，更是建立标准化平台、消除未知恐惧、实现零停机、并通过合作伙伴关系加速业务创新的系统工程。