# AWS re:Invent 2025 会议总结：使用 AI Agent 桥接结构化和非结构化数据

## 会议概述

本次技术会议主要介绍了如何使用 AI Agent 来桥接企业中的结构化数据和非结构化数据。演讲者 Anil Murari 和 Rafia Tapia（均为 AWS 高级解决方案架构师）通过实际代码演示，展示了如何构建一个智能慈善聊天助手应用。

该应用的核心价值在于解决企业面临的数据孤岛问题。企业通常在关系型数据库中存储了过去 15-20 年的结构化数据，同时也积累了大量非结构化数据（如文档、日志等）。通过 AI Agent 技术，可以让智能系统自动判断应该从哪个数据源获取信息，并提供统一的查询接口。

技术实现方面，演讲者使用了 Strand SDK 构建 Agent，Amazon Bedrock Knowledge Base 处理非结构化数据（通过 RAG 技术），以及 Aurora PostgreSQL 数据库存储结构化数据。整个应用使用 Python 开发，UI 采用 Streamlit 框架。演示过程中展示了如何从零开始构建这个应用，包括创建基础 Agent、添加知识库检索工具、以及开发自定义的数据库查询工具。

## 详细时间线

### 开场介绍（00:00 - 02:30）
- **00:00** - 会议开始，欢迎参会者
- **00:30** - 演讲者自我介绍：Anil Murari 和 Rafia Tapia，AWS 高级解决方案架构师
- **01:00** - 互动环节：询问现场有多少人正在构建或运行 AI Agent
- **01:30** - 调查参会者使用的数据类型：非结构化数据（S3 文件）和结构化数据（关系型数据库）

### 架构和技术栈介绍（02:30 - 05:00）
- **02:30** - 介绍会议主题：使用 AI Agent 桥接结构化和非结构化数据
- **03:00** - 说明这是一个代码演示会议，将实际构建应用程序
- **03:30** - 展示应用架构图：UI（Streamlit）→ Agent → 两个数据源（Bedrock Knowledge Base 和 Aurora 数据库）
- **04:00** - 介绍 Strand SDK：支持单 Agent 和多 Agent 架构，支持 MCP 和 A2A 协议

### Bedrock Knowledge Base 介绍（05:00 - 06:30）
- **05:00** - 询问现场有多少人编写过 RAG 应用
- **05:30** - 解释 Bedrock Knowledge Base：简化 RAG 基础设施的构建，自动处理文档向量化
- **06:00** - 说明由于时间限制，已预先创建好 Knowledge Base

### 应用演示（06:30 - 08:00）
- **06:30** - 播放完整应用的演示视频
- **07:00** - 展示慈善聊天助手用例：查询活动信息和捐赠数据
- **07:30** - 演示 Agent 如何自动选择正确的数据源回答问题

### 开始编码：UI 框架（08:00 - 11:00）
- **08:00** - 切换到 IDE（Kiro）开始编码
- **08:30** - 创建 app.py 文件，这是 UI 代码的主文件
- **09:00** - 介绍项目文件：requirements.txt（包含 strand-agent 和 strand-agent-tools）、run.sh
- **09:30** - 使用 VS Code snippets 快速添加 UI 代码框架
- **10:00** - 添加导入语句、常量定义、主题设置
- **10:30** - 添加聊天界面代码，但注释掉 Agent 调用部分
- **11:00** - 运行应用，展示空白 UI（提问时会报错）

### 创建基础 Agent（11:00 - 14:30）
- **11:00** - 创建 agent.py 文件，这是 Agent 核心逻辑文件
- **11:30** - 添加导入语句：strand-agent、boto3 等包
- **12:00** - 定义模型 ID（使用 Claude）和推理参数（最大 token、温度等）
- **12:30** - 创建基础模型对象（第 18-22 行）
- **13:00** - 使用 Strand Agent 创建基础 Agent（第 28-32 行）：只需两行代码
- **13:30** - 解释 Agent 构造函数：需要模型对象和系统提示词
- **14:00** - 在 app.py 中取消注释 Agent 调用代码
- **14:30** - 运行应用，Agent 回答"不知道"而不是报错

### 添加 Knowledge Base 检索功能（14:30 - 18:00）
- **14:30** - 开始添加从 Knowledge Base 检索数据的代码
- **15:00** - 介绍 Strand 的工具系统：自定义工具和现成工具
- **15:30** - 添加 retrieve 工具：这是 Strand SDK 提供的开箱即用工具
- **16:00** - 设置环境变量：Knowledge Base ID 和区域
- **16:30** - 解释 retrieve 工具的工作原理：自动查询 Bedrock Knowledge Base
- **17:00** - 回答观众问题：Knowledge Base 的创建过程、嵌入模型、分块策略
- **17:30** - 确认 retrieve 工具是专门为 Bedrock Knowledge Base 设计的
- **18:00** - 运行应用，成功从 Knowledge Base 获取答案

### 创建自定义数据库查询工具（18:00 - 25:00）
- **18:00** - 在 agent.py 中添加 query_sql_db 工具引用
- **18:30** - 创建 query_sql_db.py 文件，这是自定义工具文件
- **19:00** - 添加导入语句和常量定义
- **19:30** - 解释为什么使用不同的模型（Nova）：演示多模型使用场景
- **20:00** - 回答观众问题：工具的作用、模型选择逻辑
- **20:30** - 使用 @tool 装饰器创建自定义工具函数（第 6-9 行）
- **21:00** - 解释工具注解的作用：让 Strand 识别并调用该函数
- **21:30** - 创建 StructuredDataAgent 辅助类
- **22:00** - 定义构造函数参数：Aurora ARN、Secrets Manager ARN、数据库名称、模型 ID
- **22:30** - 解释最佳实践：使用 Secrets Manager 存储数据库凭证
- **23:00** - 创建 get_table_schema 函数：查询数据库元数据
- **23:30** - 展示 PostgreSQL 查询语句：获取表结构的 JSON 格式
- **24:00** - 回答观众问题：是否需要示例数据、如何处理外键关系
- **24:30** - 将 schema 存储在变量中供后续使用

### 生成系统提示词（25:00 - 结束）
- **25:00** - 开始创建系统提示词生成函数
- **25:30** - 解释系统提示词的重要性：为 LLM 提供上下文和指令
- **26:00** - 逐行解释提示词内容（字幕在此处截断）

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


注意：本总结基于提供的字幕文本，会议可能在系统提示词部分之后还有更多内容，但字幕在此处结束。完整的实现应该还包括 SQL 查询生成、查询执行和结果返回等步骤。