# AWS re:Invent 2025 会议总结：使用 AWS 分析 MCP 服务器的代理数据工程

## 会议概述

本次会议由 AWS 首席专家解决方案架构师 Harshida Patel 和首席解决方案架构师 Ram Notepad 主讲,主题聚焦于如何通过代理 AI(Agentic AI)和模型上下文协议(Model Context Protocol, MCP)服务器来革新数据工程工作流程。

演讲者以烹饪比喻开场,将数据工程比作烹饪过程——虽然最终目标明确(构建可扩展、可靠且高质量的数据管道),但过程中涉及众多步骤:数据编目、数据分析、作业构建、编排、部署和交付。会议的核心理念是:如果在每个步骤中都有一个代理作为配对程序员协助工作会怎样?

会议通过虚构零售公司"Any Company"的案例,展示了传统数据工程面临的挑战:营销团队需要等待2-3周才能获得新的数据管道,运营团队面临3-5天的数据延迟,高管报告仍需手动刷新。这些问题的根源在于数据工程师频繁的上下文切换、从零开始编写代码、被动的数据质量管理以及性能优化困难。解决方案是引入代理数据工程,通过自然语言交互完成原本需要大量手动操作的任务。

## 详细时间线与关键要点

### **开场与问题陈述 (00:00 - 08:30)**
- **00:00** - 会议开始,演讲者用烹饪比喻引入数据工程的复杂性
- **02:15** - 介绍虚构公司"Any Company"及其数据转型愿景
- **03:45** - 揭示现实挑战:营销团队需要2-3周构建管道,运营团队面临3-5天数据延迟,高管报告需手动刷新
- **05:20** - 分析数据工程师的痛点:上下文切换、缺乏文档、从零编写代码、被动的数据质量管理、性能优化困难
- **07:30** - CTO Sarah Chen 提出转向代理 AI 解决方案的建议

### **代理 AI 基础概念 (08:30 - 18:45)**
- **08:30** - 对比传统数据工程与代理数据工程工作流程
- **10:15** - 介绍代理循环(Agentic Loop):目标设定 → 推理(理解、规划、决策)→ 工具调用 → 获取上下文 → 反思 → 下一步行动
- **12:00** - 详解代理 AI 的构建模块:
  - 记忆(短期和长期记忆)
  - 工具访问(函数调用能力)
  - 大脑(推理、规划、反思、自我批评)
  - 行动(自动驾驶或人工参与)
- **14:30** - 展示代理工作流程:用户提问 → 代理助手 → LLM 解析 → 工具调用 → 结果返回 → 迭代直至目标达成
- **16:45** - 说明代理与数据源/工具集成的挑战:不同服务使用不同协议(SQL、API),存在 n×m 自定义集成问题

### **模型上下文协议 (MCP) 介绍 (18:45 - 28:30)**
- **18:45** - 引入 MCP 作为"代理 AI 应用的 USB-C 接口",由 Anthropic 开发
- **20:00** - MCP 架构详解:
  - MCP 主机(客户端应用,如 SageMaker Unified Studio、Kiro、Claude Desktop)
  - MCP 服务器(与数据源集成)
  - 传输层(本地部署使用标准输入输出,远程部署使用 HTTPS)
- **22:15** - MCP 服务器的三个核心组件:
  - 工具(Tools):可调用的函数,如创建 Glue 爬虫或作业
  - 资源(Resources):只读数据,如列出 Glue 表
  - 提示(Prompts):结构化提示模板
- **24:30** - 展示 MCP 工作流程示例:查找零售客户数据集 → 调用 S3 列表工具 → 返回结果 → LLM 决定下一步
- **26:45** - 介绍 AWS 分析 MCP 服务器系列:
  - 数据处理 MCP 服务器(AWS Glue、EMR、Athena)
  - Redshift MCP 服务器(只读,列出端点和查询)
  - Data Zone MCP 服务器(列出和订阅数据)
  - MSK MCP 服务器(管理员功能)
  - OpenSearch MCP 服务器(列出索引和查询数据)

### **架构与配置演示 (28:30 - 35:00)**
- **28:30** - 展示完整的代理数据工程架构:用户 ↔ MCP 主机 ↔ MCP 客户端 ↔ MCP 服务器 ↔ AWS 服务
- **30:15** - 演示在 SageMaker Unified Studio 中配置 MCP 服务器:点击 Amazon Q 图标 → 工具图标 → 添加 MCP 服务器配置
- **32:00** - 演示在 Kiro 中配置 MCP 服务器:编辑 mcp.json 文件,为每个 MCP 服务器添加 JSON 配置块
- **33:45** - 介绍演示任务:为"Any Company"零售公司创建数据工程代理 Alex,执行六个步骤:
  1. 数据发现
  2. 创建 ETL 作业(按客户 ID 连接,按州聚合)
  3. 运行作业并监控
  4. 编目输出数据
  5. 数据验证
  6. 加载到数据仓库

### **实时演示:代理 Alex 执行任务 (35:00 - 52:00)**
- **35:00** - 在 Kiro 中展示已配置的多个 MCP 服务器(数据处理、Redshift、S3)
- **36:30** - 提供详细提示给 Alex:定义为数据工程代理,要求每步后确认(人工参与循环)
- **38:00** - 步骤 1:数据发现
  - Alex 调用 S3 MCP 工具列出存储桶
  - 验证数据集包含所需字段(customer_id、page_views、purchase_amount 等)
  - 完成数据发现,请求继续
- **41:15** - 步骤 2:创建 Glue 作业
  - Alex 使用 MCP 工具获取 IAM 角色
  - 生成 PySpark 脚本(.py 文件)
  - 请求上传到 S3 的权限(演示审批流程)
  - 成功创建 Glue 作业
- **44:30** - 步骤 3:运行和监控作业
  - Alex 启动 Glue 作业运行
  - 切换到 Glue 控制台验证作业正在运行
  - Alex 每 30 秒监控一次作业状态
  - 检测到日志中的错误但确认已修复
  - 作业成功完成(耗时 83 秒),输出保存为 Parquet 格式
- **48:00** - 步骤 4:编目数据
  - Alex 使用 MCP 工具查找 Glue 数据库
  - 创建并启动 Glue 爬虫以编目输出数据
  - 爬虫快速完成,元数据已编目

### **后续步骤与最佳实践 (52:00 - 结束)**
- **52:00** - 演示继续进行数据验证和数据仓库加载步骤(由于时间限制,演示在此处被截断)
- 会议强调了人工参与循环的重要性,允许用户在关键步骤进行审批和指导
- 展示了 MCP 服务器如何通过标准化集成简化多个 AWS 服务的使用
- 提到将提供 QR 码以访问完整的 MCP 服务器列表和支持的工具

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


关键收获:
- 代理 AI 通过自然语言交互大幅减少数据工程的手动工作
- MCP 提供标准化方式连接代理与 AWS 分析服务
- 人工参与循环确保关键决策的控制和审批
- AWS 分析 MCP 服务器覆盖完整的数据工程生命周期,从发现到部署