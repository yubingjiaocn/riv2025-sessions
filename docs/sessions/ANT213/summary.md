# AWS re:Invent 2025 - 构建十亿级向量数据库

## 会议概述

本次会议由来自Amazon OpenSearch产品团队的Dylan Tong和Wamshivijay Nirta主讲，重点介绍了在AWS re:Invent 2025上发布的两项重要功能：GPU向量加速和自动优化。Dylan Tong负责AI和向量工作负载，Wamshivijay Nirta担任高级软件经理，专注于Amazon OpenSearch Service的搜索功能。

会议主要围绕构建十亿级向量数据库的挑战和解决方案展开，特别针对日益增长的代理应用（agentic applications）需求。演讲者详细介绍了OpenSearch在向量搜索领域的发展历程，从2020年的KNN插件开始，到2023年成为Amazon Bedrock知识库的默认选择，再到2025年专注于规模化部署的优化。两位演讲者通过实际客户案例和技术演示，展示了如何通过GPU加速和自动优化功能来解决大规模向量数据库在构建速度、成本和性能方面的挑战。

## 详细时间线与关键要点

### 0:00-5:00 会议开场与背景介绍
- 演讲者自我介绍：Dylan Tong（OpenSearch产品团队，负责AI和向量工作负载）和Wamshivijay Nirta（高级软件经理）
- 会议主题：构建十亿级向量数据库
- 发布两项re:Invent新功能：GPU向量加速和自动优化
- 现场调研：了解观众对OpenSearch和向量搜索的使用经验

### 5:00-10:00 OpenSearch平台概述
- OpenSearch作为搜索和分析引擎的定位，基于Apache开源项目
- AWS上的两种部署方式：托管集群（完全控制实例选择）和无服务器版本（自动扩展）
- 主要用例分类：日志分析/可观测性和搜索功能
- 向量搜索的优势：提升搜索质量、支持多模态搜索、适用于语义搜索、推荐系统等多种应用场景

### 10:00-15:00 OpenSearch向量搜索发展历程
- 2020年2月：开始向量搜索之旅，贡献KNN插件到Elastic Open Distro
- 2021年：OpenSearch 1.0发布，集成Facebook的Faiss库以提升可扩展性
- 2023年：GenAI年，向量数据库概念兴起，成为Amazon Bedrock知识库默认选择
- 引入混合搜索功能，结合传统关键词搜索和向量搜索
- 持续的成本优化：磁盘优化、分层存储、自动量化压缩

### 15:00-20:00 客户案例与十亿级规模趋势
- Amazon品牌保护案例：680亿向量规模，用于检测IP侵权和异常
- Devrev AI案例：数亿向量规模，每日百万向量更新，用于构建AI代理应用
- 代理应用的核心组件：对话界面、AI代理、知识库、自动化执行
- 向量搜索在代理应用中的重要性：提供高质量的语义搜索结果

### 20:00-25:00 向量搜索技术基础
- 向量的本质：高维数值列表（通常超过1000维）
- 嵌入模型将内容编码为向量，向量间距离表示相似度
- 搜索方法对比：暴力精确搜索vs索引近似搜索
- HNSW（分层导航小世界）算法：构建图结构实现毫秒级查询
- OpenSearch的分布式架构：跨多服务器分区和并行处理

### 25:00-30:00 大规模向量索引的挑战
- 索引构建时间：十亿级索引通常需要数天时间
- 索引生命周期管理：需要频繁重建以应对数据变化和模型更新
- Amazon Music案例：每日重建推荐系统索引
- 资源竞争问题：搜索和索引工作负载争夺CPU和内存资源
- 对创新速度和应用响应性的影响

### 30:00-35:00 GPU加速解决方案
- 与Nvidia合作开发GPU优化方案
- 集成Nvidia的CUVS库和CAGRA算法
- 性能测试结果：6-14倍速度提升，6-12倍成本节省
- 具体案例：1.13亿向量从2,721 OCU小时降至104.5 OCU小时
- 混合工作负载优化：降低CPU使用率，改善搜索延迟

### 35:00-40:00 GPU集成架构设计
- 避免直接使用GPU实例的经济问题（成本增加2.4倍）
- 创新的按需GPU分配方案：仅在需要时分配GPU资源
- 后台系统架构：温池管理、多租户共享、单租户安全分配
- 无服务器GPU定价：24美分/OCU小时
- 简单的启用方式：通过API、CLI或控制台一键开启

### 40:00-45:00 自动优化功能详解
- 索引配置优化的重要性：可节省1/3成本，大规模下节省75%内存占用
- 配置参数类型：算法类型（HNSW、IVF）、压缩技术、运行模式
- 传统优化流程的复杂性：需要专业知识和反复试验
- 自动优化框架：用户只需提供质量和延迟要求
- 无服务器优化：1小时内提供推荐配置

### 45:00-49:48 产品演示与总结
- 向量注入工作流演示：数据准备、需求配置、推荐生成、索引构建
- 用户界面展示：S3数据源配置、业务需求设置、推荐结果分析
- 详细报告功能：算法参数、压缩级别、性能指标透明展示
- GPU加速集成：在索引构建过程中自动启用
- 完整的端到端解决方案：从数据到生产环境的一站式体验