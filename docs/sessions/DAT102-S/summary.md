# AWS re:Invent 2025 会议总结：CCC 从 Oracle 到 Aurora PostgreSQL 的数据库现代化之旅

## 会议概述

本次会议由 CCC Intelligence Solutions 分享了他们通过数据库现代化（从 Oracle 迁移到 AWS Aurora PostgreSQL）提升运营效率的完整历程。CCC 是汽车理赔和碰撞修理行业领先的 SaaS 解决方案提供商，每年处理约 1800 万个理赔案件（每天约 50,000-55,000 个），数据库每秒处理约 50,000 笔交易。这次现代化转型历时 3 年多，不仅实现了技术架构的升级，还显著提升了运营效率、降低了成本，并改善了灾难恢复能力。

演讲者详细介绍了 CCC 的云迁移三阶段策略：首先是基础设施层从本地迁移到 AWS 云；其次是应用现代化，从 Oracle WebLogic 迁移到微服务和 JBoss 架构；最后是数据库现代化，这是最具挑战性的阶段。整个过程中，团队采用了分阶段、迭代的方法，确保业务连续性和 SLA 不受影响。通过与 AWS、Percona 和 Cognizant 等合作伙伴的紧密协作，CCC 成功将超过 150TB 的数据从 Oracle 迁移到 Aurora PostgreSQL，实现了 30% 以上的补丁工作量减少和灾难恢复演练时间缩短。

## 详细时间线与关键要点

### 开场介绍 (0:00-2:30)
- **0:00** - 会议开始，演讲者问候观众并介绍议题：CCC Intelligence Solutions 如何通过从 Oracle 到 AWS Aurora PostgreSQL 的数据库现代化提升运营效率
- **0:45** - 介绍会议议程：为什么数据对 CCC 至关重要、CCC 背景介绍、云迁移历程（为什么做、如何做、获得了什么）

### CCC 公司背景与数据重要性 (2:30-8:00)
- **2:30** - CCC 是汽车理赔和碰撞修理行业的 SaaS 解决方案领导者，帮助汽车保险公司、修理厂、汽车制造商和零部件供应商自动化和简化理赔处理流程
- **3:45** - CCC 的核心价值：将数据点转化为行动，将关键时刻转化为智能体验，简化理赔周期
- **4:30** - 数据规模：每年处理约 1800 万个理赔案件，相当于每天 50,000-55,000 个案件，意味着每天触及至少 50,000 人的生活
- **5:15** - 客户群体：300 家顶级汽车保险公司、35,000 家修理厂、5,000 家零部件供应商、与 15 家顶级汽车制造商中的 12 家集成
- **6:30** - CCC 的差异化优势：将海量数据转化为智能洞察、预测解决方案和 AI 驱动的分析，帮助客户做出更好的决策

### 云现代化三阶段策略 (8:00-12:00)
- **8:00** - 2022 年启动云现代化之旅，分为三个阶段：基础设施、应用层、数据库
- **8:45** - 第一阶段 - 基础设施现代化：将所有工作负载从本地迁移到 AWS 云，获得更大自由度和更快的可扩展性
- **9:30** - 第二阶段 - 应用现代化：从供应商锁定转向开源方案，将 Oracle WebLogic 迁移到微服务和 JBoss，将 Oracle Service Bus 迁移到 MuleSoft，采用 Kafka 事件驱动架构
- **10:45** - 第三阶段 - 数据库现代化：作为最后阶段，因为核心业务依赖数据，数据库每秒处理约 50,000 笔交易

### 数据库现代化面临的挑战 (12:00-20:00)
- **12:00** - 数据库复杂性：数百个应用程序紧密集成，超过 50,000 条 SQL 语句，需要识别所有集成点和依赖关系
- **13:15** - 采用"分而治之"策略：将独立组件放入第一阶段交付，然后处理依赖性较强的应用
- **14:00** - SQL 分析：分析所有 Oracle 原生 SQL，确定哪些可以轻松迁移到 PostgreSQL，哪些需要调优或修改
- **15:00** - 数据迁移挑战：总数据量超过 150TB，其中一个数据库接近 100TB，需要找到将如此大规模数据迁移到 Aurora PostgreSQL 的解决方案
- **16:30** - 关键原则：在整个现代化过程中，SLO 和 SLA 不能妥协，业务必须照常运行
- **17:45** - 风险缓解：创建隔离的测试环境，使用生产级数据和负载进行兼容性和性能测试

### 数据迁移策略与解决方案 (20:00-30:00)
- **20:00** - 二进制数据迁移：识别并迁移 30-40TB 的二进制数据（BLOB 和 CLOB，如文档和图像）从 Oracle 数据库到 S3
- **22:00** - 数据类型转换挑战：PostgreSQL 不支持所有 Oracle 数据类型，需要进行数据类型映射分析（如 Oracle 的 NUMBER 到 PostgreSQL 的 NUMERIC）
- **23:30** - 无主键表问题：许多 ETL 暂存表没有主键，给数据传输可靠性验证带来挑战
- **24:45** - 使用 AWS DMS：利用 AWS Database Migration Service 进行数据传输，但需要大量定制配置以支持每秒 50,000 笔交易的繁忙数据库
- **26:00** - DMS 配置挑战：需要平衡源数据库负载（不能影响业务）和 DMS 传输速率（避免延迟过大导致同步中断）
- **27:30** - 使用 AWS SCT 工具：Schema Conversion Tool 用于初始模式转换，分析 100 个数据库实例和 200-300 个模式
- **28:45** - SCT 输出三类结果：70% 可直接一对一转换并生成脚本；部分需要手动定制；剩余无法自动转换需要手动重写为 PostgreSQL 兼容 SQL

### 分阶段迭代实施 (30:00-35:00)
- **30:00** - 采用迭代方式，分阶段发布，逐步推进，这对于复杂和大规模数据库至关重要
- **31:00** - 整个迁移历程耗时近 3 年
- **32:00** - 数据库简化：将独立工作负载从中央核心 Oracle 数据库中分离出来，为每个应用工作负载创建专用的 PostgreSQL 数据库
- **33:30** - 核心数据库仍有约 60TB 数据，包含复杂数据类型列

### 迁移后的收益与成果 (35:00-45:00)
- **35:00** - 投资回报不仅是直接的财务价值，在运营领域更多是间接收益
- **35:45** - 提升运营效率：保持甚至超越原有性能吞吐量
- **36:30** - 优化成本策略：使用 AWS 托管数据库解决方案，FinOps 团队能更好地预测和管理成本
- **37:15** - 自动化提升：SRE 和 DevOps 团队专注于更多自动化和脚本编写，优化云管理
- **38:00** - 改善 RTO 和 RPO：通过多可用区和跨区域策略（东部为主生产区，西部为灾难恢复），实现更好的恢复能力
- **39:00** - 增强安全态势：利用 AWS 托管解决方案，减少安全合规担忧
- **39:45** - 扩展机会：支持更快的业务增长和上市速度，技术不再成为业务扩展的瓶颈
- **40:30** - 更好的事件管理：通过自动化和自动修复实现主动的事件管理，自动化 SOP，在许多情况下甚至消除 SOP

### Oracle RAC 与 Aurora PostgreSQL 对比 (45:00-55:00)
- **45:00** - 迁移前架构：运行在 Oracle RAC 集群上，9 个节点，每个节点都是 32xlarge 实例（AWS 当时提供的最大实例类型）
- **46:30** - Oracle RAC 的运营负担：补丁管理是噩梦，需要整个周末，运行数小时，存在巨大风险
- **47:45** - 运行数百个 WebLogic 虚拟机、Oracle Rules Engine 集群、Oracle Service Bus，复杂且维护成本高
- **48:30** - AWS 上 Oracle RAC 的技术限制：添加新节点存在挑战，难以应对新工作负载需求
- **49:15** - 迁移后架构：Aurora PostgreSQL 采用一写多读实例设计，将 9 节点 Oracle RAC 集群减少到 2 个 Aurora PostgreSQL 实例
- **50:00** - 一个写实例处理所有插入、更新、删除操作；一个读实例支持缓存刷新、报告和只读操作
- **51:00** - 水平扩展简便：只需点击按钮或运行管道即可添加更多读实例，无需与 AWS 进行数周讨论
- **52:00** - 无头 DR（Headless DR）：将存储复制到 DR 区域（西部），但不需要计算资源，节省大量成本；需要时可在几分钟内添加计算实例
- **53:15** - 亚秒级数据同步延迟：写实例和读实例之间的同步延迟在毫秒级，可轻松隔离读写操作

### Aurora PostgreSQL 的运营优势 (55:00-65:00)
- **55:00** - 自动化补丁：启用自动补丁功能，AWS 根据定义的维护窗口自动执行次要补丁
- **56:00** - DBA 和数据架构师可专注于应用和数据库设计，而非管理 Oracle RAC 集群
- **56:45** - 团队有机会学习新技术，促进职业发展
- **57:30** - 数据库可靠性工程（DBRE）实践：DBA 转变为可靠性工程师，确保数据库的可靠性和稳定性，而非传统的补丁和运维任务
- **58:15** - 易于扩展：水平扩展只需点击按钮或运行自动化管道
- **58:45** - 显著降低 RPO 和 RTO：Aurora PostgreSQL 的应用同步延迟极小，AWS 提供更好的跨区域复制解决方案
- **59:30** - 补丁工作量减少 30% 以上：与 Oracle 补丁管理相比，大幅减少工作量和无眠之夜
- **60:15** - DR 演练时间减少 30% 以上：每年的安全合规和监管合规 DR 测试，跨数据库、SRE、DevOps 和应用团队都有显著改善

### 规模化运营与性能指标 (65:00-70:00)
- **65:00** - 继续支持每秒约 50,000 笔交易，在某些情况下甚至更多
- **65:30** - 数据库每天处理约 50 亿笔数据库事务
- **66:00** - 需要超大规模云服务提供商支持这种工作负载，AWS 满足了这一需求
- **66:45** - 明确的战略：没有对手，没有松散的端点，清楚了解挑战、风险、风险缓解路径和每个阶段的解决方案
- **67:30** - 摆脱供应商锁定，采用更多开源技术，实现应用栈现代化，利用事件驱动的 Kafka 架构

### 核心优势与数据管理 (70:00-75:00)
- **70:00** - 核心优势是数据管理：从众多理赔案件中获取大量不同类型的数据点
- **70:45** - 随着汽车复杂性增加，数据将继续增长
- **71:15** - 专注于数据库现代化，识别每一层，为每一层创建解决方案和策略，分阶段实施
- **72:00** - 第一阶段完成二进制数据迁移，第二阶段将非二进制数据从 AWS Oracle 自定义 RAC 集群迁移到 AWS Aurora PostgreSQL 集群
- **73:00** - 实现运营效率、更好的成本缓解策略，简化应用和数据库架构

### 合作伙伴与团队协作 (75:00-80:00)
- **75:00** - 历时 3 年多，依靠多个合作伙伴的支持
- **75:30** - 利用 AWS 专业知识实施解决方案
- **76:00** - 利用 Percona 的 PostgreSQL 专业知识进行 SQL 和 PostgreSQL 迁移
- **76:30** - Cognizant 作为战略合作伙伴：从第一天起就是关键合作伙伴
- **77:00** - Cognizant 代表 Chandana Paul 介绍：管理 Cognizant 与 CCC 的关系，来自芝加哥
- **77:45** - Cognizant 端到端参与整个旅程，从规划到生产切换，这种连续性帮助最小化风险和快速解决问题
- **78:30** - 深入了解应用环境和应用程序

### Cognizant 的贡献与角色 (80:00-结束)
- **80:00** - Cognizant 参与的各个领域概览
- **80:30** - 紧密团队合作：AWS、CCC 和 Cognizant 作为一个团队协作，没有区别
- **81:00** - Cognizant 带来了与其他客户类似项目的经验和知识分享
- **81:45** - 应用深度知识：对应用和各种对象的深入了解，帮助制定系统的修复策略
- **82:30** - 应用、查询、存储过程等的修复帮助以最小风险和挑战实现目标，快速解决问题
- **83:15** - DevOps 策略：DevOps 策略是加速迁移时间表和降低风险的关键
- **83:45** - 会议结束