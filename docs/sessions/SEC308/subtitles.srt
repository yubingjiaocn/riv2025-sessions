1
00:00:00,050 --> 00:00:01,709
OK fantastic

2
00:00:02,088 --> 00:00:04,169
um thank you

3
00:00:04,169 --> 00:00:05,150
for being here um.

4
00:00:05,919 --> 00:00:08,198
I'd like you to imagine something with me

5
00:00:08,198 --> 00:00:08,839
for a minute.

6
00:00:09,239 --> 00:00:11,380
Picture yourself responsible

7
00:00:11,599 --> 00:00:14,278
for securing the digital experiences

8
00:00:14,278 --> 00:00:16,399
of 3.5 billion

9
00:00:16,399 --> 00:00:16,940
people.

10
00:00:17,440 --> 00:00:19,870
That's nearly half the world's

11
00:00:19,870 --> 00:00:22,179
population. Logging in every

12
00:00:22,179 --> 00:00:24,728
single day, sharing memories,

13
00:00:25,089 --> 00:00:26,929
connecting with loved ones,

14
00:00:27,219 --> 00:00:30,100
and building communities across 150

15
00:00:30,100 --> 00:00:30,870
countries,

16
00:00:31,579 --> 00:00:33,859
each with their own regulatory

17
00:00:33,859 --> 00:00:34,569
requirements,

18
00:00:34,899 --> 00:00:36,609
compliance standards,

19
00:00:36,939 --> 00:00:38,779
and security expectations.

20
00:00:40,069 --> 00:00:41,069
Now here's the thing.

21
00:00:42,079 --> 00:00:44,060
That isn't a hypothetical scenario.

22
00:00:44,759 --> 00:00:47,000
That's a that's a Wednesday

23
00:00:47,000 --> 00:00:48,439
afternoon at Meta.

24
00:00:49,429 --> 00:00:52,189
I'm Robin Rodriguez, a solutions architect

25
00:00:52,189 --> 00:00:53,090
at AWS,

26
00:00:53,459 --> 00:00:55,639
and I'm thrilled to be here at Reinvent

27
00:00:55,840 --> 00:00:56,770
with you all today.

28
00:00:57,069 --> 00:00:59,109
Um, on stage today we've got

29
00:00:59,509 --> 00:01:01,529
myself and some incredible colleagues

30
00:01:02,029 --> 00:01:04,430
Peter Neuhausen, a senior engineering

31
00:01:04,430 --> 00:01:05,588
manager at Meta.

32
00:01:06,049 --> 00:01:08,409
And Syed Sharif, a

33
00:01:08,409 --> 00:01:11,019
security solutions architect at AWS,

34
00:01:11,198 --> 00:01:13,719
uh, Syed and I have the privilege

35
00:01:13,719 --> 00:01:15,838
of working alongside Mehta's team

36
00:01:16,138 --> 00:01:18,138
to help deliver secure

37
00:01:18,138 --> 00:01:20,500
experiences that support billions

38
00:01:20,500 --> 00:01:21,519
of users,

39
00:01:21,838 --> 00:01:24,558
and the scale of the challenges

40
00:01:24,698 --> 00:01:26,769
that these teams tackle is

41
00:01:26,769 --> 00:01:27,980
truly remarkable.

42
00:01:29,269 --> 00:01:29,808
So

43
00:01:30,469 --> 00:01:32,469
today's session is about what

44
00:01:32,469 --> 00:01:33,250
we call

45
00:01:33,709 --> 00:01:35,299
fortifying the cloud,

46
00:01:35,629 --> 00:01:37,888
but it's really a lot more than that.

47
00:01:38,150 --> 00:01:41,278
It's about how one of the world's largest

48
00:01:41,290 --> 00:01:42,329
technology companies

49
00:01:42,668 --> 00:01:45,049
has reimagined security

50
00:01:45,269 --> 00:01:46,689
for the cloud era.

51
00:01:47,150 --> 00:01:49,189
It's about the hard lessons

52
00:01:49,189 --> 00:01:49,808
learned.

53
00:01:50,409 --> 00:01:52,838
The innovative solutions discovered

54
00:01:53,099 --> 00:01:54,888
and the practical wisdom that

55
00:01:55,778 --> 00:01:56,709
can benefit

56
00:01:57,500 --> 00:01:59,480
organizations of any size,

57
00:01:59,778 --> 00:02:02,638
uh, you know, whether you're managing thousands

58
00:02:02,769 --> 00:02:04,778
of workloads on AWS

59
00:02:05,040 --> 00:02:07,180
or just beginning your cloud journey.

60
00:02:07,418 --> 00:02:09,699
I think these principles that we're gonna share

61
00:02:09,699 --> 00:02:11,899
today can transform how

62
00:02:11,899 --> 00:02:12,639
you think

63
00:02:12,939 --> 00:02:13,479
about

64
00:02:13,740 --> 00:02:14,679
your security.

65
00:02:15,159 --> 00:02:17,219
Um, so over the next hour we're gonna

66
00:02:17,219 --> 00:02:19,538
talk about sort of this AWS

67
00:02:19,538 --> 00:02:21,538
cloud security playbook, you

68
00:02:21,538 --> 00:02:24,038
know, what are some of these key principles

69
00:02:24,219 --> 00:02:26,770
for fortifying your identities,

70
00:02:27,020 --> 00:02:29,419
your networks, and your resources

71
00:02:29,419 --> 00:02:30,360
in AWS,

72
00:02:30,659 --> 00:02:33,409
uh. And the unique challenges

73
00:02:33,588 --> 00:02:35,588
that Meta's faced with their

74
00:02:35,588 --> 00:02:37,629
hyper scale infrastructure and how

75
00:02:37,629 --> 00:02:38,969
they've evolved

76
00:02:39,308 --> 00:02:41,449
to a hybrid cloud,

77
00:02:41,990 --> 00:02:44,050
you know, uh, Peter's gonna share,

78
00:02:44,349 --> 00:02:46,469
you know, some of how Meta's implemented

79
00:02:46,469 --> 00:02:48,528
the security controls across those

80
00:02:48,528 --> 00:02:49,889
identity network

81
00:02:50,349 --> 00:02:52,550
and resource domains

82
00:02:52,750 --> 00:02:53,808
as well as these

83
00:02:54,189 --> 00:02:55,990
real world lessons learned.

84
00:02:56,368 --> 00:02:58,610
And a deep dive into how

85
00:02:58,610 --> 00:03:01,020
they secure AI clusters

86
00:03:01,020 --> 00:03:02,990
at massive scale

87
00:03:03,258 --> 00:03:05,379
and also what's next in this

88
00:03:05,379 --> 00:03:06,778
evolution of security,

89
00:03:07,050 --> 00:03:09,219
uh, so I'm gonna have Syed

90
00:03:09,219 --> 00:03:11,439
join us up on stage and walk us through

91
00:03:11,778 --> 00:03:13,270
the AWS cloud

92
00:03:13,860 --> 00:03:14,819
security playbook.

93
00:03:18,778 --> 00:03:19,669
Thank you, Robin.

94
00:03:21,740 --> 00:03:24,210
Let's start with a playbook for AWS cloud security,

95
00:03:24,550 --> 00:03:26,330
and what does that look like?

96
00:03:27,379 --> 00:03:27,919
Uh,

97
00:03:28,300 --> 00:03:30,379
I have the unique privilege of being a

98
00:03:30,379 --> 00:03:32,419
security specialist at AWS for

99
00:03:32,419 --> 00:03:33,599
more than 6+ years now

100
00:03:33,899 --> 00:03:35,838
working with some of our largest customers,

101
00:03:36,099 --> 00:03:38,379
and based on our collective understanding

102
00:03:38,659 --> 00:03:40,860
of security of scale we found some of these

103
00:03:40,860 --> 00:03:42,939
key characteristics that apply to

104
00:03:42,939 --> 00:03:45,139
all customers when they're doing cloud

105
00:03:45,139 --> 00:03:47,689
security. Security

106
00:03:47,689 --> 00:03:49,929
skill is defined, especially

107
00:03:49,929 --> 00:03:52,169
for hyper scales like Meta, is

108
00:03:52,169 --> 00:03:54,169
the convergence of ephemeral workloads.

109
00:03:54,969 --> 00:03:56,469
Distributed systems

110
00:03:56,969 --> 00:03:59,449
and Automation,

111
00:03:59,800 --> 00:04:02,139
it's absolutely necessary at

112
00:04:02,368 --> 00:04:03,919
that scale when you're trying to secure.

113
00:04:05,439 --> 00:04:07,778
Edward Demming, the father of quality management,

114
00:04:08,360 --> 00:04:10,360
once said, you cannot inspect your way to

115
00:04:10,360 --> 00:04:12,419
quality. It has

116
00:04:12,419 --> 00:04:13,819
to be embedded in the process.

117
00:04:14,429 --> 00:04:15,129
Similarly,

118
00:04:15,569 --> 00:04:17,819
security at scale has to be embedded in the

119
00:04:17,819 --> 00:04:20,079
process all the way from desi uh

120
00:04:20,079 --> 00:04:21,199
the design phase

121
00:04:21,819 --> 00:04:24,059
built into dep uh the phase.

122
00:04:24,699 --> 00:04:26,798
And embedded in the deployment space

123
00:04:26,980 --> 00:04:28,899
and operationalized in runtime.

124
00:04:30,619 --> 00:04:32,738
Security, when we say federated, what we

125
00:04:32,738 --> 00:04:34,798
mean by that is security is no longer

126
00:04:35,338 --> 00:04:36,220
a gatekeeper.

127
00:04:37,079 --> 00:04:38,939
Or somebody who's giving a yes or no answer,

128
00:04:39,600 --> 00:04:41,660
it's rather woven into the fabric

129
00:04:42,160 --> 00:04:43,858
of your cloud deployments.

130
00:04:44,850 --> 00:04:47,009
The the objective shift

131
00:04:47,009 --> 00:04:48,470
from preventing change

132
00:04:49,129 --> 00:04:50,149
to making sure

133
00:04:50,410 --> 00:04:52,649
change occurs within the established

134
00:04:52,660 --> 00:04:53,730
safety parameters.

135
00:04:56,649 --> 00:04:58,649
Resiliency and cloud secure cloud

136
00:04:58,649 --> 00:05:00,889
security is not merely the ability to prevent

137
00:05:00,889 --> 00:05:01,649
bad days.

138
00:05:02,000 --> 00:05:03,928
We all understand bad days happen.

139
00:05:04,290 --> 00:05:06,470
The idea is how well can you withstand

140
00:05:06,730 --> 00:05:08,199
and recover from such events.

141
00:05:09,250 --> 00:05:11,309
The idea is to be anti-fragile. If

142
00:05:11,309 --> 00:05:12,939
you've read Nicholas Tale's book,

143
00:05:13,488 --> 00:05:15,759
the idea is, so what does that look like

144
00:05:16,410 --> 00:05:17,230
instead of having

145
00:05:17,569 --> 00:05:18,139
a

146
00:05:18,649 --> 00:05:20,850
firewall that breaks under a DDoS

147
00:05:20,850 --> 00:05:22,449
attack and fails open.

148
00:05:22,889 --> 00:05:24,988
You have automated rules

149
00:05:25,088 --> 00:05:26,000
that add the

150
00:05:26,769 --> 00:05:28,149
bad IPs to your

151
00:05:28,769 --> 00:05:30,269
web application firewall

152
00:05:30,569 --> 00:05:32,470
and then create honey pots

153
00:05:32,730 --> 00:05:34,769
so that you can actually withstand that attack

154
00:05:34,769 --> 00:05:35,649
and recover from it.

155
00:05:37,699 --> 00:05:39,738
When operating at scale, a thing

156
00:05:39,738 --> 00:05:41,358
that we see it very often is

157
00:05:41,649 --> 00:05:44,019
companies have a virtuous loop

158
00:05:44,569 --> 00:05:46,160
that is created by

159
00:05:46,449 --> 00:05:47,920
learning from past events,

160
00:05:48,220 --> 00:05:50,230
right? We, we all agree that bad

161
00:05:50,230 --> 00:05:51,259
days are going to happen,

162
00:05:51,540 --> 00:05:53,319
right? And it can be Thursday morning,

163
00:05:53,660 --> 00:05:55,399
but this can only be possible

164
00:05:56,019 --> 00:05:58,540
when. There is an iterative

165
00:05:58,540 --> 00:06:01,059
process and teams can create controls

166
00:06:01,059 --> 00:06:02,720
from yesterday's event

167
00:06:02,980 --> 00:06:04,738
for tomorrow's protection.

168
00:06:06,230 --> 00:06:08,428
But this really really relies

169
00:06:08,428 --> 00:06:10,488
on a culture that is blame-free.

170
00:06:11,379 --> 00:06:14,009
Uh, incident analysis that focuses

171
00:06:14,298 --> 00:06:15,488
on the technology

172
00:06:15,988 --> 00:06:18,199
and timeline of the attacks

173
00:06:18,199 --> 00:06:19,649
and not the people

174
00:06:20,269 --> 00:06:21,230
or human error.

175
00:06:22,108 --> 00:06:24,488
Thus transforming every incident

176
00:06:24,910 --> 00:06:25,858
into a

177
00:06:26,709 --> 00:06:28,709
Valuable learning asset for the

178
00:06:28,709 --> 00:06:31,619
whole team. As

179
00:06:31,619 --> 00:06:32,829
we now talk about

180
00:06:33,660 --> 00:06:35,949
this. Security

181
00:06:35,949 --> 00:06:38,629
at scale, let's look at some of the primary domains.

182
00:06:38,910 --> 00:06:41,028
The first one, and one of the most important ones is

183
00:06:41,028 --> 00:06:41,910
the identity one.

184
00:06:42,619 --> 00:06:44,879
Right, and there are some key things we want to highlight here.

185
00:06:45,858 --> 00:06:48,500
Uh, Uh, on the IDPSSO

186
00:06:48,500 --> 00:06:50,500
one, sorry, it was somebody was trying to take a

187
00:06:50,500 --> 00:06:51,608
picture. Uh,

188
00:06:51,939 --> 00:06:52,959
the first one is using

189
00:06:53,298 --> 00:06:54,920
an identity provider

190
00:06:55,178 --> 00:06:56,838
and a single sign-on mechanism

191
00:06:57,259 --> 00:06:59,720
that allows your human users.

192
00:07:00,750 --> 00:07:01,488
To access

193
00:07:01,809 --> 00:07:02,649
AWS

194
00:07:03,379 --> 00:07:05,869
applications and accounts within AWS,

195
00:07:06,428 --> 00:07:07,608
right? Um,

196
00:07:08,108 --> 00:07:10,048
again, I wanna highlight

197
00:07:10,470 --> 00:07:12,678
that when you're using Identity Center

198
00:07:12,750 --> 00:07:15,230
it can be used for accessing AWS

199
00:07:15,230 --> 00:07:16,488
applications or.

200
00:07:17,459 --> 00:07:18,910
Uh, uh,

201
00:07:19,350 --> 00:07:20,548
accessing AWSS accounts,

202
00:07:20,809 --> 00:07:22,899
you can choose which feature you want to use or

203
00:07:22,899 --> 00:07:25,829
both. Let's

204
00:07:25,829 --> 00:07:27,838
look at some of the common policies when you're trying

205
00:07:27,838 --> 00:07:30,000
to do security at scale, especially in a federated

206
00:07:30,000 --> 00:07:31,119
manner, automated manner,

207
00:07:31,678 --> 00:07:33,619
right? When you, uh,

208
00:07:33,879 --> 00:07:36,040
what you do is when you're federating, you block the

209
00:07:36,040 --> 00:07:38,059
bad at the Oregon level, right,

210
00:07:38,399 --> 00:07:39,619
for the whole enterprise,

211
00:07:40,028 --> 00:07:42,100
but then you leverage your org structure

212
00:07:42,309 --> 00:07:44,470
to apply policies at the OU

213
00:07:45,028 --> 00:07:46,298
and the account level

214
00:07:46,588 --> 00:07:48,959
in alignment with the security requirements

215
00:07:48,959 --> 00:07:50,338
of the workloads running there.

216
00:07:51,769 --> 00:07:52,569
For example,

217
00:07:52,829 --> 00:07:54,678
you can apply an org level SCP

218
00:07:54,980 --> 00:07:55,798
that prevents

219
00:07:56,298 --> 00:07:58,519
anybody in your organization from

220
00:07:58,519 --> 00:07:59,738
modifying your cloud trail.

221
00:08:00,619 --> 00:08:03,019
Right, or you can apply

222
00:08:03,019 --> 00:08:04,040
an RCP

223
00:08:04,420 --> 00:08:06,540
that prevents a certain type of

224
00:08:06,540 --> 00:08:08,649
encryption being used in on your

225
00:08:08,649 --> 00:08:10,920
S3 bucket that is congruous with

226
00:08:11,139 --> 00:08:12,528
customers using um

227
00:08:12,790 --> 00:08:14,420
for in ransomware attacks, for example.

228
00:08:16,660 --> 00:08:18,199
A key things to highlight here,

229
00:08:18,579 --> 00:08:20,819
um, there is also these management policies,

230
00:08:20,899 --> 00:08:22,959
and one of them is declarative policies,

231
00:08:23,259 --> 00:08:24,778
right? It, uh, these are

232
00:08:25,100 --> 00:08:26,920
you can use them to basically

233
00:08:27,269 --> 00:08:29,379
prevent noncompliant actions. For

234
00:08:29,379 --> 00:08:30,439
example, you can block

235
00:08:31,079 --> 00:08:33,058
public internet access to your whole VPC.

236
00:08:33,849 --> 00:08:36,099
And also create helpful

237
00:08:36,099 --> 00:08:37,200
error messages

238
00:08:37,580 --> 00:08:39,379
for your end users.

239
00:08:42,979 --> 00:08:44,320
Now when you're using

240
00:08:44,619 --> 00:08:45,719
AWS at scale.

241
00:08:46,960 --> 00:08:49,200
You probably are not enabling every service

242
00:08:49,200 --> 00:08:51,308
in your production accounts. You're using the services that

243
00:08:51,308 --> 00:08:51,859
you want

244
00:08:52,479 --> 00:08:54,779
now. How do you effectively manage

245
00:08:54,779 --> 00:08:56,879
service approval at scale while

246
00:08:56,879 --> 00:08:58,178
maintaining your security

247
00:08:58,440 --> 00:09:00,869
and enabling developer innovation? Your

248
00:09:00,869 --> 00:09:02,908
developers are looking to try the latest service,

249
00:09:03,119 --> 00:09:05,320
right? I'm sure some of you are excited about

250
00:09:05,320 --> 00:09:07,460
trying out the new security agent and other

251
00:09:07,950 --> 00:09:09,200
amazing products we've launched

252
00:09:09,798 --> 00:09:11,340
yesterday. So

253
00:09:11,719 --> 00:09:13,798
what you do is by implementing a tiered

254
00:09:13,798 --> 00:09:15,908
approach. You create sandbox

255
00:09:15,908 --> 00:09:18,109
environments where developers get the freedom

256
00:09:18,428 --> 00:09:19,529
to experiment

257
00:09:19,989 --> 00:09:22,029
in isolated environments from the

258
00:09:22,029 --> 00:09:23,210
rest of your workloads,

259
00:09:23,668 --> 00:09:25,750
and a common pattern we see is a 30 day

260
00:09:25,750 --> 00:09:27,869
period for the sandbox account after which

261
00:09:27,869 --> 00:09:28,889
it is gone,

262
00:09:29,269 --> 00:09:31,428
but also ensuring

263
00:09:31,428 --> 00:09:33,168
that sandbox environment has some

264
00:09:33,428 --> 00:09:35,590
baseline security controls built

265
00:09:35,590 --> 00:09:37,989
into it like allowing certain

266
00:09:37,989 --> 00:09:40,330
types of data to come in and keeping data in

267
00:09:40,590 --> 00:09:42,710
also allowing to like hey who has access

268
00:09:42,710 --> 00:09:43,779
in there and not,

269
00:09:44,149 --> 00:09:46,639
um. And then usage metrics

270
00:09:47,019 --> 00:09:49,000
that you're collecting in that sandbox environment

271
00:09:49,259 --> 00:09:51,619
because guess what somebody's gonna experiment

272
00:09:51,859 --> 00:09:53,840
they're gonna find oh this works

273
00:09:54,178 --> 00:09:56,119
let's move it to the next stage

274
00:09:56,500 --> 00:09:57,879
and at that point instead of

275
00:09:58,139 --> 00:10:00,178
creating the whole workload somewhere else you

276
00:10:00,178 --> 00:10:01,479
might have to make a choice

277
00:10:01,940 --> 00:10:04,178
to then migrate that account over into

278
00:10:04,178 --> 00:10:05,229
your. Or

279
00:10:06,619 --> 00:10:08,408
main workload and production accounts.

280
00:10:08,969 --> 00:10:11,178
So how do you then use metrics to make that

281
00:10:11,178 --> 00:10:12,119
transition easier?

282
00:10:12,840 --> 00:10:14,109
So the whole idea is to use

283
00:10:14,408 --> 00:10:16,408
automated guard rails replacing your

284
00:10:16,408 --> 00:10:17,428
manual controls

285
00:10:17,769 --> 00:10:19,070
so that you can

286
00:10:19,649 --> 00:10:20,609
scale securely.

287
00:10:23,200 --> 00:10:25,529
Let's talk about some of the network domain features

288
00:10:25,529 --> 00:10:26,158
that come in.

289
00:10:26,529 --> 00:10:28,830
One of the most is zero trust access, right?

290
00:10:29,609 --> 00:10:31,729
This is to enable that your actors,

291
00:10:31,918 --> 00:10:32,889
whether they're humans,

292
00:10:33,489 --> 00:10:35,210
machines, or devices,

293
00:10:35,609 --> 00:10:37,269
can access your resources,

294
00:10:37,599 --> 00:10:39,609
uh, that they, uh, they, they should

295
00:10:39,609 --> 00:10:40,269
be using,

296
00:10:40,529 --> 00:10:42,168
uh. In

297
00:10:42,469 --> 00:10:44,548
in a manner that does not depend on

298
00:10:44,548 --> 00:10:45,570
the proximity,

299
00:10:45,989 --> 00:10:48,070
rather it leverages identity and

300
00:10:48,070 --> 00:10:50,070
other security features to make that.

301
00:10:52,298 --> 00:10:53,109
Authorization.

302
00:10:54,320 --> 00:10:56,558
So, uh, AWS

303
00:10:56,558 --> 00:10:57,359
provides you,

304
00:10:57,690 --> 00:11:00,279
uh, these type of, uh, these zero trust mechanisms

305
00:11:00,279 --> 00:11:02,469
across the stack all the way from the edge to the cloud

306
00:11:02,469 --> 00:11:03,219
APIs.

307
00:11:03,678 --> 00:11:05,759
Uh, you can, uh, so you can use the

308
00:11:05,759 --> 00:11:07,500
shared authorization context

309
00:11:07,840 --> 00:11:09,979
and consistent authorization evaluation

310
00:11:10,279 --> 00:11:11,538
across and then

311
00:11:11,840 --> 00:11:13,918
also collecting telemetry all

312
00:11:13,918 --> 00:11:16,359
through the phases so you can then monitor your

313
00:11:16,359 --> 00:11:17,298
access pervasively.

314
00:11:20,979 --> 00:11:23,279
Now obviously you're gonna have to inspect your traffic

315
00:11:23,279 --> 00:11:24,168
as it goes through.

316
00:11:24,489 --> 00:11:26,619
We've seen three common patterns come up very

317
00:11:26,849 --> 00:11:29,168
frequently and how customers at

318
00:11:29,168 --> 00:11:31,158
scale do them. The first one

319
00:11:31,580 --> 00:11:33,658
is the outbound, right? You wanna

320
00:11:33,658 --> 00:11:35,658
keep the safe things in and not let

321
00:11:35,658 --> 00:11:36,369
them go out.

322
00:11:36,779 --> 00:11:38,879
So this is about how do you keep

323
00:11:39,599 --> 00:11:41,619
a connection from your resources

324
00:11:41,619 --> 00:11:43,558
going out to the untrusted, um,

325
00:11:43,889 --> 00:11:45,279
connection or destination.

326
00:11:45,590 --> 00:11:47,639
And then some of the potential risks you're mitigating

327
00:11:47,639 --> 00:11:49,879
with this kind of using a network firewall,

328
00:11:49,918 --> 00:11:50,649
for example,

329
00:11:51,000 --> 00:11:52,960
to limit this is um

330
00:11:53,259 --> 00:11:55,558
um sensitive data being exfiltrated

331
00:11:55,840 --> 00:11:57,849
or command and control type of type

332
00:11:57,849 --> 00:11:58,960
of activity and such.

333
00:12:00,599 --> 00:12:02,989
The colliery is the ingress pattern

334
00:12:03,239 --> 00:12:05,399
right where you have an untrusted destination

335
00:12:05,399 --> 00:12:06,298
sending traffic

336
00:12:06,639 --> 00:12:08,840
to your internal resources.

337
00:12:09,168 --> 00:12:10,700
Similarly here you can use

338
00:12:10,960 --> 00:12:12,960
the same mechanisms to mitigate threats

339
00:12:12,960 --> 00:12:15,279
like SQL injections, vulnerability exploits,

340
00:12:15,320 --> 00:12:16,019
and such.

341
00:12:16,639 --> 00:12:17,308
And then

342
00:12:17,599 --> 00:12:19,759
when you're operating at scale you're gonna have

343
00:12:19,759 --> 00:12:21,219
trust boundaries that are

344
00:12:21,479 --> 00:12:23,519
different across your org, right? We talked about

345
00:12:23,519 --> 00:12:24,678
sandbox versus not,

346
00:12:25,038 --> 00:12:27,158
right? So similarly you're gonna

347
00:12:27,158 --> 00:12:29,639
have your east west inspection.

348
00:12:30,259 --> 00:12:32,320
This can be VPCs within the region

349
00:12:32,320 --> 00:12:33,879
or VPCs across uh

350
00:12:34,178 --> 00:12:36,219
uh a different region, and you

351
00:12:36,219 --> 00:12:38,739
are going to inspect that traffic that's using the same mechanisms

352
00:12:38,739 --> 00:12:39,599
and you'll see more

353
00:12:40,009 --> 00:12:40,979
in the later slides.

354
00:12:42,298 --> 00:12:44,279
One more thing I wanted to highlight is

355
00:12:44,779 --> 00:12:46,908
at scale some customers use identity aware

356
00:12:46,908 --> 00:12:48,099
service authorization

357
00:12:48,500 --> 00:12:50,500
so we talked about how humans use this

358
00:12:50,500 --> 00:12:52,629
is an example of how services use

359
00:12:52,940 --> 00:12:55,019
we have a service that uh we provide that is

360
00:12:55,019 --> 00:12:56,019
called um.

361
00:12:57,340 --> 00:12:57,918
Lattice

362
00:12:58,219 --> 00:12:59,960
what Lattice allows you to do is

363
00:13:00,288 --> 00:13:02,308
create a lattice network for

364
00:13:02,308 --> 00:13:04,500
your applications running in say your

365
00:13:04,500 --> 00:13:06,658
VPC connecting to a different application

366
00:13:06,658 --> 00:13:07,979
running in a different VPC

367
00:13:08,460 --> 00:13:10,500
and right now these applications do

368
00:13:10,500 --> 00:13:11,538
not have any access,

369
00:13:11,940 --> 00:13:14,038
but using lattice you can create

370
00:13:14,779 --> 00:13:16,950
service definitions, target groups,

371
00:13:17,219 --> 00:13:18,798
and action policies,

372
00:13:19,070 --> 00:13:20,519
rules that allow you

373
00:13:20,808 --> 00:13:22,719
to then make this access possible

374
00:13:23,609 --> 00:13:25,139
but behind the scenes it's leveraging.

375
00:13:25,460 --> 00:13:27,599
Other constructs like AWSIM

376
00:13:27,599 --> 00:13:28,918
to make this

377
00:13:29,219 --> 00:13:30,178
connection possible.

378
00:13:34,119 --> 00:13:36,479
Now let's talk about data governance,

379
00:13:36,759 --> 00:13:38,479
especially when it talks about resources, right?

380
00:13:40,119 --> 00:13:42,288
The foundation of this is understanding your data

381
00:13:42,288 --> 00:13:43,190
landscape.

382
00:13:44,570 --> 00:13:47,070
Your security here starts with data classification

383
00:13:47,570 --> 00:13:48,830
and protection measures

384
00:13:49,129 --> 00:13:51,070
that match the data sensitivity,

385
00:13:51,529 --> 00:13:53,629
right? You cannot protect everything the same way.

386
00:13:53,690 --> 00:13:56,070
You have to choose to apply your security resources

387
00:13:56,210 --> 00:13:57,788
to your most valuable,

388
00:13:58,129 --> 00:14:00,308
um, assets. One of my

389
00:14:00,308 --> 00:14:02,440
mentors in my early in my security career

390
00:14:02,440 --> 00:14:04,609
told me do not put steel locks on plywood

391
00:14:04,609 --> 00:14:05,229
doors.

392
00:14:06,259 --> 00:14:08,259
And that has never left me, so some of the

393
00:14:08,259 --> 00:14:09,639
critical decisions here

394
00:14:09,979 --> 00:14:12,190
are. Regions where

395
00:14:12,190 --> 00:14:13,070
your data can live

396
00:14:13,349 --> 00:14:14,969
because of some compliance reasons could be

397
00:14:15,288 --> 00:14:17,469
or encryption requirements and backup

398
00:14:17,469 --> 00:14:19,619
requirements. Now

399
00:14:19,619 --> 00:14:21,690
one of the key things that comes up here that we've seen

400
00:14:21,690 --> 00:14:22,320
customers

401
00:14:22,580 --> 00:14:25,019
uh do at scale very successfully

402
00:14:25,019 --> 00:14:27,269
is managing your AWS KMS keys,

403
00:14:27,500 --> 00:14:29,538
right? When you're operating at scale,

404
00:14:29,739 --> 00:14:31,599
you're gonna have a lot of KMS keys.

405
00:14:31,928 --> 00:14:33,979
AWS KMS keys are protected

406
00:14:33,979 --> 00:14:36,418
by PIPS 143 level 3 hardware

407
00:14:36,418 --> 00:14:37,340
security modules.

408
00:14:37,658 --> 00:14:38,599
I know a lot of words,

409
00:14:38,899 --> 00:14:41,019
but, uh, what I'm trying to say is, but it

410
00:14:41,019 --> 00:14:43,099
gives you a lot of options. It gives you a lot of

411
00:14:43,099 --> 00:14:45,219
options in terms of how and where you create the keys,

412
00:14:45,259 --> 00:14:47,379
but also the way the key material comes from.

413
00:14:48,269 --> 00:14:50,389
So some of the best practices we see is like a

414
00:14:50,389 --> 00:14:52,109
lot of times central security teams

415
00:14:52,428 --> 00:14:54,210
love to keep the keys in their control.

416
00:14:54,750 --> 00:14:56,869
Well, a challenge we commonly come across

417
00:14:56,869 --> 00:14:58,009
with that pattern is

418
00:14:58,349 --> 00:15:00,469
now you're basically all the KMS

419
00:15:00,469 --> 00:15:02,649
level coders are applying at that account

420
00:15:02,649 --> 00:15:04,830
that you have in your central management account for

421
00:15:04,830 --> 00:15:06,450
security. Rather,

422
00:15:06,908 --> 00:15:09,190
you take the keys and move them closer, so

423
00:15:09,190 --> 00:15:11,269
data has gravity. Similarly, it's, it's

424
00:15:11,269 --> 00:15:12,389
pulling the encryption key with it.

425
00:15:12,808 --> 00:15:14,808
But that doesn't mean your central team

426
00:15:14,808 --> 00:15:16,239
does not have control over it.

427
00:15:16,529 --> 00:15:18,649
You still get the same governance by

428
00:15:18,649 --> 00:15:21,168
using SCPs and RCPs

429
00:15:21,168 --> 00:15:23,168
that we talked about earlier to

430
00:15:23,168 --> 00:15:25,570
ensure that these keys are protected appropriately,

431
00:15:25,808 --> 00:15:26,710
but that now one,

432
00:15:27,048 --> 00:15:29,408
the keys closer to the data itself and

433
00:15:29,408 --> 00:15:31,879
the quotas on key key usage

434
00:15:31,879 --> 00:15:32,469
especially

435
00:15:32,769 --> 00:15:34,769
are from that account with the keys being

436
00:15:34,769 --> 00:15:37,529
used. Uh,

437
00:15:37,950 --> 00:15:39,989
and similarly when you're doing bringing your own

438
00:15:39,989 --> 00:15:40,649
key material,

439
00:15:41,229 --> 00:15:43,269
uh, KMS keys, uh, KMS

440
00:15:43,269 --> 00:15:44,450
allows you to do that, but it's

441
00:15:44,869 --> 00:15:46,950
consideration there you have to make is what

442
00:15:46,950 --> 00:15:49,129
are the performance and operational overhead

443
00:15:49,129 --> 00:15:50,798
that I'm taking on for doing this.

444
00:15:51,149 --> 00:15:52,928
I understand there are always very good

445
00:15:53,190 --> 00:15:55,389
compliance reasons and regulatory reasons to do that,

446
00:15:55,619 --> 00:15:57,899
but understanding where they apply and then using

447
00:15:57,899 --> 00:16:00,149
it appropriately versus using it in blanket

448
00:16:00,149 --> 00:16:00,928
across your org.

449
00:16:03,678 --> 00:16:05,719
Now the the thing that we wanna talk about is

450
00:16:05,719 --> 00:16:08,119
how organizations implement defense in depth

451
00:16:08,678 --> 00:16:10,678
using a validation for infrastructure as

452
00:16:10,678 --> 00:16:12,750
code when you're doing we talked about automation,

453
00:16:12,788 --> 00:16:15,119
you know, you're gonna have all your infrastructure defined as code

454
00:16:15,369 --> 00:16:17,298
hopefully you're not clicking in the console,

455
00:16:17,558 --> 00:16:18,979
uh, and

456
00:16:19,399 --> 00:16:21,759
so what it needs to happen infrastructure validation

457
00:16:21,759 --> 00:16:24,158
needs to happen in multiple layers from the development

458
00:16:24,158 --> 00:16:26,700
stage in your IDs or your CICD pipelines

459
00:16:27,788 --> 00:16:28,558
all the way down through deployment.

460
00:16:28,950 --> 00:16:31,229
So what does that look like? Let's look at an example. So

461
00:16:31,229 --> 00:16:32,979
you have a terraform core calling your,

462
00:16:33,509 --> 00:16:35,548
uh, a telephone, a template being created

463
00:16:35,548 --> 00:16:37,239
using the AWSCC provider.

464
00:16:37,710 --> 00:16:39,678
This one called the cloud control API,

465
00:16:40,149 --> 00:16:42,428
which then if you have come across cloud formation

466
00:16:42,428 --> 00:16:44,928
hooks, which is a manner of basically intercepting

467
00:16:45,109 --> 00:16:47,229
these in the target environment and then checking

468
00:16:47,229 --> 00:16:49,389
them for compliance with the rules applied in that

469
00:16:49,389 --> 00:16:50,109
target environment.

470
00:16:50,940 --> 00:16:52,979
So that would then take those cloud cloud

471
00:16:52,979 --> 00:16:55,259
formation hooks they could evaluate it. So

472
00:16:55,259 --> 00:16:57,710
in this scenario, say if you are creating a 3 bucket

473
00:16:58,019 --> 00:17:00,058
right now you created a rule in

474
00:17:00,058 --> 00:17:01,038
this target environment,

475
00:17:01,700 --> 00:17:03,879
not. For your whole org

476
00:17:03,879 --> 00:17:05,529
which is scanning every template,

477
00:17:05,838 --> 00:17:08,279
but in the target environment where it says, well, here

478
00:17:08,279 --> 00:17:10,358
I actually want a very specific, say

479
00:17:10,358 --> 00:17:11,098
you're doing,

480
00:17:11,519 --> 00:17:13,759
uh, a federal type of

481
00:17:13,759 --> 00:17:15,880
project and then you need dual layer encryption

482
00:17:15,880 --> 00:17:17,920
so you can create a rule that says all my

483
00:17:17,920 --> 00:17:20,219
three buckets here need to have dual layer encryption

484
00:17:20,400 --> 00:17:22,420
and that hook will evaluate that using

485
00:17:22,420 --> 00:17:23,420
that. So then

486
00:17:24,039 --> 00:17:26,160
based on the past fail you can have a helpful

487
00:17:26,160 --> 00:17:27,578
message that then goes back

488
00:17:27,880 --> 00:17:28,559
to the developer.

489
00:17:31,949 --> 00:17:33,568
Immutable infrastructure

490
00:17:33,828 --> 00:17:35,969
means treating infrastructure as code

491
00:17:36,229 --> 00:17:38,189
that never changes after deployment.

492
00:17:39,509 --> 00:17:41,430
Basically no in-place updates.

493
00:17:42,039 --> 00:17:44,059
No infrastructure has worsened.

494
00:17:44,739 --> 00:17:46,608
And changes trigger new deployments.

495
00:17:47,809 --> 00:17:49,930
This eliminates unauthorized modifications,

496
00:17:50,170 --> 00:17:50,848
click ops.

497
00:17:51,608 --> 00:17:53,630
Ensures consistent security posture,

498
00:17:54,368 --> 00:17:55,809
provides clear audit trails,

499
00:17:56,250 --> 00:17:58,209
and enables rapid security responses.

500
00:17:59,900 --> 00:18:02,150
The idea is when you're doing cloud

501
00:18:02,150 --> 00:18:04,739
security scale, immutability, immutability

502
00:18:04,739 --> 00:18:07,130
transforms your infrastructure as a potential

503
00:18:07,269 --> 00:18:08,209
vulnerability.

504
00:18:09,118 --> 00:18:11,368
To a reliable security boundary.

505
00:18:13,650 --> 00:18:15,809
Now let's talk about data parameters where

506
00:18:15,809 --> 00:18:18,088
a lot of these things come together and something

507
00:18:18,088 --> 00:18:20,309
that we see a lot of customers at scale implement

508
00:18:20,489 --> 00:18:21,930
to reach their security objectives.

509
00:18:23,769 --> 00:18:24,368
Uh,

510
00:18:24,769 --> 00:18:25,828
so what is it

511
00:18:26,489 --> 00:18:28,568
before you build that firm boundary that

512
00:18:28,568 --> 00:18:29,689
I just put on the slide,

513
00:18:30,049 --> 00:18:32,239
you need to define what that means for your

514
00:18:32,239 --> 00:18:33,049
organization, right?

515
00:18:33,838 --> 00:18:35,559
What are the approved data patterns?

516
00:18:36,150 --> 00:18:38,180
And What is that do

517
00:18:38,180 --> 00:18:39,880
you trust something you own.

518
00:18:40,779 --> 00:18:43,199
Something that AWS owns on your behalf

519
00:18:43,390 --> 00:18:45,549
or something a third trusted third party owns

520
00:18:45,549 --> 00:18:47,660
for you. So

521
00:18:47,660 --> 00:18:49,439
in this case you have trusted identities,

522
00:18:49,789 --> 00:18:50,838
uh, resources,

523
00:18:51,180 --> 00:18:51,900
and networks.

524
00:18:55,689 --> 00:18:57,809
So let's look at some of the key objectives for data

525
00:18:57,809 --> 00:18:59,809
perimeter. As you

526
00:18:59,809 --> 00:19:00,689
can see here,

527
00:19:01,029 --> 00:19:03,068
these are the key objectives about who can access

528
00:19:03,068 --> 00:19:03,848
what from where

529
00:19:04,189 --> 00:19:06,150
defined by the different parameters of identity,

530
00:19:06,430 --> 00:19:07,469
network, and resource.

531
00:19:08,029 --> 00:19:10,568
The identity perimeter primarily mitigates

532
00:19:10,750 --> 00:19:12,989
uh unauthorized access by identities

533
00:19:12,989 --> 00:19:14,170
external to your organization.

534
00:19:15,029 --> 00:19:17,019
The resource perimeter uh

535
00:19:17,309 --> 00:19:19,578
um mitigates unintended data movement

536
00:19:19,868 --> 00:19:22,088
to resources outside of your organization

537
00:19:22,430 --> 00:19:24,469
and the network perimeter mitigates

538
00:19:24,469 --> 00:19:26,568
credential use outside of

539
00:19:26,709 --> 00:19:28,789
your uh corporate environment so for example.

540
00:19:30,430 --> 00:19:32,449
Now let's quickly look at how this is all worked

541
00:19:32,449 --> 00:19:33,000
together, right?

542
00:19:33,390 --> 00:19:35,489
So, hey, I have my trusted identity

543
00:19:35,709 --> 00:19:37,088
going to my trusted resource.

544
00:19:37,709 --> 00:19:39,809
Well, I'm fine, that's everything goes through,

545
00:19:40,269 --> 00:19:42,390
but hey, now I have untrusted identities

546
00:19:42,390 --> 00:19:44,390
like I work for a company, but I

547
00:19:44,390 --> 00:19:46,750
brought my own credentials from my AWS

548
00:19:46,750 --> 00:19:48,818
environment, personal envi environment, and I try to

549
00:19:48,818 --> 00:19:49,368
use it.

550
00:19:49,868 --> 00:19:51,868
Guess what? The identity perimeter is gonna block

551
00:19:51,868 --> 00:19:53,920
that. What about

552
00:19:53,920 --> 00:19:55,959
I go home using my company

553
00:19:55,959 --> 00:19:57,969
credentials and try to access those resources.

554
00:19:58,789 --> 00:19:59,939
My network parameter blocks out.

555
00:20:00,949 --> 00:20:02,989
And then I have my, I use my personal

556
00:20:02,989 --> 00:20:05,250
credentials trying to get to the trusted resource

557
00:20:05,868 --> 00:20:07,390
it blocks by the identity perimeter again.

558
00:20:08,219 --> 00:20:10,500
Now, say I'm working

559
00:20:10,500 --> 00:20:12,559
uh in my corporate environment

560
00:20:12,818 --> 00:20:13,759
and I'm trying to go

561
00:20:14,059 --> 00:20:16,098
to my own personality bucket, an exfiltration

562
00:20:16,098 --> 00:20:16,799
type of scenario.

563
00:20:18,380 --> 00:20:19,759
How do these parameters work?

564
00:20:20,219 --> 00:20:22,559
Well, if it is a, if you're trying to use your corporate,

565
00:20:22,598 --> 00:20:24,969
uh, uh, credentials and try to go to

566
00:20:24,969 --> 00:20:27,140
this non-corporate resources, the resource parameter

567
00:20:27,140 --> 00:20:27,939
will block it.

568
00:20:28,400 --> 00:20:30,618
Similarly, if you're trying to use your personal credentials, the

569
00:20:30,618 --> 00:20:31,759
identity perimeter,

570
00:20:32,140 --> 00:20:34,279
uh, but say you're coming from outside network

571
00:20:34,539 --> 00:20:36,779
and then trying to go to these resources, the network perimeter

572
00:20:36,779 --> 00:20:40,189
will block it. In

573
00:20:40,189 --> 00:20:41,009
this table

574
00:20:41,380 --> 00:20:43,588
you can see where the different data parameters

575
00:20:43,588 --> 00:20:44,410
are applied

576
00:20:44,799 --> 00:20:45,689
and the different

577
00:20:46,229 --> 00:20:46,930
appropriate

578
00:20:47,789 --> 00:20:48,989
policies that are used.

579
00:20:49,809 --> 00:20:51,750
And the primary IM features

580
00:20:52,328 --> 00:20:54,449
that are used for achieving the objectives

581
00:20:54,449 --> 00:20:55,289
of that perimeter.

582
00:20:57,299 --> 00:20:59,338
Uh, I hope this was, uh, I know this was a

583
00:20:59,338 --> 00:21:00,358
lot of information,

584
00:21:00,660 --> 00:21:01,348
and, uh,

585
00:21:01,618 --> 00:21:03,699
but I, I, I wanted to set you up with like

586
00:21:03,699 --> 00:21:06,059
some of the key characteristics we see of enterprise

587
00:21:06,059 --> 00:21:06,838
security at scale.

588
00:21:07,750 --> 00:21:10,068
Please welcome at this point Meta from Peter

589
00:21:10,068 --> 00:21:12,420
from Meta to come and talk about how

590
00:21:12,420 --> 00:21:14,670
they have built their cloud security at scale.

591
00:21:14,818 --> 00:21:19,578
Thank you. Great,

592
00:21:19,759 --> 00:21:20,439
thank you, Syed.

593
00:21:23,420 --> 00:21:25,779
So today I would like to talk about the uh

594
00:21:25,979 --> 00:21:27,318
scale challenge

595
00:21:27,779 --> 00:21:29,818
with Meta's cloud security reality.

596
00:21:30,660 --> 00:21:32,739
I'm pretty sure you've all thought

597
00:21:32,739 --> 00:21:34,078
about building for scale,

598
00:21:34,578 --> 00:21:35,900
but what does that mean?

599
00:21:37,009 --> 00:21:38,868
You know, being able to handle traffic

600
00:21:39,410 --> 00:21:41,699
on New Year's Day, on Christmas Eve,

601
00:21:42,049 --> 00:21:44,170
when everyone wants to connect all at the same

602
00:21:44,170 --> 00:21:45,729
time to your service.

603
00:21:46,640 --> 00:21:49,299
Today we're going to talk about building at meta-scale.

604
00:21:50,229 --> 00:21:52,318
And as you can imagine, operating at this

605
00:21:52,318 --> 00:21:54,299
scale comes with many challenges.

606
00:21:54,640 --> 00:21:56,799
So we'll start by digging into some of the

607
00:21:56,799 --> 00:21:58,380
interesting and unexpected things

608
00:21:58,719 --> 00:22:00,959
that happen with planet scale social media.

609
00:22:03,568 --> 00:22:05,930
Before we go deep into Mehta's cloud infrastructure,

610
00:22:06,199 --> 00:22:08,420
I want to take a moment to share Mehta's mission,

611
00:22:08,759 --> 00:22:10,858
which is to build the future of human connection

612
00:22:11,039 --> 00:22:12,858
and the technology that makes it possible.

613
00:22:14,670 --> 00:22:16,789
We've been a social technology company since

614
00:22:16,789 --> 00:22:17,489
day one,

615
00:22:18,029 --> 00:22:20,068
and our technology stack reflects this in

616
00:22:20,068 --> 00:22:20,750
many ways.

617
00:22:21,430 --> 00:22:24,289
Compared to much of the industry, we're contrarian,

618
00:22:24,989 --> 00:22:27,108
because the social connection tech

619
00:22:27,108 --> 00:22:28,969
problems we're trying to solve,

620
00:22:29,979 --> 00:22:32,140
Uh, our innovations

621
00:22:32,140 --> 00:22:33,959
give people new ways to connect,

622
00:22:34,338 --> 00:22:36,338
and we're committed to keep

623
00:22:36,338 --> 00:22:37,039
everyone safe,

624
00:22:37,299 --> 00:22:39,239
make a positive impact on the world.

625
00:22:42,068 --> 00:22:44,348
With 3.5 billion daily active

626
00:22:44,348 --> 00:22:44,900
users,

627
00:22:45,189 --> 00:22:47,250
the world relies on meta to connect

628
00:22:47,250 --> 00:22:48,250
and communicate.

629
00:22:49,000 --> 00:22:50,719
We have a truly global user base.

630
00:22:51,519 --> 00:22:53,920
And can't build with any certainty

631
00:22:53,920 --> 00:22:55,640
about who is connecting with whom.

632
00:22:58,088 --> 00:23:00,170
We were born a tech company and maintain

633
00:23:00,170 --> 00:23:02,170
an incredibly strong, bottoms up

634
00:23:02,170 --> 00:23:02,949
engineering culture.

635
00:23:04,229 --> 00:23:06,309
I don't really need to say that, we

636
00:23:06,309 --> 00:23:08,338
like to lead the development of emerging

637
00:23:08,338 --> 00:23:09,269
technologies

638
00:23:09,670 --> 00:23:11,868
such as mixed reality and open source

639
00:23:11,868 --> 00:23:13,949
AI. Today I'm

640
00:23:13,949 --> 00:23:15,318
happy to share some

641
00:23:15,759 --> 00:23:17,759
of the exciting work we're doing in expanding our

642
00:23:17,759 --> 00:23:18,459
infrastructure

643
00:23:18,868 --> 00:23:19,739
into AWS.

644
00:23:22,979 --> 00:23:25,170
Supporting 3.5 billion

645
00:23:25,170 --> 00:23:26,608
daily active users,

646
00:23:26,949 --> 00:23:29,029
with many generating content requires

647
00:23:29,029 --> 00:23:30,769
infrastructure at hyper scale.

648
00:23:31,618 --> 00:23:33,979
Social media workloads typically exhibit

649
00:23:33,979 --> 00:23:36,019
higher transaction rates than most

650
00:23:36,019 --> 00:23:38,019
large scale internet sites and

651
00:23:38,019 --> 00:23:38,539
systems.

652
00:23:39,289 --> 00:23:40,660
To me that's to be expected.

653
00:23:41,439 --> 00:23:43,848
With social media, the cost per transaction,

654
00:23:44,250 --> 00:23:46,430
such as liking a post or watching a video,

655
00:23:47,650 --> 00:23:49,969
Doesn't require movement of physical

656
00:23:49,969 --> 00:23:51,410
goods or the exchange of money.

657
00:23:52,430 --> 00:23:54,930
So the real world transaction cost is very low.

658
00:23:55,390 --> 00:23:57,430
We're not limited by the number of widgets in our

659
00:23:57,430 --> 00:23:58,910
e-commerce warehouse.

660
00:23:59,269 --> 00:24:01,269
We're not limited by the number of planes

661
00:24:01,269 --> 00:24:03,269
or seats or airport capacity.

662
00:24:05,000 --> 00:24:07,160
This means we see orders of magnitude

663
00:24:07,160 --> 00:24:09,160
higher transaction rates than most

664
00:24:09,160 --> 00:24:11,868
other global distributed computing platforms.

665
00:24:12,318 --> 00:24:14,328
Cap theorem is definitely in play here,

666
00:24:14,598 --> 00:24:16,680
and eventual consistency is something we think about

667
00:24:16,680 --> 00:24:17,358
a lot.

668
00:24:20,400 --> 00:24:22,539
Without the constraints of the physical world,

669
00:24:22,969 --> 00:24:25,118
our global user base loves connecting

670
00:24:25,118 --> 00:24:26,539
in unexpected ways.

671
00:24:26,959 --> 00:24:28,959
Our systems support diverse security,

672
00:24:29,160 --> 00:24:31,670
data and privacy compliance requirements.

673
00:24:32,630 --> 00:24:35,189
We've made huge investments in developing a privacy

674
00:24:35,189 --> 00:24:36,229
aware infrastructure.

675
00:24:37,400 --> 00:24:39,549
It builds on each request's context

676
00:24:39,729 --> 00:24:41,910
and applies privacy policies in real time.

677
00:24:42,719 --> 00:24:45,140
This enables teams to programmatically define

678
00:24:45,680 --> 00:24:46,719
the who, what,

679
00:24:46,979 --> 00:24:49,000
when and where their service should

680
00:24:49,000 --> 00:24:50,719
be called and data should flow.

681
00:24:52,150 --> 00:24:54,150
Meta deals with these unique requirements

682
00:24:54,150 --> 00:24:56,759
by building a globally consistent graph database.

683
00:24:58,199 --> 00:25:00,239
There are not many workloads that need this kind

684
00:25:00,239 --> 00:25:02,318
of infrastructure, and you can find research

685
00:25:02,318 --> 00:25:04,318
papers about how we did this if you

686
00:25:04,318 --> 00:25:05,380
look up the tower system.

687
00:25:09,189 --> 00:25:11,449
Meta is building innovative experiences

688
00:25:11,549 --> 00:25:13,729
that are at the forefront of reimagining

689
00:25:13,979 --> 00:25:15,469
the way we interact in community.

690
00:25:16,719 --> 00:25:18,779
Building systems that power

691
00:25:18,779 --> 00:25:20,779
experiences like mixed reality and

692
00:25:20,779 --> 00:25:22,818
open source foundational models

693
00:25:22,818 --> 00:25:24,078
require new approaches

694
00:25:24,380 --> 00:25:26,420
to scalability and the secure handling of

695
00:25:26,420 --> 00:25:26,959
data.

696
00:25:27,380 --> 00:25:29,979
We're working on solving these challenges at the infrastructure

697
00:25:29,979 --> 00:25:33,838
level. Meta's

698
00:25:33,838 --> 00:25:35,880
strong engineering culture means we continue

699
00:25:35,880 --> 00:25:36,618
to focus

700
00:25:37,000 --> 00:25:39,439
on building highly scalable, hyperscale

701
00:25:39,439 --> 00:25:40,219
infrastructure.

702
00:25:40,989 --> 00:25:42,608
We're already a hyper-scaler,

703
00:25:42,949 --> 00:25:45,420
and we continue investing in our own data centers,

704
00:25:45,750 --> 00:25:47,969
backbone cables, and edge connectivity.

705
00:25:48,469 --> 00:25:50,549
It's these kind of investments that let us do

706
00:25:50,549 --> 00:25:52,630
things like launching the Threads app to

707
00:25:52,630 --> 00:25:54,608
100 million users in the first week.

708
00:25:55,309 --> 00:25:57,348
Without this kind of infrastructure, it

709
00:25:57,348 --> 00:25:58,199
wouldn't be possible.

710
00:25:59,509 --> 00:26:01,368
But even that's not enough

711
00:26:01,709 --> 00:26:02,348
for AI.

712
00:26:03,318 --> 00:26:04,920
So we're doing hybrid cloud.

713
00:26:05,969 --> 00:26:07,618
And on a big scale.

714
00:26:08,559 --> 00:26:10,719
We terminate direct connect fiber in our own

715
00:26:10,719 --> 00:26:11,358
premises.

716
00:26:12,009 --> 00:26:14,500
And we already have a security infrastructure

717
00:26:14,500 --> 00:26:15,088
available.

718
00:26:15,838 --> 00:26:17,959
This gives us confidence to push further into

719
00:26:17,959 --> 00:26:18,519
the cloud.

720
00:26:19,469 --> 00:26:21,519
And a lot of the security assumptions

721
00:26:21,519 --> 00:26:22,578
we've already made

722
00:26:22,880 --> 00:26:23,818
help us work

723
00:26:24,279 --> 00:26:26,469
and keep our infrastructure secure

724
00:26:26,469 --> 00:26:27,640
across multiple clouds.

725
00:26:30,900 --> 00:26:33,368
Meta has been the forefront of AI

726
00:26:33,368 --> 00:26:34,949
application research for many years.

727
00:26:35,410 --> 00:26:37,449
It started with ranking content on

728
00:26:37,449 --> 00:26:39,969
the news feed and following Instagram reels.

729
00:26:40,858 --> 00:26:41,539
Uh,

730
00:26:41,858 --> 00:26:44,140
we, uh, we then doubled down on GPU

731
00:26:44,140 --> 00:26:45,439
infrastructure buildouts.

732
00:26:45,818 --> 00:26:47,900
In 2022, that was the year

733
00:26:47,900 --> 00:26:49,400
of the large language models,

734
00:26:50,059 --> 00:26:52,229
with Meta entering the race with our LA

735
00:26:52,689 --> 00:26:55,568
system. Successive

736
00:26:55,568 --> 00:26:58,098
llama versions were trained on our own infrastructure,

737
00:26:58,358 --> 00:27:00,358
and as we've seen in the media, Mark has

738
00:27:00,358 --> 00:27:01,059
launched

739
00:27:01,479 --> 00:27:03,660
our Super intelligence Labs initiative.

740
00:27:04,809 --> 00:27:06,848
We're in the process of building out our

741
00:27:06,848 --> 00:27:08,588
class leading Prometheus

742
00:27:08,900 --> 00:27:09,969
1 gigawatt

743
00:27:10,250 --> 00:27:12,650
and Hyperion 5 gigawatt

744
00:27:12,650 --> 00:27:13,489
superclusters.

745
00:27:14,390 --> 00:27:16,588
Even with all these efforts, we have AI

746
00:27:16,588 --> 00:27:17,689
research workloads

747
00:27:18,068 --> 00:27:19,769
that still need more capacity

748
00:27:20,108 --> 00:27:22,229
and feature job sizes that

749
00:27:22,229 --> 00:27:24,529
are well suited to GPU capacity in the cloud.

750
00:27:26,469 --> 00:27:28,979
These jobs don't need the hyperscale contiguous

751
00:27:28,979 --> 00:27:29,818
clusters

752
00:27:30,180 --> 00:27:32,118
we are building in our own data centers.

753
00:27:32,539 --> 00:27:34,279
In this talk, we'll go deeper

754
00:27:34,660 --> 00:27:36,689
on what makes Metas cloud

755
00:27:36,689 --> 00:27:38,858
deployments unique and how we set up our

756
00:27:38,858 --> 00:27:40,239
AWS architecture

757
00:27:40,739 --> 00:27:42,019
to securely scale.

758
00:27:45,400 --> 00:27:47,170
A bit of background on meta now.

759
00:27:47,608 --> 00:27:49,729
Most meta software engineering teams

760
00:27:49,729 --> 00:27:50,769
develop systems

761
00:27:51,088 --> 00:27:53,630
that run in our existing hyperscale container

762
00:27:53,630 --> 00:27:54,209
environments.

763
00:27:54,989 --> 00:27:57,068
These are well suited to the small web

764
00:27:57,068 --> 00:27:59,029
requests that we see from the family of apps.

765
00:28:00,439 --> 00:28:02,640
Meta does run significant compute workloads

766
00:28:02,640 --> 00:28:03,618
in the cloud as well.

767
00:28:04,368 --> 00:28:06,380
The Cloud Foundation team is Mehta's team

768
00:28:06,380 --> 00:28:07,598
of cloud experts

769
00:28:07,900 --> 00:28:09,078
who are responsible

770
00:28:09,459 --> 00:28:11,459
for low level infrastructure such as

771
00:28:11,459 --> 00:28:12,299
transit accounts,

772
00:28:12,618 --> 00:28:13,699
direct connect links,

773
00:28:14,390 --> 00:28:16,719
Um, and building systems that enable

774
00:28:16,719 --> 00:28:17,818
efficient enforcement

775
00:28:18,189 --> 00:28:19,759
of cloud security standards.

776
00:28:20,910 --> 00:28:22,949
We help facilitate cloud usage across the

777
00:28:22,949 --> 00:28:23,608
business

778
00:28:23,949 --> 00:28:26,130
and we've built an infrastructure fabric layer

779
00:28:26,189 --> 00:28:28,729
that provides identity, authentication,

780
00:28:29,289 --> 00:28:30,529
public key infrastructure,

781
00:28:30,809 --> 00:28:32,828
metrics, monitoring, and a host of other

782
00:28:32,828 --> 00:28:33,709
support services.

783
00:28:34,390 --> 00:28:36,509
Our team accelerates efficient and conformant

784
00:28:36,509 --> 00:28:38,150
use of the cloud

785
00:28:38,519 --> 00:28:40,900
resources. We build, we

786
00:28:40,900 --> 00:28:43,000
provide building blocks such as prepackaged

787
00:28:43,000 --> 00:28:43,729
AMI's,

788
00:28:44,019 --> 00:28:45,338
Kubernetes images,

789
00:28:45,769 --> 00:28:47,180
uh, and a build pipeline.

790
00:28:48,229 --> 00:28:50,890
This helps our software feature teams to automatically

791
00:28:50,890 --> 00:28:53,539
support our privacy aware infrastructure

792
00:28:53,539 --> 00:28:55,618
constructs and stay secure and

793
00:28:55,618 --> 00:28:57,039
compliant while moving

794
00:28:57,459 --> 00:29:01,680
quickly. As

795
00:29:01,680 --> 00:29:04,000
we've expanded beyond our own data centers,

796
00:29:04,318 --> 00:29:05,459
the network edge

797
00:29:05,759 --> 00:29:07,759
no longer provides a strong data boundary.

798
00:29:08,578 --> 00:29:10,910
And we increasingly rely on a sophisticated

799
00:29:10,910 --> 00:29:12,009
identity system

800
00:29:12,420 --> 00:29:14,660
to grant least privileged access to user

801
00:29:14,660 --> 00:29:15,949
and service roles.

802
00:29:16,348 --> 00:29:18,368
We have a centralized IAM system.

803
00:29:19,199 --> 00:29:21,368
That is integrated across all of our internal

804
00:29:21,368 --> 00:29:22,029
systems.

805
00:29:22,449 --> 00:29:24,630
We use role-based access control,

806
00:29:24,930 --> 00:29:26,809
for granting only a minimal set

807
00:29:27,140 --> 00:29:29,309
of capabilities required to

808
00:29:29,309 --> 00:29:30,509
execute the workload

809
00:29:30,969 --> 00:29:32,189
or administrative task.

810
00:29:33,689 --> 00:29:35,439
We use machine attestation

811
00:29:35,769 --> 00:29:37,799
to ensure the integrity of the host,

812
00:29:38,130 --> 00:29:40,390
and as input to generate short-lived

813
00:29:40,390 --> 00:29:41,890
role specific credentials.

814
00:29:42,279 --> 00:29:44,689
Short-lived credentials reduce the blast radius

815
00:29:44,689 --> 00:29:45,509
of lost

816
00:29:45,848 --> 00:29:47,890
or stale credentials and reduce

817
00:29:47,890 --> 00:29:49,670
the need for complex revocation,

818
00:29:50,380 --> 00:29:52,640
And untimely renewal.

819
00:29:53,959 --> 00:29:56,160
We stream cloud trail and other AWS

820
00:29:56,160 --> 00:29:58,779
logs into Metas production infrastructure

821
00:29:59,078 --> 00:30:01,118
and scan for anomalies in real time.

822
00:30:01,910 --> 00:30:04,420
A strong identity and public key infrastructure

823
00:30:04,719 --> 00:30:06,818
gives us the confidence to extend our network

824
00:30:07,239 --> 00:30:09,509
into the cloud and support these workloads

825
00:30:09,509 --> 00:30:10,118
on demand.

826
00:30:13,779 --> 00:30:16,279
Auth-D is our credential vending service.

827
00:30:16,618 --> 00:30:18,779
It abstracts away the different credential

828
00:30:18,779 --> 00:30:20,650
and token retrieval mechanisms

829
00:30:21,098 --> 00:30:22,140
across different clouds.

830
00:30:23,039 --> 00:30:24,059
When a request

831
00:30:24,640 --> 00:30:27,219
comes in from a Metaprod user or system,

832
00:30:27,640 --> 00:30:29,799
Authteer receives a service call with a cloud

833
00:30:29,799 --> 00:30:30,699
account ID,

834
00:30:30,959 --> 00:30:33,439
a role and some associated identities.

835
00:30:34,309 --> 00:30:35,739
At the auth checking step,

836
00:30:36,130 --> 00:30:38,479
we validate that the requested

837
00:30:38,479 --> 00:30:39,500
resources exist

838
00:30:39,959 --> 00:30:41,098
in the cloud account.

839
00:30:42,130 --> 00:30:44,598
And check if the request is allowed by policies

840
00:30:45,098 --> 00:30:47,118
stored in our internal AM system.

841
00:30:48,150 --> 00:30:50,160
If the checks fail, we return an author

842
00:30:50,160 --> 00:30:51,449
permissions error.

843
00:30:53,259 --> 00:30:54,880
If the request is approved,

844
00:30:55,259 --> 00:30:57,420
we retrieve the credentials from the cloud service

845
00:30:57,420 --> 00:30:58,000
provider.

846
00:30:58,380 --> 00:31:00,380
This is a step where we translate

847
00:31:00,660 --> 00:31:02,818
between internal security constructs and

848
00:31:02,818 --> 00:31:04,818
different types of credentials you need in

849
00:31:04,818 --> 00:31:05,338
the cloud.

850
00:31:07,189 --> 00:31:09,400
In the case of AWS, this might

851
00:31:09,400 --> 00:31:12,199
be, might take the form of STS

852
00:31:12,199 --> 00:31:12,719
tokens,

853
00:31:13,160 --> 00:31:14,489
uh Kubernetes tokens,

854
00:31:14,799 --> 00:31:16,400
or even SSH certificates.

855
00:31:17,289 --> 00:31:19,890
In many cases we generate a set of credentials

856
00:31:20,098 --> 00:31:22,318
that are only used for that specific request.

857
00:31:22,769 --> 00:31:25,199
This gives us full end to end traceability

858
00:31:25,420 --> 00:31:27,838
of each user session or job creation,

859
00:31:28,088 --> 00:31:30,338
which is crucial for maintaining our data

860
00:31:30,338 --> 00:31:30,920
lineage.

861
00:31:32,789 --> 00:31:33,618
I'll cover data controls

862
00:31:34,910 --> 00:31:36,650
and share an example of how

863
00:31:37,189 --> 00:31:39,348
our privacy aware architecture maintains

864
00:31:39,348 --> 00:31:41,588
context as data is processed.

865
00:31:43,489 --> 00:31:45,650
If assembling the credential package fails,

866
00:31:46,049 --> 00:31:47,868
we return a service error to the user.

867
00:31:48,390 --> 00:31:50,549
We have a standardized error categories,

868
00:31:50,969 --> 00:31:51,729
um,

869
00:31:52,640 --> 00:31:54,709
Of permissions, service, or cloud errors,

870
00:31:54,838 --> 00:31:57,108
allowing exceptions to be handled correctly

871
00:31:57,209 --> 00:31:58,348
and if necessary,

872
00:31:58,680 --> 00:31:59,430
routed

873
00:31:59,848 --> 00:32:01,449
uh to the correct service teams.

874
00:32:02,969 --> 00:32:05,019
Once the user has the correct credential package,

875
00:32:05,410 --> 00:32:07,680
they can assume the temporary role with

876
00:32:07,680 --> 00:32:09,759
the permissions needed to access their cloud

877
00:32:09,759 --> 00:32:10,439
resources.

878
00:32:10,880 --> 00:32:13,380
The user then calls assume role with SAML

879
00:32:13,680 --> 00:32:15,680
and starts their SSH session or

880
00:32:15,680 --> 00:32:16,618
executes their job.

881
00:32:18,140 --> 00:32:20,180
Cloud Foundation maintains building blocks

882
00:32:20,180 --> 00:32:22,118
to refresh credentials as required.

883
00:32:22,660 --> 00:32:24,269
This setup works well for us

884
00:32:24,699 --> 00:32:26,779
because we have a highly technical teams

885
00:32:26,779 --> 00:32:28,959
using the cloud, and this extra layer of

886
00:32:28,959 --> 00:32:29,598
complexity

887
00:32:29,900 --> 00:32:32,059
pays off in the time saved in

888
00:32:32,059 --> 00:32:34,180
maintaining static credentials and

889
00:32:34,180 --> 00:32:35,459
doing on-demand rotation.

890
00:32:39,130 --> 00:32:41,650
Meta has a fairly unique IPV6

891
00:32:41,650 --> 00:32:42,709
only infrastructure.

892
00:32:43,430 --> 00:32:45,640
And we, and what we save on

893
00:32:45,640 --> 00:32:48,568
NAT and IP address space exhaustion calculations,

894
00:32:48,920 --> 00:32:50,838
we spend on BGP infrastructure.

895
00:32:52,160 --> 00:32:54,318
That optimizes routing tables and

896
00:32:54,318 --> 00:32:55,459
makes sure that they're not

897
00:32:55,759 --> 00:32:57,318
too big for the routers to support.

898
00:32:58,299 --> 00:33:00,299
We do still have some networking controls at

899
00:33:00,299 --> 00:33:01,000
scale,

900
00:33:01,670 --> 00:33:04,059
and we do our best to enforce a one workload

901
00:33:04,059 --> 00:33:05,459
per cloud account policy.

902
00:33:06,269 --> 00:33:08,969
This automatically gives us VPC isolation

903
00:33:09,469 --> 00:33:11,910
between workloads and cloud Foundation maintains

904
00:33:11,910 --> 00:33:14,088
transit and common service VPCs

905
00:33:14,309 --> 00:33:15,289
in separate accounts.

906
00:33:16,759 --> 00:33:18,799
We pay a lot of attention to strict

907
00:33:18,799 --> 00:33:20,799
internet ingress and egress controls,

908
00:33:21,160 --> 00:33:23,618
which helps immensely with maintaining data lineage

909
00:33:23,799 --> 00:33:25,439
for our privacy aware infrastructure.

910
00:33:27,189 --> 00:33:29,309
We grant east-west connectivity between

911
00:33:29,309 --> 00:33:30,848
VPC's quite liberally,

912
00:33:31,469 --> 00:33:32,049
um,

913
00:33:32,549 --> 00:33:34,709
and this helps us enforce the one workload per

914
00:33:34,709 --> 00:33:36,430
account rule by not um,

915
00:33:37,439 --> 00:33:39,769
Restricting those connections too seriously.

916
00:33:40,739 --> 00:33:42,979
As you'll see coming up, even with IPV6

917
00:33:42,979 --> 00:33:43,539
everywhere,

918
00:33:43,818 --> 00:33:45,939
we still have quite a lot of subnet complexity.

919
00:33:49,799 --> 00:33:52,328
Meta uses IPV6 everywhere.

920
00:33:53,000 --> 00:33:55,318
It starts with multiple public slash 32

921
00:33:55,318 --> 00:33:55,959
rangers.

922
00:33:56,670 --> 00:33:58,709
There's a lot of addresses, and I won't try

923
00:33:58,709 --> 00:34:00,640
to make sense of the number of zeros today,

924
00:34:00,910 --> 00:34:03,348
but it's more IP addresses than grains of sand

925
00:34:03,348 --> 00:34:03,930
on Earth.

926
00:34:04,890 --> 00:34:06,769
We don't need to worry about running out.

927
00:34:07,289 --> 00:34:09,398
With this many addresses, we can allocate a slash

928
00:34:09,398 --> 00:34:10,769
62 per host,

929
00:34:11,050 --> 00:34:13,409
and we even allocate one IP per Tupperware

930
00:34:13,409 --> 00:34:14,030
task.

931
00:34:14,570 --> 00:34:16,909
This is our equivalent of a Kubernetes task.

932
00:34:18,119 --> 00:34:20,119
So this means anything running on the

933
00:34:20,119 --> 00:34:22,398
meta infrastructure can route to any

934
00:34:22,398 --> 00:34:23,909
device or other task,

935
00:34:24,239 --> 00:34:26,489
and we have no more IP address conflicts

936
00:34:26,639 --> 00:34:27,898
or NAT running in the network.

937
00:34:28,898 --> 00:34:31,679
The trade-off here is a huge BGP infrastructure

938
00:34:32,418 --> 00:34:34,458
where we manage routing tables and make sure we

939
00:34:34,458 --> 00:34:36,478
don't exceed the capability of the physical

940
00:34:36,478 --> 00:34:37,059
routers.

941
00:34:37,728 --> 00:34:39,188
This is even more of a problem

942
00:34:39,489 --> 00:34:41,728
with some of the cloud providers who limit the number of static

943
00:34:41,728 --> 00:34:43,947
routes we can use per account or

944
00:34:43,947 --> 00:34:44,688
per VPC.

945
00:34:45,498 --> 00:34:46,798
However, on the whole,

946
00:34:47,177 --> 00:34:49,498
being able to extend our layer 3 network

947
00:34:49,498 --> 00:34:51,637
all the way through to a cloud VPC

948
00:34:52,048 --> 00:34:53,079
is really nice.

949
00:34:53,657 --> 00:34:55,688
We can then let network engineering manage

950
00:34:55,688 --> 00:34:56,717
direct connect links

951
00:34:57,059 --> 00:34:59,137
and decide whether traffic is routed over

952
00:34:59,137 --> 00:35:00,697
direct connect, VPN

953
00:35:01,059 --> 00:35:03,358
or over the internet into our cloud infrastructure.

954
00:35:07,010 --> 00:35:09,269
One last thing before we get to the interesting stuff,

955
00:35:09,489 --> 00:35:11,489
I have a couple of infrastructure assumptions to go

956
00:35:11,489 --> 00:35:14,000
over. Cloud Foundation

957
00:35:14,000 --> 00:35:16,280
provides something of a managed experience to cloud

958
00:35:16,280 --> 00:35:17,840
consumer teams within Meta.

959
00:35:19,239 --> 00:35:21,280
Working with our security teams, we've set up

960
00:35:21,280 --> 00:35:23,360
some fairly strict rules about how they're

961
00:35:23,360 --> 00:35:24,360
allowed to use the cloud.

962
00:35:25,260 --> 00:35:27,780
Some of these come from protecting our digital assets

963
00:35:28,099 --> 00:35:30,219
and others from hard lessons learned when scaling

964
00:35:30,219 --> 00:35:31,559
up the number of people

965
00:35:31,860 --> 00:35:33,619
maintaining specific accounts.

966
00:35:34,378 --> 00:35:36,500
We only allow our cloud consumers to view

967
00:35:36,500 --> 00:35:37,760
their accounts from the console.

968
00:35:38,648 --> 00:35:41,250
We're pretty strict about enforcing the use of infrastructure

969
00:35:41,250 --> 00:35:41,909
as code.

970
00:35:42,829 --> 00:35:44,840
Through terraform modules and integration

971
00:35:44,840 --> 00:35:47,079
we built into Meta's main CICD

972
00:35:47,079 --> 00:35:49,179
system. Terraform

973
00:35:49,179 --> 00:35:51,289
code allows the same peer review

974
00:35:51,289 --> 00:35:51,860
processes

975
00:35:52,228 --> 00:35:54,699
as all other code going into our mono repository.

976
00:35:55,628 --> 00:35:57,688
We're making progress towards real continuous

977
00:35:57,688 --> 00:35:58,449
deployment

978
00:35:58,949 --> 00:36:00,179
of terraform code,

979
00:36:00,469 --> 00:36:02,708
and several of our large scale systems

980
00:36:02,708 --> 00:36:04,969
are called terraform apply every 2 hours.

981
00:36:06,750 --> 00:36:08,789
We use service gating on production accounts

982
00:36:08,789 --> 00:36:10,809
to ensure we've got internal support

983
00:36:10,949 --> 00:36:13,510
for new or complex AWS services

984
00:36:13,958 --> 00:36:16,110
before, before letting our customers go

985
00:36:16,110 --> 00:36:18,139
wild. When teams

986
00:36:18,139 --> 00:36:20,340
just need to experiment, we offer short-lived

987
00:36:20,340 --> 00:36:21,418
sandbox accounts.

988
00:36:22,208 --> 00:36:22,800
Um,

989
00:36:23,369 --> 00:36:25,530
which we automatically isolate at

990
00:36:25,530 --> 00:36:26,550
the two week mark.

991
00:36:27,860 --> 00:36:30,019
We also offer Meta Instance,

992
00:36:30,260 --> 00:36:32,458
which is a nicely prepackaged AMI

993
00:36:33,139 --> 00:36:35,139
that carries all the software

994
00:36:35,139 --> 00:36:37,409
necessary to connect back into meta-services,

995
00:36:37,860 --> 00:36:40,010
providing things like identity, logging,

996
00:36:40,300 --> 00:36:42,840
metrics, and service registration

997
00:36:42,840 --> 00:36:44,079
right out of the box for free.

998
00:36:47,199 --> 00:36:49,208
Robust encryption controls are a key

999
00:36:49,208 --> 00:36:51,728
factor in building our confidence in moving workloads

1000
00:36:51,728 --> 00:36:52,269
to the cloud.

1001
00:36:53,228 --> 00:36:55,429
I won't go into too much detail here, but

1002
00:36:55,429 --> 00:36:58,289
it's important to know that these exist within our infrastructure

1003
00:36:58,550 --> 00:37:00,860
and are critical in enabling rapid build-out

1004
00:37:00,860 --> 00:37:01,909
of our cloud capacity.

1005
00:37:02,750 --> 00:37:04,938
Our internal public key infrastructure

1006
00:37:04,938 --> 00:37:06,668
includes multiple route CAs

1007
00:37:07,030 --> 00:37:08,550
and a cloud specific CA

1008
00:37:08,869 --> 00:37:10,969
so we can track where certificates are used,

1009
00:37:11,269 --> 00:37:14,168
and prevent them from passing between infrastructure,

1010
00:37:14,628 --> 00:37:17,090
um, Infrastructure boundaries.

1011
00:37:18,250 --> 00:37:20,668
We use EC2 instance attestation

1012
00:37:20,929 --> 00:37:23,489
to generate X509 machine certificates

1013
00:37:23,809 --> 00:37:25,889
that allow us to trust the hardware and

1014
00:37:25,889 --> 00:37:27,530
operating system environments.

1015
00:37:27,969 --> 00:37:30,128
By regularly regenerating these certificates,

1016
00:37:30,250 --> 00:37:32,250
we can tell if anything changed on the hardware

1017
00:37:32,250 --> 00:37:32,929
or firmware.

1018
00:37:34,969 --> 00:37:37,369
We secure all connections with mutual TLS

1019
00:37:37,648 --> 00:37:40,070
ensuring both ends of the connection are verified

1020
00:37:40,070 --> 00:37:42,489
and helping to mitigate men in the middle attacks.

1021
00:37:43,280 --> 00:37:45,820
Our direct connect links are encrypted using Macsec

1022
00:37:45,820 --> 00:37:46,519
at layer 2.

1023
00:37:49,958 --> 00:37:52,119
With the building blocks covered, let's dive into our

1024
00:37:52,119 --> 00:37:52,739
case study.

1025
00:37:54,139 --> 00:37:54,739
Uh

1026
00:37:55,510 --> 00:37:57,500
Of building a secure AI cluster

1027
00:37:57,949 --> 00:37:58,860
on AWS.

1028
00:38:00,059 --> 00:38:02,059
There are several unique challenges with AI

1029
00:38:02,059 --> 00:38:04,559
clusters due to the GPU scarcity

1030
00:38:04,938 --> 00:38:07,099
and the large volumes of data

1031
00:38:07,099 --> 00:38:07,760
transfer

1032
00:38:08,059 --> 00:38:10,260
needed to run some of these mega-scale clusters.

1033
00:38:10,969 --> 00:38:13,340
We also don't need the same level of resiliency

1034
00:38:13,340 --> 00:38:14,360
and availability

1035
00:38:14,780 --> 00:38:17,059
that come from service serving

1036
00:38:17,059 --> 00:38:18,239
online production traffic.

1037
00:38:18,878 --> 00:38:21,039
It's a bit of an all or nothing situation here.

1038
00:38:21,809 --> 00:38:23,929
Is there any point in having a data store

1039
00:38:23,929 --> 00:38:25,929
available when the GPUs that are paired with

1040
00:38:25,929 --> 00:38:27,289
it have gone offline?

1041
00:38:28,340 --> 00:38:29,320
I don't think so.

1042
00:38:29,820 --> 00:38:32,119
We don't really get to dictate which AZ

1043
00:38:32,119 --> 00:38:34,260
the GPUs are delivered in due

1044
00:38:34,260 --> 00:38:36,059
to physical space and power constraints.

1045
00:38:36,869 --> 00:38:39,148
So we've set up our infrastructure for rapid

1046
00:38:39,148 --> 00:38:41,228
deployment of AI clusters and

1047
00:38:41,228 --> 00:38:43,418
we don't allow AI training jobs

1048
00:38:43,619 --> 00:38:44,949
to span multiple clusters.

1049
00:38:46,418 --> 00:38:48,500
Researchers also have unique needs.

1050
00:38:49,208 --> 00:38:51,179
They often work via an interactive session.

1051
00:38:52,760 --> 00:38:54,969
Uh, on the same host as the physical hardware.

1052
00:38:55,478 --> 00:38:57,800
They often schedule packs of slurm jobs

1053
00:38:57,800 --> 00:38:59,699
across large blocks of GPU capacity.

1054
00:39:00,708 --> 00:39:02,949
They collaborate directly with other researchers

1055
00:39:02,949 --> 00:39:05,429
and frequently exchange code via GitHub,

1056
00:39:06,030 --> 00:39:07,139
um, GitHub.

1057
00:39:07,590 --> 00:39:10,070
They may need to pull in datasets from the public

1058
00:39:10,070 --> 00:39:12,329
internet and in short, they need

1059
00:39:12,679 --> 00:39:15,349
easy access to the internet while safeguarding

1060
00:39:15,349 --> 00:39:17,389
against leaking weights and biases

1061
00:39:17,389 --> 00:39:18,369
or finished models.

1062
00:39:19,250 --> 00:39:21,289
Now I'll go into more detail about how we build

1063
00:39:21,289 --> 00:39:22,889
out this secure infrastructure.

1064
00:39:26,039 --> 00:39:28,280
We'll start this picture with the meta production

1065
00:39:28,280 --> 00:39:29,000
data centers.

1066
00:39:29,769 --> 00:39:32,110
Reduced to 2 here for simplicity,

1067
00:39:32,329 --> 00:39:34,369
and because my slide just isn't quite big

1068
00:39:34,369 --> 00:39:36,449
enough. You'll

1069
00:39:36,449 --> 00:39:38,449
hear more about that theme quite a bit as we go

1070
00:39:38,449 --> 00:39:39,550
into the details here.

1071
00:39:40,539 --> 00:39:42,869
There are quite, uh, these are quite monumental by

1072
00:39:42,869 --> 00:39:43,449
themselves.

1073
00:39:43,829 --> 00:39:46,228
You can consider these analogous to AWS

1074
00:39:46,228 --> 00:39:46,869
regions,

1075
00:39:47,269 --> 00:39:50,019
um, with multiple physical data centers

1076
00:39:50,019 --> 00:39:51,889
within those two purple boxes.

1077
00:39:53,929 --> 00:39:56,289
We terminate our own fiber in the data centers

1078
00:39:56,659 --> 00:39:58,849
and there's no co-location facilities

1079
00:39:58,989 --> 00:40:00,628
in this left side of the diagram.

1080
00:40:03,168 --> 00:40:05,688
Then we have our shiny new GPU hosts

1081
00:40:06,010 --> 00:40:08,349
delivered by Amazon as reserved instances

1082
00:40:08,530 --> 00:40:10,110
in a particular availability zone.

1083
00:40:10,918 --> 00:40:12,958
The location of the GPUs and accompanying

1084
00:40:12,958 --> 00:40:15,438
storage hosts dictates which AZ

1085
00:40:15,918 --> 00:40:17,978
we build out the rest of the infrastructure.

1086
00:40:18,478 --> 00:40:20,639
When the hosts land, our automated tooling

1087
00:40:20,639 --> 00:40:23,079
sets up the EKS HPC cluster

1088
00:40:23,559 --> 00:40:25,599
control plane and validates the GPU pods and

1089
00:40:25,599 --> 00:40:26,619
login pods

1090
00:40:26,878 --> 00:40:28,800
used by the AI researchers.

1091
00:40:29,800 --> 00:40:31,958
The GPU hosts are not directly on the

1092
00:40:31,958 --> 00:40:34,369
internet, rather we pair this VPC

1093
00:40:34,878 --> 00:40:36,199
with a management VPC.

1094
00:40:37,769 --> 00:40:40,239
This hosts internet connectivity bits,

1095
00:40:40,260 --> 00:40:41,349
like routers,

1096
00:40:41,929 --> 00:40:42,728
firewalls.

1097
00:40:44,750 --> 00:40:46,340
Uh, a route 53.

1098
00:40:47,159 --> 00:40:49,119
Uh, private hosted zone,

1099
00:40:49,438 --> 00:40:51,059
bastions and proxies,

1100
00:40:51,360 --> 00:40:52,139
allowing access

1101
00:40:52,559 --> 00:40:55,000
to other parts of the infrastructure and management

1102
00:40:55,000 --> 00:40:56,688
services for the GPU cluster.

1103
00:40:59,570 --> 00:41:02,199
You might have seen this architecture at

1104
00:41:02,199 --> 00:41:04,039
our previous reinforced talks

1105
00:41:04,378 --> 00:41:06,659
with a new bit today which is the storage

1106
00:41:06,659 --> 00:41:07,280
VPC.

1107
00:41:08,648 --> 00:41:10,728
GPUs might be the brains of AI,

1108
00:41:11,250 --> 00:41:13,449
but the storage is the heart and the circulatory

1109
00:41:13,449 --> 00:41:15,789
system. The

1110
00:41:15,789 --> 00:41:17,889
the latest GPUs demand very high

1111
00:41:17,889 --> 00:41:19,889
bandwidth and low latency data

1112
00:41:19,889 --> 00:41:22,389
access to maintain high utilization.

1113
00:41:22,929 --> 00:41:25,019
This means this is no mean feat in a general

1114
00:41:25,019 --> 00:41:26,139
purpose public cloud

1115
00:41:26,699 --> 00:41:29,489
without access to the specialty hardware, storage

1116
00:41:29,489 --> 00:41:31,489
and networking tricks that we get to

1117
00:41:31,489 --> 00:41:33,070
do within our own data centers.

1118
00:41:33,789 --> 00:41:35,829
This is especially critical when running

1119
00:41:35,829 --> 00:41:38,510
clusters of 10,000 or more GPUs,

1120
00:41:38,869 --> 00:41:41,389
uh, on many petabytes of data

1121
00:41:41,389 --> 00:41:43,289
spread across smallish files.

1122
00:41:43,989 --> 00:41:46,628
We've had a lot of challenges with the file system metadata

1123
00:41:46,628 --> 00:41:49,039
performance. Such

1124
00:41:49,039 --> 00:41:51,570
as just listing the contents of directories,

1125
00:41:52,148 --> 00:41:54,168
creating a separate storage VPC

1126
00:41:54,550 --> 00:41:56,708
and dedicating a team of engineers

1127
00:41:56,708 --> 00:41:57,458
to the space,

1128
00:41:57,789 --> 00:41:58,949
we've been able to test,

1129
00:41:59,228 --> 00:42:00,019
benchmark,

1130
00:42:00,389 --> 00:42:02,429
and tune many different flavors of

1131
00:42:02,429 --> 00:42:03,119
S3,

1132
00:42:03,389 --> 00:42:04,969
S3 Express one zone,

1133
00:42:05,389 --> 00:42:06,168
FSX,

1134
00:42:06,478 --> 00:42:08,809
Luster and Open ZFS offerings,

1135
00:42:09,188 --> 00:42:11,469
and running our own instances of hammer space.

1136
00:42:11,989 --> 00:42:14,070
We're doing all kinds of experimentation in this

1137
00:42:14,070 --> 00:42:16,219
space, including on top of bare

1138
00:42:16,219 --> 00:42:17,168
metal instances.

1139
00:42:19,739 --> 00:42:22,000
VPC peering comes to the rescue here.

1140
00:42:23,139 --> 00:42:23,918
To connect

1141
00:42:24,809 --> 00:42:26,969
The GPU VPC to the storage

1142
00:42:26,969 --> 00:42:27,570
VPC.

1143
00:42:28,739 --> 00:42:29,688
Um,

1144
00:42:30,429 --> 00:42:32,789
And we also stored checkpoints, weights

1145
00:42:32,789 --> 00:42:33,639
and biases

1146
00:42:33,909 --> 00:42:35,728
in the specialized storage systems running

1147
00:42:36,510 --> 00:42:37,628
in the storage VPC.

1148
00:42:38,889 --> 00:42:41,489
To keep everything secure, we use S3

1149
00:42:41,489 --> 00:42:43,849
bucket policies to block unauthorized

1150
00:42:43,849 --> 00:42:46,128
access inside of the storage VPC.

1151
00:42:47,739 --> 00:42:49,639
Now we layer in Direct Connect

1152
00:42:50,030 --> 00:42:51,489
from Meta's production data center.

1153
00:42:52,639 --> 00:42:54,000
To the storage VPC.

1154
00:42:54,438 --> 00:42:56,340
This is where the heavy lifting happens,

1155
00:42:56,840 --> 00:42:59,260
super high redundant bandwidth is in place,

1156
00:42:59,840 --> 00:43:02,389
with lags and diffs and multiple circuits

1157
00:43:02,389 --> 00:43:03,300
to reduce

1158
00:43:03,639 --> 00:43:06,039
the impact of individual fiber cuts

1159
00:43:06,369 --> 00:43:08,458
or device and rack interruptions.

1160
00:43:08,929 --> 00:43:09,820
These links

1161
00:43:10,159 --> 00:43:12,719
are where we do bulk data transfers

1162
00:43:12,918 --> 00:43:15,059
of the training data sets into

1163
00:43:15,059 --> 00:43:16,840
and out of the cloud environment.

1164
00:43:17,800 --> 00:43:19,918
Those GPUs are hungry beasts,

1165
00:43:20,510 --> 00:43:22,760
so a lot of work goes into optimizing

1166
00:43:22,760 --> 00:43:24,938
the data storage layers and connectivity

1167
00:43:25,159 --> 00:43:27,478
to try to keep this, this side of things efficient.

1168
00:43:28,949 --> 00:43:31,579
The last piece of the high-level view is DNS.

1169
00:43:32,159 --> 00:43:34,418
Remember we have IPV6 everywhere,

1170
00:43:34,780 --> 00:43:35,800
so there's a route 3,

1171
00:43:36,079 --> 00:43:38,119
there, so there is a route 53

1172
00:43:38,119 --> 00:43:40,199
private hosted zone in the storage

1173
00:43:40,199 --> 00:43:40,918
VPC

1174
00:43:41,208 --> 00:43:42,619
providing DNS resolution

1175
00:43:43,119 --> 00:43:45,188
for everything that's accessible over these direct

1176
00:43:45,188 --> 00:43:45,978
connect links.

1177
00:43:46,728 --> 00:43:47,438
With this setup,

1178
00:43:47,699 --> 00:43:50,010
we can decide when research and login traffic,

1179
00:43:50,090 --> 00:43:50,750
for example,

1180
00:43:51,369 --> 00:43:52,708
runs via the internet

1181
00:43:53,168 --> 00:43:54,409
or via the Direct Connect.

1182
00:43:58,789 --> 00:44:00,610
AI research workloads

1183
00:44:00,898 --> 00:44:03,469
often require some degree of internet connectivity.

1184
00:44:04,199 --> 00:44:05,349
Incoming traffic

1185
00:44:05,688 --> 00:44:07,958
is typically in the form of researcher SSH

1186
00:44:07,958 --> 00:44:08,639
logins,

1187
00:44:09,000 --> 00:44:11,239
service account connections, and engineers

1188
00:44:11,239 --> 00:44:13,519
connecting to review and optimize cluster

1189
00:44:13,519 --> 00:44:15,708
performance. To support this,

1190
00:44:15,719 --> 00:44:17,378
we have a sophisticated setup

1191
00:44:17,840 --> 00:44:19,829
using AWS network firewalls,

1192
00:44:20,340 --> 00:44:22,478
network load balancers, and NAT gateways.

1193
00:44:24,769 --> 00:44:27,010
On the internet ingress side, we do traffic

1194
00:44:27,010 --> 00:44:27,750
inspection

1195
00:44:28,128 --> 00:44:29,469
to prevent intrusions

1196
00:44:29,769 --> 00:44:31,369
and unauthorized connectivity.

1197
00:44:32,039 --> 00:44:34,320
The AWS network firewall lets

1198
00:44:34,320 --> 00:44:36,429
us cover all kinds of application traffic in

1199
00:44:36,429 --> 00:44:37,179
one place.

1200
00:44:37,519 --> 00:44:39,519
Even if the traffic is encrypted, it

1201
00:44:39,519 --> 00:44:40,938
can apply some controls

1202
00:44:41,360 --> 00:44:42,458
beyond just

1203
00:44:42,719 --> 00:44:44,458
the network and transport layers.

1204
00:44:44,958 --> 00:44:47,418
We use server name indication, extension,

1205
00:44:48,000 --> 00:44:50,320
and uh an enforced TLS versioning

1206
00:44:50,320 --> 00:44:51,300
and fingerprinting

1207
00:44:51,648 --> 00:44:52,760
at these NLBs.

1208
00:44:54,938 --> 00:44:56,978
Uh, we also use support for

1209
00:44:56,978 --> 00:44:58,918
AWS managed threat signatures,

1210
00:44:59,329 --> 00:45:01,378
which, uh, helps us to detect threats and

1211
00:45:01,378 --> 00:45:04,000
block attack patterns of known vulnerabilities

1212
00:45:04,260 --> 00:45:06,938
without having to write and maintain individual rules.

1213
00:45:07,309 --> 00:45:08,918
Our internet gateway setup

1214
00:45:09,378 --> 00:45:11,409
is, uh, is set up to only allow

1215
00:45:11,409 --> 00:45:13,579
ingress traffic to the AWS network

1216
00:45:13,579 --> 00:45:14,239
firewall

1217
00:45:14,699 --> 00:45:16,320
in the ingress subnet

1218
00:45:16,820 --> 00:45:19,219
with access restricted via routing tables.

1219
00:45:20,559 --> 00:45:22,800
We, we write, uh, we use

1220
00:45:22,800 --> 00:45:24,059
standard, industry standard,

1221
00:45:24,360 --> 00:45:25,280
uh, tooling

1222
00:45:25,639 --> 00:45:27,679
to write surikara rules for our IP

1223
00:45:27,679 --> 00:45:28,340
filtering

1224
00:45:28,679 --> 00:45:30,099
and have hundreds of entries

1225
00:45:30,478 --> 00:45:31,639
for meta cider blocks.

1226
00:45:32,780 --> 00:45:34,860
Because we have so much control over where we

1227
00:45:34,860 --> 00:45:36,780
allocate IPV6 siders,

1228
00:45:37,300 --> 00:45:39,699
we can reasonably allow incoming traffic,

1229
00:45:39,978 --> 00:45:41,659
uh, to be allow listed

1230
00:45:42,099 --> 00:45:43,418
based on the source IP.

1231
00:45:45,659 --> 00:45:47,780
So the connectivity gets all the way

1232
00:45:47,780 --> 00:45:49,438
through to our GPU VPC.

1233
00:45:52,360 --> 00:45:54,478
On the egress side of things, Meta again

1234
00:45:54,478 --> 00:45:56,559
deploys AWS network firewall

1235
00:45:56,559 --> 00:45:57,398
endpoints

1236
00:45:57,719 --> 00:45:59,840
in their own subnet with access

1237
00:45:59,840 --> 00:46:01,438
restricted via routing tables.

1238
00:46:02,280 --> 00:46:04,398
We filter HTTP and HTTPS

1239
00:46:04,398 --> 00:46:06,519
traffic based on domain name and

1240
00:46:06,519 --> 00:46:09,079
we configure domain filtering using an

1241
00:46:09,090 --> 00:46:11,019
an an allow listing approach.

1242
00:46:11,599 --> 00:46:13,378
We configure security groups

1243
00:46:13,699 --> 00:46:15,949
very coarsely with generally none,

1244
00:46:16,228 --> 00:46:18,599
metaperd siders or totally open.

1245
00:46:19,510 --> 00:46:21,628
VPC routing is set up to only

1246
00:46:21,628 --> 00:46:23,949
allow egress traffic via the egress

1247
00:46:23,949 --> 00:46:24,688
subnet

1248
00:46:25,188 --> 00:46:26,050
and domain

1249
00:46:26,429 --> 00:46:28,739
allow listing happens in the AWS

1250
00:46:28,739 --> 00:46:29,469
network firewall.

1251
00:46:30,978 --> 00:46:33,340
We have a self-service system for allowing

1252
00:46:33,340 --> 00:46:33,958
researchers

1253
00:46:34,219 --> 00:46:36,300
to allocate to to allow

1254
00:46:36,300 --> 00:46:37,219
this domains

1255
00:46:37,500 --> 00:46:39,760
for their cluster depending on

1256
00:46:40,139 --> 00:46:42,478
researcher, partner, or vendor needs.

1257
00:46:43,398 --> 00:46:45,590
So egress traffic follows the path of the pink

1258
00:46:45,590 --> 00:46:46,360
errors.

1259
00:46:46,719 --> 00:46:47,938
Egress inspection

1260
00:46:48,320 --> 00:46:50,378
protects against unauthorized outbound

1261
00:46:50,378 --> 00:46:52,599
traffic and can provide a

1262
00:46:52,599 --> 00:46:54,958
detection vector for malware communication

1263
00:46:54,958 --> 00:46:55,599
patterns.

1264
00:46:57,329 --> 00:46:59,340
To sum up, the internet connectivity part

1265
00:46:59,340 --> 00:46:59,889
of this,

1266
00:47:00,260 --> 00:47:02,199
using AWS network firewall

1267
00:47:02,699 --> 00:47:04,860
allows me to scale in a way security

1268
00:47:04,860 --> 00:47:05,559
groups don't.

1269
00:47:06,260 --> 00:47:08,309
Especially solving their cider

1270
00:47:08,309 --> 00:47:09,369
rule limitations.

1271
00:47:09,909 --> 00:47:12,070
Network firewall's ability to support 1

1272
00:47:12,070 --> 00:47:14,619
million ciders allows us to get granular

1273
00:47:14,869 --> 00:47:16,449
with Meta's IP space,

1274
00:47:16,829 --> 00:47:18,909
even when it blows out the cider blocks

1275
00:47:18,909 --> 00:47:21,070
from approximately 30 to more

1276
00:47:21,070 --> 00:47:22,708
like 200 or 2000.

1277
00:47:24,688 --> 00:47:26,708
Standard Surikara rules integrate

1278
00:47:26,708 --> 00:47:28,719
well with our internal firewall management

1279
00:47:28,719 --> 00:47:29,300
tooling.

1280
00:47:29,840 --> 00:47:31,559
Domain filtering allows me

1281
00:47:31,958 --> 00:47:34,159
to go beyond IP rules to domain allow

1282
00:47:34,159 --> 00:47:35,398
lists and blocklists.

1283
00:47:36,378 --> 00:47:38,619
AWS has some great white papers

1284
00:47:38,789 --> 00:47:40,949
on approaching centralized ingress and egress

1285
00:47:40,949 --> 00:47:41,559
filtering,

1286
00:47:41,949 --> 00:47:44,010
and we've used this to scale our solution

1287
00:47:44,469 --> 00:47:45,389
to what we have today.

1288
00:47:49,019 --> 00:47:51,458
As we move beyond infrastructure into the

1289
00:47:51,458 --> 00:47:51,989
application layer,

1290
00:47:52,389 --> 00:47:54,789
we integrate with Meta's data privacy

1291
00:47:54,789 --> 00:47:55,309
controls.

1292
00:47:56,429 --> 00:47:58,090
This is a much harder space

1293
00:47:58,469 --> 00:48:00,050
because a policy decision

1294
00:48:00,349 --> 00:48:02,389
requires an understanding of the

1295
00:48:02,389 --> 00:48:03,648
type and meaning of data

1296
00:48:04,030 --> 00:48:05,809
and the request context

1297
00:48:06,228 --> 00:48:08,309
before deciding if a request should be allowed

1298
00:48:08,309 --> 00:48:09,168
or blocked.

1299
00:48:09,829 --> 00:48:10,530
For example,

1300
00:48:10,789 --> 00:48:13,369
different privacy policies may be applied

1301
00:48:13,750 --> 00:48:15,789
depending on which of Mehta's family of apps

1302
00:48:15,789 --> 00:48:17,349
is being used for the request.

1303
00:48:18,329 --> 00:48:20,378
Mehta's privacy aware architecture

1304
00:48:20,559 --> 00:48:21,938
is a sophisticated system

1305
00:48:22,280 --> 00:48:24,708
that automatically applies, applies privacy

1306
00:48:24,708 --> 00:48:26,878
policies whenever applications

1307
00:48:26,878 --> 00:48:27,659
process data.

1308
00:48:28,159 --> 00:48:30,579
I'm only going to touch on a few aspects

1309
00:48:30,679 --> 00:48:31,860
of PAI today

1310
00:48:32,239 --> 00:48:34,389
and you can find out more on Mehta's engineering

1311
00:48:34,389 --> 00:48:37,760
blog. PAI

1312
00:48:37,760 --> 00:48:40,360
includes a central unified metadata

1313
00:48:40,360 --> 00:48:40,938
store

1314
00:48:41,599 --> 00:48:44,079
with table where table schemas and data

1315
00:48:44,079 --> 00:48:46,340
understanding signal annotations are stored.

1316
00:48:46,840 --> 00:48:49,059
Signal collection systems are responsible

1317
00:48:49,059 --> 00:48:51,280
for identifying the semantic type

1318
00:48:51,438 --> 00:48:52,659
and shape of the data

1319
00:48:53,199 --> 00:48:55,280
found in columns and verifying that it

1320
00:48:55,280 --> 00:48:57,519
matches the schema and the intended purpose.

1321
00:48:58,250 --> 00:49:00,369
These annotations are used to enforce

1322
00:49:00,369 --> 00:49:02,429
policies and establish lineage,

1323
00:49:02,878 --> 00:49:04,958
allowing the full life cycle of the data to be

1324
00:49:04,958 --> 00:49:06,969
understood and factored into

1325
00:49:06,969 --> 00:49:08,030
policy decisions.

1326
00:49:09,000 --> 00:49:11,449
I'll quickly run through the classic banana

1327
00:49:11,449 --> 00:49:13,898
data example from the engineering blog.

1328
00:49:17,329 --> 00:49:19,610
So, let's say Alice is a user

1329
00:49:19,610 --> 00:49:21,309
of a metasystem

1330
00:49:21,688 --> 00:49:24,010
and has stored some data about a

1331
00:49:24,010 --> 00:49:25,010
hand of bananas.

1332
00:49:26,269 --> 00:49:28,510
Right, she might own this hand of bananas, she's

1333
00:49:28,510 --> 00:49:29,929
bought it from a store.

1334
00:49:30,590 --> 00:49:32,739
These diagrams show how that data could

1335
00:49:32,739 --> 00:49:33,889
be represented

1336
00:49:34,378 --> 00:49:36,829
across a number of different data warehouse

1337
00:49:36,829 --> 00:49:37,610
contexts.

1338
00:49:38,349 --> 00:49:39,090
We might find

1339
00:49:39,510 --> 00:49:41,389
a table context

1340
00:49:41,668 --> 00:49:42,750
in the top left there.

1341
00:49:43,800 --> 00:49:44,599
Uh,

1342
00:49:45,478 --> 00:49:47,760
Where the data on individual bananas is

1343
00:49:47,760 --> 00:49:48,378
stored,

1344
00:49:49,119 --> 00:49:50,369
including their color,

1345
00:49:50,679 --> 00:49:51,938
country and flavor,

1346
00:49:52,438 --> 00:49:54,478
we might consider this as the as

1347
00:49:54,478 --> 00:49:56,599
the online or base representation

1348
00:49:56,599 --> 00:49:57,360
of the data.

1349
00:49:58,329 --> 00:50:00,539
As we process this into a data

1350
00:50:00,539 --> 00:50:01,398
warehouse,

1351
00:50:01,699 --> 00:50:03,898
we might be interested in a column

1352
00:50:03,898 --> 00:50:04,769
representation,

1353
00:50:05,099 --> 00:50:07,219
where instances of Sundays

1354
00:50:07,219 --> 00:50:09,219
have portions of Alice's banana

1355
00:50:09,219 --> 00:50:10,500
data in them.

1356
00:50:11,750 --> 00:50:14,188
We might consider a row-based representation.

1357
00:50:15,679 --> 00:50:17,719
Where we care about different

1358
00:50:17,719 --> 00:50:19,760
fruits having a type, a ripeness

1359
00:50:19,760 --> 00:50:20,619
and a price.

1360
00:50:21,938 --> 00:50:24,079
How about a cell-based representation,

1361
00:50:24,409 --> 00:50:26,409
where Alice's banana data is

1362
00:50:26,409 --> 00:50:28,449
used to make a juice with a

1363
00:50:28,449 --> 00:50:29,949
size and a freshness.

1364
00:50:30,519 --> 00:50:32,809
These diagrams represent how Alice's

1365
00:50:32,809 --> 00:50:35,070
banana data might propagate

1366
00:50:35,070 --> 00:50:36,668
through a data warehouse,

1367
00:50:37,168 --> 00:50:39,789
and the key takeaway here is that data lineage

1368
00:50:39,969 --> 00:50:40,869
is difficult,

1369
00:50:41,250 --> 00:50:43,148
and just like with real fruit,

1370
00:50:43,409 --> 00:50:45,489
it's not always possible to unmix

1371
00:50:45,489 --> 00:50:46,219
the sundae.

1372
00:50:49,199 --> 00:50:52,228
Now let's say we want to model some user interactions,

1373
00:50:52,639 --> 00:50:55,139
where Alice's phone is interacting

1374
00:50:55,438 --> 00:50:57,878
with the smoothie, fruit basket

1375
00:50:57,878 --> 00:50:59,280
and bread applications.

1376
00:51:00,079 --> 00:51:01,070
In this case,

1377
00:51:01,530 --> 00:51:02,898
we have set policies

1378
00:51:03,179 --> 00:51:05,208
such that Alice's banana data can

1379
00:51:05,208 --> 00:51:07,329
be used in the smoothie and the fruit

1380
00:51:07,329 --> 00:51:08,769
basket use cases.

1381
00:51:09,510 --> 00:51:11,260
But not in the bread application.

1382
00:51:12,579 --> 00:51:14,458
To take the analogy full circle,

1383
00:51:14,918 --> 00:51:16,989
perhaps we have a policy here that

1384
00:51:16,989 --> 00:51:18,050
blocks the usage

1385
00:51:18,349 --> 00:51:20,269
because we don't want to heat up bananas.

1386
00:51:20,978 --> 00:51:22,780
Which is necessary when baking bread.

1387
00:51:24,878 --> 00:51:26,918
For some more details about how

1388
00:51:26,918 --> 00:51:29,148
our privacy aware infrastructure works,

1389
00:51:29,519 --> 00:51:31,378
check out our security and privacy

1390
00:51:31,789 --> 00:51:32,800
blog posts,

1391
00:51:33,139 --> 00:51:35,978
um, which show more about how meta enforces

1392
00:51:36,239 --> 00:51:37,918
what we call purpose limitation,

1393
00:51:38,398 --> 00:51:41,300
uh, via our privacy aware infrastructure

1394
00:51:41,559 --> 00:51:42,239
at scale.

1395
00:51:44,820 --> 00:51:46,760
Right, to uh to wrap this up,

1396
00:51:47,099 --> 00:51:49,128
we will land the plane here with

1397
00:51:49,128 --> 00:51:50,398
uh threat detection,

1398
00:51:50,820 --> 00:51:52,369
incident response systems,

1399
00:51:52,659 --> 00:51:53,619
and close the loop,

1400
00:51:55,128 --> 00:51:57,478
These systems close the loop and give us confidence

1401
00:51:57,478 --> 00:51:59,519
that our cloud AI environments are well

1402
00:51:59,519 --> 00:52:00,119
secured.

1403
00:52:00,958 --> 00:52:03,119
We stream VPC flow logs to our

1404
00:52:03,119 --> 00:52:05,719
internal systems and run analysis

1405
00:52:05,719 --> 00:52:07,780
in real time to detect anomalies.

1406
00:52:08,320 --> 00:52:10,219
We stream S3 data events

1407
00:52:10,519 --> 00:52:12,989
to monitor what's going on with our S3 buckets,

1408
00:52:13,280 --> 00:52:16,010
and we make extensive use of third-party monitoring

1409
00:52:16,010 --> 00:52:17,539
applications, including Wiz

1410
00:52:17,878 --> 00:52:19,918
and also guard duty for threat detection.

1411
00:52:20,869 --> 00:52:23,099
Automation beats out human response

1412
00:52:23,099 --> 00:52:25,398
time, and by instrumenting everything

1413
00:52:25,619 --> 00:52:27,159
and using a central account

1414
00:52:28,239 --> 00:52:30,340
for host detecting, for hosting detection

1415
00:52:30,340 --> 00:52:30,889
systems,

1416
00:52:31,260 --> 00:52:33,438
we gain the ability to automate

1417
00:52:33,570 --> 00:52:35,780
remediation and isolation,

1418
00:52:36,510 --> 00:52:37,478
If things go wrong.

1419
00:52:38,500 --> 00:52:39,079
With that,

1420
00:52:39,628 --> 00:52:41,789
it's back to Robin to wrap things up.

1421
00:52:45,128 --> 00:52:45,849
Thank you, Peter.

1422
00:52:48,519 --> 00:52:50,329
Yep, so as we wrap up, I

1423
00:52:50,719 --> 00:52:51,978
appreciate all you spending the time

1424
00:52:52,398 --> 00:52:54,039
in this journey that we've got on today.

1425
00:52:54,418 --> 00:52:56,938
If you think you remember we started out this journey

1426
00:52:57,070 --> 00:52:58,659
of imagining what

1427
00:52:58,918 --> 00:53:01,079
it took to secure those experiences

1428
00:53:01,079 --> 00:53:03,199
for those 3.5 billion daily

1429
00:53:03,199 --> 00:53:04,349
active users. I think

1430
00:53:04,958 --> 00:53:07,228
Peter gave us some amazing insight onto,

1431
00:53:07,500 --> 00:53:09,898
you know, meta's real world implementations

1432
00:53:10,199 --> 00:53:11,619
and really seeing that

1433
00:53:12,000 --> 00:53:14,628
security at scale is more. Than just

1434
00:53:14,628 --> 00:53:16,789
more of the same controls,

1435
00:53:16,949 --> 00:53:18,728
it's fundamentally rethinking

1436
00:53:19,228 --> 00:53:21,289
how security works when you're operating

1437
00:53:21,289 --> 00:53:23,059
at that planetary scale,

1438
00:53:23,559 --> 00:53:25,539
you know, coming back to the principles

1439
00:53:25,949 --> 00:53:26,938
we talked about earlier,

1440
00:53:27,269 --> 00:53:29,469
the ability to automate

1441
00:53:29,469 --> 00:53:31,688
manual processes inevitably

1442
00:53:32,030 --> 00:53:33,550
fail at scale.

1443
00:53:34,188 --> 00:53:36,309
Automation isn't optional, and

1444
00:53:36,309 --> 00:53:38,750
it's the only way to ensure consistent.

1445
00:53:39,418 --> 00:53:41,860
Security enforcement across vast

1446
00:53:41,860 --> 00:53:42,760
infrastructure.

1447
00:53:43,059 --> 00:53:45,059
I think back you're talking about

1448
00:53:45,059 --> 00:53:47,228
their infrastructures cloud deployments,

1449
00:53:47,239 --> 00:53:48,840
that automated credential

1450
00:53:49,199 --> 00:53:49,958
vending

1451
00:53:50,219 --> 00:53:52,300
through AD, and how

1452
00:53:52,300 --> 00:53:54,478
that enables both security

1453
00:53:54,780 --> 00:53:56,860
and velocity for

1454
00:53:56,860 --> 00:53:58,030
their developers,

1455
00:53:58,289 --> 00:53:59,800
you know, the proactive

1456
00:54:00,260 --> 00:54:02,269
security by design, making sure that

1457
00:54:02,269 --> 00:54:03,978
security is not an afterthought.

1458
00:54:04,309 --> 00:54:06,519
In your organization and building it

1459
00:54:06,519 --> 00:54:07,559
from the ground up,

1460
00:54:07,840 --> 00:54:09,978
uh, their AI approach

1461
00:54:09,978 --> 00:54:11,840
and policy validation

1462
00:54:12,119 --> 00:54:15,360
throughout the CICD pipelines

1463
00:54:15,360 --> 00:54:17,559
ensure that those controls are baked in

1464
00:54:17,869 --> 00:54:19,139
from the start, um,

1465
00:54:20,320 --> 00:54:22,389
when. When you federate and

1466
00:54:22,389 --> 00:54:24,458
provide teams with that freedom to

1467
00:54:24,458 --> 00:54:26,489
integrate, to innovate

1468
00:54:26,489 --> 00:54:28,530
within an organizational

1469
00:54:28,719 --> 00:54:30,050
boundary, uh,

1470
00:54:30,349 --> 00:54:32,449
through the multi-account strategy

1471
00:54:32,550 --> 00:54:35,168
and the use of those service control policies

1472
00:54:35,628 --> 00:54:37,829
to establish those guardrails, you again

1473
00:54:37,829 --> 00:54:40,648
enable that velocity while managing

1474
00:54:40,829 --> 00:54:42,849
the risk and, um,

1475
00:54:43,110 --> 00:54:44,668
final two pieces here,

1476
00:54:45,148 --> 00:54:47,864
you know. Being able to rely

1477
00:54:47,864 --> 00:54:49,224
on your resiliency,

1478
00:54:49,644 --> 00:54:51,965
understanding your failure modes, and

1479
00:54:51,965 --> 00:54:54,704
designing systems that can detect and recover

1480
00:54:55,083 --> 00:54:57,704
from those events, and at scale

1481
00:54:57,885 --> 00:54:59,925
it's not if something will fail,

1482
00:55:00,083 --> 00:55:00,684
but when.

1483
00:55:01,003 --> 00:55:03,664
So Meta's approach to network segmentation

1484
00:55:04,244 --> 00:55:06,244
and threat detection enables them

1485
00:55:06,244 --> 00:55:09,204
to respond quickly to unanticipated

1486
00:55:09,204 --> 00:55:10,244
events.

1487
00:55:10,559 --> 00:55:12,898
And all of that wraps up

1488
00:55:13,119 --> 00:55:15,260
with a a learning culture,

1489
00:55:15,438 --> 00:55:16,648
taking advantage

1490
00:55:17,000 --> 00:55:19,139
of these real world experiences

1491
00:55:19,438 --> 00:55:21,550
where every event, every incident is

1492
00:55:21,550 --> 00:55:23,829
an opportunity to learn and

1493
00:55:23,829 --> 00:55:24,378
strengthen

1494
00:55:24,800 --> 00:55:26,800
your security posture.

1495
00:55:28,369 --> 00:55:30,610
Yeah. So

1496
00:55:30,800 --> 00:55:32,260
what I hope that you take away

1497
00:55:32,719 --> 00:55:34,219
from today is

1498
00:55:34,519 --> 00:55:36,898
Peter shared this staggering scale

1499
00:55:37,360 --> 00:55:39,559
that Meta operates at,

1500
00:55:39,639 --> 00:55:41,219
and I think early on I called it

1501
00:55:41,519 --> 00:55:43,869
just another Wednesday afternoon,

1502
00:55:44,159 --> 00:55:46,719
but we all have our Wednesday

1503
00:55:46,719 --> 00:55:48,539
afternoons and no matter

1504
00:55:48,840 --> 00:55:51,760
what your scale, the fundamentals

1505
00:55:51,760 --> 00:55:54,070
of effective cloud security

1506
00:55:54,070 --> 00:55:55,228
remain consistent.

1507
00:55:55,909 --> 00:55:57,820
Know your critical assets,

1508
00:55:58,119 --> 00:56:00,458
implement appropriate controls

1509
00:56:00,679 --> 00:56:02,719
and build security into

1510
00:56:02,719 --> 00:56:03,938
your processes

1511
00:56:04,199 --> 00:56:05,179
from the beginning

1512
00:56:05,438 --> 00:56:07,760
so I'd encourage you to ask yourself

1513
00:56:07,760 --> 00:56:09,800
which of these principles can

1514
00:56:09,800 --> 00:56:11,280
you apply,

1515
00:56:11,579 --> 00:56:14,039
where can I use automation to

1516
00:56:14,039 --> 00:56:16,039
reduce my risk, and how can

1517
00:56:16,039 --> 00:56:18,059
I build a learning culture

1518
00:56:18,478 --> 00:56:19,559
around security.

1519
00:56:20,228 --> 00:56:22,760
And start with what you can do

1520
00:56:22,760 --> 00:56:25,039
today, whether that's implementing

1521
00:56:25,039 --> 00:56:27,340
your first service control

1522
00:56:27,719 --> 00:56:30,159
policy, adopting infrastructure

1523
00:56:30,159 --> 00:56:30,989
as code,

1524
00:56:31,320 --> 00:56:33,398
or adding automation

1525
00:56:33,398 --> 00:56:34,659
to your existing

1526
00:56:35,079 --> 00:56:35,760
security work

1527
00:56:36,280 --> 00:56:37,039
workflows.

1528
00:56:39,239 --> 00:56:41,280
Working with Meta on

1529
00:56:41,280 --> 00:56:43,659
these journeys has taught me

1530
00:56:44,000 --> 00:56:46,000
that sailing security isn't just

1531
00:56:46,000 --> 00:56:48,579
about protecting more resources,

1532
00:56:48,840 --> 00:56:51,099
it's enabling your business to grow

1533
00:56:51,349 --> 00:56:52,239
confidently,

1534
00:56:52,559 --> 00:56:54,739
knowing that your security posture

1535
00:56:55,039 --> 00:56:57,320
is growing with it,

1536
00:56:57,840 --> 00:57:00,070
so. So thank you all

1537
00:57:00,070 --> 00:57:01,659
for being here with us today.

1538
00:57:01,978 --> 00:57:04,280
Thank you, Peter, for sharing Meta's incredible

1539
00:57:04,280 --> 00:57:06,389
journey and Syed for going

1540
00:57:06,389 --> 00:57:09,139
deep on those some of those AWS

1541
00:57:09,139 --> 00:57:09,800
security

1542
00:57:10,070 --> 00:57:12,500
um services powering

1543
00:57:12,500 --> 00:57:14,219
um at scale deployments.

1544
00:57:15,250 --> 00:57:17,530
Please complete the session survey in

1545
00:57:17,530 --> 00:57:19,789
your mobile app. Your feedback helps us

1546
00:57:20,090 --> 00:57:22,329
keep delivering valuable

1547
00:57:22,329 --> 00:57:24,409
content. Enjoy the

1548
00:57:24,409 --> 00:57:26,590
rest of Reinvent and do remember

1549
00:57:27,050 --> 00:57:28,228
security at scale

1550
00:57:28,489 --> 00:57:30,148
starts with the right principles.

1551
00:57:31,219 --> 00:57:32,478
So thank you.

