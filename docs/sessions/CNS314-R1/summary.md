# AWS re:Invent 2025 - Moody's 多智能体系统架构分享

## 会议概述

本次技术分享会议（IND 3303）由AWS首席解决方案架构师Sam Barui和Moody's工程与架构董事总经理Dennis Clement共同主讲，详细介绍了Moody's如何在AWS上构建和演进多智能体系统，以革新金融服务行业的数据分析和决策支持能力。

Moody's作为一家拥有百年历史的信用评级机构，服务于165个国家的1500多家客户，包括97%的财富100强企业。面对海量的非结构化金融数据和复杂的客户需求，Moody's从2023年开始探索生成式AI技术，经历了从简单聊天机器人到专业化智能体，再到完整多智能体协作系统的演进历程。

会议重点展示了Moody's如何利用Amazon Bedrock、知识库、数据自动化等AWS服务构建生产级AI系统，特别强调了在高度监管的金融行业中如何确保准确性、合规性和数据隔离。Dennis分享了团队在架构设计中的关键决策，包括无服务器优先策略、工具与智能体的分离设计、自定义编排器的实现，以及如何处理复杂的PDF文档和非结构化数据提取等实际挑战。

## 详细时间线与关键要点

### **00:00 - 开场介绍**
- 会议代号：IND 3303 - Moody's在AWS上构建多智能体系统
- 演讲嘉宾：Sam Barui（AWS首席解决方案架构师）和Dennis Clement（Moody's董事总经理）
- 现场调查：大多数观众正在构建智能体系统，且来自金融服务行业

### **02:30 - 会议议程概览**
- Moody's三年AI转型之旅的愿景与挑战
- AWS基础技术服务介绍
- 多智能体系统架构深度剖析
- 非结构化金融数据处理方案
- 未来发展方向

### **04:00 - Moody's公司背景**
- 百年历史的信用评级机构，拥有深厚的金融领域知识
- 服务1500+客户，覆盖165个国家，97%的财富100强企业
- 业务范围：信用、气候、经济、合规等风险智能分析
- 客户进行数十亿美元级别的决策，对准确性要求极高

### **06:15 - 数据宇宙的复杂性**
- 四大核心支柱：评级、研究与洞察、数据信息、决策解决方案
- 拥有数十年的研究文档、信用意见、行业展望
- 运营Orbit数据库：6亿个实体数据
- 涵盖气候风险分析、经济预测、客户筛查、监管申报等

### **08:45 - 客户多样性带来的挑战**
- 2600家商业银行处理贷款发放
- 1900家资产管理公司进行投资组合配置
- 800+保险公司运行监管压力测试
- 99%的准确率不够，1%的错误可能是灾难性的

### **11:20 - AI转型的根本矛盾**
- 客户需要跨多个专业领域的专业知识（信用评级、行业分析、经济比较、监管合规）
- 这些不是相邻领域，而是不同的知识宇宙
- 监管环境要求数据隔离和合规性
- 客户希望将自己的数据与Moody's数据无缝融合

### **14:00 - 演进时间线**
- **2023年12月**：发布Research Assistant（研究助手）- 基础RAG应用
- **2024年8月**：推出PDF上传功能 - 客户数据集成
- **2025年底**：完整多智能体系统 - 定制编排器、专业化工作流、任务智能体

### **16:30 - Research Assistant的成功与局限**
- 用户喜爱该产品，获得基于真实研究的答案
- 节省60%的时间，任务完成速度提升30%
- 处理数十年的Moody's专有研究
- 但在复杂场景下（多公司风险比较、财务指标分析、新闻分析）表现不足

### **19:00 - 关键认知转变**
- 从"提出问题并获得答案"转向"编排专业智能"
- 未来不是更好的提示词，而是更好的上下文
- 需要从提示工程转向上下文工程

### **20:45 - AWS基础服务介绍（Sam）**
- **Amazon Bedrock**：完整的服务生态系统，支持多模型选择
- 真正的无服务器架构
- 支持不同提供商的模型

### **23:00 - 全球跨区域推理（Global Cross-Region Inference）**
- 解决单区域容量限制问题
- 自动路由到有可用容量的最近区域
- 使用AWS内部骨干网络，不经过互联网
- 提高弹性和吞吐量限制

### **26:30 - 地理跨区域推理（Geographic Cross-Region Inference）**
- 满足数据驻留和监管合规要求
- 限制在特定地理区域内（如欧洲、美国、亚洲）
- 在保持合规的同时增加容量

### **29:00 - Bedrock知识库（Knowledge Base）**
- 完全托管的端到端RAG工作流
- 处理整个摄取管道：解析、分块、嵌入、存储
- 支持多种文件格式：文本、PDF、多模态文档、音频、视频
- 灵活选择解析方式、分块策略、嵌入模型和向量数据库

### **32:15 - 数据摄取工作流详解**
- S3存储源文件
- 自动监控文档更新
- 多种解析选项：默认方式、LLM解析、Bedrock数据自动化
- 分块策略：固定分块、Lambda自定义分块（Moody's使用）
- 嵌入模型：Amazon Titan、Amazon Nova、Cohere，或SageMaker托管的开源模型
- 向量数据库：OpenSearch Serverless、Pinecone、pgvector、新发布的S3 Vectors（性价比提升90%）

### **36:00 - 非结构化数据挑战**
- 金融服务80%的数据是非结构化的（10-Q文档、音频、视频）
- 只有20%的组织能够利用非结构化数据
- 复杂的财务表格、图表难以提取

### **38:30 - Bedrock数据自动化（Bedrock Data Automation）**
- 专门处理复杂非结构化文档
- 支持多模态：音频、视频、图像、文档
- 提取能力：摘要、文本、字段
- 相比传统LLM，减少幻觉，提高准确性和性价比

### **40:00 - 架构深度剖析（Dennis）**
- 从单一RAG应用的局限性说起
- 一个模型、一个上下文窗口试图解决所有问题
- 立即出现问题：上下文窗口限制、性能下降、专业知识浅薄

### **42:30 - 三个关键认识**
1. 金融智能应该模仿人类专家团队的工作方式
2. 用户不是随机提问，而是在编排可重复的工作流
3. 上下文切换会降低性能，即使相似的专业知识也需要真正的隔离

### **44:00 - 工作流设计器（Workflow Designer）**
- 在OpenAI的智能体构建器之前就已构建
- 用户可以可视化地将Moody's专业知识组合成可重复的工作流
- 创建专业化输出：图表、图形、表格
- 支持从20步到400步的工作流
- 执行时间从几分钟到15分钟以上

### **47:00 - 术语对齐**
- **工具（Tool）**：执行特定任务的系统，返回上下文给LLM，是离散的过程
- **智能体（Agent）**：LLM自主选择工具，在循环中运行，决定任务何时完成（"带有更好公关的for循环"）
- **工作流（Workflow）**：确定性编排，预定义的步骤序列，协调工具和智能体以获得一致的输出

### **50:00 - 五大架构支柱**

1. 无服务器优先（Serverless First）
- 金融世界流量极具波动性
- 信用变化事件可导致流量瞬间增长50倍
- 利用无服务器架构的弹性

2. 工具即Lambda函数
- 单一用途、快速、无状态
- 允许多个工作流或智能体使用相同工具
- 可扩展性强

3. 两类智能体
- **简单智能体**：系统提示词 + 精选工具集 + 验证步骤，以JSON对象形式提供
- **复杂智能体**：定制软件，使用ECS容器，支持有状态、长时间运行的任务（Lambda限制15分钟）

4. 自定义编排器
- 整个系统的大脑
- 接收JSON格式的工具、智能体、提示词列表
- 运行在ECS上
- 内部复杂性：性能优化、成本控制、尽可能并行化步骤、错误处理、LLM提供商限流处理
- 最初设计最多20步，现在客户工作流超过400步

5. 模型灵活性
- 不锁定特定模型
- 每个智能体、每个步骤、每个工具可选择最适合的LLM
- 可独立测试和验证
- 一个智能体可使用推理模型，另一个可使用小语言模型

### **56:00 - 生产环境数据**
- 约80个工具
- 100+工作流
- 多个专业化任务智能体
- 每天处理超过100万个token
- 这不是演示，是今天正在生产环境中满足客户需求的系统

### **58:00 - 会议总结与未来展望**
- 强调从简单聊天机器人到复杂多智能体系统的演进路径
- 重点是上下文边界和专业化，而非提示词优化
- 在高度监管的金融行业中实现生产级AI系统
- 持续改进非结构化数据处理能力

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


关键技术要点总结：
- 无服务器架构（Lambda + ECS）
- Amazon Bedrock生态系统（跨区域推理、知识库、数据自动化）
- 自定义编排器实现复杂工作流
- 工具与智能体的清晰分离
- 模型灵活性和可替换性
- 生产级规模：100万+ token/天