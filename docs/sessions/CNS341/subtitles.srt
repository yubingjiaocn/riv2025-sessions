1
00:00:00,720 --> 00:00:02,610
- This is CNS 341.

2
00:00:02,610 --> 00:00:03,870
You're in the right place

3
00:00:03,870 --> 00:00:05,550
if you are a developer

4
00:00:05,550 --> 00:00:07,230
that is looking for faster ways

5
00:00:07,230 --> 00:00:10,050
to get your code deployed in AWS.

6
00:00:10,050 --> 00:00:11,640
You are also in the right place

7
00:00:11,640 --> 00:00:13,770
if you are a platform team

8
00:00:13,770 --> 00:00:15,810
or infrastructure engineer

9
00:00:15,810 --> 00:00:18,480
looking for patterns or guidance

10
00:00:18,480 --> 00:00:21,240
of how to accelerate your teams.

11
00:00:21,240 --> 00:00:22,770
My name is Jennifer.

12
00:00:22,770 --> 00:00:24,390
This is Tsahi.

13
00:00:24,390 --> 00:00:26,640
We are your ECS experts today.

14
00:00:26,640 --> 00:00:29,580
We're also going to be joined
by Keith a little bit later.

15
00:00:29,580 --> 00:00:30,810
He's from GoDaddy,

16
00:00:30,810 --> 00:00:33,330
and he's built a platform on Amazon ECS

17
00:00:33,330 --> 00:00:34,800
that he's going to talk about.

18
00:00:34,800 --> 00:00:35,703
Thank you, guys.

19
00:00:37,500 --> 00:00:38,950
With that, let's get started.

20
00:00:41,970 --> 00:00:43,680
First, to set the context,

21
00:00:43,680 --> 00:00:45,180
I wanted to lay the foundation

22
00:00:45,180 --> 00:00:48,030
of the service that we're going
to be talking about today,

23
00:00:48,030 --> 00:00:50,550
and that is Amazon ECS.

24
00:00:50,550 --> 00:00:53,430
Amazon ECS is our fully managed container

25
00:00:53,430 --> 00:00:54,690
orchestration service

26
00:00:54,690 --> 00:00:57,120
that provides the easiest
way for organizations

27
00:00:57,120 --> 00:01:01,893
to build, deploy, manage
containerized applications on AWS.

28
00:01:02,760 --> 00:01:03,960
Even at the compute layer,

29
00:01:03,960 --> 00:01:05,850
we offer a lot of flexibility.

30
00:01:05,850 --> 00:01:09,000
You can run containers on EC2 instances,

31
00:01:09,000 --> 00:01:10,770
you can even run them on your own hardware

32
00:01:10,770 --> 00:01:12,600
with ECS Anywhere.

33
00:01:12,600 --> 00:01:16,173
But the majority of our
customers run on AWS Fargate.

34
00:01:17,040 --> 00:01:20,580
Fargate gives you the ultimate
simplicity with serverless.

35
00:01:20,580 --> 00:01:22,440
We manage the compute completely.

36
00:01:22,440 --> 00:01:23,790
You pay for what you use,

37
00:01:23,790 --> 00:01:24,870
which means you're not bound

38
00:01:24,870 --> 00:01:27,243
by EC2 instance ratios.

39
00:01:28,620 --> 00:01:30,480
ECS Managed Instances

40
00:01:30,480 --> 00:01:32,360
is a new offering that
we just came out with

41
00:01:32,360 --> 00:01:33,603
in the last month,

42
00:01:34,440 --> 00:01:36,510
that is a fully managed compute

43
00:01:36,510 --> 00:01:38,643
that eliminates infrastructure management,

44
00:01:39,690 --> 00:01:41,400
while giving you access

45
00:01:41,400 --> 00:01:44,250
to a really broad set

46
00:01:44,250 --> 00:01:45,903
of EC2 instance size.

47
00:01:46,860 --> 00:01:48,723
This is great if you, ooh,

48
00:01:51,630 --> 00:01:54,900
if you're looking for
specific EC2 instances,

49
00:01:54,900 --> 00:01:57,870
like GPUs, or network-optimized instances,

50
00:01:57,870 --> 00:02:00,660
or memory-optimized instances,

51
00:02:00,660 --> 00:02:02,070
while still taking advantage

52
00:02:02,070 --> 00:02:04,770
of some of the great aspects of Fargate.

53
00:02:04,770 --> 00:02:07,440
Like the maintenance

54
00:02:07,440 --> 00:02:10,140
and the patching and the scaling

55
00:02:10,140 --> 00:02:12,120
that we take care of,

56
00:02:12,120 --> 00:02:14,850
ECS Managed Instances a is a great option

57
00:02:14,850 --> 00:02:16,230
when you need that specificity,

58
00:02:16,230 --> 00:02:18,060
but you still want ECS

59
00:02:18,060 --> 00:02:20,060
to take care of that operational burden.

60
00:02:21,600 --> 00:02:22,710
Continuing on that theme

61
00:02:22,710 --> 00:02:24,300
of removing the operational burden,

62
00:02:24,300 --> 00:02:25,830
what makes ECS really unique

63
00:02:25,830 --> 00:02:28,320
is that it is fully
managed and versionless,

64
00:02:28,320 --> 00:02:31,290
there is no control
plane for you to manage.

65
00:02:31,290 --> 00:02:33,780
There are no upgrades of the
control plane to coordinate,

66
00:02:33,780 --> 00:02:36,240
no patching of the
control plane to schedule.

67
00:02:36,240 --> 00:02:39,123
We handle all of that
operational complexity.

68
00:02:40,170 --> 00:02:41,430
This is something that I've been hearing

69
00:02:41,430 --> 00:02:42,630
from customers all week,

70
00:02:42,630 --> 00:02:46,110
that is part of why they really love ECS

71
00:02:46,110 --> 00:02:50,850
is that we handle so much
of that on their behalf.

72
00:02:50,850 --> 00:02:52,500
When you create a cluster,

73
00:02:52,500 --> 00:02:54,960
it is essentially just a logical grouping.

74
00:02:54,960 --> 00:02:58,050
It is not really something
that you have to treat

75
00:02:58,050 --> 00:02:59,370
as something precious.

76
00:02:59,370 --> 00:03:02,820
It is, you can create as
many clusters as you want

77
00:03:02,820 --> 00:03:06,090
and use them as you want to

78
00:03:06,090 --> 00:03:08,013
in order to group services together,

79
00:03:08,880 --> 00:03:10,500
because we're managing that control plane

80
00:03:10,500 --> 00:03:12,510
and you don't have to think about it.

81
00:03:12,510 --> 00:03:13,950
And if you're using Fargate

82
00:03:13,950 --> 00:03:15,180
or Managed Instances,

83
00:03:15,180 --> 00:03:18,180
you don't need to
provision or scale servers.

84
00:03:18,180 --> 00:03:19,290
You don't need to manage

85
00:03:19,290 --> 00:03:21,660
or patch the operating system.

86
00:03:21,660 --> 00:03:24,090
We manage all of that on your behalf.

87
00:03:24,090 --> 00:03:26,430
And specifically with Fargate,

88
00:03:26,430 --> 00:03:27,720
you get tenant isolation.

89
00:03:27,720 --> 00:03:29,400
And our financial services customers

90
00:03:29,400 --> 00:03:31,440
really love this specifically

91
00:03:31,440 --> 00:03:33,330
because the security boundary

92
00:03:33,330 --> 00:03:36,150
becomes not the container,
but the EC2 instance,

93
00:03:36,150 --> 00:03:40,470
because in Fargate, every task
gets a unique EC2 instance.

94
00:03:40,470 --> 00:03:43,110
You can also achieve this
with ECS Managed Instances,

95
00:03:43,110 --> 00:03:46,710
but you lose some of the
value of Managed Instances

96
00:03:46,710 --> 00:03:49,560
and the optimizations that we're providing

97
00:03:49,560 --> 00:03:51,990
with the bin packing and scaling

98
00:03:51,990 --> 00:03:53,913
of the underlying instances.

99
00:03:55,080 --> 00:03:57,300
And then we come to some
of the native things

100
00:03:57,300 --> 00:03:58,830
that we've built into ECS.

101
00:03:58,830 --> 00:04:02,313
So the first one being our
native service discovery.

102
00:04:03,600 --> 00:04:06,690
This one I feel like is
kind of an underrated thing

103
00:04:06,690 --> 00:04:07,897
that we have in ECS.

104
00:04:09,540 --> 00:04:12,030
We build in service discovery

105
00:04:12,030 --> 00:04:13,590
and a service mesh,

106
00:04:13,590 --> 00:04:15,300
and that is Service Connect

107
00:04:15,300 --> 00:04:17,313
is the name of the service.

108
00:04:18,360 --> 00:04:20,040
You don't have to install, or patch,

109
00:04:20,040 --> 00:04:22,170
or maintain Service Connect,

110
00:04:22,170 --> 00:04:25,290
it is just there, and it's
available for you to use.

111
00:04:25,290 --> 00:04:28,950
You have a unified way of
accessing all of your services.

112
00:04:28,950 --> 00:04:31,203
You don't have to maintain DNS,

113
00:04:32,220 --> 00:04:34,083
any complex management there.

114
00:04:35,430 --> 00:04:37,740
It's available for you to set up

115
00:04:37,740 --> 00:04:39,303
and access at any time.

116
00:04:41,100 --> 00:04:43,200
Finally, native deployment mechanisms.

117
00:04:43,200 --> 00:04:47,790
We've always had a deployment
mechanism (laughing) in ECS,

118
00:04:47,790 --> 00:04:51,090
you've always been able
to update your services

119
00:04:51,090 --> 00:04:53,730
using a rolling deployment mechanism,

120
00:04:53,730 --> 00:04:55,260
but we found that a lot of customers

121
00:04:55,260 --> 00:04:56,610
are going outside of ECS

122
00:04:56,610 --> 00:05:01,610
to use other external
deployment strategies,

123
00:05:02,160 --> 00:05:05,133
like CodeDeploy to do
blue-green, for example.

124
00:05:06,390 --> 00:05:07,710
So just this past summer,

125
00:05:07,710 --> 00:05:11,043
we launched native blue-green strategies,

126
00:05:12,300 --> 00:05:14,610
as well as just about a month ago,

127
00:05:14,610 --> 00:05:17,520
we launched canary and linear strategies

128
00:05:17,520 --> 00:05:18,920
all natively within ECS.

129
00:05:18,920 --> 00:05:20,550
And this is really important

130
00:05:20,550 --> 00:05:25,550
because by making that native to ECS,

131
00:05:25,770 --> 00:05:26,970
we're removing that burden

132
00:05:26,970 --> 00:05:28,980
of, A, having to go outside of ECS

133
00:05:28,980 --> 00:05:31,500
in order to set up that
deployment strategy,

134
00:05:31,500 --> 00:05:34,440
but also all of the wiring
of the target groups

135
00:05:34,440 --> 00:05:37,800
in order to set up the
blue and the green side,

136
00:05:37,800 --> 00:05:40,140
all of that exists within ECS

137
00:05:40,140 --> 00:05:42,180
and it just makes the deployment

138
00:05:42,180 --> 00:05:44,403
of each of those things a lot simpler.

139
00:05:45,810 --> 00:05:47,280
Now, all of those things brought together

140
00:05:47,280 --> 00:05:50,340
are a lot of why
customers adopt ECS today.

141
00:05:50,340 --> 00:05:51,287
And when you do adopt ECS,

142
00:05:51,287 --> 00:05:53,280
you're in very good company.

143
00:05:53,280 --> 00:05:57,210
Over three billion tasks are
launched in ECS every week.

144
00:05:57,210 --> 00:06:00,690
Over 65% of all new
AWS container customers

145
00:06:00,690 --> 00:06:03,180
use Amazon ECS.

146
00:06:03,180 --> 00:06:08,180
And it is very heavily used
internally within Amazon.

147
00:06:08,280 --> 00:06:11,160
We actually call Amazon ECS

148
00:06:11,160 --> 00:06:12,960
one of our foundational services.

149
00:06:12,960 --> 00:06:14,400
And the reason we call it that

150
00:06:14,400 --> 00:06:18,967
is because every time we
stand up a new region in AWS,

151
00:06:20,430 --> 00:06:24,150
ECS is one of the very first
services that has to go in.

152
00:06:24,150 --> 00:06:28,410
And the reason is because
so many other AWS services

153
00:06:28,410 --> 00:06:31,203
build their infrastructure using ECS.

154
00:06:32,760 --> 00:06:35,793
So you're in good company
when you're using ECS.

155
00:06:37,770 --> 00:06:39,330
So that's a little bit about the service

156
00:06:39,330 --> 00:06:40,880
that we're talking about today.

157
00:06:42,180 --> 00:06:43,590
I wanna hand it off to Tsahi

158
00:06:43,590 --> 00:06:45,663
to talk a little bit about applications.

159
00:06:48,450 --> 00:06:49,300
- Thank you, Jen.

160
00:06:50,850 --> 00:06:53,280
So in the next part of the session,

161
00:06:53,280 --> 00:06:57,030
I'm going to cover how actually
deploying apps to production

162
00:06:57,030 --> 00:06:58,260
actually looks like.

163
00:06:58,260 --> 00:06:59,130
But before we get there,

164
00:06:59,130 --> 00:07:00,720
we need to understand

165
00:07:00,720 --> 00:07:02,640
how deployment mechanism works.

166
00:07:02,640 --> 00:07:05,730
I'm also going to shift in
between two perspectives.

167
00:07:05,730 --> 00:07:08,100
One of those of the development team,

168
00:07:08,100 --> 00:07:09,150
those who are building apps,

169
00:07:09,150 --> 00:07:10,740
deploying them into production,

170
00:07:10,740 --> 00:07:12,180
and the platform builders,

171
00:07:12,180 --> 00:07:14,040
those who are building
tools and automation

172
00:07:14,040 --> 00:07:16,230
in order to support the development teams

173
00:07:16,230 --> 00:07:18,333
in order to get their job easier.

174
00:07:19,350 --> 00:07:21,780
So let's look at the deployment process

175
00:07:21,780 --> 00:07:23,820
from developers' point of view.

176
00:07:23,820 --> 00:07:27,480
From the moment we have
our container image package

177
00:07:27,480 --> 00:07:30,690
built into Amazon ECR,

178
00:07:30,690 --> 00:07:33,060
the process of deploying
it into production

179
00:07:33,060 --> 00:07:34,230
can be quite complex

180
00:07:34,230 --> 00:07:36,630
and involve many different steps,

181
00:07:36,630 --> 00:07:38,793
which I'm gonna cover in this slide.

182
00:07:39,930 --> 00:07:42,030
It starts with having a networking,

183
00:07:42,030 --> 00:07:46,740
so AWS VPC and Amazon
ECS cluster to provision,

184
00:07:46,740 --> 00:07:50,550
which basically hold all of
our applications into it.

185
00:07:50,550 --> 00:07:53,370
Then we need to have a way to tell ECS

186
00:07:53,370 --> 00:07:55,530
what is the configuration of our app,

187
00:07:55,530 --> 00:07:58,680
and we do it through
an ECS task definition.

188
00:07:58,680 --> 00:08:01,647
That's the mechanism in order to do it.

189
00:08:01,647 --> 00:08:04,200
And then a common pattern
of exposing an app

190
00:08:04,200 --> 00:08:06,543
is usually through a load balancer,

191
00:08:07,470 --> 00:08:08,997
an application load balancer.

192
00:08:08,997 --> 00:08:10,290
And in order to do that,

193
00:08:10,290 --> 00:08:12,570
we need to do it securely.

194
00:08:12,570 --> 00:08:14,070
We need to have a TLS certificate,

195
00:08:14,070 --> 00:08:15,780
we need to make sure we have that.

196
00:08:15,780 --> 00:08:17,430
And then we need to integrate it

197
00:08:17,430 --> 00:08:19,110
with the ALB itself,

198
00:08:19,110 --> 00:08:21,240
alongside with all of its resources.

199
00:08:21,240 --> 00:08:23,460
So target group, phishing rules,

200
00:08:23,460 --> 00:08:25,590
routing configuration and so on.

201
00:08:25,590 --> 00:08:28,410
And just now we got to a point

202
00:08:28,410 --> 00:08:30,870
where we can integrate this all together,

203
00:08:30,870 --> 00:08:32,430
create an easier service,

204
00:08:32,430 --> 00:08:34,980
which basically takes the task definition

205
00:08:34,980 --> 00:08:38,040
and creates multiple
instance of this task,

206
00:08:38,040 --> 00:08:39,270
integrate them with the ALB,

207
00:08:39,270 --> 00:08:41,883
and then expose the app
to the outside world.

208
00:08:43,800 --> 00:08:46,440
But the thing is, our app
is not a static entity.

209
00:08:46,440 --> 00:08:47,970
Of course, we need to have

210
00:08:47,970 --> 00:08:49,530
an auto-scaling policies in place.

211
00:08:49,530 --> 00:08:51,330
We need to take care of that.

212
00:08:51,330 --> 00:08:54,180
And in order to operate and
maintain our app over time,

213
00:08:54,180 --> 00:08:55,440
we need to be able to observe it.

214
00:08:55,440 --> 00:08:58,440
So we need to ship
logs, traces and metrics

215
00:08:58,440 --> 00:09:00,600
into the observability service.

216
00:09:00,600 --> 00:09:01,767
In our case, it's Amazon CloudWatch.

217
00:09:01,767 --> 00:09:06,510
And you could do it easily
with Container Insights,

218
00:09:06,510 --> 00:09:08,160
which integrated with ECS.

219
00:09:08,160 --> 00:09:10,740
Now, all of that complex process

220
00:09:10,740 --> 00:09:12,153
is just for a single app.

221
00:09:13,890 --> 00:09:16,440
If we flip the perspective around

222
00:09:16,440 --> 00:09:19,680
and we look from a platform builder's,

223
00:09:19,680 --> 00:09:21,690
we also have some other challenges.

224
00:09:21,690 --> 00:09:23,820
There are many different development teams

225
00:09:23,820 --> 00:09:27,060
that platform team
builders need to support.

226
00:09:27,060 --> 00:09:28,950
Each come with its own application

227
00:09:28,950 --> 00:09:30,270
and different requirements.

228
00:09:30,270 --> 00:09:33,900
And even if we standardize
on the compute layer,

229
00:09:33,900 --> 00:09:36,720
so, for example, if you
standard with Amazon ECS

230
00:09:36,720 --> 00:09:38,313
to provision our resources,

231
00:09:39,150 --> 00:09:42,450
each different app might need
a different backing service.

232
00:09:42,450 --> 00:09:44,610
So, for example, some
might need an S3 bucket

233
00:09:44,610 --> 00:09:46,350
and some might need a DynamoDB table.

234
00:09:46,350 --> 00:09:49,110
And we need to be able to scale it

235
00:09:49,110 --> 00:09:50,280
across the organization.

236
00:09:50,280 --> 00:09:53,130
So it's not just about how
they're deployed single up,

237
00:09:53,130 --> 00:09:55,110
it's how do I make sure
all the requirements

238
00:09:55,110 --> 00:09:57,390
of the different teams are satisfied?

239
00:09:57,390 --> 00:09:59,580
So like any good engineers,

240
00:09:59,580 --> 00:10:01,950
we usually automate things.

241
00:10:01,950 --> 00:10:05,010
And by automation, you
probably understand it,

242
00:10:05,010 --> 00:10:06,960
is building developers' platform.

243
00:10:06,960 --> 00:10:08,313
We need to a build tool,

244
00:10:09,383 --> 00:10:11,730
a platform which will help developers

245
00:10:11,730 --> 00:10:13,050
get their task easier.

246
00:10:13,050 --> 00:10:18,050
Now, like any other system
or app in the organization,

247
00:10:18,750 --> 00:10:22,230
it has to have design principles.

248
00:10:22,230 --> 00:10:25,800
And today, I wanna cover three
important design principles

249
00:10:25,800 --> 00:10:27,810
for building developer platforms.

250
00:10:27,810 --> 00:10:29,493
Those are lifecycle management,

251
00:10:30,364 --> 00:10:33,690
economies of scale and
break glass procedures.

252
00:10:33,690 --> 00:10:36,273
So let's dive deep into
each of them separately.

253
00:10:37,560 --> 00:10:41,310
Lifecycle management means
owning the entire lifecycle

254
00:10:41,310 --> 00:10:42,660
of the deployment of the app

255
00:10:42,660 --> 00:10:45,360
from the creation, through update,

256
00:10:45,360 --> 00:10:47,100
all the way up to decommission.

257
00:10:47,100 --> 00:10:49,293
It's not just about, "How
do I deploy the app?"

258
00:10:49,293 --> 00:10:52,140
it's about maintaining it over time

259
00:10:52,140 --> 00:10:54,090
with updates and upgrades.

260
00:10:54,090 --> 00:10:56,580
It also includes some
sort of an entry point

261
00:10:56,580 --> 00:11:00,600
for developers to be able
to interact with the system.

262
00:11:00,600 --> 00:11:03,510
And this can be anything
from an API, a CLI,

263
00:11:03,510 --> 00:11:04,890
or even a collection of templates,

264
00:11:04,890 --> 00:11:06,963
which I will cover in the next part.

265
00:11:08,340 --> 00:11:11,430
Economies of scale is all about
being smart with resources.

266
00:11:11,430 --> 00:11:15,240
Don't provision things
that you don't need to.

267
00:11:15,240 --> 00:11:17,910
And make sure you're
reusing things over time.

268
00:11:17,910 --> 00:11:20,730
And this means reusing resources.

269
00:11:20,730 --> 00:11:22,200
Like in the previous example,

270
00:11:22,200 --> 00:11:23,160
if you have an ALB,

271
00:11:23,160 --> 00:11:24,885
we don't need to provision another ALB

272
00:11:24,885 --> 00:11:26,940
to expose a different app, a second app,

273
00:11:26,940 --> 00:11:28,230
we can reuse the same ALB

274
00:11:28,230 --> 00:11:30,720
with different routing configuration.

275
00:11:30,720 --> 00:11:32,670
We also need to configure
shared resources.

276
00:11:32,670 --> 00:11:33,720
So the ECS cluster,

277
00:11:33,720 --> 00:11:36,450
the VPC configuration,

278
00:11:36,450 --> 00:11:37,950
the monitoring dashboards,

279
00:11:37,950 --> 00:11:39,000
we need all of that

280
00:11:39,000 --> 00:11:42,390
to be shared across all
of the different apps.

281
00:11:42,390 --> 00:11:44,580
And in reality, it's about balancing

282
00:11:44,580 --> 00:11:48,510
between the approach of replicating things

283
00:11:48,510 --> 00:11:50,190
for each and every app,

284
00:11:50,190 --> 00:11:52,080
but avoiding the complexity

285
00:11:52,080 --> 00:11:54,510
of having everything
interconnected that you create.

286
00:11:54,510 --> 00:11:59,510
You can end up with a mess
of resources in your system.

287
00:12:02,520 --> 00:12:05,430
And the last thing, which I
think is the most important one,

288
00:12:05,430 --> 00:12:06,900
is the break glass procedures.

289
00:12:06,900 --> 00:12:09,030
This is your escape hatches.

290
00:12:09,030 --> 00:12:10,950
No platform is gonna be perfect

291
00:12:10,950 --> 00:12:12,510
for every use case from the start.

292
00:12:12,510 --> 00:12:14,730
And even if you graduate

293
00:12:14,730 --> 00:12:16,830
and introduce more features,

294
00:12:16,830 --> 00:12:19,110
you're not gonna hit all the marks

295
00:12:19,110 --> 00:12:20,640
for all the deployments.

296
00:12:20,640 --> 00:12:23,040
So you need to give your
users, the developers,

297
00:12:23,040 --> 00:12:25,050
an easier way to transition

298
00:12:25,050 --> 00:12:26,100
between platform offering.

299
00:12:26,100 --> 00:12:28,560
So if they use one deployment method,

300
00:12:28,560 --> 00:12:30,960
you wanna enable them to migrate

301
00:12:30,960 --> 00:12:33,000
or move away in the future

302
00:12:33,000 --> 00:12:36,090
into other deployment
methods within the platform.

303
00:12:36,090 --> 00:12:38,610
We also want to enable them

304
00:12:38,610 --> 00:12:40,380
to extend the platform capability.

305
00:12:40,380 --> 00:12:43,020
So if the platform
doesn't support anything,

306
00:12:43,020 --> 00:12:46,320
they can extend it with their
own customized tooling scripts

307
00:12:46,320 --> 00:12:48,180
or anything else.

308
00:12:48,180 --> 00:12:51,240
And the last thing is about
self-managing resources

309
00:12:51,240 --> 00:12:52,170
in the future.

310
00:12:52,170 --> 00:12:53,040
There might be a case,

311
00:12:53,040 --> 00:12:55,683
and we've seen it with a lot of customers,

312
00:12:57,271 --> 00:12:58,830
that users need to adopt

313
00:12:58,830 --> 00:13:00,240
and need to self-manage resources

314
00:13:00,240 --> 00:13:01,950
because they reach to a point

315
00:13:01,950 --> 00:13:04,590
where have the very specific requirements

316
00:13:04,590 --> 00:13:06,390
that the platform cannot provide them.

317
00:13:06,390 --> 00:13:08,520
They need to be able to
self-manage those resources

318
00:13:08,520 --> 00:13:11,880
instead of redeploying and
migrating out of the platform.

319
00:13:11,880 --> 00:13:13,170
You don't want your users

320
00:13:13,170 --> 00:13:15,870
to feel they are trapped
into the platform limitation.

321
00:13:16,800 --> 00:13:20,520
And this brings us to
philosophical questions,

322
00:13:20,520 --> 00:13:23,340
that is an ongoing one
between platform teams

323
00:13:23,340 --> 00:13:24,420
and developer teams.

324
00:13:24,420 --> 00:13:25,830
And it's all about,

325
00:13:25,830 --> 00:13:27,880
how do you design the platform interface?

326
00:13:29,160 --> 00:13:31,020
Should we use obstruction,

327
00:13:31,020 --> 00:13:35,100
which is hiding the implementation

328
00:13:35,100 --> 00:13:36,870
of the underlying component?

329
00:13:36,870 --> 00:13:38,310
Or should we use composition,

330
00:13:38,310 --> 00:13:41,880
which is all about combining
resources with default,

331
00:13:41,880 --> 00:13:45,300
but exposing the underlying
implementation to the users?

332
00:13:45,300 --> 00:13:49,323
Or maybe you should use a
mixture of both of them.

333
00:13:50,580 --> 00:13:52,800
And whatever you choose,

334
00:13:52,800 --> 00:13:55,710
it's basically impact
the way users understand

335
00:13:55,710 --> 00:13:57,390
what's going on in the system.

336
00:13:57,390 --> 00:14:00,120
In reality, it's a
balance of understanding

337
00:14:00,120 --> 00:14:03,300
what going on or how the
things work under the hood

338
00:14:03,300 --> 00:14:05,610
and achieving the user's goal,

339
00:14:05,610 --> 00:14:07,650
which is, in our case,

340
00:14:07,650 --> 00:14:09,780
getting from code to cloud.

341
00:14:09,780 --> 00:14:12,540
So let's dive deep into
each of them separately.

342
00:14:12,540 --> 00:14:16,680
With obstruction, users don't need to know

343
00:14:16,680 --> 00:14:17,850
what's happening under the hood.

344
00:14:17,850 --> 00:14:20,040
They can be free from any
implementation decision

345
00:14:20,040 --> 00:14:22,950
and get started very quickly and easily,

346
00:14:22,950 --> 00:14:24,900
getting the things they need.

347
00:14:24,900 --> 00:14:26,760
This brings some advantages,

348
00:14:26,760 --> 00:14:30,750
like having a really
low barrier for entry.

349
00:14:30,750 --> 00:14:33,120
We don't need our users
to be an AWS expert.

350
00:14:33,120 --> 00:14:35,340
They can just spin up, use the platform,

351
00:14:35,340 --> 00:14:37,773
in order to deploy their own resources.

352
00:14:38,610 --> 00:14:42,030
It also ensures consistency
across the organization.

353
00:14:42,030 --> 00:14:43,470
Everyone using the same patterns,

354
00:14:43,470 --> 00:14:45,330
everyone using the same
deployment mechanism

355
00:14:45,330 --> 00:14:48,210
and it's easier to
understand what's going on.

356
00:14:48,210 --> 00:14:50,070
And lifecycle management in this case

357
00:14:50,070 --> 00:14:51,960
is usually exposed through an API,

358
00:14:51,960 --> 00:14:52,920
which is an easier way

359
00:14:52,920 --> 00:14:54,543
to interact with platforms.

360
00:14:57,690 --> 00:14:59,310
Sorry.

361
00:14:59,310 --> 00:15:02,733
However, it does come
with some challenges.

362
00:15:03,870 --> 00:15:05,610
We do rely on platform teams

363
00:15:05,610 --> 00:15:08,520
to provision to get new features.

364
00:15:08,520 --> 00:15:12,090
So whenever we need to extend
the platform capability,

365
00:15:12,090 --> 00:15:14,430
we need to wait for the
platform team to build this

366
00:15:14,430 --> 00:15:16,440
and integrate it with the platform.

367
00:15:16,440 --> 00:15:19,473
It also creates some challenges
when things go wrong.

368
00:15:20,430 --> 00:15:22,920
When there's an error and we need to debug

369
00:15:22,920 --> 00:15:24,480
or investigate something,

370
00:15:24,480 --> 00:15:27,690
we ended up understanding

371
00:15:27,690 --> 00:15:29,970
what the underlying resources actually are

372
00:15:29,970 --> 00:15:32,490
and dig up into the actual configuration,

373
00:15:32,490 --> 00:15:33,570
which kind of is the purpose

374
00:15:33,570 --> 00:15:35,910
of having lower barrier for entry.

375
00:15:35,910 --> 00:15:37,170
So this is another thing

376
00:15:37,170 --> 00:15:39,000
we need to take into account,

377
00:15:39,000 --> 00:15:42,060
and it also creates some
higher maintenance effort.

378
00:15:42,060 --> 00:15:43,770
This is a system like any other app

379
00:15:43,770 --> 00:15:46,620
and we need to ensure we
maintain this over time,

380
00:15:46,620 --> 00:15:51,423
including updates, upgrades
and operation efficiency.

381
00:15:52,440 --> 00:15:55,470
So in reality, it's a
simpler way to get started,

382
00:15:55,470 --> 00:15:57,090
but evolution is bottlenecked

383
00:15:57,090 --> 00:15:58,353
by the platform teams.

384
00:16:00,150 --> 00:16:01,980
Composition on the
other hand is different.

385
00:16:01,980 --> 00:16:04,800
It's all about automating the setup,

386
00:16:04,800 --> 00:16:07,770
but keeping everything
visible for the users.

387
00:16:07,770 --> 00:16:08,670
The good thing about that

388
00:16:08,670 --> 00:16:13,260
that developers can use part
of what the platform gives them

389
00:16:13,260 --> 00:16:14,400
and get the result they need.

390
00:16:14,400 --> 00:16:16,710
They can do it, they can
adapt it very quickly,

391
00:16:16,710 --> 00:16:18,480
and get slice and dice,

392
00:16:18,480 --> 00:16:19,920
whatever the platform gives them,

393
00:16:19,920 --> 00:16:21,543
and deploy to production.

394
00:16:22,680 --> 00:16:27,680
Flexibility is also a positive thing here

395
00:16:28,290 --> 00:16:31,950
because they can adjust whatever template

396
00:16:31,950 --> 00:16:33,570
or whatever tooling they have

397
00:16:33,570 --> 00:16:35,610
in order to get the result they need.

398
00:16:35,610 --> 00:16:37,950
And what you see is what you get.

399
00:16:37,950 --> 00:16:39,270
There's no hiding,

400
00:16:39,270 --> 00:16:42,180
there's no hidden
implementation under the hood.

401
00:16:42,180 --> 00:16:44,220
So meaning, when they
need to see something,

402
00:16:44,220 --> 00:16:45,540
when they need to update something,

403
00:16:45,540 --> 00:16:48,363
they can just do it easily.

404
00:16:50,850 --> 00:16:54,360
However, this brings us a
couple of other challenges.

405
00:16:54,360 --> 00:16:56,730
So it doesn't require
steeper learning curve.

406
00:16:56,730 --> 00:16:58,560
You don't need to be an expert,

407
00:16:58,560 --> 00:17:00,420
but you need to have domain knowledge

408
00:17:00,420 --> 00:17:03,240
into the domain you're operating in.

409
00:17:03,240 --> 00:17:05,460
So for example, in our case,

410
00:17:05,460 --> 00:17:07,530
developers do need to understand

411
00:17:07,530 --> 00:17:12,060
Amazon ECS Concept, ECS
Cluster, ALB, and so on.

412
00:17:12,060 --> 00:17:16,213
It also creates fragmentation
around deployments.

413
00:17:19,590 --> 00:17:22,290
Because each team can customize

414
00:17:22,290 --> 00:17:23,763
their own deployment method,

415
00:17:24,690 --> 00:17:27,750
this can lead to the fact that each one

416
00:17:27,750 --> 00:17:30,270
have a different way of deploying things,

417
00:17:30,270 --> 00:17:32,880
which in our case, from
a platform perspective,

418
00:17:32,880 --> 00:17:35,520
it can be how to manage
across the organization.

419
00:17:35,520 --> 00:17:38,340
And the last thing about
lifecycle management,

420
00:17:38,340 --> 00:17:39,870
it can become tricky,

421
00:17:39,870 --> 00:17:42,000
especially when we talk about templates,

422
00:17:42,000 --> 00:17:42,870
it can become tricky

423
00:17:42,870 --> 00:17:45,360
to scale this across the organization.

424
00:17:45,360 --> 00:17:46,260
So the trade off here

425
00:17:46,260 --> 00:17:49,740
is about requiring more domain
knowledge from the users,

426
00:17:49,740 --> 00:17:51,993
but teams can evolve independently.

427
00:17:54,690 --> 00:17:56,850
Summarizing these two approach,

428
00:17:56,850 --> 00:17:59,670
it would be nice if we
can blend them together,

429
00:17:59,670 --> 00:18:01,890
if we can provide a
simpler way to get started,

430
00:18:01,890 --> 00:18:04,890
but without hiding the
implementation detail upfront,

431
00:18:04,890 --> 00:18:06,240
when you need to update something,

432
00:18:06,240 --> 00:18:07,320
you can still do it.

433
00:18:07,320 --> 00:18:09,000
So let's look at the same entry point

434
00:18:09,000 --> 00:18:11,460
of what we started at the beginning

435
00:18:11,460 --> 00:18:13,680
of having an app deployed,

436
00:18:13,680 --> 00:18:16,590
an app package in ECR
ready to be deployed.

437
00:18:16,590 --> 00:18:20,610
If we could provide a
simple way to get started,

438
00:18:20,610 --> 00:18:22,620
like a very light interface

439
00:18:22,620 --> 00:18:26,283
that requires a couple of
parameters and no more,

440
00:18:27,120 --> 00:18:29,190
but it does come with
a lifecycle management.

441
00:18:29,190 --> 00:18:31,740
So every time we update something,

442
00:18:31,740 --> 00:18:33,720
this kind of service take control

443
00:18:33,720 --> 00:18:35,730
of the entire lifecycle operation.

444
00:18:35,730 --> 00:18:38,940
And in turn, it provision
everything you've seen

445
00:18:38,940 --> 00:18:39,773
in the previous site.

446
00:18:39,773 --> 00:18:43,020
So the cluster, the VPC configuration,

447
00:18:43,020 --> 00:18:47,160
the ALB and the integration
with CloudWatch.

448
00:18:47,160 --> 00:18:50,220
But this is all kept visible to the users.

449
00:18:50,220 --> 00:18:53,670
And whenever we have another
app in the organization,

450
00:18:53,670 --> 00:18:57,030
it's automatically using the
same deployment mechanism

451
00:18:57,030 --> 00:18:59,700
and integrate and reuse the same resources

452
00:18:59,700 --> 00:19:01,560
that we already provision.

453
00:19:01,560 --> 00:19:03,010
This approach balance between

454
00:19:05,398 --> 00:19:07,590
the level of knowledge
needed to get started

455
00:19:07,590 --> 00:19:10,263
and the flexibility to
change things in the future.

456
00:19:11,100 --> 00:19:13,200
In the next part of this session,

457
00:19:13,200 --> 00:19:15,000
Jenny's going to cover how Amazon ECS

458
00:19:15,000 --> 00:19:17,326
can help you achieve all of that.

459
00:19:17,326 --> 00:19:22,326
- Thank you.

460
00:19:22,639 --> 00:19:24,330
Thank you, Tsahi.

461
00:19:24,330 --> 00:19:29,100
I am so honored to introduce to you today

462
00:19:29,100 --> 00:19:31,593
Amazon ECS Express Mode.

463
00:19:33,420 --> 00:19:35,793
We introduced this feature just last week.

464
00:19:37,320 --> 00:19:39,420
We made it for developers

465
00:19:39,420 --> 00:19:41,943
to experience ECS in a whole new way.

466
00:19:43,980 --> 00:19:44,953
Taking an advantage of all the things

467
00:19:44,953 --> 00:19:47,040
that Tsahi just talked about,

468
00:19:47,040 --> 00:19:50,940
of all the years of platform experience

469
00:19:50,940 --> 00:19:54,030
that ECS has learned from

470
00:19:54,030 --> 00:19:57,660
and pass that knowledge onto our users

471
00:19:57,660 --> 00:19:59,130
so that you can stand up

472
00:19:59,130 --> 00:20:00,873
your applications faster.

473
00:20:02,250 --> 00:20:04,830
We started the way we do all applications

474
00:20:04,830 --> 00:20:06,555
at products at Amazon,

475
00:20:06,555 --> 00:20:08,850
we worked backwards from the customer.

476
00:20:08,850 --> 00:20:10,800
And we found that most ECS customers

477
00:20:10,800 --> 00:20:13,260
were implementing a
really repeatable pattern.

478
00:20:13,260 --> 00:20:15,210
The same one that Tsahi
was showing earlier,

479
00:20:15,210 --> 00:20:18,930
but a lot of that pattern
existed outside of ECS.

480
00:20:18,930 --> 00:20:20,790
It included other AWS services,

481
00:20:20,790 --> 00:20:22,227
like load balancers,

482
00:20:22,227 --> 00:20:25,950
autoscaling, domain name certificates,

483
00:20:25,950 --> 00:20:27,963
networking, observability.

484
00:20:28,830 --> 00:20:29,850
So we asked ourselves

485
00:20:29,850 --> 00:20:32,580
could we do what ECS does best

486
00:20:32,580 --> 00:20:35,610
and relieve customers of that burden?

487
00:20:35,610 --> 00:20:37,713
Could we take more responsibility?

488
00:20:39,720 --> 00:20:41,320
Let me show you what we've done.

489
00:20:42,360 --> 00:20:45,090
To create an app with
Amazon ECS Express Mode,

490
00:20:45,090 --> 00:20:47,280
you only have to give us three things,

491
00:20:47,280 --> 00:20:48,930
your container image

492
00:20:48,930 --> 00:20:50,313
and two IM rolls.

493
00:20:51,600 --> 00:20:53,190
We take defaults for everything else,

494
00:20:53,190 --> 00:20:56,073
but there are additional
configurations available.

495
00:20:58,560 --> 00:21:02,610
As soon as you complete the deployment,

496
00:21:02,610 --> 00:21:04,953
you do get an application URL,

497
00:21:06,720 --> 00:21:08,640
and that URL allows you

498
00:21:08,640 --> 00:21:10,743
to test your application end to end.

499
00:21:13,680 --> 00:21:15,480
Those options do allow you

500
00:21:15,480 --> 00:21:18,750
to configure the application.

501
00:21:18,750 --> 00:21:20,720
And we'll go through what
all those options are

502
00:21:20,720 --> 00:21:22,260
in just a minute.

503
00:21:22,260 --> 00:21:23,400
But they're greatly reduced

504
00:21:23,400 --> 00:21:25,320
compared to the hundreds of parameters

505
00:21:25,320 --> 00:21:27,030
that you would've had to go through

506
00:21:27,030 --> 00:21:29,430
on all of these resources

507
00:21:29,430 --> 00:21:30,960
that we are provisioning,

508
00:21:30,960 --> 00:21:33,510
that I'm showing you on the screen now.

509
00:21:33,510 --> 00:21:36,780
And Express Mode provisions
all of those resources you need

510
00:21:36,780 --> 00:21:40,110
to stand up a highly available, scalable,

511
00:21:40,110 --> 00:21:41,160
containerized service

512
00:21:41,160 --> 00:21:43,530
using AWS best practices.

513
00:21:43,530 --> 00:21:46,980
And those include things
like canary deployments,

514
00:21:46,980 --> 00:21:48,663
alarm-based rollbacks,

515
00:21:49,920 --> 00:21:53,340
TLS certificates, autoscaling policies,

516
00:21:53,340 --> 00:21:56,250
CloudWatch logging, AZ rebalancing,

517
00:21:56,250 --> 00:21:59,490
minimally permissive
inbound security groups,

518
00:21:59,490 --> 00:22:01,020
all configured and wired together

519
00:22:01,020 --> 00:22:02,250
so you don't have to think about it,

520
00:22:02,250 --> 00:22:03,090
just to get started.

521
00:22:03,090 --> 00:22:05,880
And at the end of this deployment,

522
00:22:05,880 --> 00:22:08,073
you have a live application.

523
00:22:10,440 --> 00:22:13,440
The command line view is
similarly very simple.

524
00:22:13,440 --> 00:22:15,420
One container, two IM rolls.

525
00:22:15,420 --> 00:22:18,720
The first IM roll is
the task execution role,

526
00:22:18,720 --> 00:22:20,580
which if you're familiar with ECS,

527
00:22:20,580 --> 00:22:22,110
you'll know is what we use

528
00:22:22,110 --> 00:22:24,930
to get your container image from ECR

529
00:22:24,930 --> 00:22:27,423
and to set up your logging.

530
00:22:28,260 --> 00:22:29,760
The second one is new,

531
00:22:29,760 --> 00:22:30,960
it's an infrastructure role,

532
00:22:30,960 --> 00:22:33,450
and that's what we use to provision

533
00:22:33,450 --> 00:22:35,940
all of the resources on the right.

534
00:22:35,940 --> 00:22:39,570
And you might ask, how did
we come to this architecture,

535
00:22:39,570 --> 00:22:40,890
the defaults that we selected?

536
00:22:40,890 --> 00:22:42,690
And we were trying to
balance a couple of things.

537
00:22:42,690 --> 00:22:46,050
So one, at AWS, we love data. (laughing)

538
00:22:46,050 --> 00:22:49,110
So we looked at, what are
customers configuring today?

539
00:22:49,110 --> 00:22:51,303
And this was a very common pattern.

540
00:22:52,200 --> 00:22:54,120
Customers were configuring services

541
00:22:54,120 --> 00:22:55,620
and not individual tasks.

542
00:22:55,620 --> 00:22:57,540
They were hooking up load balancers,

543
00:22:57,540 --> 00:22:59,793
and as opposed to other
types of networking.

544
00:23:01,110 --> 00:23:04,770
Two, we took a look at the best practices

545
00:23:04,770 --> 00:23:06,570
and we talked to our principal engineers

546
00:23:06,570 --> 00:23:07,710
and solution architects,

547
00:23:07,710 --> 00:23:11,494
and we had a lot of really
difficult conversations,

548
00:23:11,494 --> 00:23:14,073
(laughing) a lot of heated conversations.

549
00:23:15,240 --> 00:23:18,030
And we looked at, how
do we strike a balance

550
00:23:18,030 --> 00:23:21,123
between helping customers
get started fast,

551
00:23:22,380 --> 00:23:24,960
with dev workloads and test workloads,

552
00:23:24,960 --> 00:23:25,793
and also making sure

553
00:23:25,793 --> 00:23:28,170
that you're set up for the long term?

554
00:23:28,170 --> 00:23:29,640
Because really we wanna make sure

555
00:23:29,640 --> 00:23:34,410
this is a place that
you're not overburdened

556
00:23:34,410 --> 00:23:36,390
by what you would need

557
00:23:36,390 --> 00:23:38,250
in order to run a production workload,

558
00:23:38,250 --> 00:23:40,410
but it's also a place
that you can get started

559
00:23:40,410 --> 00:23:42,540
and know that you have everything in place

560
00:23:42,540 --> 00:23:44,460
to run that production workload.

561
00:23:44,460 --> 00:23:48,240
So we do things like set
up all of the subnets

562
00:23:48,240 --> 00:23:49,980
that you would need and all of the AZs,

563
00:23:49,980 --> 00:23:51,900
and make sure that we
turn on AZ rebalancing,

564
00:23:51,900 --> 00:23:53,910
so that when you're ready,

565
00:23:53,910 --> 00:23:54,990
you can just increase

566
00:23:54,990 --> 00:23:56,610
your desired counts to three,

567
00:23:56,610 --> 00:23:59,190
and now you are highly available

568
00:23:59,190 --> 00:24:01,560
in three availability zones.

569
00:24:01,560 --> 00:24:03,990
But we start with just one

570
00:24:03,990 --> 00:24:08,160
so that you're not burdened
with so many tasks,

571
00:24:08,160 --> 00:24:11,373
and how to deal with
the cost of all of that,

572
00:24:13,590 --> 00:24:15,030
all of this is built around

573
00:24:15,030 --> 00:24:16,560
trying to make things really simple

574
00:24:16,560 --> 00:24:17,760
and easy to get started.

575
00:24:19,320 --> 00:24:21,870
And this is something
we're really excited about,

576
00:24:21,870 --> 00:24:24,480
something you don't see
often in the AWS CLI.

577
00:24:24,480 --> 00:24:25,740
We know that a lot of developers

578
00:24:25,740 --> 00:24:28,590
love working right in
your IDE or terminal.

579
00:24:28,590 --> 00:24:33,390
If you add this monitor
resources flag to your call,

580
00:24:33,390 --> 00:24:36,063
you'll get the following
interactive experience.

581
00:24:37,380 --> 00:24:38,910
This is really similar to the console,

582
00:24:38,910 --> 00:24:41,820
so you can see what's happening
in your ECS deployment

583
00:24:41,820 --> 00:24:44,400
in a really super visual way.

584
00:24:44,400 --> 00:24:46,530
And this is happening on the create,

585
00:24:46,530 --> 00:24:48,180
the update and the delete

586
00:24:48,180 --> 00:24:49,803
of an Express Mode service.

587
00:24:50,700 --> 00:24:53,070
We feel like the observability
of something that,

588
00:24:53,070 --> 00:24:55,020
to go back to what
Tsahi was talking about,

589
00:24:55,020 --> 00:24:58,890
a composition is a
really important concept.

590
00:24:58,890 --> 00:25:01,650
So in both the console
and the CLI experiences,

591
00:25:01,650 --> 00:25:05,220
you're seeing the RN of
the resource, the status,

592
00:25:05,220 --> 00:25:07,680
any events or errors that we're receiving

593
00:25:07,680 --> 00:25:10,290
are being piped through to these views,

594
00:25:10,290 --> 00:25:12,600
so that you have a really
robust understanding

595
00:25:12,600 --> 00:25:14,550
of what's happening in the environment.

596
00:25:16,650 --> 00:25:18,000
I just alluded to this,

597
00:25:18,000 --> 00:25:19,410
but back to what Tsahi was saying

598
00:25:19,410 --> 00:25:21,300
about lifecycle management,

599
00:25:21,300 --> 00:25:23,820
Express Mode is a complete lifecycle.

600
00:25:23,820 --> 00:25:25,800
There is a create, an update,

601
00:25:25,800 --> 00:25:27,840
a delete of this experience.

602
00:25:27,840 --> 00:25:29,700
And if you are content
with that experience,

603
00:25:29,700 --> 00:25:32,760
you never have to learn about
the underlying resources.

604
00:25:32,760 --> 00:25:34,590
You don't have to go look at your ALB,

605
00:25:34,590 --> 00:25:36,090
or your target group,

606
00:25:36,090 --> 00:25:37,950
or even understand what
all the settings are

607
00:25:37,950 --> 00:25:39,510
in the task definition.

608
00:25:39,510 --> 00:25:44,040
For novice users, this
can be a really great way

609
00:25:44,040 --> 00:25:46,473
to experience launching containers.

610
00:25:48,510 --> 00:25:50,220
We also do a lot of things here

611
00:25:50,220 --> 00:25:54,030
that make things in ECS a lot simpler

612
00:25:54,030 --> 00:25:54,990
than they are today.

613
00:25:54,990 --> 00:25:57,240
Things like updating the port

614
00:25:57,240 --> 00:25:58,620
or the health check.

615
00:25:58,620 --> 00:26:00,120
If you've done that today in ECS,

616
00:26:00,120 --> 00:26:02,370
you know that's a potentially disruptive

617
00:26:02,370 --> 00:26:05,010
and really difficult thing to coordinate.

618
00:26:05,010 --> 00:26:07,953
We handle all of that
for you in Express Mode.

619
00:26:09,060 --> 00:26:11,040
Moving from a public service

620
00:26:11,040 --> 00:26:12,810
to a private service, or vice versa,

621
00:26:12,810 --> 00:26:14,730
is a matter of handing
us different subnets

622
00:26:14,730 --> 00:26:16,320
and pushing update.

623
00:26:16,320 --> 00:26:17,940
There's things that we do in Express Mode

624
00:26:17,940 --> 00:26:19,650
that are very complex,

625
00:26:19,650 --> 00:26:21,603
that become very simple.

626
00:26:23,550 --> 00:26:24,383
Let me show you.

627
00:26:25,410 --> 00:26:26,910
So for observability,

628
00:26:26,910 --> 00:26:28,710
we show you the normal CPU and memory,

629
00:26:28,710 --> 00:26:30,420
but because we have load balancer,

630
00:26:30,420 --> 00:26:32,700
there's also target response time,

631
00:26:32,700 --> 00:26:35,400
4XX/5XX.

632
00:26:35,400 --> 00:26:37,980
You also get your application logs.

633
00:26:37,980 --> 00:26:40,380
We added a new Resources tab

634
00:26:40,380 --> 00:26:42,750
that you see in the timeline view,

635
00:26:42,750 --> 00:26:46,413
but we also have the list of dupe links.

636
00:26:48,870 --> 00:26:49,703
Now, for the update,

637
00:26:49,703 --> 00:26:53,130
this is gonna show all
of the create options.

638
00:26:53,130 --> 00:26:54,600
You have your container settings,

639
00:26:54,600 --> 00:26:56,730
port health check, environment variables,

640
00:26:56,730 --> 00:26:58,800
secrets, commands,

641
00:26:58,800 --> 00:27:00,450
and the task roll that you can add

642
00:27:00,450 --> 00:27:04,533
to access other AWS services via IM.

643
00:27:05,580 --> 00:27:08,640
For compute, you have CPU
and memory, autoscaling,

644
00:27:08,640 --> 00:27:11,163
we have CPU memory and requests,

645
00:27:12,420 --> 00:27:13,470
min and max.

646
00:27:13,470 --> 00:27:16,380
For networking, you have
subnets and security groups,

647
00:27:16,380 --> 00:27:19,140
and you can also name your own log groups

648
00:27:19,140 --> 00:27:22,893
and log stream prefixes.

649
00:27:24,060 --> 00:27:28,620
When we delete, you can also
see the process of deleting.

650
00:27:28,620 --> 00:27:30,630
We're gonna delete any resources

651
00:27:30,630 --> 00:27:32,283
that are unique to that service.

652
00:27:37,860 --> 00:27:39,030
You might be asking yourself

653
00:27:39,030 --> 00:27:40,830
about infrastructure as code.

654
00:27:40,830 --> 00:27:43,470
I would love to tell you
about that. (laughing)

655
00:27:43,470 --> 00:27:47,040
On the left, we have
the full CloudFormation

656
00:27:47,040 --> 00:27:49,380
of the Express Mode architecture.

657
00:27:49,380 --> 00:27:50,850
And on the right,

658
00:27:50,850 --> 00:27:53,640
we have the Express
gateway service resource

659
00:27:53,640 --> 00:27:57,153
with the required parameters.

660
00:27:59,550 --> 00:28:01,500
I'm really excited about that reduction.

661
00:28:01,500 --> 00:28:02,971
I don't know about you. (laughing)

662
00:28:02,971 --> 00:28:04,230
(audience member clapping)

663
00:28:04,230 --> 00:28:05,940
Yeah, thank you, you can clap.

664
00:28:05,940 --> 00:28:06,900
It's a silent session,

665
00:28:06,900 --> 00:28:08,840
but you're still allowed
to clap. (laughing)

666
00:28:08,840 --> 00:28:11,840
(audience clapping)

667
00:28:14,610 --> 00:28:16,800
Here, we have the optional
parameters as well,

668
00:28:16,800 --> 00:28:18,660
but I've highlighted
where you can bring in

669
00:28:18,660 --> 00:28:19,620
your own resources,

670
00:28:19,620 --> 00:28:22,293
like a cluster, or a
subnet, or a security group.

671
00:28:24,120 --> 00:28:26,610
This gives you some flexibility

672
00:28:26,610 --> 00:28:30,303
to bring your own definitions in.

673
00:28:31,675 --> 00:28:34,593
And Tsahi also talked
about economies of scale.

674
00:28:35,430 --> 00:28:37,410
And I am super pleased to share

675
00:28:37,410 --> 00:28:38,730
that Express Mode services

676
00:28:38,730 --> 00:28:41,070
that are deployed to
the same set of subnets

677
00:28:41,070 --> 00:28:42,630
in the same account

678
00:28:42,630 --> 00:28:44,193
will share ALBs.

679
00:28:45,600 --> 00:28:48,453
We do this using host
header-based listener rules.

680
00:28:49,860 --> 00:28:51,300
And not only do we share them,

681
00:28:51,300 --> 00:28:52,713
we also scale them.

682
00:28:54,211 --> 00:28:56,033
And what do I mean by
that? Let me show you.

683
00:28:57,990 --> 00:29:00,150
So we have a load balancer here

684
00:29:00,150 --> 00:29:02,150
that's been provisioned by Express Mode.

685
00:29:03,090 --> 00:29:04,410
And in the listener,

686
00:29:04,410 --> 00:29:09,300
you can see that we have
25 Express Mode services.

687
00:29:09,300 --> 00:29:14,253
We can share an ALB with up
to 25 Express Mode services.

688
00:29:16,830 --> 00:29:19,863
They also all have
unique TLS certificates.

689
00:29:21,900 --> 00:29:24,600
Now I'm gonna go back to ECS

690
00:29:24,600 --> 00:29:25,740
and to Express Mode,

691
00:29:25,740 --> 00:29:29,790
and provision a 26th service

692
00:29:29,790 --> 00:29:31,323
so we can see what happens.

693
00:29:35,790 --> 00:29:37,440
Just pulling everyone's favorite

694
00:29:37,440 --> 00:29:40,803
NGINX image here. (laughing)

695
00:29:43,680 --> 00:29:46,350
And not even gonna wait for
the deployment to finish

696
00:29:46,350 --> 00:29:48,030
because it's already gonna kick off.

697
00:29:48,030 --> 00:29:50,910
We're gonna go back to the EC2 console,

698
00:29:50,910 --> 00:29:53,670
look at the load balancers

699
00:29:53,670 --> 00:29:56,790
and see that we have started provisioning

700
00:29:56,790 --> 00:29:58,023
a second load balancer.

701
00:30:00,510 --> 00:30:03,000
And so this is what I mean by
scaling the load balancers.

702
00:30:03,000 --> 00:30:04,800
When you provision that 26 service,

703
00:30:04,800 --> 00:30:06,810
we will provision a second load balancer.

704
00:30:06,810 --> 00:30:08,670
When you delete the 26th service,

705
00:30:08,670 --> 00:30:11,490
we will delete that second load balancer.

706
00:30:11,490 --> 00:30:14,240
Anything that is unique to
the service will be deleted.

707
00:30:16,980 --> 00:30:20,070
Now, there are a lot of services out there

708
00:30:20,070 --> 00:30:22,560
that will take a container
and give you a URL.

709
00:30:22,560 --> 00:30:25,290
There are even some in AWS today already.

710
00:30:25,290 --> 00:30:28,113
So I don't wanna be shy about saying that.

711
00:30:29,340 --> 00:30:30,540
But I do want to be clear

712
00:30:30,540 --> 00:30:34,530
about what I think is really
unique about Express Mode.

713
00:30:34,530 --> 00:30:39,530
And that is that you have access

714
00:30:40,080 --> 00:30:42,300
to all of these resources

715
00:30:42,300 --> 00:30:44,700
that are in your account,

716
00:30:44,700 --> 00:30:48,150
and you have the ability to mutate them.

717
00:30:48,150 --> 00:30:49,380
And because of that,

718
00:30:49,380 --> 00:30:51,330
going back to what Tsahi was talking about

719
00:30:51,330 --> 00:30:54,270
with abstraction and composition,

720
00:30:54,270 --> 00:30:55,620
and if you disagree with me here,

721
00:30:55,620 --> 00:30:56,453
I would love to go

722
00:30:56,453 --> 00:30:58,080
and have a philosophical
discussion (laughing)

723
00:30:58,080 --> 00:30:59,040
with you afterwards.

724
00:30:59,040 --> 00:31:00,513
It might be kind of fun.

725
00:31:01,590 --> 00:31:04,770
But I believe that Express Mode

726
00:31:04,770 --> 00:31:07,743
is a composition within an abstraction.

727
00:31:08,760 --> 00:31:11,670
You have the ability to
stay within the abstraction,

728
00:31:11,670 --> 00:31:12,660
if you want to.

729
00:31:12,660 --> 00:31:15,090
You never have to know what's underneath.

730
00:31:15,090 --> 00:31:18,330
You get the simplicity of the abstraction

731
00:31:18,330 --> 00:31:22,560
and you get to stay within
that world, if you want to.

732
00:31:22,560 --> 00:31:25,350
But underneath that is a composition,

733
00:31:25,350 --> 00:31:28,020
and you get access to all of the goodness

734
00:31:28,020 --> 00:31:28,950
of that composition

735
00:31:28,950 --> 00:31:31,773
and the flexibility of
that, if you want to.

736
00:31:32,610 --> 00:31:36,360
Now, also, you don't have
to graduate or migrate

737
00:31:36,360 --> 00:31:38,580
in order to get access to that.

738
00:31:38,580 --> 00:31:39,840
And in many services

739
00:31:39,840 --> 00:31:41,880
in order to go from one state to another,

740
00:31:41,880 --> 00:31:43,920
you have to draw that hard line.

741
00:31:43,920 --> 00:31:45,900
You have to say, "Okay, well,

742
00:31:45,900 --> 00:31:48,480
I have to forfeit that simplicity

743
00:31:48,480 --> 00:31:51,570
in order to get access to
that feature that I need,"

744
00:31:51,570 --> 00:31:53,310
and not with Express Mode.

745
00:31:53,310 --> 00:31:54,960
With Express Mode, if you want to go

746
00:31:54,960 --> 00:31:57,120
and access that thing that you need,

747
00:31:57,120 --> 00:31:58,860
you can go and turn that on,

748
00:31:58,860 --> 00:32:00,990
you can go and configure that parameter,

749
00:32:00,990 --> 00:32:02,730
and then you can come back to Express Mode

750
00:32:02,730 --> 00:32:05,160
to continue updating your image,

751
00:32:05,160 --> 00:32:05,993
or your autoscaling,

752
00:32:05,993 --> 00:32:09,780
or whatever it is that you're
doing on a daily basis.

753
00:32:09,780 --> 00:32:11,830
And I think that is very differentiating.

754
00:32:13,920 --> 00:32:17,520
To me, that empowers you as a developer

755
00:32:17,520 --> 00:32:21,450
to keep a simple model,

756
00:32:21,450 --> 00:32:26,220
but also have access to the
full feature set of ECS.

757
00:32:26,220 --> 00:32:29,070
ECS that has been around
for more than 10 years,

758
00:32:29,070 --> 00:32:32,587
that has been operating
very large services

759
00:32:32,587 --> 00:32:34,470
(laughing) for more than 10 years,

760
00:32:34,470 --> 00:32:36,120
and all of these other services

761
00:32:36,120 --> 00:32:37,260
that we're provisioning as well.

762
00:32:37,260 --> 00:32:40,773
ALB is also a very
robust service in itself.

763
00:32:42,120 --> 00:32:44,100
You're getting access

764
00:32:44,100 --> 00:32:46,270
to all of the features of these services

765
00:32:47,340 --> 00:32:50,220
in order to provision
whatever you need to do

766
00:32:50,220 --> 00:32:51,300
with your application.

767
00:32:51,300 --> 00:32:52,290
You're starting simple,

768
00:32:52,290 --> 00:32:54,340
but you have access to whatever you need.

769
00:32:56,070 --> 00:32:58,133
Let me show you a little
bit of what I mean.

770
00:32:59,430 --> 00:33:01,653
So we're gonna take an
Express Mode service.

771
00:33:03,900 --> 00:33:05,700
Go to the Resources tab

772
00:33:05,700 --> 00:33:08,103
and make a change to the task definition.

773
00:33:09,570 --> 00:33:11,370
So I'm gonna go right into the JSON.

774
00:33:12,720 --> 00:33:14,100
In the ECS console,

775
00:33:14,100 --> 00:33:15,753
you can actually edit the JSON.

776
00:33:17,790 --> 00:33:20,220
So I'm gonna add a second
container definition.

777
00:33:20,220 --> 00:33:21,600
This is what we call a sidecar,

778
00:33:21,600 --> 00:33:23,250
if you're not already familiar.

779
00:33:23,250 --> 00:33:27,150
A lot of customers in
ECS add login sidecars,

780
00:33:27,150 --> 00:33:29,430
a common one is called Firelands.

781
00:33:29,430 --> 00:33:31,110
So you can send your logs

782
00:33:31,110 --> 00:33:32,130
to another destination

783
00:33:32,130 --> 00:33:33,303
rather than CloudWatch.

784
00:33:34,350 --> 00:33:37,530
And in order to update a service

785
00:33:37,530 --> 00:33:39,180
or your task definition in ECS,

786
00:33:39,180 --> 00:33:41,670
you need to create a new
task definition revision,

787
00:33:41,670 --> 00:33:44,040
and then go and update your service.

788
00:33:44,040 --> 00:33:45,640
So that's what we're doing here.

789
00:33:47,220 --> 00:33:49,590
We've just updated the service

790
00:33:49,590 --> 00:33:51,660
and we're watching that deployment happen

791
00:33:51,660 --> 00:33:55,623
back in the Express Mode service view.

792
00:33:56,910 --> 00:33:58,590
Now, what we wanna see now

793
00:33:58,590 --> 00:34:02,310
that we've done that update out of band

794
00:34:02,310 --> 00:34:04,410
from the Express Mode service,

795
00:34:04,410 --> 00:34:06,870
is can we go back to Express Mode

796
00:34:06,870 --> 00:34:08,170
and do another update

797
00:34:09,450 --> 00:34:11,853
and make sure that that
change was persisted?

798
00:34:13,620 --> 00:34:16,500
So we're gonna update the
image in Express Mode.

799
00:34:16,500 --> 00:34:19,683
We just moved to the
latest in my ECR repo.

800
00:34:21,270 --> 00:34:23,073
Go back to the JSON and look.

801
00:34:24,150 --> 00:34:26,280
My image is the new one,

802
00:34:26,280 --> 00:34:28,023
that's the latest SHA.

803
00:34:30,330 --> 00:34:33,453
And then my second container
definition is there.

804
00:34:35,280 --> 00:34:36,450
So that's kind of the power,

805
00:34:36,450 --> 00:34:37,950
is that you have the ability

806
00:34:37,950 --> 00:34:40,380
to make changes in these resources.

807
00:34:40,380 --> 00:34:42,450
We will persist the changes,

808
00:34:42,450 --> 00:34:44,820
and you can continue using Express Mode

809
00:34:44,820 --> 00:34:47,400
for those simple updates

810
00:34:47,400 --> 00:34:48,663
to everyday changes.

811
00:34:51,480 --> 00:34:52,800
Like ECS itself,

812
00:34:52,800 --> 00:34:55,353
Express Mode is available
at no additional charge.

813
00:34:56,370 --> 00:34:57,870
You only pay for the resources

814
00:34:57,870 --> 00:34:58,890
that are provisioned.

815
00:34:58,890 --> 00:35:02,130
And in the context of this,

816
00:35:02,130 --> 00:35:06,330
that it would be Fargate
and the ALB itself,

817
00:35:06,330 --> 00:35:07,950
which we're helping distribute the cost of

818
00:35:07,950 --> 00:35:11,160
across all of the services.

819
00:35:11,160 --> 00:35:12,420
We showed the console,

820
00:35:12,420 --> 00:35:13,357
we showed the CLI,

821
00:35:14,312 --> 00:35:15,660
API, SDK,

822
00:35:15,660 --> 00:35:17,520
we showed infrastructure as code.

823
00:35:17,520 --> 00:35:20,700
It's also in the CDK as an L1 construct.

824
00:35:20,700 --> 00:35:23,070
We launched Terraform last week,

825
00:35:23,070 --> 00:35:25,140
and I'm super pleased
(laughing) to announce

826
00:35:25,140 --> 00:35:28,440
that about two days ago, one day ago,

827
00:35:28,440 --> 00:35:31,830
we launched a new GitHub action.

828
00:35:31,830 --> 00:35:34,113
So you are able to take a GitHub repo,

829
00:35:35,100 --> 00:35:36,330
use the other GitHub actions

830
00:35:36,330 --> 00:35:37,980
to build that into a container,

831
00:35:37,980 --> 00:35:39,120
push it to ECR,

832
00:35:39,120 --> 00:35:40,890
and then use our action

833
00:35:40,890 --> 00:35:44,310
to push it to an Express
Mode service and get a URL,

834
00:35:44,310 --> 00:35:45,360
right from your repo.

835
00:35:47,970 --> 00:35:49,203
So with that,

836
00:35:51,360 --> 00:35:55,260
Express Mode was built for developers

837
00:35:55,260 --> 00:35:58,620
to help them get started fast in ECS.

838
00:35:58,620 --> 00:36:00,750
We've also been talking
to a lot of platform teams

839
00:36:00,750 --> 00:36:05,750
who see this as a way
to accelerate their DevX

840
00:36:06,150 --> 00:36:09,000
to give an experience to
their application teams,

841
00:36:09,000 --> 00:36:11,310
or to stand up small POCs

842
00:36:11,310 --> 00:36:13,830
for things that they care less about

843
00:36:13,830 --> 00:36:15,480
what the architecture looks like.

844
00:36:16,410 --> 00:36:18,600
So even if you're a platform team,

845
00:36:18,600 --> 00:36:20,150
maybe consider checking it out.

846
00:36:22,980 --> 00:36:26,010
But with that, I think we
also wanna take a look today

847
00:36:26,010 --> 00:36:29,100
at how platform teams

848
00:36:29,100 --> 00:36:31,350
are using Amazon ECS today,

849
00:36:31,350 --> 00:36:33,000
and what are some best practices?

850
00:36:34,920 --> 00:36:37,170
GoDaddy has done an excellent job of that,

851
00:36:37,170 --> 00:36:38,670
Keith specifically,

852
00:36:38,670 --> 00:36:41,130
and we're really excited

853
00:36:41,130 --> 00:36:42,330
to show you what he's done.

854
00:36:42,330 --> 00:36:45,630
He did not have access
(laughing) to Express Mode,

855
00:36:45,630 --> 00:36:47,250
or ECS Managed Instances,

856
00:36:47,250 --> 00:36:48,360
or native blue-green,

857
00:36:48,360 --> 00:36:51,510
but I think I've certainly drawn

858
00:36:51,510 --> 00:36:53,040
a lot of inspiration from what he's built.

859
00:36:53,040 --> 00:36:54,690
So I'm excited for you to see it.

860
00:36:56,190 --> 00:36:57,840
- Thank you, Jen.

861
00:36:57,840 --> 00:36:59,760
Hi, everybody, my name
is Keith Bartholomew.

862
00:36:59,760 --> 00:37:01,863
I am a principal engineer at GoDaddy.

863
00:37:02,970 --> 00:37:03,840
As Jen said,

864
00:37:03,840 --> 00:37:05,370
a lot of what I'm about to show you today

865
00:37:05,370 --> 00:37:07,140
is how we've used ECS

866
00:37:07,140 --> 00:37:08,580
to build a platform

867
00:37:08,580 --> 00:37:10,230
for our GoDaddy engineers.

868
00:37:10,230 --> 00:37:13,440
And we did all that before
features like Express Mode,

869
00:37:13,440 --> 00:37:15,960
before their blue-green canary deployments

870
00:37:15,960 --> 00:37:17,850
and before Managed Instances.

871
00:37:17,850 --> 00:37:20,100
So everything that I'm about to see,

872
00:37:20,100 --> 00:37:22,350
recognize that it's about 10 times easier

873
00:37:22,350 --> 00:37:23,520
for you to do this yourself,

874
00:37:23,520 --> 00:37:24,450
if you wanted to, okay?

875
00:37:24,450 --> 00:37:25,410
We did it the hard way,

876
00:37:25,410 --> 00:37:27,750
and now you get to do it the easy way.

877
00:37:27,750 --> 00:37:29,160
So you may know of GoDaddy

878
00:37:29,160 --> 00:37:30,450
as a domains registrar,

879
00:37:30,450 --> 00:37:31,680
that is the oldest business,

880
00:37:31,680 --> 00:37:33,300
that's put really what we're known for.

881
00:37:33,300 --> 00:37:35,220
But today, we do a lot more than that.

882
00:37:35,220 --> 00:37:37,680
We call our customers
everyday entrepreneurs.

883
00:37:37,680 --> 00:37:38,513
They're the kind of person

884
00:37:38,513 --> 00:37:39,660
who has a side hustle,

885
00:37:39,660 --> 00:37:41,760
a business that they run on the side.

886
00:37:41,760 --> 00:37:43,200
It's not their main source of income,

887
00:37:43,200 --> 00:37:45,180
but it's something that they're
really passionate about.

888
00:37:45,180 --> 00:37:46,650
And we provide services

889
00:37:46,650 --> 00:37:48,120
that help these everyday entrepreneurs

890
00:37:48,120 --> 00:37:49,260
do everything they need to do

891
00:37:49,260 --> 00:37:50,093
to run a small business.

892
00:37:50,093 --> 00:37:52,350
And so that does include
getting a domain name,

893
00:37:52,350 --> 00:37:53,183
getting a website,

894
00:37:53,183 --> 00:37:55,260
but also running an e-commerce storefront

895
00:37:55,260 --> 00:37:56,970
or taking point-of-sale payments

896
00:37:56,970 --> 00:37:58,770
at a farmer's market
or something like that.

897
00:37:58,770 --> 00:38:00,390
And so we call all of those touch points

898
00:38:00,390 --> 00:38:02,400
the Entrepreneur's Wheel.

899
00:38:02,400 --> 00:38:04,410
Now, just like generative AI

900
00:38:04,410 --> 00:38:05,243
has changed the way

901
00:38:05,243 --> 00:38:07,590
that we, as engineers and
technical people, work,

902
00:38:07,590 --> 00:38:09,870
it's also changed how our
everyday entrepreneurs

903
00:38:09,870 --> 00:38:11,310
do the things they need to do.

904
00:38:11,310 --> 00:38:14,880
So GoDaddy Airo is our
AI-powered experience

905
00:38:14,880 --> 00:38:17,010
that runs the gamut of
every product at GoDaddy.

906
00:38:17,010 --> 00:38:19,410
So from getting the
idea for a domain name,

907
00:38:19,410 --> 00:38:21,180
to generating a logo and a website,

908
00:38:21,180 --> 00:38:22,920
and even doing social media marketing,

909
00:38:22,920 --> 00:38:24,030
we're taking these ideas,

910
00:38:24,030 --> 00:38:25,680
those back-of-the-napkin business ideas

911
00:38:25,680 --> 00:38:26,790
that seem out of reach,

912
00:38:26,790 --> 00:38:27,623
and we're putting them

913
00:38:27,623 --> 00:38:28,950
into these everyday entrepreneurs' hands

914
00:38:28,950 --> 00:38:31,170
so that they can make every business idea

915
00:38:31,170 --> 00:38:33,570
more accessible than it ever has been.

916
00:38:33,570 --> 00:38:35,190
Now, behind all these innovations

917
00:38:35,190 --> 00:38:37,350
are thousands of builders
working tirelessly

918
00:38:37,350 --> 00:38:39,450
to stand up all of the services

919
00:38:39,450 --> 00:38:41,007
that it takes to run something like this.

920
00:38:41,007 --> 00:38:42,900
And so that's where I'm
excited to tell you today

921
00:38:42,900 --> 00:38:46,470
about GoDaddy's decentralized
developer platform.

922
00:38:46,470 --> 00:38:47,820
So it all starts with CI/CD

923
00:38:47,820 --> 00:38:49,830
where our developers do kind
of whatever they want to.

924
00:38:49,830 --> 00:38:52,920
So some of them are running
self-managed Jenkins clusters,

925
00:38:52,920 --> 00:38:54,780
some of them will stand
up GitHub actions workers

926
00:38:54,780 --> 00:38:55,613
when they need to.

927
00:38:55,613 --> 00:38:57,690
And a few people have hand
rolled their own CI/CD things

928
00:38:57,690 --> 00:38:59,790
because they think that's important.

929
00:38:59,790 --> 00:39:01,710
Infrastructure, we really
wanna let developers choose.

930
00:39:01,710 --> 00:39:02,766
So there's a little bit of ECS,

931
00:39:02,766 --> 00:39:03,599
there's some EKS,

932
00:39:03,599 --> 00:39:07,290
and some of our teams are
using OpenStack on-prem.

933
00:39:07,290 --> 00:39:08,697
And security, we really
don't wanna get in their way,

934
00:39:08,697 --> 00:39:10,920
and so we let them patch
their vulnerabilities

935
00:39:10,920 --> 00:39:12,570
whenever they feel like it.

936
00:39:12,570 --> 00:39:13,680
It's none of our business, right?

937
00:39:13,680 --> 00:39:15,000
And observability, we've got people

938
00:39:15,000 --> 00:39:15,833
who like Prometheus,

939
00:39:15,833 --> 00:39:16,950
some people really enjoy that

940
00:39:16,950 --> 00:39:18,390
and they wanna use that, that's fine.

941
00:39:18,390 --> 00:39:19,380
Some people like Elastic,

942
00:39:19,380 --> 00:39:20,630
and they can do that too.

943
00:39:23,040 --> 00:39:25,260
This is a pretty
cringe-worthy slide, right?

944
00:39:25,260 --> 00:39:26,250
Like, can we all agree

945
00:39:26,250 --> 00:39:29,430
that this is not what we
want to see in a platform?

946
00:39:29,430 --> 00:39:32,760
Yes, okay, so this is,
with some hyperbole,

947
00:39:32,760 --> 00:39:34,980
this is roughly what it
looked like at GoDaddy

948
00:39:34,980 --> 00:39:36,540
before we started building this platform.

949
00:39:36,540 --> 00:39:38,010
And so we took a lot of the good things

950
00:39:38,010 --> 00:39:39,060
that were happening in these things

951
00:39:39,060 --> 00:39:40,380
and we brought them together

952
00:39:40,380 --> 00:39:42,720
to make a centralized, unified platform

953
00:39:42,720 --> 00:39:44,160
for all of our engineers.

954
00:39:44,160 --> 00:39:45,510
So our engineers have access

955
00:39:45,510 --> 00:39:48,330
to push-button hardened
private GitHub action runners

956
00:39:48,330 --> 00:39:49,470
that are automatically hooked up

957
00:39:49,470 --> 00:39:52,410
to our IM system that we have.

958
00:39:52,410 --> 00:39:53,490
So they can just deploy

959
00:39:53,490 --> 00:39:56,280
with only literally a push of a button.

960
00:39:56,280 --> 00:39:57,120
Katana itself,

961
00:39:57,120 --> 00:39:59,370
that's the name of our
infrastructure platform,

962
00:39:59,370 --> 00:40:00,600
is a managed compute platform

963
00:40:00,600 --> 00:40:02,940
that makes them like
have push-button access

964
00:40:02,940 --> 00:40:05,340
to ECS Fargate services, ALBs,

965
00:40:05,340 --> 00:40:07,800
and all the other supporting
things they need there.

966
00:40:07,800 --> 00:40:09,030
We've unified our securities,

967
00:40:09,030 --> 00:40:09,990
we work really closely

968
00:40:09,990 --> 00:40:11,580
with our security and governance teams

969
00:40:11,580 --> 00:40:13,830
to make sure that all the Lambda run times

970
00:40:13,830 --> 00:40:15,390
get updated when they need to get updated,

971
00:40:15,390 --> 00:40:16,860
that all of the ECR images

972
00:40:16,860 --> 00:40:18,330
are free of their vulnerabilities

973
00:40:18,330 --> 00:40:19,350
and things like that.

974
00:40:19,350 --> 00:40:20,250
And we're able to do that

975
00:40:20,250 --> 00:40:22,830
through a really close
coordination with that team.

976
00:40:22,830 --> 00:40:24,210
And then centralized observability.

977
00:40:24,210 --> 00:40:26,850
We have a grade-A, world-class
observability team,

978
00:40:26,850 --> 00:40:28,290
who I'm so lucky to work with,

979
00:40:28,290 --> 00:40:29,430
and they've done a lot of work

980
00:40:29,430 --> 00:40:31,410
to make sure that everyone
using this platform

981
00:40:31,410 --> 00:40:32,370
with zero config

982
00:40:32,370 --> 00:40:34,260
gets all of their logs, traces and metrics

983
00:40:34,260 --> 00:40:36,660
piped to our centralized
observability platform,

984
00:40:36,660 --> 00:40:38,700
where they can then go
create dashboards and alarms,

985
00:40:38,700 --> 00:40:41,250
and understand how their
applications are behaving.

986
00:40:42,330 --> 00:40:44,010
So the way that most of our engineers

987
00:40:44,010 --> 00:40:45,210
interact with this platform

988
00:40:45,210 --> 00:40:47,070
is with this unified single pane of glass.

989
00:40:47,070 --> 00:40:48,420
I know that's kind of an overused term,

990
00:40:48,420 --> 00:40:50,610
but our developers really enjoy this.

991
00:40:50,610 --> 00:40:52,560
And to underscore the value of this,

992
00:40:52,560 --> 00:40:55,290
consider that there's over
2,000 engineers at GoDaddy,

993
00:40:55,290 --> 00:40:56,850
and for each of those teams,

994
00:40:56,850 --> 00:40:58,320
they're following the best practice

995
00:40:58,320 --> 00:40:59,760
of having a dev account,

996
00:40:59,760 --> 00:41:02,037
a test account, a stage
account and a prod account,

997
00:41:02,037 --> 00:41:04,140
and we have some others in there as well.

998
00:41:04,140 --> 00:41:06,720
And then also consider that
large organizations are messy.

999
00:41:06,720 --> 00:41:08,610
Most engineers don't
work on a single project.

1000
00:41:08,610 --> 00:41:10,230
They kind of share their time

1001
00:41:10,230 --> 00:41:11,670
with three, four, or five projects

1002
00:41:11,670 --> 00:41:12,570
since we have engineers

1003
00:41:12,570 --> 00:41:14,700
who need access to 30 AWS accounts,

1004
00:41:14,700 --> 00:41:16,560
and they need to deploy that application

1005
00:41:16,560 --> 00:41:18,750
to 30 different AWS accounts.

1006
00:41:18,750 --> 00:41:20,850
Going around and clicking
through all the AWS consoles

1007
00:41:20,850 --> 00:41:21,690
can be pretty tiring.

1008
00:41:21,690 --> 00:41:22,860
And so we've brought all that together

1009
00:41:22,860 --> 00:41:24,840
where our engineers have
a single place to look

1010
00:41:24,840 --> 00:41:26,640
to see, "How is this service doing?

1011
00:41:26,640 --> 00:41:27,810
How did that rollback happen?

1012
00:41:27,810 --> 00:41:31,200
What were the logs that happened
from ECS when this failed?

1013
00:41:31,200 --> 00:41:32,460
How is this being impacted

1014
00:41:32,460 --> 00:41:33,960
by an outage with a different app?"

1015
00:41:33,960 --> 00:41:36,390
They're able to get all that
together in a single place.

1016
00:41:36,390 --> 00:41:37,410
They also use GitHub actions,

1017
00:41:37,410 --> 00:41:39,540
which we manage a lot
to do the same things

1018
00:41:39,540 --> 00:41:41,823
from more of an automated CI perspective.

1019
00:41:42,990 --> 00:41:45,150
This unified dashboard
really comes into play

1020
00:41:45,150 --> 00:41:46,080
and is really valuable

1021
00:41:46,080 --> 00:41:47,550
when it comes to observability.

1022
00:41:47,550 --> 00:41:50,370
I can't tell you how many
times I've been paged

1023
00:41:50,370 --> 00:41:52,650
and I get on the phone
call with the product team

1024
00:41:52,650 --> 00:41:54,510
and the first thing that
I see on the screen share

1025
00:41:54,510 --> 00:41:55,343
is this screen.

1026
00:41:55,343 --> 00:41:56,176
They're looking at this

1027
00:41:56,176 --> 00:41:59,850
to see how, "Is the load
balancer in US East 1

1028
00:41:59,850 --> 00:42:03,420
compared to the load
balancer in US West 2?

1029
00:42:03,420 --> 00:42:05,520
Are these error rates spiking over here?

1030
00:42:05,520 --> 00:42:07,260
Are they idle over here?"

1031
00:42:07,260 --> 00:42:09,390
And our developers really
enjoy using this as a way

1032
00:42:09,390 --> 00:42:11,640
to understand at a
really big-picture level,

1033
00:42:11,640 --> 00:42:13,860
how is everything of
across multiple accounts,

1034
00:42:13,860 --> 00:42:16,110
multiple services, how's
everything behaving?

1035
00:42:17,040 --> 00:42:18,810
We've also built generative AI support.

1036
00:42:18,810 --> 00:42:20,550
So even though we've gone through

1037
00:42:20,550 --> 00:42:23,160
a lot of effort to make our
platform as simple as we can

1038
00:42:23,160 --> 00:42:25,230
and easy for any engineer to understand,

1039
00:42:25,230 --> 00:42:26,490
it's still complicated, right?

1040
00:42:26,490 --> 00:42:29,550
And there's some times when
there'll be an ECS failure

1041
00:42:29,550 --> 00:42:32,010
that we can't really wrap or abstract,

1042
00:42:32,010 --> 00:42:34,290
and so we just have to show
them the direct failure from ECS

1043
00:42:34,290 --> 00:42:36,690
and the engineer doesn't really
understand what that means.

1044
00:42:36,690 --> 00:42:37,800
And so we've built an agent

1045
00:42:37,800 --> 00:42:39,660
right into that dashboard
that you just saw

1046
00:42:39,660 --> 00:42:41,940
that has access to a
bedrock knowledge base

1047
00:42:41,940 --> 00:42:43,290
with all of our documentation

1048
00:42:43,290 --> 00:42:46,950
as well as information about
how we specifically tailor

1049
00:42:46,950 --> 00:42:48,840
our infrastructure to their needs.

1050
00:42:48,840 --> 00:42:51,150
And it's able to use
tools and function calling

1051
00:42:51,150 --> 00:42:53,527
to reach into their account and live see,

1052
00:42:53,527 --> 00:42:55,230
"Okay, how is your ECS service doing?

1053
00:42:55,230 --> 00:42:56,700
Let me read the deployment events.

1054
00:42:56,700 --> 00:42:58,080
Let me read the CloudFormation events

1055
00:42:58,080 --> 00:42:59,700
and understand how that's going."

1056
00:42:59,700 --> 00:43:03,090
And then it provides our
users with a very detailed,

1057
00:43:03,090 --> 00:43:05,130
not generic and actionable statement

1058
00:43:05,130 --> 00:43:06,000
that they can then use

1059
00:43:06,000 --> 00:43:07,260
to self-resolve their problem,

1060
00:43:07,260 --> 00:43:08,580
or in some cases,

1061
00:43:08,580 --> 00:43:10,140
they'll even use this with another tool

1062
00:43:10,140 --> 00:43:12,480
to come create a ticket
in our support channel

1063
00:43:12,480 --> 00:43:16,530
where they can bring an entirely
pre-triaged incident to us

1064
00:43:16,530 --> 00:43:18,900
and then we can start
working on a support issue

1065
00:43:18,900 --> 00:43:19,733
when we need to there.

1066
00:43:19,733 --> 00:43:21,620
So it's been very, very powerful for us.

1067
00:43:22,800 --> 00:43:23,670
So at this scale, right,

1068
00:43:23,670 --> 00:43:26,010
we've got hundreds and
hundreds of AWS accounts,

1069
00:43:26,010 --> 00:43:27,810
accessing all those accounts is essential.

1070
00:43:27,810 --> 00:43:29,490
Obviously we need to be able to see

1071
00:43:29,490 --> 00:43:31,050
what's going on in them as a platform,

1072
00:43:31,050 --> 00:43:34,080
to understand how the
health of our many services

1073
00:43:34,080 --> 00:43:34,913
that we're managing,

1074
00:43:34,913 --> 00:43:36,750
our users need to see that information,

1075
00:43:36,750 --> 00:43:38,520
and we need to do that securely.

1076
00:43:38,520 --> 00:43:39,780
And so the way that we've done this

1077
00:43:39,780 --> 00:43:41,220
is by installing an agent.

1078
00:43:41,220 --> 00:43:43,260
And this is not the AI kind of agents.

1079
00:43:43,260 --> 00:43:47,100
We named it that before
they took that word from us.

1080
00:43:47,100 --> 00:43:48,090
The old-style agent,

1081
00:43:48,090 --> 00:43:49,500
we run one of those in each account.

1082
00:43:49,500 --> 00:43:53,517
And that agent comprises an API
gateway and several lambdas.

1083
00:43:53,517 --> 00:43:56,040
And we chose these because
they're very low cost to run.

1084
00:43:56,040 --> 00:43:58,740
When they're idle, they
consume practically $0.

1085
00:43:58,740 --> 00:44:00,000
I think we paid maybe like a penny

1086
00:44:00,000 --> 00:44:02,250
for the S3 code for the Lambdas.

1087
00:44:02,250 --> 00:44:04,080
And that's great because
it means that someone

1088
00:44:04,080 --> 00:44:05,070
who's using the platform

1089
00:44:05,070 --> 00:44:06,690
and using us for our
management capabilities,

1090
00:44:06,690 --> 00:44:08,760
they're not taking on an undue burden

1091
00:44:08,760 --> 00:44:10,680
just to use the platform.

1092
00:44:10,680 --> 00:44:12,600
so the control plane of what we're doing

1093
00:44:12,600 --> 00:44:14,760
is as low cost as possible.

1094
00:44:14,760 --> 00:44:16,260
But security is also critical here.

1095
00:44:16,260 --> 00:44:19,950
And so API gateway allows
us to use IM authentication

1096
00:44:19,950 --> 00:44:21,540
for that entry point,

1097
00:44:21,540 --> 00:44:23,580
where we can say only the IM role

1098
00:44:23,580 --> 00:44:25,530
in our dedicated management account

1099
00:44:25,530 --> 00:44:28,350
is allowed to invoke this API gateway.

1100
00:44:28,350 --> 00:44:29,520
And all that happens

1101
00:44:29,520 --> 00:44:31,647
without me writing a single line of code.

1102
00:44:31,647 --> 00:44:33,030
And I can't tell you how much

1103
00:44:33,030 --> 00:44:34,050
that helps me sleep at night

1104
00:44:34,050 --> 00:44:35,550
knowing that my code (laughing)

1105
00:44:35,550 --> 00:44:37,200
did not contribute to any problems.

1106
00:44:37,200 --> 00:44:38,910
I trust the AWS IM engineers

1107
00:44:38,910 --> 00:44:41,130
much more than I trust myself.

1108
00:44:41,130 --> 00:44:42,750
But we also then limit the things

1109
00:44:42,750 --> 00:44:43,920
that this agent can do, right?

1110
00:44:43,920 --> 00:44:45,570
So this is not carte blanche access

1111
00:44:45,570 --> 00:44:47,790
to everything within the account.

1112
00:44:47,790 --> 00:44:50,520
We need to get select
information about ECS,

1113
00:44:50,520 --> 00:44:52,980
about CloudFormation, about ALBs,

1114
00:44:52,980 --> 00:44:55,350
but other things that are
not any of our concern,

1115
00:44:55,350 --> 00:44:56,820
there are not lambda handlers

1116
00:44:56,820 --> 00:44:57,840
that are capable of doing that.

1117
00:44:57,840 --> 00:44:59,910
So we're limiting our
blast radius in that way.

1118
00:44:59,910 --> 00:45:01,890
And really the only right
operations that we do

1119
00:45:01,890 --> 00:45:03,990
are managing CloudFormation stacks,

1120
00:45:03,990 --> 00:45:06,180
or what else do we do?

1121
00:45:06,180 --> 00:45:08,100
We restart ECS services from time to time

1122
00:45:08,100 --> 00:45:09,390
if you just need to,

1123
00:45:09,390 --> 00:45:11,290
sometimes rebooting fixes the problem.

1124
00:45:12,480 --> 00:45:14,070
What our engineers get
from all this though

1125
00:45:14,070 --> 00:45:15,270
is push-button resilience.

1126
00:45:15,270 --> 00:45:17,370
So 2,000-plus engineers,

1127
00:45:17,370 --> 00:45:19,200
they come from a wide
range of backgrounds.

1128
00:45:19,200 --> 00:45:21,630
Some of them are really,
really good DevOps engineers,

1129
00:45:21,630 --> 00:45:22,620
they're intimately familiar

1130
00:45:22,620 --> 00:45:24,030
with every AWS product,

1131
00:45:24,030 --> 00:45:25,170
they're certified.

1132
00:45:25,170 --> 00:45:26,940
Some of them could not
tell you the difference

1133
00:45:26,940 --> 00:45:28,770
between an ALB and an NLB.

1134
00:45:28,770 --> 00:45:30,570
And we need to make sure
that all of those engineers

1135
00:45:30,570 --> 00:45:32,250
get the same experience.

1136
00:45:32,250 --> 00:45:34,320
So it all starts with Route 53 records

1137
00:45:34,320 --> 00:45:36,930
that ensure that anyone
who's running on our system

1138
00:45:36,930 --> 00:45:40,050
is able to get latency-based
routing between regions

1139
00:45:40,050 --> 00:45:41,610
and then failover between those regions

1140
00:45:41,610 --> 00:45:42,750
whenever there's an outage.

1141
00:45:42,750 --> 00:45:44,220
And so some of our teams are operating

1142
00:45:44,220 --> 00:45:45,870
in four and five different regions.

1143
00:45:45,870 --> 00:45:46,703
Some are just in two.

1144
00:45:46,703 --> 00:45:48,330
It really depends on their needs.

1145
00:45:48,330 --> 00:45:50,220
They don't have to
configure this failover,

1146
00:45:50,220 --> 00:45:51,570
they get it out of the box.

1147
00:45:52,560 --> 00:45:53,940
Those Route 53 records

1148
00:45:53,940 --> 00:45:55,770
then point to the networking resources

1149
00:45:55,770 --> 00:45:57,210
that take you into the application.

1150
00:45:57,210 --> 00:45:59,100
In most cases, that's an ALB.

1151
00:45:59,100 --> 00:46:00,930
We've also got teams
who are using CloudFront

1152
00:46:00,930 --> 00:46:03,600
to help sort of provide
more of a point-of-presence

1153
00:46:03,600 --> 00:46:04,740
at the edge.

1154
00:46:04,740 --> 00:46:06,420
And so we're integrating all that

1155
00:46:06,420 --> 00:46:08,310
directly with the Route 53 records.

1156
00:46:08,310 --> 00:46:10,857
And then you get down
finally to the ECS service.

1157
00:46:10,857 --> 00:46:12,240
And so for each deployment,

1158
00:46:12,240 --> 00:46:13,560
we're running a new ECS service,

1159
00:46:13,560 --> 00:46:16,890
and then we allow some
fairly complicated routing

1160
00:46:16,890 --> 00:46:19,020
from the ALB to the service,

1161
00:46:19,020 --> 00:46:21,960
where engineers can either do 50/50 splits

1162
00:46:21,960 --> 00:46:23,130
if they're doing an A/B test,

1163
00:46:23,130 --> 00:46:26,040
or they can use a 5% split for a canary,

1164
00:46:26,040 --> 00:46:27,090
or something like that.

1165
00:46:27,090 --> 00:46:28,410
So they're able to get a lot of these

1166
00:46:28,410 --> 00:46:30,240
really kind of detailed

1167
00:46:30,240 --> 00:46:32,520
and fairly complex deployment strategies,

1168
00:46:32,520 --> 00:46:34,233
again, at the push of a button.

1169
00:46:35,400 --> 00:46:36,840
So key to that, what I was just mentioning

1170
00:46:36,840 --> 00:46:39,000
with these deployments,

1171
00:46:39,000 --> 00:46:41,340
every deployment on Katana

1172
00:46:41,340 --> 00:46:43,200
creates a new ECS service.

1173
00:46:43,200 --> 00:46:45,390
And we do this so that we
have a really reliable,

1174
00:46:45,390 --> 00:46:46,980
sort of warm standby

1175
00:46:46,980 --> 00:46:48,660
in the case of any bad things happening.

1176
00:46:48,660 --> 00:46:49,920
So let's say here

1177
00:46:49,920 --> 00:46:52,350
that version one of my service

1178
00:46:52,350 --> 00:46:53,970
is what's running in production.

1179
00:46:53,970 --> 00:46:56,280
And so all of my users
are going to version one,

1180
00:46:56,280 --> 00:46:57,960
and as little as possible,

1181
00:46:57,960 --> 00:46:59,850
I really don't want to
touch that service, right?

1182
00:46:59,850 --> 00:47:02,850
It's like the "Indiana Jones
and the Temple of Doom."

1183
00:47:02,850 --> 00:47:05,097
Like if it's not broke, don't fix it.

1184
00:47:05,097 --> 00:47:07,050
And so we don't want to touch service one,

1185
00:47:07,050 --> 00:47:08,940
but the development team
is working on version two,

1186
00:47:08,940 --> 00:47:10,020
they're making some changes

1187
00:47:10,020 --> 00:47:11,340
and they need to deploy that.

1188
00:47:11,340 --> 00:47:13,290
And so when they finally
make that deployment

1189
00:47:13,290 --> 00:47:14,730
and they deploy version two,

1190
00:47:14,730 --> 00:47:17,430
it stands up a completely
isolated ECS service,

1191
00:47:17,430 --> 00:47:19,140
a completely isolated target group,

1192
00:47:19,140 --> 00:47:21,240
and service one is not touched at all.

1193
00:47:21,240 --> 00:47:24,510
It stays exactly pristine
the way that it was.

1194
00:47:24,510 --> 00:47:26,670
Now, you do need to know
that version two is working.

1195
00:47:26,670 --> 00:47:29,250
And so with a specific header,

1196
00:47:29,250 --> 00:47:31,440
we have like x-version-2,

1197
00:47:31,440 --> 00:47:33,630
or a query stream that says x-version-2,

1198
00:47:33,630 --> 00:47:34,740
or even a cookie,

1199
00:47:34,740 --> 00:47:36,510
you could have your QA team

1200
00:47:36,510 --> 00:47:37,980
test version two of the application,

1201
00:47:37,980 --> 00:47:39,450
or you could run automated smoke tests

1202
00:47:39,450 --> 00:47:41,280
against version two of your application

1203
00:47:41,280 --> 00:47:43,530
to prove that it's working
the way that you want it to.

1204
00:47:43,530 --> 00:47:45,630
And then finally, when
you're confident with that,

1205
00:47:45,630 --> 00:47:47,370
you make a small change.

1206
00:47:47,370 --> 00:47:48,510
And the only thing that changes

1207
00:47:48,510 --> 00:47:49,830
is we change a target group

1208
00:47:49,830 --> 00:47:51,930
to point to version two
and not version one.

1209
00:47:51,930 --> 00:47:53,670
Again, version one has not been touched,

1210
00:47:53,670 --> 00:47:55,920
we're just moving traffic away from it.

1211
00:47:55,920 --> 00:47:58,830
You can do this all at once
if you want to go YOLO,

1212
00:47:58,830 --> 00:48:00,990
or you can do it slowly
with a percentage route

1213
00:48:00,990 --> 00:48:03,180
to sort of ramp traffic up to version two

1214
00:48:03,180 --> 00:48:05,280
of the application. And
so then, in this case,

1215
00:48:05,280 --> 00:48:07,350
we've got version one
running as a warm standby.

1216
00:48:07,350 --> 00:48:09,270
So if when it comes under load,

1217
00:48:09,270 --> 00:48:11,400
version two starts to have a degradation,

1218
00:48:11,400 --> 00:48:13,770
version one is still there as a fallback.

1219
00:48:13,770 --> 00:48:15,510
Again, this is just
built into the platform.

1220
00:48:15,510 --> 00:48:17,280
This is a fairly complicated way

1221
00:48:17,280 --> 00:48:18,420
to manage deployments,

1222
00:48:18,420 --> 00:48:19,860
and our engineers don't think about this

1223
00:48:19,860 --> 00:48:20,850
on a day-to-day basis,

1224
00:48:20,850 --> 00:48:22,950
but they have used it in
some really creative ways

1225
00:48:22,950 --> 00:48:24,930
to have live preview environments.

1226
00:48:24,930 --> 00:48:26,790
Sometimes they're not just
running two versions at a time,

1227
00:48:26,790 --> 00:48:27,750
they're running five, six,

1228
00:48:27,750 --> 00:48:30,360
up to a dozen I think I've seen,

1229
00:48:30,360 --> 00:48:31,650
where they've got really busy teams

1230
00:48:31,650 --> 00:48:34,500
who are constantly testing
things and deploying these

1231
00:48:34,500 --> 00:48:36,600
using these sort of dark release patterns.

1232
00:48:37,500 --> 00:48:39,660
Now, as Tsahi and Jen both mentioned,

1233
00:48:39,660 --> 00:48:42,120
escape patches are really
important for a platform, right?

1234
00:48:42,120 --> 00:48:44,070
I think we've made a lot of good choices

1235
00:48:44,070 --> 00:48:46,770
about the correct kinds of abstractions.

1236
00:48:46,770 --> 00:48:48,210
And in most cases, that works,

1237
00:48:48,210 --> 00:48:49,043
but every now and then,

1238
00:48:49,043 --> 00:48:51,120
people need to sort of grow up from that

1239
00:48:51,120 --> 00:48:53,160
or they have something
that they really want to do

1240
00:48:53,160 --> 00:48:55,042
in their own specific way.

1241
00:48:55,042 --> 00:48:57,570
And so one example of the way
that we do this is with WAF.

1242
00:48:57,570 --> 00:49:01,200
So every load balancer that
we provision has a WAF ACL.

1243
00:49:01,200 --> 00:49:02,850
And I'm not sure if you've ever configured

1244
00:49:02,850 --> 00:49:03,960
a WAF ACL on your own,

1245
00:49:03,960 --> 00:49:05,130
but they're fairly complicated,

1246
00:49:05,130 --> 00:49:07,410
like the JSON language
for expressing rules

1247
00:49:07,410 --> 00:49:09,120
and bypasses and the orders,

1248
00:49:09,120 --> 00:49:09,953
it's a lot.

1249
00:49:09,953 --> 00:49:12,060
It was a whole day of
documentation reading for me.

1250
00:49:12,060 --> 00:49:14,730
And so we don't require our
users to know all of that.

1251
00:49:14,730 --> 00:49:15,570
We just say, "You know what?

1252
00:49:15,570 --> 00:49:17,910
Most of you're going to need a rate limit.

1253
00:49:17,910 --> 00:49:20,763
You're going to need to allow
and block certain subnets.

1254
00:49:21,630 --> 00:49:23,820
We're going to give you AWS Managed Rules

1255
00:49:23,820 --> 00:49:25,200
to prevent common attacks.

1256
00:49:25,200 --> 00:49:26,310
But if you find that your app

1257
00:49:26,310 --> 00:49:29,220
really needs a large
body size and a request,

1258
00:49:29,220 --> 00:49:30,600
you can opt out of those things

1259
00:49:30,600 --> 00:49:31,680
as it meets your needs."

1260
00:49:31,680 --> 00:49:33,930
And so most of our users are
very successful with this,

1261
00:49:33,930 --> 00:49:37,230
and they never touch the
JSON language of A WAF ACL,

1262
00:49:37,230 --> 00:49:38,430
but every now and then we get someone

1263
00:49:38,430 --> 00:49:40,110
who has a really complicated IP set

1264
00:49:40,110 --> 00:49:41,223
and they need to do something

1265
00:49:41,223 --> 00:49:42,840
that this doesn't support.

1266
00:49:42,840 --> 00:49:44,730
And instead of trying to build
that into the abstraction

1267
00:49:44,730 --> 00:49:46,500
and slowing them down while
we build these features,

1268
00:49:46,500 --> 00:49:50,190
we just say, "Okay, go
create your own WAF ACL,

1269
00:49:50,190 --> 00:49:52,290
tell us the RN of the
ACL that you created,

1270
00:49:52,290 --> 00:49:54,090
and we'll associate that
with the load balancer,

1271
00:49:54,090 --> 00:49:55,140
and then we move on."

1272
00:49:55,140 --> 00:49:56,550
And so they're able to take control.

1273
00:49:56,550 --> 00:49:59,370
They inherit the
responsibility for the WAF ACL,

1274
00:49:59,370 --> 00:50:01,920
and they don't have to
sacrifice any of their benefits

1275
00:50:01,920 --> 00:50:03,240
they get from the rest of the platform.

1276
00:50:03,240 --> 00:50:05,880
They continue using all
that as they did before.

1277
00:50:05,880 --> 00:50:08,340
We do this with a few other
things too. So security groups,

1278
00:50:08,340 --> 00:50:09,990
we'll automatically
configure security groups

1279
00:50:09,990 --> 00:50:12,600
to allow the things that we
manage to talk to each other.

1280
00:50:12,600 --> 00:50:14,790
But if they have a
complicated security group,

1281
00:50:14,790 --> 00:50:16,050
they can pipe that in,

1282
00:50:16,050 --> 00:50:17,040
or IM policies,

1283
00:50:17,040 --> 00:50:18,990
we'll let them define
that in line if it works.

1284
00:50:18,990 --> 00:50:20,520
And then sometimes those policies

1285
00:50:20,520 --> 00:50:22,613
get a little bit large to manage,
and so we just say, "Okay,

1286
00:50:22,613 --> 00:50:24,030
just tell us the RN of your policy

1287
00:50:24,030 --> 00:50:25,880
and we'll attach it to the task role.

1288
00:50:27,900 --> 00:50:29,340
Everyone at GoDaddy uses CDK.

1289
00:50:29,340 --> 00:50:32,340
We have centralized on
CDK as our management tool

1290
00:50:32,340 --> 00:50:34,590
for all of our AWS infrastructure.

1291
00:50:34,590 --> 00:50:36,660
And it's very common for
us to find developers

1292
00:50:36,660 --> 00:50:38,790
that use Katana for what it's good at,

1293
00:50:38,790 --> 00:50:40,170
but then they need to extend it,

1294
00:50:40,170 --> 00:50:42,630
they need to associate that ECS task

1295
00:50:42,630 --> 00:50:44,280
with a DynamoDB table,

1296
00:50:44,280 --> 00:50:46,410
or they want to change
the behavior of something.

1297
00:50:46,410 --> 00:50:49,020
And so they're able to use constructs

1298
00:50:49,020 --> 00:50:50,640
to extend what Katana provisions

1299
00:50:50,640 --> 00:50:52,290
within their own CDK code.

1300
00:50:52,290 --> 00:50:53,123
And so you could say,

1301
00:50:53,123 --> 00:50:54,930
"I'm gonna create a
new Katana environment.

1302
00:50:54,930 --> 00:50:56,100
This is actually just looking up

1303
00:50:56,100 --> 00:50:58,620
and adding to context values.

1304
00:50:58,620 --> 00:50:59,453
What do I have here?

1305
00:50:59,453 --> 00:51:01,230
The listener RN gets a random string

1306
00:51:01,230 --> 00:51:02,880
that they can't predict ahead of time."

1307
00:51:02,880 --> 00:51:04,260
And so we'll look that up live,

1308
00:51:04,260 --> 00:51:05,610
get that context in there,

1309
00:51:05,610 --> 00:51:07,470
and then they can use
this piece of context

1310
00:51:07,470 --> 00:51:09,600
to add their own custom
listener rule later,

1311
00:51:09,600 --> 00:51:11,850
and take the infrastructure
that we've managed

1312
00:51:11,850 --> 00:51:14,523
and augment it in a way
that meets their needs.

1313
00:51:15,750 --> 00:51:17,760
So all these guardrails and
off-ramps are very important.

1314
00:51:17,760 --> 00:51:20,820
It's all built around a governance system

1315
00:51:20,820 --> 00:51:22,290
that I think one of my colleagues

1316
00:51:22,290 --> 00:51:23,790
in the row over here is using.

1317
00:51:24,630 --> 00:51:26,790
We use CloudFormation hooks to restrict

1318
00:51:26,790 --> 00:51:28,920
what people are able to do

1319
00:51:28,920 --> 00:51:32,430
so that developers really
can't step a foot wrong.

1320
00:51:32,430 --> 00:51:34,110
So you can't create an ECS service

1321
00:51:34,110 --> 00:51:35,100
that has a public IP,

1322
00:51:35,100 --> 00:51:36,240
it just doesn't happen.

1323
00:51:36,240 --> 00:51:38,310
And Katana builds on top
of this governance system,

1324
00:51:38,310 --> 00:51:39,870
which gives us a lot of confidence

1325
00:51:39,870 --> 00:51:44,870
that we're not going to do
something wrong as a platform,

1326
00:51:45,330 --> 00:51:47,400
and anything that you
do within the platform

1327
00:51:47,400 --> 00:51:49,530
is going to adhere to these rules.

1328
00:51:49,530 --> 00:51:52,080
Like I said, we're all
using a common CDK tool set,

1329
00:51:52,080 --> 00:51:53,700
and so that gives us
sort of a lingua franca

1330
00:51:53,700 --> 00:51:55,500
to use between teams.

1331
00:51:55,500 --> 00:51:57,840
CDK is the way that we communicate.

1332
00:51:57,840 --> 00:52:00,270
The Katana managed infrastructure itself

1333
00:52:00,270 --> 00:52:03,000
is actually a very, very
large CDK application.

1334
00:52:03,000 --> 00:52:04,110
And so, in some cases,

1335
00:52:04,110 --> 00:52:06,210
users are able to just
learn from our code,

1336
00:52:06,210 --> 00:52:07,050
and I'm fine with that.

1337
00:52:07,050 --> 00:52:08,460
They can steal the source code

1338
00:52:08,460 --> 00:52:09,840
and say, "Ah, I see what you did there,"

1339
00:52:09,840 --> 00:52:11,940
and apply it to their own things.

1340
00:52:11,940 --> 00:52:12,810
And then there's no magic.

1341
00:52:12,810 --> 00:52:14,340
So there's nothing that our platform does

1342
00:52:14,340 --> 00:52:15,900
that users could not do themselves.

1343
00:52:15,900 --> 00:52:17,400
We don't have magic permissions,

1344
00:52:17,400 --> 00:52:19,620
we don't have any elevated things

1345
00:52:19,620 --> 00:52:21,060
that we can do this, but you can't,

1346
00:52:21,060 --> 00:52:23,160
because only we're trusted to do it.

1347
00:52:23,160 --> 00:52:25,380
We're doing things that
users could do themselves

1348
00:52:25,380 --> 00:52:28,170
and we're just accelerating
their path to do that,

1349
00:52:28,170 --> 00:52:29,700
which gives them a
really powerful off-ramp.

1350
00:52:29,700 --> 00:52:31,080
So if they ever needed to take

1351
00:52:31,080 --> 00:52:32,700
one of our CloudFormation stacks

1352
00:52:32,700 --> 00:52:34,350
and manage it themselves separately,

1353
00:52:34,350 --> 00:52:35,183
they can do that,

1354
00:52:35,183 --> 00:52:36,540
and they'll have no issues doing that

1355
00:52:36,540 --> 00:52:38,940
within our governance framework.

1356
00:52:38,940 --> 00:52:41,160
Now, at a company of GoDaddy's size,

1357
00:52:41,160 --> 00:52:42,630
managing infrastructure is important,

1358
00:52:42,630 --> 00:52:43,920
but really where our engineers

1359
00:52:43,920 --> 00:52:45,030
start to see the value

1360
00:52:45,030 --> 00:52:47,190
is in how we glue that infrastructure

1361
00:52:47,190 --> 00:52:48,570
to the rest of the business.

1362
00:52:48,570 --> 00:52:51,210
So like I said, we have a
very good observability team,

1363
00:52:51,210 --> 00:52:52,290
and out of the box,

1364
00:52:52,290 --> 00:52:55,500
every one of the ECS
services that Katana manages

1365
00:52:55,500 --> 00:52:57,090
has a fluent bit sidecar

1366
00:52:57,090 --> 00:52:59,070
that uses Firelands to send their logs

1367
00:52:59,070 --> 00:53:00,990
to our observability system.

1368
00:53:00,990 --> 00:53:03,180
We're working on a shared OTel collector

1369
00:53:03,180 --> 00:53:05,520
that collects those traces
and does the same thing there.

1370
00:53:05,520 --> 00:53:08,130
And this is huge for our engineers,

1371
00:53:08,130 --> 00:53:10,560
they don't have to do
anything to get this benefit,

1372
00:53:10,560 --> 00:53:12,150
it's just there for them.

1373
00:53:12,150 --> 00:53:13,620
Compliance and security, like I mentioned,

1374
00:53:13,620 --> 00:53:15,150
we work really closely with those teams

1375
00:53:15,150 --> 00:53:18,030
to make sure that everything
is always patched constantly.

1376
00:53:18,030 --> 00:53:21,270
And because of our kind of
oversight of the entire platform,

1377
00:53:21,270 --> 00:53:22,920
we're able to do this at a scale

1378
00:53:22,920 --> 00:53:25,620
that individual teams
can't do on their own.

1379
00:53:25,620 --> 00:53:27,450
GoDaddy's a big certificate registrar

1380
00:53:27,450 --> 00:53:30,060
or certificate issuer and DNS.

1381
00:53:30,060 --> 00:53:32,280
And so we work with our
internal certificate API

1382
00:53:32,280 --> 00:53:35,130
to let the engineer who's
provisioned their certificate

1383
00:53:35,130 --> 00:53:36,900
get that imported to the right AWS account

1384
00:53:36,900 --> 00:53:38,160
so that it works with their load balancer

1385
00:53:38,160 --> 00:53:40,320
and get those renewed automatically.

1386
00:53:40,320 --> 00:53:42,330
And then experimentation,

1387
00:53:42,330 --> 00:53:45,300
experimentation is a huge
part of the DNA of GoDaddy,

1388
00:53:45,300 --> 00:53:46,650
and you might think of experimentation

1389
00:53:46,650 --> 00:53:48,840
as just a front-end
concern of just A/B testing

1390
00:53:48,840 --> 00:53:50,070
in a browser,

1391
00:53:50,070 --> 00:53:52,530
but we believe that even
infrastructure changes

1392
00:53:52,530 --> 00:53:53,760
are experiments as well.

1393
00:53:53,760 --> 00:53:55,320
Version two of my application

1394
00:53:55,320 --> 00:53:56,730
might solve a performance bottleneck

1395
00:53:56,730 --> 00:53:57,660
that version one had,

1396
00:53:57,660 --> 00:54:00,090
and that might improve
a click-through rate

1397
00:54:00,090 --> 00:54:01,770
on a checkout funnel or something.

1398
00:54:01,770 --> 00:54:04,350
And so every time a new
application is deployed

1399
00:54:04,350 --> 00:54:05,430
or a new instance,

1400
00:54:05,430 --> 00:54:08,190
a version of an application
is deployed on Katana,

1401
00:54:08,190 --> 00:54:11,040
we send that data to our
experimentation platform

1402
00:54:11,040 --> 00:54:12,840
so that our data scientists
can correlate that

1403
00:54:12,840 --> 00:54:14,940
with their hypotheses
and other data sources

1404
00:54:14,940 --> 00:54:17,520
to see how that feeds into that.

1405
00:54:17,520 --> 00:54:19,650
And then enterprise networking is tricky,

1406
00:54:19,650 --> 00:54:22,950
it's messy, we've got a mix
of AWS accounts on-prem.

1407
00:54:22,950 --> 00:54:25,313
I think if you need on-prem
access, I know how to do it,

1408
00:54:25,313 --> 00:54:27,090
you have to attach yourself
to a certain subnet group,

1409
00:54:27,090 --> 00:54:28,320
something like that.

1410
00:54:28,320 --> 00:54:29,790
For our users, it's a checkbox.

1411
00:54:29,790 --> 00:54:31,740
We do these things to
work with those teams

1412
00:54:31,740 --> 00:54:35,070
and make sure that networking
is as easy as we can make it.

1413
00:54:35,070 --> 00:54:36,360
Now, why ECS Fargate?

1414
00:54:36,360 --> 00:54:39,660
There's a lot of compute platforms at AWS,

1415
00:54:39,660 --> 00:54:40,980
many of them support containers,

1416
00:54:40,980 --> 00:54:42,690
which is good for us.

1417
00:54:42,690 --> 00:54:43,920
We chose ECS Fargate

1418
00:54:43,920 --> 00:54:45,780
because it really met the happy medium

1419
00:54:45,780 --> 00:54:48,600
for cost, management
and flexibility for us.

1420
00:54:48,600 --> 00:54:50,190
Management is very important.

1421
00:54:50,190 --> 00:54:51,960
So we have a small team
that runs our platform,

1422
00:54:51,960 --> 00:54:53,400
about seven or eight engineers,

1423
00:54:53,400 --> 00:54:55,890
and we have 2,100 engineers
that we have to serve.

1424
00:54:55,890 --> 00:55:00,840
So if we are patching
EKS instances every day,

1425
00:55:00,840 --> 00:55:03,060
can't do it, it's not manageable
to do that at that scale.

1426
00:55:03,060 --> 00:55:04,710
So ECS Fargate gives us the ability

1427
00:55:04,710 --> 00:55:07,320
to not have to manage or
patch those instances.

1428
00:55:07,320 --> 00:55:09,450
And like I said, this was invented

1429
00:55:09,450 --> 00:55:10,950
before ECS Managed Instances,

1430
00:55:10,950 --> 00:55:12,720
which changes that a little bit.

1431
00:55:12,720 --> 00:55:14,040
But we also don't have
to deal with scheduling

1432
00:55:14,040 --> 00:55:14,873
or anything like that.

1433
00:55:14,873 --> 00:55:17,370
And as someone who has previously
run Istio exactly once,

1434
00:55:17,370 --> 00:55:19,110
I can tell you that this
is (laughing) so nice

1435
00:55:19,110 --> 00:55:20,880
not to have to do that.

1436
00:55:20,880 --> 00:55:23,010
But we don't sacrifice
anything with our flexibility.

1437
00:55:23,010 --> 00:55:24,600
So they still have full access

1438
00:55:24,600 --> 00:55:27,480
to all their container
settings, to VPC connections,

1439
00:55:27,480 --> 00:55:28,740
things like Service Connect.

1440
00:55:28,740 --> 00:55:29,670
And it's a good cost fit

1441
00:55:29,670 --> 00:55:31,050
for the kind of services that we run,

1442
00:55:31,050 --> 00:55:34,590
because we have a lot of
always-on, customer-facing web apps

1443
00:55:34,590 --> 00:55:37,323
that work really well for
the way that ECS is parked.

1444
00:55:38,550 --> 00:55:40,020
So finally, our lessons learned.

1445
00:55:40,020 --> 00:55:42,210
Our users really value
the single pane of glass.

1446
00:55:42,210 --> 00:55:45,210
I underestimated how much
they would enjoy that.

1447
00:55:45,210 --> 00:55:47,610
Operating via CloudFormation
is kind of difficult.

1448
00:55:47,610 --> 00:55:50,280
CloudFormation has a very static way

1449
00:55:50,280 --> 00:55:51,480
of expressing infrastructure,

1450
00:55:51,480 --> 00:55:53,520
and ECS services are very dynamic.

1451
00:55:53,520 --> 00:55:55,170
You'd make a deployment

1452
00:55:55,170 --> 00:55:56,460
and that creates hundreds of events

1453
00:55:56,460 --> 00:55:57,540
and it's checking health checks,

1454
00:55:57,540 --> 00:55:59,250
so there's quite a bit going on there.

1455
00:55:59,250 --> 00:56:02,160
And so getting the impedance
to match between those things

1456
00:56:02,160 --> 00:56:04,830
has been something that we've
had to put some work into.

1457
00:56:04,830 --> 00:56:05,730
But it does have its perks.

1458
00:56:05,730 --> 00:56:07,710
If we ever get ourselves
backed into a corner,

1459
00:56:07,710 --> 00:56:10,230
we can move traffic away from a region,

1460
00:56:10,230 --> 00:56:11,063
delete all the stacks,

1461
00:56:11,063 --> 00:56:12,810
recreate them exactly
the way they were before,

1462
00:56:12,810 --> 00:56:15,870
and the app is running as we want it to.

1463
00:56:15,870 --> 00:56:17,550
And we have to partner with other teams.

1464
00:56:17,550 --> 00:56:19,680
We kind of call ourselves
a platform of platforms.

1465
00:56:19,680 --> 00:56:21,480
We're all thinking with
a platform mindset,

1466
00:56:21,480 --> 00:56:23,550
but I can't fix everything myself.

1467
00:56:23,550 --> 00:56:26,070
And so working with our
observability teams,

1468
00:56:26,070 --> 00:56:28,560
our security teams, our governance teams,

1469
00:56:28,560 --> 00:56:29,820
has really been essential

1470
00:56:29,820 --> 00:56:31,650
to making a platform that meets the needs

1471
00:56:31,650 --> 00:56:33,424
that our developers have.

1472
00:56:33,424 --> 00:56:34,680
And so I'll lead you,

1473
00:56:34,680 --> 00:56:36,090
we had our philosophical tension.

1474
00:56:36,090 --> 00:56:38,040
So there's one more philosophical tension

1475
00:56:38,040 --> 00:56:39,033
to share with you.

1476
00:56:41,160 --> 00:56:42,690
I think it'd be a big mistake

1477
00:56:42,690 --> 00:56:45,030
to think of your developers
as one kind of person,

1478
00:56:45,030 --> 00:56:48,000
to say that, on this spectrum
of being an AWS expert

1479
00:56:48,000 --> 00:56:50,520
or an AWS newbie,

1480
00:56:50,520 --> 00:56:52,740
that there's only one kind
of engineer at your company.

1481
00:56:52,740 --> 00:56:54,030
You're obviously gonna find people

1482
00:56:54,030 --> 00:56:56,370
who exist all across that.

1483
00:56:56,370 --> 00:56:59,400
And so what we found is
that, to meet their needs,

1484
00:56:59,400 --> 00:57:01,710
you have to understand that
they have a wide spectrum

1485
00:57:01,710 --> 00:57:04,170
and build a platform that
meets all of those needs,

1486
00:57:04,170 --> 00:57:06,180
that allows the AWS experts to thrive

1487
00:57:06,180 --> 00:57:07,620
and have the control that they want,

1488
00:57:07,620 --> 00:57:10,140
and that allows the
less AWS-centric people

1489
00:57:10,140 --> 00:57:11,190
to get the job done

1490
00:57:11,190 --> 00:57:13,020
without having to know everything,

1491
00:57:13,020 --> 00:57:15,210
or get certified, or anything like that.

1492
00:57:15,210 --> 00:57:16,170
So as you leave,

1493
00:57:16,170 --> 00:57:18,090
if you're going to
consider building platforms

1494
00:57:18,090 --> 00:57:20,310
or if you're working on
a platform of your own,

1495
00:57:20,310 --> 00:57:22,380
please consider making your platform

1496
00:57:22,380 --> 00:57:24,330
meet as wide of a
spectrum of your engineers

1497
00:57:24,330 --> 00:57:25,710
as you possibly can

1498
00:57:25,710 --> 00:57:28,860
so that you can get success
for a wide range of people.

1499
00:57:28,860 --> 00:57:30,540
And I'll hand it back to Jen.

1500
00:57:30,540 --> 00:57:32,916
Thank you.
(audience clapping)

1501
00:57:32,916 --> 00:57:33,777
- [Audience Member] Whoo.

1502
00:57:33,777 --> 00:57:36,360
(Jen laughing)

1503
00:57:39,570 --> 00:57:41,010
- I'll say it again,

1504
00:57:41,010 --> 00:57:43,080
I feel like I've drawn so much inspiration

1505
00:57:43,080 --> 00:57:45,000
from what Keith has built from Katana.

1506
00:57:45,000 --> 00:57:46,590
I know we're already thinking about things

1507
00:57:46,590 --> 00:57:47,850
we wanna add to our roadmap

1508
00:57:47,850 --> 00:57:49,650
from some of the things that he's done.

1509
00:57:49,650 --> 00:57:51,060
So I thank you again, Keith,

1510
00:57:51,060 --> 00:57:53,370
for sharing what you've built.

1511
00:57:53,370 --> 00:57:56,700
I hope you gained a lot from this session.

1512
00:57:56,700 --> 00:57:59,163
Please try out ECS Express Mode.

1513
00:58:00,060 --> 00:58:01,740
I hope you you've learned a little bit

1514
00:58:01,740 --> 00:58:03,960
about accelerating
application development,

1515
00:58:03,960 --> 00:58:06,360
about building platforms on ECS.

1516
00:58:06,360 --> 00:58:07,620
Check out this QR code.

1517
00:58:07,620 --> 00:58:09,030
It is specific to this session.

1518
00:58:09,030 --> 00:58:12,330
You can download a PDF of the slides.

1519
00:58:12,330 --> 00:58:14,880
We also have a link to the
ECS Immersion Day workshop,

1520
00:58:14,880 --> 00:58:17,340
which now includes ECS Express Mode.

1521
00:58:17,340 --> 00:58:19,620
And we also have a link
to the GitHub action

1522
00:58:19,620 --> 00:58:21,420
that we just launched.

1523
00:58:21,420 --> 00:58:25,048
Thank you again, and please
fill out the session survey.

1524
00:58:25,048 --> 00:58:25,923
Thank you.

