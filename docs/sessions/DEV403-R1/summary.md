# AWS re:Invent 2025 会议总结:使用 AI 代码助手的最佳实践

## 一、会议概述

本次 AWS re:Invent 2025 的技术分享会议由 Amazon 首席软件工程师 James Hood 和 AWS 高级开发者倡导者 Maish Saidel-Keesing 共同主讲,重点介绍了 Amazon 内部如何使用生成式 AI 工具和代码助手来提升开发效率。

会议分为两个主要部分。第一部分由 Maish 介绍了与 LLM(大语言模型)交互的多种提示工程技术,包括零样本、单样本、少样本提示,以及上下文提示、角色提示、自洽性提示和思维树等高级技术。这些技术在 Amazon 内部被称为"机制"(mechanism),是经过验证并在全公司推广的最佳实践。Maish 通过 Kiro CLI 工具进行了大量实时演示,展示了如何通过提供更多上下文和明确的指令来获得更准确、更符合需求的代码生成结果。

第二部分由 James Hood 介绍了 Amazon 最新开源的 Agent SOPs(代理标准操作程序)框架。James 自称曾是"AI 怀疑论者",但在今年通过使用这些技术实现了思维转变。Agent SOPs 是一种将复杂提示工程标准化的方法,通过 Markdown 格式定义标题、概述、参数、步骤约束、示例和故障排除等结构化内容,使 AI 代理能够更一致、可靠地执行复杂任务。James 现场演示了如何使用 Agent SOPs 自动分析代码库、生成文档,甚至创建新的 SOP 来处理 GitHub 问题分类等实际工作场景。

## 二、详细时间线与关键要点

### **开场介绍 (0:00-3:30)**
- **0:00** - James Hood 开场,介绍自己是 Amazon 首席软件工程师,说明这是一个代码实操会议
- **1:15** - Maish Saidel-Keesing 介绍自己是 AWS 高级开发者倡导者,提醒观众注意事项(听力辅助设备、代码的非确定性特性)
- **2:45** - 解释会议起源:Maish 观看了 James 的内部技术分享后,决定在 re:Invent 上公开这些内容

### **Amazon 机制与最佳实践 (3:30-6:00)**
- **3:30** - 介绍 Amazon 的"机制"(mechanism)概念:将有效的工作方法标准化并在全公司推广
- **4:20** - 强调与"发明与简化"(Invent and Simplify)领导力原则的关系
- **5:10** - 展示 GitHub 代码仓库,所有演示代码均开源可用

### **零样本、单样本和少样本提示 (6:00-12:30)**
- **6:00** - Maish 开始演示,切换到 Kiro CLI 界面
- **6:30** - 零样本提示:直接询问 LLM 创建验证 IAM 策略的脚本,LLM 生成 Python 代码
- **8:15** - 单样本提示:提供一个 JavaScript 邮箱验证函数示例,要求创建类似的 IAM 策略验证函数,LLM 理解并使用 JavaScript
- **10:00** - 少样本提示:提供多个示例,LLM 生成更精简的代码,省略不必要的使用说明
- **11:20** - 最佳实践:简单任务使用零样本,复杂任务使用少样本提示以提供更多上下文

### **系统提示、上下文提示和角色提示 (12:30-18:00)**
- **12:30** - 系统提示:要求创建查询特定标签 EC2 实例的 Bash 脚本
- **14:00** - 上下文提示:添加团队管理多账户实例的背景信息,LLM 生成更适合实际场景的脚本
- **15:30** - 角色提示:指定 LLM 扮演"AWS 高级解决方案架构师"角色,生成更专业的脚本
- **17:00** - 最佳实践:结合这些技术处理复杂任务,先提供上下文,再定义角色,最后指定任务和输出格式

### **自洽性提示 (18:00-23:00)**
- **18:00** - 介绍自洽性提示:要求 LLM 生成多个独立解决方案并选择最佳方案
- **19:00** - 演示:设计多区域高可用架构,要求探索三种不同方法(主动-主动、主动-被动、带读副本的主动-主动)
- **20:30** - LLM 分析成本、运维复杂度、延迟等因素后给出推荐
- **22:00** - 适用场景:复杂架构决策、故障排查、安全分析、性能优化
- **22:40** - 最佳实践:要求生成多个答案以获得更一致的结果

### **思维树技术 (23:00-28:00)**
- **23:00** - 介绍思维树(Tree of Thought):结构化探索问题的多个分支
- **24:00** - 演示:优化 Lambda 性能,指定三个可能瓶颈(冷启动、内存限制、外部 API 调用),每个瓶颈提供三种解决方案,评估优缺点
- **26:00** - 适用场景:多变量复杂问题、需要考虑多种交互因素的决策
- **27:00** - 最佳实践:提供清晰的分支结构和评估标准

### **结合自洽性和思维树 (28:00-31:00)**
- **28:00** - 演示组合技术:设计灾难恢复解决方案,使用思维树探索三种策略,每种策略进行自洽性分析
- **29:30** - LLM 生成详细的实施方案和方法对比
- **30:30** - 适用场景:关键系统设计、高风险架构决策

### **使用上下文增强工具 (31:00-35:00)**
- **31:00** - 介绍如何向 Kiro 添加自定义上下文
- **32:00** - 演示:加载 Amazon 内部文档写作风格指南(叙述文档、单页文档、六页文档、PR FAQ)
- **33:00** - 要求撰写关于"帮助蝌蚪变成青蛙的产品"的叙述文档(虚构产品)
- **34:00** - LLM 根据加载的风格指南自动生成符合 Amazon 标准的文档结构,包括成功指标、市场机会等部分

### **探索-计划-编码-提交工作流 (35:00-40:00)**
- **35:00** - 介绍 EPCC 工作流:探索(Explore)、计划(Plan)、编码(Code)、提交(Commit)
- **36:00** - 演示:提供三个 JavaScript 认证相关文件给 LLM 分析
- **37:00** - 要求实现密码重置功能,LLM 理解现有代码风格和架构
- **38:00** - LLM 生成实施计划,考虑安全性和健壮性
- **39:00** - LLM 生成符合现有代码风格的实现代码
- **39:45** - 演示如何让 LLM 按照内部标准生成提交信息

### **James Hood 介绍与 Agent SOPs 概念 (40:00-45:00)**
- **40:00** - James Hood 正式接手演示,介绍自己在 Amazon 16 年经历
- **41:00** - 自称曾是"AI 怀疑论者",今年 2 月思维发生转变
- **42:00** - 介绍 Agent SOPs(代理标准操作程序):将提示工程标准化的框架
- **43:00** - 解释 SOP 概念:详细的分步任务执行文档
- **44:00** - 说明 Agent SOPs 在不到两周前刚刚开源

### **代码库摘要 SOP 演示 (45:00-52:00)**
- **45:00** - 进入 agent-sops 目录,展示 Strands Agent SOPs MCP 服务器
- **46:00** - 运行 codebase-summary SOP,设置参数 consolidated=true
- **47:00** - 展示 SOP 的 Markdown 结构:标题、概述、参数(必需/可选)、步骤
- **48:00** - 重点讲解步骤约束:使用 RFC 2119 风格关键词(MUST、SHOULD、MAY)
- **49:30** - 示例约束:"必须验证代码库路径存在"、"必须使用 Mermaid 图表进行可视化"
- **50:00** - SOP 还包含示例和故障排除部分
- **51:00** - 强调 Agent SOPs 使模型行为更一致可预测

### **生成的文档展示 (52:00-56:00)**
- **52:00** - 展示生成的 codebase-info.md:包含概述、技术栈、项目结构
- **53:00** - 展示 architecture.md:包含 Mermaid 架构图
- **54:00** - 实时观察 LLM 添加组件和接口文档
- **55:00** - 生成统一的 agents.mmd 文件供代码助手使用

### **技术无畏与实际应用 (56:00-60:00)**
- **56:00** - James 分享"技术无畏"(Technically Fearless)原则
- **57:00** - 使用 Agent SOPs 后,可以快速理解任何代码库
- **58:00** - 案例:在不熟悉的代码库、不熟悉的语言中,2 天从概念到 PR,7 天从概念到生产环境
- **59:00** - 这是他今年的"顿悟时刻"

### **创作 Agent SOPs (60:00-68:00)**
- **60:00** - 说明不建议手写 SOPs,应该用 AI 代理创作
- **61:00** - 展示 steering file(引导文件)定义 SOP 格式
- **62:00** - 介绍 strands-agent-sops CLI 工具:运行 MCP 服务器、转换 SOPs、输出规则
- **63:00** - 演示 rule 命令,可将规则添加到 Cursor 或 Kiro 配置
- **64:00** - 强调 Agent SOPs 工具无关,任何 LLM 都可使用
- **65:00** - 演示创作新 SOP:要求创建"根据人名生成有趣诗歌"的 SOP
- **66:30** - 运行新创建的 name-poem 提示,输入"James"
- **67:30** - LLM 确认拼写并生成诗歌

### **修改和迭代 SOPs (68:00-72:00)**
- **68:00** - 展示生成的 SOP 结构:标题、概述、参数(person_name 必需)、步骤、示例
- **69:00** - 要求更新 SOP:添加可选的 hometown 参数
- **70:00** - LLM 自动更新 SOP,添加新参数和相应约束
- **71:00** - 重新运行 SOP,输入"James"和"Tucson, Arizona"
- **71:45** - 生成包含家乡元素(沙漠、仙人掌)的诗歌

### **实用 SOP 演示:GitHub 问题分类 (72:00-75:00)**
- **72:00** - James 表示作为前 AI 怀疑论者,更关注实际应用而非"可爱的东西"
- **73:00** - 创建新 SOP:对给定 GitHub 仓库 URL 的问题进行分类
- **74:00** - 说明已加载 GitHub MCP 服务器,LLM 知道可用工具
- **74:30** - 开玩笑问观众是否有人想要诗歌

### **问答环节 (75:00-78:00)**
- **75:00** - 观众提问:向 LLM 提供代码时,如何确保不包含敏感信息?
- **76:00** - 观众追问:除了密码,还有哪些信息需要注意?
- **77:00** - James 回答:内部使用 Amazon Bedrock,提供账户级隐私保护
- **77:30** - 回答被字幕截断,但强调了使用 Bedrock 的安全优势

### **总结要点**
- Amazon 内部广泛采用生成式 AI 工具,并将最佳实践标准化为"机制"
- 提示工程技术从简单到复杂:零样本 → 单样本 → 少样本 → 上下文/角色提示 → 自洽性 → 思维树
- Agent SOPs 框架通过结构化 Markdown 文档使 AI 行为更可预测和一致
- 所有演示代码和 SOPs 已在 GitHub 开源
- 实际应用案例证明这些技术可显著提升开发效率和"技术无畏"能力