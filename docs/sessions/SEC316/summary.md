# AWS SEC 316 会议总结：Amazon Inspector 与漏洞管理策略

## 会议概述

本次会议由 Amazon Inspector 团队的高级经理 Rick Anthony 及其团队成员 Anthony 和 Nurali 主讲，主题为 Amazon Inspector 及漏洞管理策略。会议深入介绍了传统漏洞管理面临的挑战，以及 Amazon Inspector 如何通过自动化、持续扫描的方式解决这些问题。

Amazon Inspector 是一项自动化漏洞管理服务，能够持续监控工作负载中的软件漏洞和意外网络暴露。该服务支持多种计算资源类型，包括 EC2 实例、ECR 容器镜像、Lambda 函数以及托管代码仓库（GitHub 和 GitLab）。Inspector 的核心优势在于其自动化特性和近乎实时的持续扫描能力，无需客户手动管理，能够自动发现资源、扫描漏洞并根据环境变化更新发现结果。

会议还重点介绍了 Inspector 的智能评分系统（Amazon Inspector Score），该系统综合考虑漏洞严重性、网络可达性、已知漏洞利用等多个因素，帮助客户优先处理最重要的安全风险。此外，Inspector 与 Open SSF 合作，提供近实时的恶意软件包检测功能，Amazon 已成为该领域最大的贡献者之一。

## 详细时间线

### 开场与议程介绍
[00:00 - 02:00]
- Rick Anthony 介绍自己是 Amazon Inspector 团队的高级经理
- 介绍团队成员 Anthony 和 Nurali
- 概述会议议程：传统漏洞管理挑战、Amazon Inspector 功能、演示及代码安全新特性

### 传统漏洞管理的挑战
[02:00 - 04:30]
- 传统解决方案未针对云环境设计
- 云环境的弹性资源（虚拟机、容器、无服务器）难以全面覆盖
- 资源动态变化导致许可和可见性问题
- 定期扫描无法捕获所有资源变化
- 大量发现结果难以优先级排序，仅依靠严重性评级不足以应对实际风险

### Amazon Inspector 服务介绍
[04:30 - 07:00]
- Inspector 是自动化漏洞管理服务，持续监控软件漏洞和网络暴露
- 两大核心特性：自动化（无需手动管理）和持续扫描（实时监控资源变化）
- 支持的资源类型：EC2、ECR 容器镜像、Lambda 函数、GitHub/GitLab 代码仓库

### Inspector 使用的四个阶段
[07:00 - 10:30]
- **阶段一：启用** - 为账户或整个组织启用 Inspector
- **阶段二：发现、扫描和监控** - 自动发现资源并持续扫描
- **阶段三：上下文化发现** - 使用 Inspector Score 优先级排序
- **阶段四：采取行动** - 在 Inspector、Security Hub 或其他工具中处理发现结果

### 组织级别部署
[10:30 - 12:30]
- 支持通过委托管理员账户管理整个组织
- 自动为新账户启用 Inspector，确保无覆盖缺口
- 委托管理员可查看所有账户的发现结果，各账户也能查看自己的发现
- 今年推出了组织策略支持

### 持续扫描机制
[12:30 - 15:00]
- Inspector 近实时工作，资源启动时自动扫描
- 智能扫描触发：新资源启动、安装新软件包、应用补丁、发布新 CVE 时自动扫描
- 补丁后自动重新扫描并关闭已修复的发现结果
- 客户可随时了解当前安全态势，无需手动操作

### Amazon Inspector Score 评分系统
[15:00 - 18:00]
- 综合多个因素评分：漏洞严重性、资源暴露情况、已知漏洞利用、野外利用频率
- 与 Recorded Future 合作提供高级漏洞情报
- 提供 MITRE ATT&CK TTP 映射、CISA 已知漏洞、恶意软件工具包等信息
- 客户可搜索 CVE 数据库，立即查看受影响的资源

### 客户案例：大众金融服务
[18:00 - 19:30]
- 客户 Crispen 在通勤途中接到老板电话询问新 Windows 漏洞影响
- 通过 Inspector 在 14 分钟内识别所有受影响账户和资源
- 向所有资源所有者发送修复通知
- 展示了近实时扫描和完整可见性的强大能力

### 恶意软件包检测
[19:30 - 22:00]
- 与 Open SSF 合作提供近实时恶意软件包检测
- Amazon 是 Open SSF 最大贡献者之一
- 使用静态、动态和 AI 规则扫描 npm 注册表
- 发现了史上最大规模的代币窃取活动之一（超过 15 万个恶意软件包）
- 计划扩展到其他注册表

### 恶意软件包检测演示
[22:00 - 24:00]
- 演示了包含已知恶意软件包（anhackle test）的 Docker 文件
- 推送到 ECR 后，Inspector 自动检测到恶意软件包
- 显示 Inspector Score 9.8，来源为 OSSF
- 提供详细信息和参考链接供进一步调查

### 采取行动的多种方式
[24:00 - 26:00]
- 在 Inspector 控制台直接操作
- 发送到 Security Hub 进行集中管理
- 通过 EventBridge 集成到其他系统
- 合作伙伴应用可提取数据
- ECR 也会显示容器镜像的发现结果

### 软件物料清单（SBOM）
[26:00 - 27:30]
- 可随时导出账户或组织的 SBOM
- 支持 CycloneDX 和 SPDX 格式
- 可过滤数据并发送到 Athena 或 QuickSight 进行分析
- SBOM 数据免费提供

### Anthony 部分：持续扫描的重要性
[27:30 - 31:00]
- Anthony 介绍自己是 Inspector 产品经理
- 重点讲解如何使用 Inspector 进行有效漏洞管理
- 通过时间线示例说明持续扫描的必要性：
  - 1月1日：10个软件包，无 CVE
  - 1月10日：发布新 CVE，但不影响现有软件包
  - 1月15日：发布新 CVE，检测到受影响软件包，生成发现结果
- 强调持续监控对了解安全态势的重要性

### EC2 扫描模式
[31:00 - 35:00]
- **基于代理模式**：使用 SSM 代理，易于在整个环境中安装
- **混合模式**（推荐）：优先使用 SSM 代理，无代理时使用无代理扫描
- 混合模式确保接近 100% 的覆盖率
- 无代理技术使用 EBS 快照，数据不会离开客户账户
- 强烈建议使用混合模式以获得完整覆盖

### EC2 扫描的其他功能
[35:00 - 37:00]
- **网络可达性分析**：使用自动推理确定 EC2 实例是否可通过互联网访问
- 网络可达性信息用于计算 Inspector Score
- **Linux 深度检查**：可指定自定义路径进行扫描，检测应用程序编程包漏洞

### Lambda 扫描
[37:00 - 40:00]
- **标准扫描**：检测软件包漏洞
- **代码扫描**：检测应用程序代码漏洞（注入缺陷、数据泄露、弱加密）
- 代码扫描必须与标准扫描一起启用
- 触发扫描时机：检测到新函数、发布新版本、数据库更新
- 修复建议：软件包漏洞提供升级版本，代码漏洞提供 AI 生成的修复代码片段

### ECR 镜像扫描
[40:00 - 44:00]
- **基础扫描**：仅扫描操作系统漏洞，仅在推送时扫描
- **增强扫描**（推荐）：扫描操作系统和编程语言包漏洞，持续监控
- 可配置基于拉取或最后使用日期的扫描策略
- 提供完整的漏洞情报
- 支持将镜像映射到运行中的容器（EKS/ECS）
- 持续扩展支持的生态系统（WordPress、Tomcat 等）

### 其他实用功能
[44:00 - 47:00]
- **托管 SBOM**：导出 Inspector 检测到的 SBOM，支持 CycloneDX 和 SPDX 格式
- **扫描 SBOM API**：输入 SBOM 生成 Inspector 发现结果
- **CIS 基准扫描**：针对 EC2 实例执行临时或计划扫描
- **CI/CD 集成**：与 Jenkins 等工具集成，在推送到注册表前扫描容器镜像

### 控制台演示
[47:00 - 52:00]
- **账户管理页面**：委托管理员可查看所有账户的扫描状态，精细控制各项功能
- **资源覆盖视图**：显示所有 VM、Lambda 函数、容器镜像的扫描状态
- **SBOM 导出**：选择资源并导出到 S3 存储桶
- **EC2 扫描设置**：轻松切换到混合扫描模式
- **容器镜像扫描设置**：控制基于最后使用日期或拉取日期的扫描资格
- **漏洞数据库搜索**：查询特定 CVE 的详细信息和情报

### 容器镜像到容器映射演示
[52:00 - 54:00]
- 演示如何从容器镜像发现结果导航到实际运行的 ECS/EKS 工作负载
- 显示工作负载名称和详细信息
- 帮助客户根据实际使用情况优先处理漏洞

### Nurali 部分：代码安全
[54:00 - 会议结束]
- Nurali 开始介绍代码安全功能
- 使用冰山图像比喻代码安全的重要性
- （字幕在此处截断）

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


注： 本总结基于提供的字幕文本，会议在 Nurali 开始讲解代码安全部分时字幕截断，因此该部分内容未包含在总结中。