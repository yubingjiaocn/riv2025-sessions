# AWS re:Invent 2025 - NET 211: The State of Edge 会议总结

## 会议概述

本次会议由来自AWS的边缘服务专家Eden和Nishad Sani（网络服务总监兼总经理），以及Atlassian的云网络工程师Ambrose Fay共同主讲。会议重点介绍了AWS边缘服务（特别是Amazon CloudFront、Shield和WAF）在AI代理时代的演进和创新。

演讲者深入探讨了互联网从静态网页时代到当前AI代理时代的演变历程，以及AWS边缘服务如何适应这些变化。会议强调了三大核心趋势：流量模式的变化（突发流量、双工连接、LLM令牌传输）、安全需求的升级（需要防护AI驱动的攻击和保护AI应用）、以及开发者体验的简化（快速开发周期要求基础设施不成为障碍）。

Atlassian作为客户案例，分享了他们如何利用CloudFront、WAF和Shield将Jira和Confluence等核心产品迁移到AWS边缘网络，实现了全球安全态势的加强、性能优化和运营负担的降低。通过采用CloudFront的静态IP、VPC私有源站、多层安全防护等功能，Atlassian成功应对了每天数百亿次请求和PB级数据传输的挑战。

## 详细时间线

### 开场介绍 (0:00-2:30)
- **0:00** - Eden（AWS边缘专家，来自悉尼）介绍自己和团队成员
- **0:30** - Ambrose Fay（Atlassian云网络工程师）介绍将分享过去一年与AWS边缘产品合作的案例
- **1:00** - Nishad Sani介绍自己是AWS网络服务总监，负责CloudFront、DDoS防护和ALB
- **1:30** - 会议定位为200级别，适合对CloudFront、WAF和Shield有基础了解的听众

### 边缘服务定义与AWS边缘架构 (2:30-5:00)
- **2:30** - 定义边缘服务：将网络、存储和计算能力部署在更接近用户的位置以降低延迟
- **3:00** - AWS边缘服务包括CloudFront（全球CDN）、Shield和WAF（第3/4/7层攻击防护）
- **3:30** - 核心使命：保护应用、提升速度、确保安全和弹性
- **4:00** - 目标是让全球数十亿用户享受有趣且引人入胜的互联网体验

### 互联网演进历史 (5:00-10:00)
- **5:00** - 静态网页时代：简单的GET请求，基础的IP封锁安全措施
- **5:30** - 交易和电商时代：API兴起，PUT/POST请求，CloudFront推出动态内容加速
- **6:00** - 安全变得复杂：第3/4/7层DDoS攻击出现
- **6:30** - 社交和移动时代：数百万用户涌入，机器人活动增加（模拟人类行为窃取信息）
- **7:30** - 短视频和直播时代：延迟成为情感指标，100毫秒延迟差异可能导致用户流失
- **8:30** - 物联网时代：设备数量激增，但也带来被恶意利用发起DDoS攻击的风险
- **9:00** - AWS推出威胁情报系统：基于全球蜜罐网络收集情报并保护应用

### AI代理时代的挑战 (10:00-13:00)
- **10:00** - 进入AI代理/AI网络时代
- **10:30** - 现场调查：多少人观察到来自AI机器人的请求？（许多人举手）
- **11:00** - 数据显示：CloudFront和WAF每天处理数十亿来自ChatGPT、Claude、Perplexity、Nova等AI机器人的请求
- **11:30** - 所有行业都受到影响，不仅限于零售和电商
- **12:00** - robots.txt已不再有效：该协议是为"行为良好"的机器人设计的旧时代产物
- **12:30** - 机器人演进：从传统爬虫到AI训练机器人，再到代表用户执行交易的AI代理

### AI时代的三大趋势 (13:00-15:00)
- **13:00** - 趋势一：流量模式变化（突发流量、双工连接、大对象和LLM令牌）
- **13:30** - 趋势二：安全需求（保护AI应用免受AI驱动的攻击）
- **14:00** - 趋势三：开发者体验（AI编码助手加速开发，基础设施不应成为障碍）
- **14:30** - 这三大趋势驱动AWS边缘服务的投资和路线图

### 性能和弹性增强 (15:00-22:00)
- **15:00** - AWS网络规模：750+个POP，1140个嵌入式POP，覆盖200+城市和50+国家
- **15:30** - 网络增长超过50%（年同比），每天处理数万亿请求
- **16:00** - 安全数据：每分钟分析EB级数据，去年处理620万次DDoS攻击（同比增长150%）
- **16:30** - 最大攻击规模：25 Tbps
- **17:00** - 新功能：全球Anycast自带IP（BYOIP），与VPC IPAM集成
- **18:00** - 请求流程详解：TLS终止、最优POP路由、私有骨干网传输、多层缓存
- **19:00** - 边缘计算能力：CloudFront Functions、Lambda@Edge、全局键值存储
- **20:00** - QUIC/HTTP3支持：2023年推出，目前25%的请求使用QUIC
- **21:00** - 新功能：HTTPS DNS记录支持，减少往返时间和DNS查询成本

### 性能优化技术 (22:00-25:00)
- **22:00** - TLS 1.3到源站支持：握手时间改善36%
- **23:00** - TCP Fast Open：TCP连接时间改善50%
- **24:00** - 这些性能增强默认启用且免费
- **24:30** - 建议查看并利用TLS 1.3和HTTPS DNS记录功能

### 安全边缘构建 (25:00-35:00)
- **25:00** - Eden接手讲解安全功能
- **25:30** - VPC私有源站：流量进入私有子网，减少攻击面，无需公共负载均衡器
- **26:00** - 新功能：跨账户VPC源站支持（hub-and-spoke模型）
- **26:30** - 源访问控制（OAC）：保护Lambda URL、S3存储桶和媒体服务
- **27:00** - 新功能：mTLS支持（客户端证书认证）
- **27:30** - 后量子密码学支持：默认启用，面向未来
- **28:00** - Shield防护：第3/4层攻击防护，已知攻击者阻止，SYN代理
- **28:30** - 持续边缘检查、协议验证、数据包验证
- **29:00** - 自动路由策略应对大规模攻击
- **29:30** - 资源监控：防护Slowloris和HTTP2 Rapid Reset漏洞
- **30:00** - AWS WAF功能：速率限制、托管规则、自定义规则、机器人控制、欺诈控制

### WAF机器人和欺诈控制 (35:00-40:00)
- **35:00** - Anti-DDoS规则集：快速部署，几分钟内生效
- **35:30** - 可根据工作负载类型和流量承受能力调整
- **36:00** - 规则集应放在规则链顶部以获得最大流量可见性
- **36:30** - 支持路径保护、作用域设置、排除列表
- **37:00** - 丰富的CloudWatch指标用于告警和仪表板
- **37:30** - 挑战能力：验证用户真实性
- **38:00** - 细粒度控制：根据风险动态调整规则
- **38:30** - mTLS详解：双向证书认证，支持混合模式和纯mTLS模式

### AI代理时代的机器人管理 (40:00-45:00)
- **40:00** - 企业面临AI代理流量激增
- **40:30** - 需要边缘控制和丰富的指标
- **41:00** - WAF机器人控制：通过加密控制允许合法AI代理访问
- **41:30** - 细粒度控制：允许AI代理访问特定应用部分，拒绝其他部分
- **42:00** - 托管规则：自动允许已验证机器人，阻止未验证流量
- **42:30** - 两步流程：识别风险，然后决定缓解措施
- **43:00** - 通过分类或AI标签选择要阻止的特定机器人
- **43:30** - WAF机器人认证：深度集成应用，支持货币化

### 开发者体验简化 (45:00-52:00)
- **45:00** - Nishad回归讲解开发者体验
- **45:30** - 安全配置不应该很难
- **46:00** - 重新设计CloudFront和ALB的安全规则配置体验
- **46:30** - 保护包（Protection Packs）：针对流量配置文件定制的规则集
- **47:00** - 改进的可见性和更直观的配置控制
- **47:30** - 未来将增加智能推荐和自动流量分析
- **48:00** - 初始配置步骤减少80%，成功率显著提升
- **48:30** - 定价复杂性也是开发者复杂性的一部分
- **49:00** - 2008年CloudFront推出按需付费定价，颠覆CDN行业
- **49:30** - 客户担心账单激增（流量突增或DDoS攻击）
- **50:00** - 新推出：固定费率定价计划（两周前发布）
- **50:30** - 包含CloudFront、安全服务、S3、Route 53、CloudWatch、ACM等
- **51:00** - 无超额费用，固定月费，从$0免费计划开始
- **51:30** - 无长期承诺，发布一周内已有数万客户使用

### CloudFront SaaS Manager (52:00-54:00)
- **52:00** - 另一个简化功能：CloudFront SaaS Manager
- **52:30** - 客户托管数百万域名或多租户应用
- **53:00** - VIP编码平台（Cursor、Lovable等）允许构建多租户域名应用
- **53:30** - 过去需要为每个域创建单独的分配并单独应用策略
- **54:00** - SaaS Manager提供统一方式处理多租户应用
- **54:30** - 支持模板策略和特定租户策略覆盖（如高级客户）
- **55:00** - 未来将增加租户特定分析和报告

### Atlassian案例研究 - 背景 (55:00-60:00)
- **55:00** - Ambrose开始分享Atlassian案例
- **55:30** - Atlassian使命：释放每个团队的潜力
- **56:00** - 产品包括：Confluence（信息共享）、Jira（项目跟踪）、Loom（视频消息）、Bitbucket（代码托管）、Rovo（AI套件）
- **56:30** - 服务全球数百万客户，跨多个行业
- **57:00** - 2002年成立，2015年上市
- **57:30** - 2016年开始云迁移之旅，2022年完成
- **58:00** - 当前规模：每天数百亿请求，数万EC2实例，13个区域，每天PB级数据传输

### Atlassian的CloudFront历史 (60:00-65:00)
- **60:00** - Atlassian与CloudFront有长期合作历史
- **60:30** - 已部署数千个CloudFront分配
- **61:00** - 历史架构：动态请求到NLB和入口代理，CloudFront加速静态前端和SPA
- **61:30** - 每个Atlassian产品的每次页面加载都使用CloudFront
- **62:00** - 已使用现成和内部开发的技术缓解恶意请求
- **62:30** - 目标：将CloudFront用途扩展到基础CDN之外
- **63:00** - 尚未将主要产品的首要域名迁移到CloudFront
- **63:30** - 迁移目标：加强全球安全态势、边缘分层防御、统一控制平面、将通用逻辑移至边缘、改善最后一英里性能

### Atlassian的挑战与解决方案 (65:00-72:00)
- **65:00** - 为什么不直接在现有负载均衡器上使用WAF？
- **65:30** - NLB是第3/4层构造，WAF逻辑不适合；ALB仍需入口代理处理大量工作
- **66:00** - 希望将防御推到管理的计算基础设施之外
- **66:30** - 挑战：处理比任何现有分配多几个数量级的流量
- **67:00** - 支持13个区域的客户数据分布
- **67:30** - 托管数百万自定义域名和客户站点
- **68:00** - 符合客户安全要求的架构
- **68:30** - 关键问题：如何在其他CloudFront客户中区分自己
- **69:00** - 客户需求：严格出口控制、分离隧道VPN、安全网关
- **69:30** - 企业应用白名单需要预定义IP列表
- **70:00** - CloudFront传统上使用轮换IP池
- **70:30** - 解决方案：CloudFront Anycast静态IP功能
- **71:00** - 为CloudFront分配专用IP集，实现唯一可识别性
- **71:30** - 这是解锁Jira和Confluence迁移的关键

### Atlassian的安全防护策略 (72:00-80:00)
- **72:00** - 启用Shield Advanced和第7层应用保护
- **72:30** - WAF和CloudFront智能捕获DDoS攻击
- **73:00** - 结合托管规则：Anti-DDoS、常见Web攻击、IP信誉列表、速率限制
- **73:30** - 规则排序建议：标记可信流量 → 严格阻止规则 → 粗粒度速率限制 → IP信誉列表
- **74:00** - Anti-DDoS规则集应放在规则链前部
- **74:30** - 在几秒钟内阻止最初和最大的攻击波
- **75:00** - 与Shield配合阻止剩余恶意请求
- **75:30** - 创建成本效益高的边缘保护漏斗
- **76:00** - 调优过程：迭代且需要时间和耐心
- **76:30** - 建议先在计数模式实施规则，观察和调整后再切换到阻止或挑战模式
- **77:00** - 有趣的调优场景：包含ConfMD或Java异常的Confluence页面
- **77:30** - 客户在页面、搜索或Jira工单中放入源代码或程序输出
- **78:00** - 成果：现在每天阻止数十万机器人和扫描器请求
- **78:30** - 偶尔阻止1000万到1亿级别的DDoS攻击

### Atlassian的数据驻留和VPC源站 (80:00-结束)
- **80:00** - Atlassian提供数据驻留能力
- **80:30** - 演示结束，强调了CloudFront、WAF和Shield在大规模应用中的实际价值

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


会议核心要点总结：
- AWS边缘服务持续演进以应对AI代理时代的挑战
- 性能优化（QUIC、TLS 1.3、TCP Fast Open）默认启用且免费
- 安全功能全面升级（mTLS、后量子密码、AI机器人管理）
- 开发者体验大幅简化（保护包、固定定价、SaaS Manager）
- Atlassian成功案例展示了企业级应用如何利用这些功能实现规模化和安全性提升