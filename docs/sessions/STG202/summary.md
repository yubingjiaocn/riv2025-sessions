# AWS re:Invent 2025 - Amazon EBS 创新功能总结

## 会议概述

本次会议由 Aaron Chen 和 Saj Pascan 两位 Amazon EBS 产品经理主讲,全面介绍了过去 12-18 个月 Amazon EBS（Elastic Block Store）的重要创新。会议以一家快速增长的金融科技公司为例,从三个核心应用场景展开：实时事务处理系统、分析数据仓库和开发测试环境。

Amazon EBS 作为 EC2 实例的网络附加持久化存储,由三大支柱构成：存储卷、快照备份和数据服务。EBS 不仅仅是简单的块存储,背后是一个由 AWS 工程师维护和运营的大规模分布式系统,为各类工作负载提供不同级别的性能、持久性和功能特性。从关键业务的 ERP/CRM 系统,到 EC2 启动卷,再到分析报告环境的索引和缓存层,EBS 服务于广泛的应用场景。

本次发布的创新功能聚焦于三个方面：提升关键任务工作负载的性能和可靠性、优化大规模分析工作负载的吞吐量和容量、简化开发测试环境的数据复制流程。这些创新深深植根于客户需求,旨在帮助客户构建更高性能、更具弹性、更易管理的云基础设施。

## 详细时间线与关键要点

### 开场介绍 (0:00-2:30)
- **0:00** - Aaron Chen 和 Saj Pascan 欢迎参会者,介绍会议主题
- **0:30** - 说明将介绍 Amazon EBS 过去 12-18 个月的创新成果
- **1:00** - Aaron Chen 自我介绍,担任 Amazon EBS 产品经理

### EBS 基础架构介绍 (2:30-5:00)
- **2:30** - 解释 EBS（Elastic Block Store）的基本概念：网络附加的持久化存储
- **3:00** - 强调 EBS 与 EC2 实例的数据生命周期分离特性
- **3:30** - 介绍不同卷类型：IO2（关键任务工作负载）和 GP3（通用工作负载）
- **4:00** - 说明 EBS 快照功能,由 Amazon S3 提供高持久性支持
- **4:30** - 介绍 EBS 三大支柱：存储卷、快照和数据服务

### EBS 分布式系统架构 (5:00-7:00)
- **5:00** - 强调 EBS 不仅是预配置磁盘,背后是庞大的分布式系统
- **5:30** - 说明由 AWS 工程师维护和运营,提供不同性能、持久性和功能
- **6:00** - 介绍 EBS 服务的工作负载范围：从关键业务到启动卷和缓存层
- **6:30** - 指出只要使用过 EC2 实例,就很可能使用过 EBS

### 客户场景：金融科技公司 (7:00-9:00)
- **7:00** - 引入示例客户：快速增长的金融科技公司
- **7:30** - 介绍三大核心业务系统：实时事务处理数据库
- **8:00** - 分析数据仓库用于生成日报和周报,分析业务洞察
- **8:30** - 开发测试环境用于构建和测试新功能

### 实时事务处理系统需求 (9:00-12:00)
- **9:00** - 介绍事务处理系统作为最关键的应用,直接影响客户体验
- **9:30** - 说明通常由关系数据库支持,运行在 EC2 上,使用 EBS 作为存储层
- **10:00** - 强调需要一致的亚毫秒级延迟
- **10:30** - 解释应用会触发多个组合 IO 操作,需要处理数百万事务
- **11:00** - 提出全球基础设施一致性需求,简化运维负担
- **11:30** - 强调高弹性需求,需要可观测性和持续测试

### 性能指标：亚毫秒级延迟 (12:00-15:00)
- **12:00** - 详细解释亚毫秒级延迟的重要性
- **12:30** - 举例说明用户点击、提交表单、购买等操作会触发大量 IO
- **13:00** - 强调用户讨厌等待和加载圈
- **13:30** - 说明每个存储 IO 需要极低延迟,理想情况下为亚毫秒级
- **14:00** - 强调一致性的重要性,避免延迟导致应用不可用和收入损失
- **14:30** - 推荐使用 IO2 卷运行关键工作负载

### IO2 性能提升 (15:00-17:00)
- **15:00** - IO2 卷提供主要云提供商中最低的 P99.9 IO 延迟
- **15:30** - 将延迟指导从亚毫秒级平均延迟收紧到 500 微秒以下
- **16:00** - 增加了 IO2 与通用卷在异常延迟方面的差异说明
- **16:30** - 帮助客户理解差异并做出正确的性价比权衡

### 全球基础设施一致性 (17:00-18:30)
- **17:00** - 介绍全球扩展需求,希望在不同区域使用相同基础设施
- **17:30** - 减少运维负担,将数据更靠近客户以降低延迟
- **18:00** - 将 IO2 Block Express 卷扩展到所有商业和 GovCloud 区域
- **18:30** - 金融科技公司能够在全球各地提供一致的服务体验

### 高弹性：可观测性 (18:30-22:00)
- **18:30** - 强调高弹性从测量开始
- **19:00** - 列举客户常见问题：如何监控性能、是否有足够余量、问题定位
- **19:30** - 介绍 EBS 过去几年在可观测性方面的改进历程
- **20:00** - 2024 年在 CloudWatch 中推出平均延迟指标
- **20:30** - 2025 年推出 IOPS 和吞吐量指标,用于监控和优化性能趋势
- **21:00** - 去年推出卷级别超限检查,今年推出实例级别超限检查
- **21:30** - 超限检查是 0 或 1 的指标,当 IOPS 或吞吐量超过系统配额时变为 1

### 混沌测试与 AWS FIS (22:00-26:00)
- **22:00** - 介绍客户需求：了解系统何时会中断,验证标准操作流程
- **22:30** - 引入混沌测试概念,在受控环境中主动测试和发现漏洞
- **23:00** - 介绍 AWS 故障注入服务（FIS）用于运行故障注入实验
- **23:30** - 说明 EBS 故障通常表现为慢 IO 或卡住的 IO
- **24:00** - 2023 年在 FIS 中推出 EBS 卡住 IO 操作
- **24:30** - 2025 年推出延迟注入功能,模拟性能下降
- **25:00** - 提供四种模板：持续延迟、递增延迟、间歇性延迟、递减延迟
- **25:30** - 支持自定义模板,可指定读写混合和延迟注入

### 数据保护：回收站 (26:00-28:30)
- **26:00** - 介绍防止数据丢失的重要性
- **26:30** - 说明客户可能意外或恶意删除卷,导致财务损失或声誉损害
- **27:00** - 几年前推出 EBS 快照回收站,今年扩展到 EBS 卷
- **27:30** - 可设置保留期,删除的卷进入回收站
- **28:00** - 在保留期内可执行恢复操作,卷立即可用并可附加到 EC2 实例
- **28:30** - 恢复的卷保留所有标签、加密状态和权限

### 分析数据仓库场景 (28:30-32:00)
- **28:30** - Saj Pascan 接手介绍分析数据仓库系统
- **29:00** - 强调分析系统帮助了解业务状况和发展方向
- **29:30** - 作为单一真实来源,协调所有业务利益相关者
- **30:00** - 列举典型分析问题：财务数据的利润率和收入趋势
- **30:30** - 销售数据的各地区产品销售情况
- **31:00** - 营销活动的转化率分析
- **31:30** - 产品开发的客户使用情况和反馈分析
- **32:00** - 库存管理的库存充足性分析

### 分析系统的存储需求 (32:00-36:00)
- **32:00** - 说明各类数据流入分析系统,通常存储在 S3
- **32:30** - 数据来源包括 OLTP 系统、销售数据、财务数据、营销数据、IoT 数据
- **33:00** - 数据格式多样,需要规范化才能运行查询
- **33:30** - EBS 在 ETL 作业中发挥作用,需要快速处理层
- **34:00** - EBS 在运行查询时发挥作用,包括夜间查询和报告作业
- **34:30** - 第一个需求：快速从 S3 提取数据到 EBS
- **35:00** - 第二个需求：存储查询过程中的中间数据,不需要持久化到 S3
- **35:30** - 第三个需求：Spark 框架将作业拆分为小任务并行运行
- **36:00** - 容器化环境中 RAID 不原生支持,管理困难

### GP3 性能和容量提升 (36:00-39:00)
- **36:00** - 提出需求：单个卷需要极高吞吐量和大容量
- **36:30** - 推出更高性能和更大容量的 GP3 卷
- **37:00** - IOPS 提升 5 倍：从 16K 增加到 80K
- **37:30** - 吞吐量翻倍：从 1 GB/s 增加到 2 GB/s
- **38:00** - 容量提升 4 倍：从 16 TB 增加到 64 TB
- **38:30** - 减少了容器化环境中 RAID 卷的需求
- **39:00** - 也有助于 OLTP 环境,简化测试工作流程

### EBS 网络带宽演进 (39:00-42:00)
- **39:00** - 强调 EBS 是网络附加存储,需要足够的网络管道
- **39:30** - 更大的管道降低 EBS 解决方案的总拥有成本
- **40:00** - 回顾演进历程：最初与 EC2 网络共享 100 IOPS
- **40:30** - Nitro 实例提供专用 EBS 管道,性能大幅提升
- **41:00** - 2019-2020 年推出 R5B 和 R5N,性能提升 3 倍
- **41:30** - 随后推出 R6in
- **42:00** - 2025 年推出 R8GB：150 Gbps 带宽,18.75 GB/s 吞吐量,720K IOPS

### 开发测试环境需求 (42:00-45:00)
- **42:00** - 介绍开发环境需求：生产环境不受影响
- **42:30** - 传输到测试环境的数据不应包含敏感信息
- **43:00** - 测试环境数据需要模拟生产环境
- **43:30** - 基础设施管理者需要确保测试环境尽可能接近生产环境
- **44:00** - 分布式开发团队需要基于相同代码库工作
- **44:30** - 金融科技公司需要快速创建环境副本以调试问题
- **45:00** - 需要根本原因分析、修复问题并部署修复

### 复制工作流程需求 (45:00-48:00)
- **45:00** - 详细介绍复制工作流程：生产环境到测试环境
- **45:30** - 生产环境要求：创建副本时无影响,不复制敏感数据
- **46:00** - 测试环境要求：更频繁地创建数据副本,保持与生产环境接近
- **46:30** - 需要混合匹配卷类型的能力：源可以是 IO2,目标可以是 GP3
- **47:00** - 第二个工作流程：全球开发者基于相同代码库工作
- **47:30** - 创建黄金 AMI（Amazon Machine Image）
- **48:00** - AMI 底层创建快照,跨区域复制 AMI 会触发快照复制

### AMI 和快照工作流程 (48:00-50:00)
- **48:00** - 从 AMI 启动实例会触发从快照创建卷
- **48:30** - 多个移动部分,客户每天或每周触发此工作流程
- **49:00** - 两个工作流程都需要可预测性和速度
- **49:30** - 如果不可预测且不快速,管理起来非常繁琐
- **50:00** - 这是客户一致反馈的需求

### EBS 卷克隆功能 (50:00-54:00)
- **50:00** - 推出 EBS 卷克隆功能
- **50:30** - 以前客户使用快照作为中间层创建卷克隆
- **51:00** - 旧流程：从 IO2BX 卷创建快照,将数据推送到 S3
- **51:30** - 然后从快照创建卷,从 S3 拉取数据到 EBS 卷
- **52:00** - 耗时且繁琐,数据完全初始化后才能附加到实例
- **52:30** - 新方法：取消快照环节,直接从源卷复制数据到目标卷
- **53:00** - 单个 API 调用即可立即创建高性能卷
- **53:30** - 可以从 IO2BX 卷创建 GP3 卷用于测试环境
- **54:00** - 确保生产卷不受性能影响

### 卷克隆的优势 (54:00-57:00)
- **54:00** - 旧工作流程需要知道快照何时完成,卷何时完全初始化
- **54:30** - 新方法提高了开发者效率
- **55:00** - 可以更频繁地创建副本,保持测试环境接近生产环境
- **55:30** - 提高代码质量
- **56:00** - 新兴用例：蓝绿部署
- **56:30** - 蓝环境是现有代码库,绿环境是新代码库
- **57:00** - 逐步迁移流量,出问题可快速回滚

### 蓝绿部署优势 (57:00-59:00)
- **57:00** - 以前使用快照耗时更长,需要同时管理两个环境更长时间
- **57:30** - 现在可以快速创建新环境
- **58:00** - 仍需管理切换,但比以前简单得多
- **58:30** - 最小化开发环境管理,提高开发者敏捷性
- **59:00** - 这是推出此功能的主要动机之一

### 黄金镜像跨区域复制 (59:00-62:00)
- **59:00** - 介绍黄金镜像工作流程：跨区域复制给全球开发者
- **59:30** - 多个步骤：创建 AMI,跨区域复制 AMI,从中创建卷
- **60:00** - 开发者早上上线时不希望系统性能不完整
- **60:30** - 这是持续收到的反馈
- **61:00** - 复制 AMI 工作流程设计上是尽力而为
- **61:30** - 根据区域繁忙程度,速度会有所不同
- **62:00** - 不同区域的开发者获得数据的速度不同

### 基于时间的 AMI 复制 (62:00-65:00)
- **62:00** - 去年 2 月推出基于时间的 AMI 复制
- **62:30** - 可以指定最短 15 分钟的时间,确保所有区域在此时间内完成 AMI 复制
- **63:00** - 使流程更简单和可预测
- **63:30** - 工作流程的另一部分：从 AMI 启动实例
- **64:00** - 触发从快照拉取数据到 EBS 卷
- **64:30** - 此工作流程也不可预测,取决于 S3 和 EBS 的负载
- **65:00** - 推出卷初始化的预配速率功能

### 卷初始化预配速率 (65:00-68:00)
- **65:00** - 可以达到 300 MB/s,确保数据以该速度从 S3 拉取
- **65:30** - 可预测地知道卷何时完全就绪
- **66:00** - 可以将其提供给开发者,确保卷完全高性能
- **66:30** - 同时推出了知道快照所有数据完全拉取到 EBS 卷的能力
- **67:00** - 知道卷已准备好接收生产流量
- **67:30** - 适用于所有卷类型,不仅限于此功能
- **68:00** - 卷初始化是基本工作流程之一

### 卷初始化的应用场景 (68:00-71:00)
- **68:00** - AMI 启动会触发卷初始化工作流程
- **68:30** - 看到客户从单个 AMI 启动数百个实例使用此功能
- **69:00** - 提供可预测性,确保所有实例准备好接收生产流量
- **69:30** - 客户跨可用区复制环境时使用,因为复制卷是源卷的惰性副本
- **70:00** - 从灾难恢复时,从快照恢复到卷
- **70:30** - 有严格的 RTO（恢复时间目标）
- **71:00** - 确保能够满足恢复点目标,这是核心原语,将继续投资使其更快

### 总结回顾 (71:00-74:00)
- **71:00** - 总结所有讨论的功能
- **71:30** - 实时事务系统：IO2 BX 卷延迟从亚毫秒级降至 500 微秒以下
- **72:00** - IO2 在全球范围内可用,确保全球基础设施一致性
- **72:30** - 推出性能指标和超限检查：去年推出卷超限检查,今年推出实例超限检查
- **73:00** - 去年推出平均延迟指标,今年推出平均 IOPS 和吞吐量指标
- **73:30** - 弹性方面：FIS 延迟注入,2023 年推出暂停 IO,模拟超时

### 最终总结 (74:00-75:00)
- **74:00** - 今年推出向数据路径注入延迟的能力
- **74:30** - 提供四种模板,也可创建自定义模板
- **75:00** - 回收站保护：从快照扩展到卷
- **75:30** - 会议结束