# AWS re:Invent 2025 会议总结：Sophos 利用 AWS Local Zones 实现边缘安全防护

## 会议概览

本次闪电演讲由 AWS 混合云专家 Ben Lavasani 以及 Sophos 的首席开发官 John Peterson 和威胁情报负责人 Simon Reed 共同呈现。会议聚焦于网络安全领域的一个关键挑战：根据美国国土安全部最新网络安全报告，超过三分之二的网络安全事件源于网络边缘——即用户、设备和数据与云端交汇的前线位置。Sophos 通过部署基于 AWS Local Zones 的边缘防御系统，成功应对了这一挑战，在攻击面最前沿提供低延迟保护。

Sophos 作为网络安全领域的先驱企业之一，自 1980 年代中期开始从事防病毒业务，目前已发展成为全球最大的网络安全供应商之一，服务超过 60 万客户和 2.5 万个渠道合作伙伴。其威胁情报平台每天处理 223TB 原始数据，提取 3400 万个独特检测，阻止 1100 万个威胁，并成功阻止超过 200 个真实威胁行为者。为了将这些关键的威胁情报实时传递给全球客户，Sophos 面临着严峻的延迟挑战。

通过采用 AWS Local Zones，Sophos 将其 SXL（Sophos 可扩展列表）威胁情报服务从原有的 5 个 AWS 区域扩展到多个本地区域，显著降低了全球客户的访问延迟。这一架构转变不仅改善了产品性能，更重要的是确保了威胁情报能够及时到达客户端，避免因超时导致的安全防护降级。该解决方案在飓风 Milton 袭击佛罗里达期间经受了实战考验，成功应对了灾后系统大规模重启带来的流量激增。

## 详细时间线与关键要点

00:00:00 - 会议开场与背景介绍
- 演讲者介绍：Ben Lavasani（AWS 混合云专家）、John Peterson（Sophos 首席开发官）、Simon Reed（Sophos 威胁情报负责人）
- 核心问题：超过 2/3 的网络安全事件源于网络边缘，每一毫秒的延迟都至关重要

00:01:30 - AWS Local Zones 技术概述
- Local Zones 是 AWS 混合边缘产品组合的一部分，构建了从区域到边缘的服务连续体
- 部署在全球各大都市区域，由 AWS 管理和部署
- 旨在满足低延迟工作负载和本地处理需求
- 支持按需弹性计算，扩展父区域功能（例如拉斯维加斯 Local Zone 连接俄勒冈区域）
- 使用相同的 API、服务和自动化工具，确保一致性

00:02:45 - Local Zones 全球部署情况
- 美国拥有最多部署（紫色标记为已正式可用，白色为规划中）
- 正在向欧洲、中东、非洲、澳大利亚、新西兰、亚太地区和南美洲扩展
- 展示了 Local Zones 与区域之间的距离优势，在延迟和数据驻留方面具有显著价值

00:04:00 - Sophos 公司介绍
- 1980 年代中期成立，网络安全领域的先驱之一
- 服务超过 60 万客户和 2.5 万个渠道合作伙伴
- 核心使命：为各种规模的企业提供卓越的网络安全成果

00:05:15 - Sophos 威胁情报处理规模
- 每天处理 223TB 原始数据
- 每天提取 3400 万个独特检测
- 每天阻止 1100 万个威胁
- 每天为 MDR 团队生成 1100 个案例进行分析
- 每天成功阻止超过 200 个真实威胁行为者

00:06:30 - SXL 服务介绍（Sophos 可扩展列表）
- 首次开发于 2007 年，目前为第四代技术
- 是连接所有产品和服务与威胁情报云的关键基础设施
- 原部署在 5 个 AWS 区域，服务全球客户
- 所有 Sophos 产品永久连接到威胁情报平台

00:08:00 - 延迟挑战的关键性
- Sophos 产品处于在线防护状态，会在客户环境中暂停功能执行
- 产品具有本地决策能力（速度快），但有时需要回调威胁情报服务
- 这种回调会在系统中引入延迟
- 与其他服务不同，这种延迟对安全防护至关重要

00:09:30 - 原有架构的延迟问题
- 全球客户的延迟呈钟形曲线分布
- 中低延迟情况下表现良好，不影响客户流量（端点、邮件、防火墙、云基础设施）
- 高延迟区域会降低客户性能
- 极高延迟情况下会导致超时，威胁情报无法到达产品，造成安全防护降级

00:11:00 - Local Zones 部署策略
- 目标：将延迟钟形曲线显著向低延迟区域移动
- 从 5 个 AWS 区域扩展到多个 Local Zones
- 每个地理区域的延迟变化显著，即使在美国境内也存在明显差异

00:12:30 - 南美洲案例研究
- 展示了部署前后的延迟热图对比
- 红色：严重降级的延迟；黄色：临界状态；绿色：在容忍范围内
- 部署 Local Zones 后，将 SXL 服务更靠近客户，延迟分布显著改善

00:14:00 - 当前部署状态
- 主要聚焦于拉丁美洲和北美地区
- 处于部署周期的中期阶段
- 展示了区域（大圆圈）和 Local Zones（小圆圈）的分布图

00:15:00 - 动态部署策略
- 不进行手动评估选择 Local Zone
- 默认部署到 Local Zone
- 动态测量该区域客户的延迟变化
- 基于实际测量结果决定是否保留该 Local Zone 部署
- 原因：由于互联网复杂性和客户部署多样性，前期分析预测准确性较低
- 采用"部署-试验-测量-理解"的方法

00:17:00 - 架构设计
- 产品和服务连接到 AWS Local Zone
- 基于 EC2 和 Route 53 核心技术
- Local Zone 回连到包含复杂架构的现有区域
- 关键创新：将复杂的缓存层从区域迁移到 Local Zone
- 将复杂缓存更靠近客户，实现了所有性能提升

00:18:30 - 飓风 Milton 实战测试
- 首个 Local Zone 部署在佛罗里达（手动部署以试验技术）
- 部署后系统运行正常，所有指标正常
- 飓风 Milton 突然袭击佛罗里达，造成大规模停电，部分地区数天无电
- 恢复期间计算机系统大规模重启

00:20:00 - 流量激增应对
- 正常日流量与飓风后流量对比（单位：千次请求）
- 计算机系统大规模开机导致本地缓存全部失效
- 产品在重启后会重新扫描系统
- Local Zone 流量出现戏剧性激增
- 系统成功应对：全部自动扩展，威胁防护服务持续可用
- 团队对这次压力测试结果非常自豪

00:22:00 - 关键经验总结

1. 找到正确的解决方案：团队一直知道存在降低延迟的机会，曾考虑部署更多区域但认为不是根本性改变；看到 Local Zones 公告后 60 秒内就意识到这是改变游戏规则的机会

2. 强大的架构至关重要：得益于威胁情报云的良好架构，迁移相对容易；不仅是架构本身，还需要深入理解数据流、指标以及前端缓存层与后端威胁情报服务之间的交互动态

3. 与 AWS 团队紧密合作：看到公告后立即通过客户代表联系 Local Zones 团队；积极推动愿景，当时 Local Zones 仅在美国可用，Sophos 提出要覆盖全球所有都市区域的需求；建议：对 AWS 服务团队要大胆提出需求

4. 拥抱不确定性：服务复杂且精密，很难高精度预测实际情况；建议尽早部署、持续测量，利用飓风等突发情况作为压力测试机会

00:24:30 - 会议结束
- 演讲者在会场后方接受进一步交流
- 欢迎讨论 Sophos 业务、低延迟环境以及威胁情报分布等话题