# AWS re:Invent 2025 - CNS 372: 大规模应用的无服务器模式与AWS Lambda

## 会议概述

本次技术分享会由AWS高级解决方案架构师Lefteris Carraer Yu和Michelle Chisman主讲，主题为"大规模应用的无服务器模式与AWS Lambda"。会议针对企业在无服务器架构迁移过程中遇到的常见挑战，提供了实用的解决方案和最佳实践。

演讲者以电商应用为例，展示了从单一功能Lambda函数架构演进到可扩展、可维护的企业级无服务器平台的完整过程。会议重点解决了三个核心痛点：如何合理组织和结构化大量Lambda函数、如何在函数间重用代码、以及如何在不同环境中保持一致的部署。通过微服务原则、Lambda Web适配器、直接集成等技术模式，为开发者提供了立即可应用的实践指导。

## 详细时间线与关键要点

### 0:00-5:00 - 问题背景与架构挑战
- 介绍典型场景：从几个Lambda函数发展到数百个函数的管理困境
- 展示电商应用架构示例：产品管理、购物车操作、订单处理等功能
- 每个Lambda函数对应单一功能，通过API Gateway集成，连接不同的DynamoDB表
- 提出三大核心痛点：函数组织结构、代码重用、一致性部署

### 5:00-15:00 - 代码演示与冷启动分析
- 使用Amazon Q Developer (Quiro)进行代码演示
- 展示基础Lambda函数结构：输入验证、DynamoDB操作、响应处理
- SAM (Serverless Application Model)模板介绍和基础配置
- 冷启动现象分析：首次调用1.2秒，后续调用0.2秒
- 基础设施可视化工具Infrastructure Composer的使用

### 15:00-25:00 - 微服务原则应用
- 应用有界上下文(Bounded Context)概念重组Lambda函数
- 将相关功能（如购物车操作）归类到独立的服务文件夹
- 创建独立的SAM模板，实现服务级别的独立部署
- 多仓库架构的优势：独立开发、部署和扩展，团队所有权明确

### 25:00-35:00 - Lambda Web适配器模式
- 介绍Lambda Web适配器概念：在单个Lambda函数中运行传统Web框架
- 使用FastAPI和Mangum库的Python实现示例
- 将多个HTTP端点合并到单个Lambda函数中
- 性能对比：虽然初始冷启动时间增加（2.8秒），但后续请求无冷启动（0.2秒）
- 适用场景：共同依赖、相似初始化需求、相同权限配置

### 35:00-40:00 - API Gateway直接集成
- 消除简单数据传输场景中的Lambda函数
- 演示API Gateway直接调用DynamoDB的配置
- 使用VTL (Velocity Template Language)构建响应
- 性能优势：无冷启动、更低延迟（0.2秒）、降低成本、更好的可扩展性
- 适用场景：简单CRUD操作、无业务逻辑需求、追求最低延迟和成本

### 40:00-50:00 - 代码重用策略
- Lambda Layers介绍：共享库机制，支持自定义运行时和依赖项
- PowerTools for Lambda层的实际应用演示
- Lambda Layers限制：每个函数最多5层、部署包大小限制（压缩50MB，解压250MB）
- 版本管理策略和潜在陷阱
- Step Functions与SDK集成：使用可视化工作流替代Lambda函数
- Workflow Studio的使用，减少代码维护量

### 50:00-56:00 - 多账户部署与动态配置
- 多账户策略讨论：单账户vs多账户部署的权衡
- SAM模板动态化：参数、映射、条件的使用
- 环境特定配置：内存大小、资源部署条件
- 全局变量设置，统一应用到所有Lambda函数
- GitHub Actions工作流演示
- OIDC提供商配置和人工审核网关
- 总结三大解决方案：函数组织、代码重用、一致性部署