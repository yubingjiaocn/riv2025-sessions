# AWS re:Invent 2025 技术会议总结

## 会议概述

本次AWS re:Invent 2025分组会议主要探讨了如何在AWS云平台上构建可扩展的应用架构。会议由AWS解决方案架构师Christine主持，并邀请了Skyscanner的技术专家Paul分享实际案例。会议重点介绍了从初创应用到支持2亿用户规模的架构演进过程，涵盖了计算、存储、网络等各个层面的最佳实践。

会议强调了"构建-测量-学习"的迭代开发理念，指出没有架构在第一天就能完美支持高可扩展性，需要通过持续的监控、测量和优化来逐步改进。Skyscanner作为全球旅行搜索平台的成功案例，展示了如何从单体应用演进为云原生的微服务架构，最终支持每秒5000次搜索请求和每天1000亿次价格查询的超大规模业务。

## 详细时间线与关键要点

### 开场介绍 (00:00-02:30)
- **主持人开场**：Christine介绍会议主题，询问参会者背景
- **核心理念**：强调"构建-测量-学习"的循环开发模式
- **关键观点**：第一天的架构不会是最终生产架构

### 初始架构设计 (02:30-08:00)
- **三层架构**：前端、后端、数据存储层的基础架构
- **计算服务选择**：
  - EC2：虚拟服务器，最大控制权
  - ECS/EKS：容器生态系统
  - Fargate：无服务器容器
  - Lambda：无服务器计算
- **推荐起点**：建议从中间层开始，如EKS

### EKS详细介绍 (08:00-12:00)
- **EKS Auto Mode**：全自动化Kubernetes集群管理
- **核心优势**：自动优化基础设施，基于工作负载需求自动扩展
- **高可用性**：多可用区部署确保服务连续性

### API网关选择 (12:00-15:00)
- **API Gateway**：专为REST API设计
- **Application Load Balancer**：七层代理，适合路由映射
- **AppSync**：GraphQL API托管服务
- **选择指南**：
  - 复杂API多数据源：AppSync
  - WebSocket、限流、百万级请求：API Gateway
  - 单一API、十亿级请求：ALB

### 数据库策略 (15:00-22:00)
- **推荐SQL数据库**：技术成熟、社区支持完善
- **Amazon Aurora**：关系型数据库服务，跨三个可用区存储
- **Aurora DSQL**：分布式SQL数据库，PostgreSQL兼容
- **架构特点**：计算层、事务日志、存储层完全分离，独立扩展

### 监控与观测 (22:00-25:00)
- **CloudWatch**：AWS原生观测服务
- **实时用户监控**：收集客户端Web应用数据
- **AI驱动调查**：CloudWatch Investigations利用生成式AI快速定位问题根因

### 前端优化 (25:00-27:00)
- **CloudFront CDN**：基于700+全球节点的内容分发网络
- **缓存策略**：将内容缓存到离用户更近的位置，降低延迟

### 数据层扩展 (27:00-32:00)
- **多区域部署**：DSQL创建跨区域集群，强一致性读写
- **见证区域**：第三区域提供加密事务日志，确保持久性和可用性
- **ElastiCache**：全托管缓存服务，支持Redis和Valkey

### Kubernetes自动扩展 (32:00-38:00)
- **Pod扩展**：水平扩展（增加数量）vs 垂直扩展（增加资源）
- **节点扩展**：当Pod无可用容量时触发
- **Karpenter优势**：
  - 直接管理EC2实例，无需节点组
  - 智能选择实例类型
  - 整合Pod以降低成本

### Skyscanner案例分享 (38:00-75:00)
- **公司规模**：全球旅行市场，1.6亿月活用户，1200+合作伙伴
- **技术挑战**：
  - 每秒5000次搜索请求
  - 每天1000亿价格数据
  - 每月11亿次搜索
  - 多PB级数据摄入

#### 架构演进历程：
- **V1 (2014-2016)**：混合云，EC2+ASG，约100个服务
- **V2 (2018)**：容器化，ECS集群，300个服务
- **V3 (2019)**：Kubernetes时代，500个服务，引入Spot实例
- **V4 (当前)**：蜂窝架构，多区域账户，多EKS单元

#### 蜂窝架构优势：
- **故障隔离**：单个集群故障只影响1/n的总容量
- **分阶段升级**：可以错开集群升级时间
- **N+2部署策略**：服务至少部署在3个集群中

### 成本优化策略 (65:00-70:00)
- **95% Spot实例**：正常状态下使用Spot计算资源
- **5% On-Demand**：关键功能如流量入口使用按需实例
- **实例多样化**：250+不同实例类型，跨4个区域12个可用区
- **成本指标**：CPS（每万次会话成本）作为主要基础设施指标

### 数据处理架构 (70:00-75:00)
- **数据规模**：每天550亿事件，25PB数据管理
- **流处理**：Kinesis流处理，不同SLA和质量配置
- **存储优化**：S3智能分层控制存储成本
- **实时处理**：Spark结构化流处理作业

### 文化与组织扩展 (75:00-80:00)
- **平台工程**：40名工程师运营生产平台
- **时间分配**：50%运营，40%改进，10%学习发展
- **开放标准**：偏好Kubernetes、OpenTelemetry等开放规范
- **成本责任**：每个团队拥有自己的支出，成本分散而非集中管理

### 核心经验总结 (80:00-85:00)
- **保持务实**：可以用不完美的架构服务大量流量
- **管理爆炸半径**：明确决定故障传播范围
- **业务语言**：精通成本和价值，让成本成为每个人的责任
- **持续改进**：在不停止服务的情况下持续优化架构