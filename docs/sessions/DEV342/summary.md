# AWS re:Invent 2025 技术分享会总结

## 会议概述

本次技术分享会重点探讨了 RAG（检索增强生成）和 MCP（模型上下文协议）这两种 AI 架构模式的选择与应用。演讲者从业务和架构的角度分析了这两种技术的特点、适用场景以及成本考量。会议开始时的现场调查显示，使用 RAG 和 MCP 的听众比例约为五五开，但 MCP 目前正变得越来越流行。演讲者强调，在设计架构时做出正确的技术选择至关重要，因为这涉及到复杂性、成本和安全性等多个风险因素。

会议系统地介绍了 RAG 和 MCP 的基本定义、AWS 上可用的工具栈、参考架构示例，以及两种技术的详细对比。RAG 主要用于增强大语言模型处理企业数据的能力，适合知识库检索、文档搜索和问答系统等只读场景。而 MCP 作为标准化的通信协议，更适合需要执行操作、系统集成和自动化工作流的场景。演讲者特别强调了成本优化策略，并提供了一个实用的决策框架，帮助开发者和架构师根据具体需求选择合适的技术方案，包括单独使用 RAG、单独使用 MCP，或采用混合架构。

最后，演讲者总结了关键要点：RAG 适合知识库场景，MCP 能让 AI 代理更强大但更复杂，而混合架构可以在功能和复杂性之间取得平衡。AWS 提供了丰富的工具和服务来支持这两种架构模式的构建和部署。

## 详细时间线

开场与背景介绍
- 演讲者欢迎听众，介绍会议主题：RAG 和 MCP 的业务与架构视角
- 现场调查：使用 RAG 和 MCP 的听众比例约为 50/50，MCP 目前更受欢迎
- 强调理解如何为架构或客户做出最佳选择的重要性

核心议题说明
- 会议将涵盖：为什么这个话题重要、RAG 和 MCP 的定义、技术选择、AWS 工具、架构设计、对比分析
- 最重要的目标：提供一个决策框架

为什么重要
- 数据是所有 AI 和生成式 AI 的基础
- AI 技术正在快速发展
- RAG 和 MCP 的使用越来越普遍
- 需要准确理解应该使用什么技术
- 这是为客户或公司设计架构时的关键选择
- 涉及复杂性、成本和安全性等风险

技术选择：RAG 定义
- RAG（检索增强生成）用于增强大语言模型处理企业数据的能力
- 适用于知识库、特定文档和数据库
- 可以减少幻觉现象
- 保持答案与特定场景一致
- 更适合搜索、问答和知识库应用

技术选择：MCP 定义
- MCP（模型上下文协议）用于标准化代理之间的通信
- 类似于 HTTPS 等通信协议，创建了一个标准模式
- 更多用于 LLM 作为工具执行操作
- 也可以读取数据，但通常用于其他工具
- 更适合自动化、系统集成和工具连接

AWS 工具栈介绍
- 展示了 AWS 上可用的工具栈示例（非完整架构）
- 有多种工具可用于设计 RAG 架构
- 有多种工具可用于设计 MCP 服务器
- 可以根据具体场景和要解决的问题选择不同工具
- 不需要使用所有工具

RAG 架构示例
- 展示基础 RAG 架构：用户访问 RAG 应用，与 LLM 交互，连接向量数据库和文档/数据/媒体
- 这是 RAG 在知识库中的典型工作方式
- 展示更复杂的 RAG 架构：可以使用 OpenSearch、LangChain、Bedrock 等服务
- 架构设计取决于具体问题和系统需求
- 所有架构都可在 AWS 参考架构或文档中找到

MCP 架构示例
- 展示 MCP 参考架构：可以使用 API Gateway、Lambda、身份验证等 AWS 服务
- 这是支持 MCP 服务器的基础架构，稍微复杂一些
- MCP 可以执行操作并完成更多任务
- 展示使用 Agent Core 的更复杂架构：Agent Core 运行时运行 MCP 服务，连接其他 AWS 服务或外部服务
- 包含内存和其他 Bedrock 服务

RAG vs MCP 对比分析
- RAG：主要用于数据检索，只读，内容相对静态（如公司政策文档），风险容忍度较低，实现时间较快，复杂性不高
- MCP：用于 AI 代理与其他工具交互，可能需要连接 Salesforce 等服务执行操作，适合自动化、工作流或系统编排

常见用例
- RAG 用例：文档搜索、政策问答、知识库聊天 - 每个用例有不同的架构和服务选择
- MCP 用例：自动化、监控、系统集成、API 编排、工作流触发、DevOps 自动化
- MCP 为应用或 LLM 提供更多工具和能力来与其他系统通信

成本对比
- 展示成本对比示例（基于每天 10,000 次查询或工作流）
- RAG：考虑向量嵌入、LLM 推理成本
- MCP：考虑更多工具或函数执行成本
- 价格差异明显，因此需要根据成本考虑选择合适的架构
- 甚至可以考虑混合架构

决策框架
- 单独使用 RAG：从文档、知识库、数据库提供信息，适合只读信息检索
- 单独使用 MCP：简单和独立的操作，不需要复杂的业务上下文
- 混合架构：可以同时使用两者，RAG 提供业务上下文，MCP 作为工具访问一切，最适合需要执行操作或与其他系统通信的智能工作负载

成本优化策略
- 使用提示词缓存，避免每次都发送提示词和花费 token 成本
- 减少 MCP 使用的工具数量，因为大量 MCP 服务器和工具会成倍增加成本
- 使用批处理操作，同时处理多个任务以降低成本
- 实现智能路由，在使用 LLM 之前决定使用 MCP 还是 RAG，从而降低成本

简化决策流程
- 需要知识上下文？使用 RAG
- 需要编排或操作？使用 MCP
- 两者都需要？使用混合架构
- 始终考虑成本、延迟和治理

混合架构成本对比
- 展示三种架构的成本对比（基于每天 10,000 次工作流）
- 单独使用 MCP 成本最高
- 实施成本优化策略后，混合架构可以获得良好的成本效益
- 具体取决于问题和系统设计

关键要点总结
- RAG 非常适合知识库应用
- MCP 目前非常流行，因为它让 LLM 或代理能够访问一切，功能强大
- 但需要关注成本和安全性，MCP 稍微复杂一些，需要仔细考虑
- 如果需要在功能和复杂性之间取得平衡，可以同时使用两者
- AWS 提供了大量工具，可以像构建块一样组合使用，将两种架构结合在一起

结束语
- 演讲者分享社交媒体联系方式（LinkedIn、YouTube）
- 经常发布关于 AI 和 LLM 的内容
- 邀请听众保持联系