1
00:00:00,330 --> 00:00:01,320
- [Erik] Hi, everyone.

2
00:00:01,320 --> 00:00:03,393
Thanks for making it out this morning.

3
00:00:04,450 --> 00:00:06,210
Hope you all had a good breakfast.

4
00:00:06,210 --> 00:00:08,340
So we're going to be talking today

5
00:00:08,340 --> 00:00:13,340
about Building AI Agents with
Kiro, MCP, and AgentCore.

6
00:00:14,610 --> 00:00:18,747
So I just wanna see a show of
hands. Who has used AgentCore?

7
00:00:21,300 --> 00:00:26,103
Okay, a few of you. Who has used Kiro?

8
00:00:27,270 --> 00:00:29,040
Okay, a lot more.

9
00:00:29,040 --> 00:00:32,640
And who has used like MCP servers?

10
00:00:32,640 --> 00:00:35,460
Okay, that's probably the
most out of everyone here.

11
00:00:35,460 --> 00:00:37,830
So this is a 300-level talk.

12
00:00:37,830 --> 00:00:40,740
We have our laptop set up over here,

13
00:00:40,740 --> 00:00:44,070
so we're gonna deep dive
into some code later.

14
00:00:44,070 --> 00:00:46,410
But first, we're gonna
give a presentation.

15
00:00:46,410 --> 00:00:48,420
And then I'm gonna leave
plenty of time at the end

16
00:00:48,420 --> 00:00:51,930
for any of you to ask questions.

17
00:00:51,930 --> 00:00:55,800
I have a microphone here
and we'll go around,

18
00:00:55,800 --> 00:00:58,503
we'll run around and get
your questions answered.

19
00:01:00,360 --> 00:01:02,250
I'm gonna start a few minutes early too,

20
00:01:02,250 --> 00:01:04,230
just because this is a full house

21
00:01:04,230 --> 00:01:06,003
and we have so much to get to.

22
00:01:08,400 --> 00:01:10,410
You can see here is our agenda.

23
00:01:10,410 --> 00:01:11,730
Kinda went over it a little bit already,

24
00:01:11,730 --> 00:01:14,850
but we're gonna start
with what are AI agents.

25
00:01:14,850 --> 00:01:16,620
Just a little refresher for some of you

26
00:01:16,620 --> 00:01:19,200
who haven't seen this before.

27
00:01:19,200 --> 00:01:21,600
Then we're gonna deep dive into AgentCore,

28
00:01:21,600 --> 00:01:22,800
which I'm really excited about.

29
00:01:22,800 --> 00:01:25,230
Didn't we see Matt Garman's talk

30
00:01:25,230 --> 00:01:27,450
and mentioned some of the
new even more features

31
00:01:27,450 --> 00:01:28,283
for AgentCore,

32
00:01:28,283 --> 00:01:31,410
which I think is awesome that
we are continuously adding,

33
00:01:31,410 --> 00:01:32,790
getting feedback from the community

34
00:01:32,790 --> 00:01:35,280
and adding more things to AgentCore.

35
00:01:35,280 --> 00:01:37,320
So we're gonna go talk about that,

36
00:01:37,320 --> 00:01:39,660
and all the different pieces of it.

37
00:01:39,660 --> 00:01:43,920
We're gonna look at
Kiro and how that works,

38
00:01:43,920 --> 00:01:45,387
especially with AgentCore.

39
00:01:46,590 --> 00:01:49,150
We're going to touch on MCP

40
00:01:50,280 --> 00:01:52,530
and then we're gonna spend the rest

41
00:01:52,530 --> 00:01:54,480
of the time looking at a demo.

42
00:01:54,480 --> 00:01:56,460
And I'm gonna show you an example

43
00:01:56,460 --> 00:02:00,120
of an architecture you
can use to build agents

44
00:02:00,120 --> 00:02:02,733
and then how you can
use that with AgentCore.

45
00:02:05,190 --> 00:02:07,770
Before I get too far though,
I just wanna introduce myself.

46
00:02:07,770 --> 00:02:11,377
I'm Erik Hanchett, I'm a senior
developer advocate with AWS.

47
00:02:12,631 --> 00:02:13,530
And Du'An.

48
00:02:13,530 --> 00:02:15,030
- [Du'An] Yes. My name is Du'An Lightfoot.

49
00:02:15,030 --> 00:02:18,963
I'm a developer advocate at
AWS focused on agentic AI.

50
00:02:22,230 --> 00:02:26,850
- [Erik] Now, this talk
today is really meant

51
00:02:26,850 --> 00:02:29,730
to show you how to create agents

52
00:02:29,730 --> 00:02:32,850
with all these different tools on AWS.

53
00:02:32,850 --> 00:02:35,970
So my goal is by the end of today,

54
00:02:35,970 --> 00:02:39,720
that all of you can go back
and try these tools out,

55
00:02:39,720 --> 00:02:42,000
and start building agents today.

56
00:02:42,000 --> 00:02:45,090
So we're gonna go through some definitions

57
00:02:45,090 --> 00:02:47,460
and how these tools all work together,

58
00:02:47,460 --> 00:02:50,550
and they do really work together very well

59
00:02:50,550 --> 00:02:51,810
to make it much simpler,

60
00:02:51,810 --> 00:02:54,183
much more straightforward to build agents.

61
00:02:56,100 --> 00:02:57,840
So let's start with some definitions.

62
00:02:57,840 --> 00:02:59,370
I'm gonna hand it off to Du'An

63
00:02:59,370 --> 00:03:02,643
who's going to deep dive into agents.

64
00:03:03,990 --> 00:03:05,850
- [Du'An] Awesome. Thank you, Erik.

65
00:03:05,850 --> 00:03:06,683
Hello, everyone.

66
00:03:07,710 --> 00:03:10,470
So we're gonna talk
about what are AI agents?

67
00:03:10,470 --> 00:03:12,570
How many of you are building agents today?

68
00:03:13,740 --> 00:03:15,150
Oh, a couple people. All right.

69
00:03:15,150 --> 00:03:17,700
That goes in line with the AgentCore talk.

70
00:03:17,700 --> 00:03:20,610
So by the end of this, hopefully
you all are up to speed

71
00:03:20,610 --> 00:03:23,040
to understand what agents
are, how to build an agent,

72
00:03:23,040 --> 00:03:24,240
how to deploy it on AWS.

73
00:03:25,200 --> 00:03:27,690
So there are many definitions

74
00:03:27,690 --> 00:03:28,950
when it comes to what are agents,

75
00:03:28,950 --> 00:03:30,690
but we're gonna start with level setting

76
00:03:30,690 --> 00:03:32,643
from an AWS perspective.

77
00:03:33,540 --> 00:03:38,280
Agents are an autonomous system
that leverages AI to reason,

78
00:03:38,280 --> 00:03:42,960
plan, and take actions to achieve
goals on behalf of humans.

79
00:03:42,960 --> 00:03:44,250
Now, when we think about that,

80
00:03:44,250 --> 00:03:46,650
there are some key
things I wanna point out.

81
00:03:46,650 --> 00:03:51,090
Reason, take actions, plan,
models are getting better.

82
00:03:51,090 --> 00:03:52,260
So when you think about agent,

83
00:03:52,260 --> 00:03:55,140
they are leveraging the reasoning
capabilities of a model.

84
00:03:55,140 --> 00:03:58,680
The second thing is software systems.

85
00:03:58,680 --> 00:04:01,830
Many of you may be developers,
architects, engineers,

86
00:04:01,830 --> 00:04:04,487
and so when we start
talking building agents,

87
00:04:04,487 --> 00:04:07,860
agents still need compute,
agents still need storage,

88
00:04:07,860 --> 00:04:09,600
agents still need databases.

89
00:04:09,600 --> 00:04:12,840
So all of the knowledge that
you have is still valuable

90
00:04:12,840 --> 00:04:14,403
up until this point and beyond.

91
00:04:16,350 --> 00:04:18,093
Now, there's been an evolution.

92
00:04:19,560 --> 00:04:23,460
November, 2022, ChatGPT changed the world,

93
00:04:23,460 --> 00:04:25,260
which is why this room is filled now

94
00:04:25,260 --> 00:04:28,050
because all of us are
feeling the effects of AI.

95
00:04:28,050 --> 00:04:28,883
Now,

96
00:04:28,883 --> 00:04:33,063
I started my journey with
generative AI in January, 2023.

97
00:04:33,900 --> 00:04:37,080
I was working at AWS
and I had this challenge

98
00:04:37,080 --> 00:04:38,520
of a whole bunch of information I need

99
00:04:38,520 --> 00:04:40,230
to stay up to date and stay current with.

100
00:04:40,230 --> 00:04:41,790
So I said, you know what?

101
00:04:41,790 --> 00:04:43,710
I'm gonna start summarizing the blogs

102
00:04:43,710 --> 00:04:46,770
so I can stay current and
more efficient in my role.

103
00:04:46,770 --> 00:04:47,880
Well, at that time,

104
00:04:47,880 --> 00:04:51,660
context windows were
about 8,192 tokens, right?

105
00:04:51,660 --> 00:04:53,130
So you couldn't fit a whole blog

106
00:04:53,130 --> 00:04:55,680
into a chat bot or ChatGPT.

107
00:04:55,680 --> 00:04:58,650
So what I decided to do
was chunk that information,

108
00:04:58,650 --> 00:05:01,410
summarize each chunk, and
then concatenate the chunks,

109
00:05:01,410 --> 00:05:04,140
and then summarize that to
have one concise summary

110
00:05:04,140 --> 00:05:05,670
of the blog, right?

111
00:05:05,670 --> 00:05:06,960
That was before RAG.

112
00:05:06,960 --> 00:05:09,270
Come to summer, everyone's
talking about RAG.

113
00:05:09,270 --> 00:05:10,560
Come the end of 2024,

114
00:05:10,560 --> 00:05:14,100
now, LLMs have tool calling
and function calling, right?

115
00:05:14,100 --> 00:05:17,280
And now, people start
talking about agents, 2024.

116
00:05:17,280 --> 00:05:19,080
Now, we have agentic frameworks

117
00:05:19,080 --> 00:05:21,930
that makes building
agents a lot more simpler.

118
00:05:21,930 --> 00:05:25,200
Now, we can have it maintain
memory, that context,

119
00:05:25,200 --> 00:05:26,640
which we'll talk about here in a moment.

120
00:05:26,640 --> 00:05:29,190
And we can build agents
a lot more efficiently.

121
00:05:29,190 --> 00:05:30,630
We're even at the point
now where we're talking

122
00:05:30,630 --> 00:05:33,420
about being building
multi-agent systems, right?

123
00:05:33,420 --> 00:05:36,360
And fully autonomous
agents. Is that possible?

124
00:05:36,360 --> 00:05:38,643
Yes, they're being implemented today.

125
00:05:39,930 --> 00:05:41,370
So taking a step back,

126
00:05:41,370 --> 00:05:44,490
since all of us aren't building
agents, what's an agent?

127
00:05:44,490 --> 00:05:49,200
Well, you see that agent,
that's code, right?

128
00:05:49,200 --> 00:05:51,650
At the center of it is
the intelligence, the LLM.

129
00:05:52,537 --> 00:05:56,220
And then from there, you
give that LLM access to APIs,

130
00:05:56,220 --> 00:05:58,950
tools, to better look up the
weather, look up the date,

131
00:05:58,950 --> 00:06:01,200
retrieve information from a database,

132
00:06:01,200 --> 00:06:03,000
and then you give better access to memory,

133
00:06:03,000 --> 00:06:04,260
short term and long term.

134
00:06:04,260 --> 00:06:07,950
You need to maintain the
conversations and the state, right?

135
00:06:07,950 --> 00:06:09,270
Of each session.

136
00:06:09,270 --> 00:06:10,103
And then from there,

137
00:06:10,103 --> 00:06:13,410
you need to be able to retrieve
things like historical facts

138
00:06:13,410 --> 00:06:16,110
over those conversations
throughout the sessions.

139
00:06:16,110 --> 00:06:18,510
And this is what makes
up for agents, right?

140
00:06:18,510 --> 00:06:21,600
But again, this goes
back to software, right?

141
00:06:21,600 --> 00:06:25,315
How many of you are developers
or write code, right?

142
00:06:25,315 --> 00:06:26,820
All that knowledge that
you have is still important

143
00:06:26,820 --> 00:06:28,520
when you're building agents today.

144
00:06:29,610 --> 00:06:31,710
So how do we take the agents

145
00:06:31,710 --> 00:06:34,230
that we're building and deploy them?

146
00:06:34,230 --> 00:06:35,790
Well, there's some challenges around that.

147
00:06:35,790 --> 00:06:39,000
First, how do you deploy
an agent securely, right?

148
00:06:39,000 --> 00:06:41,310
In his own isolated runtime.

149
00:06:41,310 --> 00:06:44,583
How do you maintain context
memory, short term, long term?

150
00:06:45,420 --> 00:06:48,540
How do you identify who
can access the agent

151
00:06:48,540 --> 00:06:50,880
as well as what the agent can access?

152
00:06:50,880 --> 00:06:53,880
You know that machine to
machine communication.

153
00:06:53,880 --> 00:06:54,720
And then from there,

154
00:06:54,720 --> 00:06:56,700
you need to manage the
tools that it can use,

155
00:06:56,700 --> 00:06:59,520
have some policies and
controls around that,

156
00:06:59,520 --> 00:07:01,740
be able to discover those tools,

157
00:07:01,740 --> 00:07:04,440
and then observe the whole entire system.

158
00:07:04,440 --> 00:07:05,403
Observability.

159
00:07:06,510 --> 00:07:09,810
We call these challenges
undifferentiated heavy lifting

160
00:07:09,810 --> 00:07:10,643
at AWS.

161
00:07:11,790 --> 00:07:15,873
And so to solve this,
we introduce AgentCore.

162
00:07:18,390 --> 00:07:19,770
And I'm gonna go through AgentCore,

163
00:07:19,770 --> 00:07:21,270
then we're gonna hop in some code.

164
00:07:21,270 --> 00:07:23,400
But at a high level,
let's take a look at that.

165
00:07:23,400 --> 00:07:24,930
So you have runtime.

166
00:07:24,930 --> 00:07:28,260
When you build your agents,
you can use any framework,

167
00:07:28,260 --> 00:07:30,780
whether you're using LangGraph, LangChain,

168
00:07:30,780 --> 00:07:33,600
Strands Agents, client agents, SDK,

169
00:07:33,600 --> 00:07:35,010
whatever framework you're using,

170
00:07:35,010 --> 00:07:36,690
whatever model you are using,

171
00:07:36,690 --> 00:07:39,810
you can take that agent,
launch it in the runtime.

172
00:07:39,810 --> 00:07:42,720
The thing about runtime,
it also supports MCP.

173
00:07:42,720 --> 00:07:44,850
So if you're building
your own MCP servers,

174
00:07:44,850 --> 00:07:47,040
you can launch those
in the runtime as well.

175
00:07:47,040 --> 00:07:50,490
Runtime supports workloads
up to eight hours, right?

176
00:07:50,490 --> 00:07:53,520
Of course you can build an
agent and launch it in the EC2,

177
00:07:53,520 --> 00:07:55,230
but then that's always running, right?

178
00:07:55,230 --> 00:07:56,460
So this is serverless.

179
00:07:56,460 --> 00:07:59,493
So now the agent is only
running when it's needed.

180
00:08:01,230 --> 00:08:04,140
When it comes to runtime, your
agent needs access to memory.

181
00:08:04,140 --> 00:08:06,510
So we have memory for that
short term and long term.

182
00:08:06,510 --> 00:08:08,340
Identity. Who can access the agent?

183
00:08:08,340 --> 00:08:10,830
What the agent can access. Gateways.

184
00:08:10,830 --> 00:08:12,360
If you have existing APIs,

185
00:08:12,360 --> 00:08:14,880
whether they're OpenAPI schema or Smithy,

186
00:08:14,880 --> 00:08:16,260
or you have Lambda functions,

187
00:08:16,260 --> 00:08:20,430
you can use Gateway to
create MCPs for those tools.

188
00:08:20,430 --> 00:08:22,620
And then you can wrap a policy
which was announced here

189
00:08:22,620 --> 00:08:24,600
at re:Invent around those tools

190
00:08:24,600 --> 00:08:26,280
and what those tools can actually do.

191
00:08:26,280 --> 00:08:27,960
So now you can put some more guardrails

192
00:08:27,960 --> 00:08:29,700
and controls around your agents.

193
00:08:29,700 --> 00:08:31,740
So they can't just explore the world

194
00:08:31,740 --> 00:08:34,410
and do whatever they want to do, right?

195
00:08:34,410 --> 00:08:36,900
We have browser to be
able to search the web.

196
00:08:36,900 --> 00:08:40,170
Code interpreter to have this
secure isolated environment

197
00:08:40,170 --> 00:08:43,200
to offload code execution, right?

198
00:08:43,200 --> 00:08:46,350
You may have some compute
intensive workloads

199
00:08:46,350 --> 00:08:48,150
and rather than having the resources taken

200
00:08:48,150 --> 00:08:49,950
up inside of your agent's runtime,

201
00:08:49,950 --> 00:08:52,080
you can offload that to code interpreter.

202
00:08:52,080 --> 00:08:54,480
And then from there, you
have full observability

203
00:08:54,480 --> 00:08:57,150
with gen AI observability
inside a CloudWatch.

204
00:08:57,150 --> 00:08:59,370
But this also exports to (indistinct).

205
00:08:59,370 --> 00:09:01,800
So if you're using something
like Lane Fuel or Datadog,

206
00:09:01,800 --> 00:09:03,750
you can export that there.

207
00:09:03,750 --> 00:09:06,660
And then finally, we have evaluations.

208
00:09:06,660 --> 00:09:08,880
One of the things about building an agent,

209
00:09:08,880 --> 00:09:10,950
when you build your agent,
start with a use case.

210
00:09:10,950 --> 00:09:12,870
Start small, right?

211
00:09:12,870 --> 00:09:15,180
After you have the use case,
you're building your agent.

212
00:09:15,180 --> 00:09:16,590
Next thing you need to do,

213
00:09:16,590 --> 00:09:19,140
build observability in from the beginning.

214
00:09:19,140 --> 00:09:23,130
So that way, you can measure
things like metrics, latency,

215
00:09:23,130 --> 00:09:25,320
tool use, tool cost, cost,

216
00:09:25,320 --> 00:09:26,880
all these things from the beginning

217
00:09:26,880 --> 00:09:28,200
because the larger your agent gets,

218
00:09:28,200 --> 00:09:29,670
the harder that becomes, right?

219
00:09:29,670 --> 00:09:31,050
And then evaluations,

220
00:09:31,050 --> 00:09:33,420
how well is your tool,
your agent performing?

221
00:09:33,420 --> 00:09:34,830
That's just some things I wanted to cover

222
00:09:34,830 --> 00:09:36,243
before we hop into the code.

223
00:09:37,230 --> 00:09:38,160
Kind of going through,

224
00:09:38,160 --> 00:09:40,650
I'm gonna go real fast so
we can hop into the code.

225
00:09:40,650 --> 00:09:42,720
AgentCore runtime, I
mentioned this already,

226
00:09:42,720 --> 00:09:45,273
supports any model,
supports any framework.

227
00:09:46,410 --> 00:09:49,500
There's two ways to deploy
either a Docket container,

228
00:09:49,500 --> 00:09:52,890
we can use the AgentCore
starter kit, few lines of code,

229
00:09:52,890 --> 00:09:55,080
get your agent into the runtime,

230
00:09:55,080 --> 00:09:56,220
or you can use the zip file.

231
00:09:56,220 --> 00:09:58,230
So if many of you are using Lambda,

232
00:09:58,230 --> 00:10:00,130
pretty much kind of the same approach.

233
00:10:04,590 --> 00:10:06,090
For AgentCore memory,

234
00:10:06,090 --> 00:10:08,640
I mentioned it supports
short-term and long-term memory.

235
00:10:08,640 --> 00:10:11,700
So the short-term memory is
for those chat messages, right?

236
00:10:11,700 --> 00:10:13,260
In the user state.

237
00:10:13,260 --> 00:10:14,550
Now, the thing about this,

238
00:10:14,550 --> 00:10:16,830
the cool thing about AgentCore memory

239
00:10:16,830 --> 00:10:19,860
is that once you have your
memory in the short-term memory,

240
00:10:19,860 --> 00:10:23,610
now we automatically extract information.

241
00:10:23,610 --> 00:10:25,410
You can create something
called a strategy,

242
00:10:25,410 --> 00:10:29,160
whether it's semantic search,
user preferences, summary,

243
00:10:29,160 --> 00:10:31,260
or some type of custom strategy, right?

244
00:10:31,260 --> 00:10:33,210
I have an example where I wanted the agent

245
00:10:33,210 --> 00:10:35,550
to remember the blogs that I searched.

246
00:10:35,550 --> 00:10:37,800
So I created a custom
strategy around that.

247
00:10:37,800 --> 00:10:41,040
So now, when the agent stores
those short-term memories,

248
00:10:41,040 --> 00:10:46,040
it's able to extract using
the automated extraction,

249
00:10:46,740 --> 00:10:48,870
the information is stored
in long-term memory.

250
00:10:48,870 --> 00:10:50,760
So now across sessions,

251
00:10:50,760 --> 00:10:53,340
when I talk to the agent
or you invoke the agent,

252
00:10:53,340 --> 00:10:56,280
it can retrieve that information
and bring it into context

253
00:10:56,280 --> 00:10:58,593
and perform the task more efficiently.

254
00:11:01,650 --> 00:11:04,470
Next, when we come to Gateway,
I broke this down already,

255
00:11:04,470 --> 00:11:05,940
but what this does is allow you

256
00:11:05,940 --> 00:11:09,540
to have an authenticated
connection to your MCP servers.

257
00:11:09,540 --> 00:11:13,530
So if we look at this, if you
are using existing APIs now,

258
00:11:13,530 --> 00:11:17,940
I mentioned OpenAPI as well as Smithy,

259
00:11:17,940 --> 00:11:21,093
you can integrate those
directly with AgentCore Gateway.

260
00:11:22,260 --> 00:11:23,190
Then Lambda functions.

261
00:11:23,190 --> 00:11:25,920
If you have those, you wanna
expose those as MCP servers,

262
00:11:25,920 --> 00:11:27,297
you can put those behind a Gateway,

263
00:11:27,297 --> 00:11:30,150
and then they can be
exposed as MCP servers.

264
00:11:30,150 --> 00:11:32,610
Now, off, with identity,

265
00:11:32,610 --> 00:11:35,850
now, you can have identity
for outbound connections.

266
00:11:35,850 --> 00:11:40,050
Let's say you need to use
a third-party provider

267
00:11:40,050 --> 00:11:44,340
to access some API or JWT tokens,

268
00:11:44,340 --> 00:11:46,050
you can use that with Gateway

269
00:11:46,050 --> 00:11:49,803
and connect to those third-party
APIs right through Gateway.

270
00:11:53,850 --> 00:11:57,060
Taking it one step further, I know,

271
00:11:57,060 --> 00:11:59,110
I've seen a lot of hands go out with MCP,

272
00:12:00,000 --> 00:12:02,160
and I am a fan of MCP,

273
00:12:02,160 --> 00:12:04,050
but there's some challenges
with that, right?

274
00:12:04,050 --> 00:12:06,720
When you are leveraging MCP servers,

275
00:12:06,720 --> 00:12:10,350
you are essentially giving
a whole bunch of information

276
00:12:10,350 --> 00:12:15,350
and tokens to your agents,
which can one, make it slower,

277
00:12:16,380 --> 00:12:19,380
confuse it, and be
extremely expensive, right?

278
00:12:19,380 --> 00:12:21,060
So to cut down on that,

279
00:12:21,060 --> 00:12:24,180
AgentCore Gateway offers
something called semantic search.

280
00:12:24,180 --> 00:12:26,730
So rather than just giving all
of your tools to the agent,

281
00:12:26,730 --> 00:12:28,230
you can use semantic search,

282
00:12:28,230 --> 00:12:30,600
and now your agent only gets
access to the tools it needs

283
00:12:30,600 --> 00:12:32,400
when it needs it, right?

284
00:12:32,400 --> 00:12:36,933
So this is a way to save
on speed, save on costs,

285
00:12:37,770 --> 00:12:40,173
as well as optimize on performance.

286
00:12:44,970 --> 00:12:46,890
Finally, something we'll cover at the end

287
00:12:46,890 --> 00:12:48,600
after Erik goes to the code.

288
00:12:48,600 --> 00:12:50,939
But we're gonna talk about observability.

289
00:12:50,939 --> 00:12:51,780
Observability is important.

290
00:12:51,780 --> 00:12:53,190
I mentioned after you have your use case,

291
00:12:53,190 --> 00:12:54,630
the first thing you should think about,

292
00:12:54,630 --> 00:12:56,130
or the next thing you should think about,

293
00:12:56,130 --> 00:12:59,640
is gonna be observability,
monitoring the sessions,

294
00:12:59,640 --> 00:13:02,220
the metrics, the latency, the token use.

295
00:13:02,220 --> 00:13:04,200
All of this needs to
happen from the beginning

296
00:13:04,200 --> 00:13:06,780
so you can really understand
how your agent is performing

297
00:13:06,780 --> 00:13:10,830
and be able to evaluate and
optimize continuously, right?

298
00:13:10,830 --> 00:13:13,260
So that completes my
portion of the session.

299
00:13:13,260 --> 00:13:16,890
I'm gonna give it over to Erik
and he'll take it from there.

300
00:13:16,890 --> 00:13:19,128
- [Erik] Thanks, Du'An.
- [Du'An] Yeah.

301
00:13:19,128 --> 00:13:22,020
- [Erik] Yeah, let's talk
a little bit about Kiro

302
00:13:22,020 --> 00:13:24,603
and how this can help us today.

303
00:13:25,860 --> 00:13:28,890
So Kiro is our new agentic IDE.

304
00:13:28,890 --> 00:13:31,470
We released it into
preview a few months ago

305
00:13:31,470 --> 00:13:35,970
and it just went into general
availability a few weeks ago.

306
00:13:35,970 --> 00:13:40,860
I'm really excited. This journey
on Kiro has been amazing.

307
00:13:40,860 --> 00:13:44,490
When we launched it into preview
three or four months ago,

308
00:13:44,490 --> 00:13:47,216
the amount of downloads

309
00:13:47,216 --> 00:13:51,090
and the amount of people just loving it

310
00:13:51,090 --> 00:13:53,640
and giving us feedback was amazing.

311
00:13:53,640 --> 00:13:55,440
We had hundreds of thousands of downloads

312
00:13:55,440 --> 00:14:00,000
in the first few days and
we had to put up a wait list

313
00:14:00,000 --> 00:14:03,150
and then people found a
way around the wait list

314
00:14:03,150 --> 00:14:04,860
and then we had to have another wait list.

315
00:14:04,860 --> 00:14:07,470
But right now, it's
definitely generally available

316
00:14:07,470 --> 00:14:08,790
and then we can try it out.

317
00:14:08,790 --> 00:14:12,150
And it's a really great
way to build your agents

318
00:14:12,150 --> 00:14:16,410
'cause it has a lot of
features that make it simpler

319
00:14:16,410 --> 00:14:20,190
to build not just agents,
but practically anything.

320
00:14:20,190 --> 00:14:25,190
We didn't make this AWS
Kiro or Amazon Bedrock Kiro,

321
00:14:25,770 --> 00:14:26,640
this is just Kiro.

322
00:14:26,640 --> 00:14:30,450
So we really wanted to
separate it from the AWS brand

323
00:14:30,450 --> 00:14:32,760
in some ways and just make
sure that anyone can use it.

324
00:14:32,760 --> 00:14:35,850
You can even use social login,
don't need an AWS account,

325
00:14:35,850 --> 00:14:37,770
but I think it really pairs well

326
00:14:37,770 --> 00:14:39,780
with what we're showing off today.

327
00:14:39,780 --> 00:14:43,260
That also, that little
ghost there that's bouncing

328
00:14:43,260 --> 00:14:46,473
up and down, that's kind of
the mascot that we went with.

329
00:14:49,200 --> 00:14:51,660
So why would you want to use this

330
00:14:51,660 --> 00:14:56,040
versus any other of our
agentic IDEs out there?

331
00:14:56,040 --> 00:14:56,910
Is we really built

332
00:14:56,910 --> 00:14:59,403
in the spec-driven development part of it.

333
00:15:00,270 --> 00:15:03,420
So as I was building the
demo for all of you today

334
00:15:03,420 --> 00:15:05,040
that I'll be showing off in a little bit,

335
00:15:05,040 --> 00:15:09,600
I used both of these modes,
vibe mode and spec mode.

336
00:15:09,600 --> 00:15:10,770
Spec mode, if you don't know,

337
00:15:10,770 --> 00:15:13,713
is a way that you can create your,

338
00:15:14,550 --> 00:15:18,840
you basically tell the large
language model the requirements

339
00:15:18,840 --> 00:15:23,430
that you want and it helps
build a requirements document,

340
00:15:23,430 --> 00:15:26,520
a design document and a task list from it.

341
00:15:26,520 --> 00:15:29,190
And it's a way you can go
back and forth with your IDE

342
00:15:29,190 --> 00:15:31,380
to make sure it builds
exactly what you want.

343
00:15:31,380 --> 00:15:34,350
And we found that it's much more accurate

344
00:15:34,350 --> 00:15:36,360
and it's much quicker.

345
00:15:36,360 --> 00:15:39,390
It saves you time when you
build it using spec mode,

346
00:15:39,390 --> 00:15:42,600
although vibe mode works great as well.

347
00:15:42,600 --> 00:15:44,700
Du'An, how would you describe difference

348
00:15:44,700 --> 00:15:46,020
between vibe and spec?

349
00:15:46,020 --> 00:15:48,060
- [Du'An] So when it
comes to vibe and spec,

350
00:15:48,060 --> 00:15:50,280
think of spec as you being an architect

351
00:15:50,280 --> 00:15:52,290
creating a high level validated design

352
00:15:52,290 --> 00:15:54,540
that the agent will
follow to complete a goal.

353
00:15:54,540 --> 00:15:56,610
When it comes to vibe coding,
you just want it to go

354
00:15:56,610 --> 00:15:58,710
through, figure out what
the problem is and solve it.

355
00:15:58,710 --> 00:16:00,300
You don't really need to
have specs around that,

356
00:16:00,300 --> 00:16:03,000
just do what I asked you to do, right?

357
00:16:03,000 --> 00:16:05,063
That's the way I kind
of approached the two.

358
00:16:06,150 --> 00:16:07,290
- [Erik] Well said.

359
00:16:07,290 --> 00:16:10,800
You can also just jump
into features in depth

360
00:16:10,800 --> 00:16:12,283
with spec mode,

361
00:16:12,283 --> 00:16:15,083
we will take a look at what
that looks like in a moment.

362
00:16:17,550 --> 00:16:20,190
Going back and I saw most
people raise their hands

363
00:16:20,190 --> 00:16:21,930
about MCP.

364
00:16:21,930 --> 00:16:26,430
We have a Kiro, since it's an agentic IDE,

365
00:16:26,430 --> 00:16:31,410
it does allow you to add in an MCP server.

366
00:16:31,410 --> 00:16:35,790
And this works with local or remote MCP.

367
00:16:35,790 --> 00:16:39,270
And in fact today, we
just launched Kiro powers,

368
00:16:39,270 --> 00:16:44,270
which is a way to add in
not just an MCP server,

369
00:16:44,400 --> 00:16:48,750
but steering files and more context.

370
00:16:48,750 --> 00:16:51,150
So I'd highly recommend
everyone check that out.

371
00:16:51,150 --> 00:16:54,543
If you're interested in Kiro,
Kiro powers is out today.

372
00:16:55,470 --> 00:16:57,690
And we had launched with
a bunch of partners,

373
00:16:57,690 --> 00:17:00,960
and one partner we
launched with is AgentCore.

374
00:17:00,960 --> 00:17:05,160
So you can actually go
to one of a kiro.dev,

375
00:17:05,160 --> 00:17:08,730
there'll be an AgentCore Kiro
power, you can click on it,

376
00:17:08,730 --> 00:17:10,950
you have to have the
latest version of our IDE,

377
00:17:10,950 --> 00:17:12,090
and it'll install it,

378
00:17:12,090 --> 00:17:14,823
and it makes working
with agents even easier.

379
00:17:15,660 --> 00:17:18,660
I will in the demo, I
will show you quickly,

380
00:17:18,660 --> 00:17:21,317
we will move to that website
just to take a look at it.

381
00:17:21,317 --> 00:17:22,710
I said it just came out today.

382
00:17:22,710 --> 00:17:24,120
I'm not going to go through it,

383
00:17:24,120 --> 00:17:26,340
but I'll show you guys what
it looks like if you want

384
00:17:26,340 --> 00:17:29,310
to use it today while
you're building agents.

385
00:17:29,310 --> 00:17:34,080
We are going to be using,
however, the AgentCore MCP server.

386
00:17:34,080 --> 00:17:36,330
I don't know if you know that AWS has lots

387
00:17:36,330 --> 00:17:39,720
of different MCP servers
for all different scenarios.

388
00:17:39,720 --> 00:17:41,880
We have a general
documentation MCP server,

389
00:17:41,880 --> 00:17:44,818
but we have one specifically
for AgentCore just

390
00:17:44,818 --> 00:17:49,410
to make your LLM a little
bit smarter to grab

391
00:17:49,410 --> 00:17:51,453
and to create agents.

392
00:17:52,530 --> 00:17:54,390
Of course that works with not just Kiro,

393
00:17:54,390 --> 00:17:58,533
but any cursor, Windsurf,
whatever else you're using.

394
00:18:00,930 --> 00:18:03,153
Alright, so let's get started.

395
00:18:05,550 --> 00:18:06,570
Before I jump into the code,

396
00:18:06,570 --> 00:18:10,200
I just wanna give a high
level diagram architecture

397
00:18:10,200 --> 00:18:11,650
of what we're building today.

398
00:18:13,050 --> 00:18:16,680
Kind of encompassing this
whole diagram is observability.

399
00:18:16,680 --> 00:18:19,590
So we are going to look
at that with Du'An's help.

400
00:18:19,590 --> 00:18:23,160
We're gonna have a front end
and that front end is going

401
00:18:23,160 --> 00:18:26,820
to connect to our food tracker agent.

402
00:18:26,820 --> 00:18:30,180
And this is, so we kind of built,

403
00:18:30,180 --> 00:18:32,820
I built this multi-layered
just to emphasize

404
00:18:32,820 --> 00:18:36,330
that you could have agents
talk to other agents.

405
00:18:36,330 --> 00:18:39,090
In this case, we have our recipe agent,

406
00:18:39,090 --> 00:18:40,620
which is also an MCP server.

407
00:18:40,620 --> 00:18:42,870
That's that middle box there

408
00:18:42,870 --> 00:18:44,370
and that's more of our orchestrator.

409
00:18:44,370 --> 00:18:46,890
It's gonna talk to two MCP servers.

410
00:18:46,890 --> 00:18:49,323
One is the recipe server, MCP.

411
00:18:50,280 --> 00:18:53,760
The recipe server talks
to a list of recipes.

412
00:18:53,760 --> 00:18:55,860
I'll show you what that looks
like. It can retrieve them.

413
00:18:55,860 --> 00:18:57,720
It has a number of tools.

414
00:18:57,720 --> 00:19:00,360
I also have nutrition ingredients.

415
00:19:00,360 --> 00:19:02,100
So that has a list of ingredients

416
00:19:02,100 --> 00:19:04,680
and that's using our Gateway

417
00:19:04,680 --> 00:19:07,350
using Amazon Bedrock AgentCore Gateway.

418
00:19:07,350 --> 00:19:09,030
I know it's a mouthful.

419
00:19:09,030 --> 00:19:12,450
I'm not using any semantic
search like Du'An just mentioned,

420
00:19:12,450 --> 00:19:14,610
but I could have certainly
added that in there.

421
00:19:14,610 --> 00:19:16,170
I only have a few tools

422
00:19:16,170 --> 00:19:20,520
in our nutrition ingredients MCP server.

423
00:19:20,520 --> 00:19:24,840
But you could imagine to
reiterate what Du'An was saying,

424
00:19:24,840 --> 00:19:27,360
if you have like hundreds
of tools in your MCP server,

425
00:19:27,360 --> 00:19:30,030
those get added in and take up tokens

426
00:19:30,030 --> 00:19:35,030
and your agent or your LLM
will have to process those.

427
00:19:35,130 --> 00:19:38,070
And so it is a little bit of
a problem with MCP servers,

428
00:19:38,070 --> 00:19:41,613
and semantics certainly helps fix that.

429
00:19:43,260 --> 00:19:44,820
Here is another diagram.

430
00:19:44,820 --> 00:19:46,200
I know this is a lot of boxes

431
00:19:46,200 --> 00:19:47,850
and it's kind of probably hard to see,

432
00:19:47,850 --> 00:19:50,040
but let me explain what we're doing here.

433
00:19:50,040 --> 00:19:53,700
We're going from the user,
which is you at the keyboard.

434
00:19:53,700 --> 00:19:56,490
You're gonna be talking to
a front end, in this case,

435
00:19:56,490 --> 00:20:00,840
I'm a big React and Vue.js fan.
Any Vue or React fans here?

436
00:20:00,840 --> 00:20:02,703
Any front-end devs? Okay, a few.

437
00:20:03,630 --> 00:20:08,130
Then that's gonna talk directly
to our food tracker agent,

438
00:20:08,130 --> 00:20:09,510
and that food tracker agent,

439
00:20:09,510 --> 00:20:12,270
it's really meant to be the gateway

440
00:20:12,270 --> 00:20:13,890
to talk to the front-end.

441
00:20:13,890 --> 00:20:18,890
So it talks in a very friendly
natural way to the front end.

442
00:20:20,670 --> 00:20:23,400
And then it talks directly
to the recipe agent server,

443
00:20:23,400 --> 00:20:26,310
which really takes, it's an agent,

444
00:20:26,310 --> 00:20:29,700
but it just kind of
formats what it receives

445
00:20:29,700 --> 00:20:31,790
from the MCP service in a certain way.

446
00:20:31,790 --> 00:20:34,650
So you can think of the recipe agent

447
00:20:34,650 --> 00:20:36,840
as more of an orchestrator.

448
00:20:36,840 --> 00:20:39,390
And then of course we have Amazon Bedrock,

449
00:20:39,390 --> 00:20:42,960
we are using some Anthropic
models and Nova models.

450
00:20:42,960 --> 00:20:46,980
And then the last box there,
it says recipe server MCP,

451
00:20:46,980 --> 00:20:47,813
Gateway MCP.

452
00:20:47,813 --> 00:20:48,810
Those are two actual servers,

453
00:20:48,810 --> 00:20:50,700
but I didn't have enough
space on the diagram

454
00:20:50,700 --> 00:20:53,760
to make it more longer than it is.

455
00:20:53,760 --> 00:20:55,590
And you can see a little
bit with these arrows kind

456
00:20:55,590 --> 00:20:57,753
of going back and forth
of how the flow is.

457
00:21:00,360 --> 00:21:03,513
So before we get to that,
let's jump into the demo.

458
00:21:04,830 --> 00:21:06,240
- [Du'An] Wow, Erik is setting up.

459
00:21:06,240 --> 00:21:08,890
Do we have any questions
about anything we presented?

460
00:21:10,320 --> 00:21:13,270
Any questions? No questions?

461
00:21:13,270 --> 00:21:17,370
We do have one. Okay, I'll take two.

462
00:21:17,370 --> 00:21:18,970
I'll get her, then I'll get you.

463
00:21:21,750 --> 00:21:24,483
If y'all can pass that
down, please. Thank you.

464
00:21:27,026 --> 00:21:29,070
- [Attendee] So I have been using Q CLI.

465
00:21:29,070 --> 00:21:29,903
- [Du'An] Yes.

466
00:21:29,903 --> 00:21:30,930
- [Attendee] In the VS Code extension.

467
00:21:30,930 --> 00:21:32,220
So what is the difference

468
00:21:32,220 --> 00:21:35,790
between now you have renamed
the two Kiro CLI, right?

469
00:21:35,790 --> 00:21:38,820
So what is the difference
between the Kiro IDE

470
00:21:38,820 --> 00:21:40,710
and this extension?

471
00:21:40,710 --> 00:21:44,043
Are there any added advantages
like using the separate IDE?

472
00:21:46,170 --> 00:21:47,430
- [Erik] Yeah, that's a good question.

473
00:21:47,430 --> 00:21:51,090
So you're asking if there's
differences between using Kiro,

474
00:21:51,090 --> 00:21:55,150
the IDE, and maybe used Q
IDE in the past or Q CLI?

475
00:21:55,150 --> 00:21:56,940
- [Attendee] Q CLI in VS Code.

476
00:21:56,940 --> 00:22:01,940
- [Erik] Yes, Q CLI. So Q
CLI, we changed the name.

477
00:22:02,430 --> 00:22:06,390
If you do an update on Q
CLI, it becomes Kiro CLI.

478
00:22:06,390 --> 00:22:08,340
So that's kinda the biggest thing.

479
00:22:08,340 --> 00:22:11,040
Although if you do not want to change,

480
00:22:11,040 --> 00:22:12,690
you can continue to use Q CLI

481
00:22:12,690 --> 00:22:14,940
and turn off your automatic updates.

482
00:22:14,940 --> 00:22:19,290
Q isn't going away, but we
really are focusing on Kiro,

483
00:22:19,290 --> 00:22:21,270
the IDE, Kiro CLI,

484
00:22:21,270 --> 00:22:25,293
we see a lot of advantages
with the two together.

485
00:22:26,220 --> 00:22:29,400
If you may have noticed two
transform has now been kind

486
00:22:29,400 --> 00:22:30,600
of pushed into its own service.

487
00:22:30,600 --> 00:22:33,090
So if you are using that with Q,

488
00:22:33,090 --> 00:22:35,853
you can now use it without Q as well.

489
00:22:36,720 --> 00:22:37,763
- [Attendee] Thank you.

490
00:22:39,507 --> 00:22:41,307
- [Du'An] And we could talk offline.

491
00:22:42,180 --> 00:22:44,490
A lot of you may use like cloud code,

492
00:22:44,490 --> 00:22:47,850
some of you may use
cursor, some may use Kiro.

493
00:22:47,850 --> 00:22:49,410
I think there's two
different like workflows

494
00:22:49,410 --> 00:22:51,390
like one operating in the terminal,

495
00:22:51,390 --> 00:22:53,550
one operating in the IDE.

496
00:22:53,550 --> 00:22:54,930
I think it's a preference at that point.

497
00:22:54,930 --> 00:22:59,190
But there's also, I find
developers like the IDE,

498
00:22:59,190 --> 00:23:01,590
but then people that are like,
in operations prefer like,

499
00:23:01,590 --> 00:23:03,150
the terminal 'cause it's right there.

500
00:23:03,150 --> 00:23:04,620
So if you all wanna talk more about that,

501
00:23:04,620 --> 00:23:06,540
I love those type of conversations.

502
00:23:06,540 --> 00:23:07,443
We can talk after.

503
00:23:09,870 --> 00:23:11,910
- [Attendee] How do we
set up like a long-term

504
00:23:11,910 --> 00:23:14,460
and short-term memory in AgentCore,

505
00:23:14,460 --> 00:23:18,060
like, can we define what is
long-term and what is short-term

506
00:23:18,060 --> 00:23:21,930
and if we are setting
up long-term variables,

507
00:23:21,930 --> 00:23:24,990
like, do they use more tokens?

508
00:23:24,990 --> 00:23:27,513
Does the agent use more
tokens to retrieve those?

509
00:23:28,410 --> 00:23:30,420
- [Du'An] So there's a
couple ways to do that.

510
00:23:30,420 --> 00:23:32,550
So when it comes to setting up your agent,

511
00:23:32,550 --> 00:23:35,190
you can just set up
short-term memory, right?

512
00:23:35,190 --> 00:23:37,020
Or you can have long-term memory.

513
00:23:37,020 --> 00:23:39,750
But let's say you're using the starter kit

514
00:23:39,750 --> 00:23:40,890
when you launch it,

515
00:23:40,890 --> 00:23:43,410
you can tell it then to
do the short-term memory,

516
00:23:43,410 --> 00:23:46,380
and then it'll automatically
do the long-term memory, right?

517
00:23:46,380 --> 00:23:48,000
But you can configure the long-term memory

518
00:23:48,000 --> 00:23:49,800
to have different strategies.

519
00:23:49,800 --> 00:23:51,150
So that's the most important thing,

520
00:23:51,150 --> 00:23:52,650
is the strategies that you want.

521
00:23:52,650 --> 00:23:55,770
Do you care about just the
summary of the conversation?

522
00:23:55,770 --> 00:23:58,470
Do you care about user preferences?

523
00:23:58,470 --> 00:24:00,870
Do you care about facts
from the conversation?

524
00:24:00,870 --> 00:24:02,700
And so those are the
strategies you will set

525
00:24:02,700 --> 00:24:04,257
up for the long-term memory.

526
00:24:04,257 --> 00:24:06,810
And you can do that through photo three.

527
00:24:06,810 --> 00:24:11,789
You can set up the strategies
and the memory with CDK,

528
00:24:11,789 --> 00:24:13,020
that's how you can set it up.

529
00:24:13,020 --> 00:24:15,870
But if you want actual
code, I can get you code.

530
00:24:15,870 --> 00:24:16,703
- [Attendee] Yeah, that would be great.

531
00:24:16,703 --> 00:24:18,690
- [Du'An] Alright, awesome.
Thank you for your questions.

532
00:24:18,690 --> 00:24:19,740
But here, Erik.

533
00:24:19,740 --> 00:24:21,270
- [Erik] Awesome, thank
you. Great questions.

534
00:24:21,270 --> 00:24:22,950
We'll have more time to
answer more at the end.

535
00:24:22,950 --> 00:24:24,990
I want to give you guys plenty of time.

536
00:24:24,990 --> 00:24:27,060
So I have Kiro open here.

537
00:24:27,060 --> 00:24:30,510
So let me give you a quick tour
of Kiro and how this works,

538
00:24:30,510 --> 00:24:33,690
'cause I saw not as many
hands in the Kiro side.

539
00:24:33,690 --> 00:24:36,870
So this is the IDE, it's
based off of VS Code.

540
00:24:36,870 --> 00:24:38,640
So those who know and love VS Code,

541
00:24:38,640 --> 00:24:40,920
it'll be right at home here.

542
00:24:40,920 --> 00:24:44,550
On the left-hand side, we
have this little ghost icon

543
00:24:44,550 --> 00:24:49,260
and this is where we can do
very Kiro things inside here.

544
00:24:49,260 --> 00:24:50,820
So we can add in agent hooks.

545
00:24:50,820 --> 00:24:54,390
So these are ways that
you can have agents run

546
00:24:54,390 --> 00:24:57,450
in the Kiro IDE on certain actions.

547
00:24:57,450 --> 00:24:59,340
For example, maybe you save a file

548
00:24:59,340 --> 00:25:00,780
that it updates your documentation.

549
00:25:00,780 --> 00:25:02,940
We even have a little
example of doing that.

550
00:25:02,940 --> 00:25:05,553
Or maybe you want it to
do some localization,

551
00:25:06,420 --> 00:25:08,430
and you can also have it on delete,

552
00:25:08,430 --> 00:25:11,190
and a few other actions as well.

553
00:25:11,190 --> 00:25:14,100
Then we have our steering files.

554
00:25:14,100 --> 00:25:17,310
These are like rules files in other IDEs.

555
00:25:17,310 --> 00:25:20,580
So you can set exactly what you,

556
00:25:20,580 --> 00:25:22,290
these will be added to the context

557
00:25:22,290 --> 00:25:26,280
and then you can tell it if
you're using AgentCore, do X, Y,

558
00:25:26,280 --> 00:25:30,060
Z, in case, I actually created
an AgentCore steering file.

559
00:25:30,060 --> 00:25:32,820
So this is, what I did is I told Kiro,

560
00:25:32,820 --> 00:25:35,010
and someone mentioned Kiro CLI.

561
00:25:35,010 --> 00:25:38,340
We can use even Kiro CLI to create a file

562
00:25:38,340 --> 00:25:40,230
with the best practices
of using AgentCore.

563
00:25:40,230 --> 00:25:43,560
So I have an AgentCore
Gateway CDK best practice file

564
00:25:43,560 --> 00:25:45,540
that I used, I created with Kiro,

565
00:25:45,540 --> 00:25:47,220
and then added it into the context

566
00:25:47,220 --> 00:25:50,220
so that way, anytime we're
doing stuff with CDK,

567
00:25:50,220 --> 00:25:52,260
it looks at that file.

568
00:25:52,260 --> 00:25:55,740
And then what you can do
in any kind of new project,

569
00:25:55,740 --> 00:25:57,180
when you open it up in Kiro,

570
00:25:57,180 --> 00:26:00,093
you can tell it to generate
the Kiro steering files,

571
00:26:01,110 --> 00:26:01,943
kinda looks like this.

572
00:26:01,943 --> 00:26:03,420
You can either do it through the menu,

573
00:26:03,420 --> 00:26:05,250
generate project steering files or those,

574
00:26:05,250 --> 00:26:07,500
if you are in a brand new
project, there's a button here.

575
00:26:07,500 --> 00:26:08,940
And so I did that with this project

576
00:26:08,940 --> 00:26:11,100
and this kinda just tells it exactly

577
00:26:11,100 --> 00:26:12,450
what's already existing.

578
00:26:12,450 --> 00:26:13,860
So you have an existing project,

579
00:26:13,860 --> 00:26:14,910
you can create the steering files

580
00:26:14,910 --> 00:26:15,743
and then they'll be added

581
00:26:15,743 --> 00:26:17,673
into the context every time you use it.

582
00:26:18,510 --> 00:26:20,790
I hinted at this, I can't
get into this too much.

583
00:26:20,790 --> 00:26:23,190
This probably could take the whole hour.

584
00:26:23,190 --> 00:26:27,090
But here's the specter
of development flow.

585
00:26:27,090 --> 00:26:29,220
It creates a requirements document

586
00:26:29,220 --> 00:26:31,500
in this what we call EARS format.

587
00:26:31,500 --> 00:26:35,040
And it has the introduction,
glossary, requirements,

588
00:26:35,040 --> 00:26:36,870
and it has acceptance criteria.

589
00:26:36,870 --> 00:26:39,030
And if I would like, I could
go through each one of these

590
00:26:39,030 --> 00:26:41,040
to the design, to the task list,

591
00:26:41,040 --> 00:26:43,533
and have Kiro actually
build my app for me.

592
00:26:44,550 --> 00:26:46,050
In this case, I used it a little bit,

593
00:26:46,050 --> 00:26:47,340
and then I went back to vibe coding.

594
00:26:47,340 --> 00:26:48,960
So I kind of went back and forth.

595
00:26:48,960 --> 00:26:50,520
And then finally, this is MCP,

596
00:26:50,520 --> 00:26:53,880
I have four MCP servers running here.

597
00:26:53,880 --> 00:26:55,710
I like Context7.

598
00:26:55,710 --> 00:26:58,590
Quick tip, if you are just
trying to use MCP servers

599
00:26:58,590 --> 00:27:02,070
for the first time, this is a great one,

600
00:27:02,070 --> 00:27:04,440
because it has hundreds
of different docs in it

601
00:27:04,440 --> 00:27:06,730
and it'll look at those docs

602
00:27:08,190 --> 00:27:10,773
before it gets information for you.

603
00:27:11,670 --> 00:27:14,850
There's also an AWS
documentation MCP server.

604
00:27:14,850 --> 00:27:18,930
This is kind of the overall
one that a lot of people use

605
00:27:18,930 --> 00:27:21,510
'cause it's kind of the biggest one.

606
00:27:21,510 --> 00:27:23,940
It has all our docs in it,

607
00:27:23,940 --> 00:27:26,673
and it includes some GitHub repositories.

608
00:27:27,750 --> 00:27:30,630
This is the one I recommend
for everyone to use.

609
00:27:30,630 --> 00:27:32,685
If you're building with
AgentCore, like I said,

610
00:27:32,685 --> 00:27:34,710
you don't have to use Kiro with this,

611
00:27:34,710 --> 00:27:36,690
but just these are MCP servers.

612
00:27:36,690 --> 00:27:38,970
Use the Bedrock AgentCore MCP server.

613
00:27:38,970 --> 00:27:40,770
That way, you can kind of
go back and forth with it

614
00:27:40,770 --> 00:27:42,690
as you're building your apps.

615
00:27:42,690 --> 00:27:43,677
And then use Brave Search, that way,

616
00:27:43,677 --> 00:27:45,663
you can like search the web easier.

617
00:27:47,760 --> 00:27:49,410
Do you have anything
to add Du'An on those?

618
00:27:49,410 --> 00:27:51,987
- [Du'An] Yeah, something
I wanna call out.

619
00:27:51,987 --> 00:27:53,550
How many of you use a coding assistant,

620
00:27:53,550 --> 00:27:55,263
coding agent like Kiro?

621
00:27:57,510 --> 00:27:58,380
Okay.

622
00:27:58,380 --> 00:28:03,380
So what he's showing you,
this Kiro tool is agentic.

623
00:28:03,660 --> 00:28:06,900
And so by adding it, the MCP servers,

624
00:28:06,900 --> 00:28:09,300
you give it access to
additional information.

625
00:28:09,300 --> 00:28:13,380
So while he's writing code for
AWS to build his application,

626
00:28:13,380 --> 00:28:14,880
the agent can write the code.

627
00:28:14,880 --> 00:28:18,840
But now, rather than it
making up an abstraction

628
00:28:18,840 --> 00:28:22,770
or the wrong way to implement
a function or a class,

629
00:28:22,770 --> 00:28:24,540
now, it can use the MCP service

630
00:28:24,540 --> 00:28:28,170
to pull in the proper
way to write the code.

631
00:28:28,170 --> 00:28:30,027
Does that make sense? Alright.

632
00:28:30,027 --> 00:28:34,380
And so Kiro is a great tool for that.

633
00:28:34,380 --> 00:28:36,540
Now, he has a whole bunch of MCP servers.

634
00:28:36,540 --> 00:28:37,710
One thing I do wanna call out,

635
00:28:37,710 --> 00:28:40,050
is when you're building your own agents,

636
00:28:40,050 --> 00:28:42,540
you don't want to give
it that many MCP servers.

637
00:28:42,540 --> 00:28:45,150
You know, I like to build
specialized agents, like,

638
00:28:45,150 --> 00:28:48,000
give it the tools that it needs
so it can complete the task.

639
00:28:48,000 --> 00:28:51,420
And as it needs to complete more tasks,

640
00:28:51,420 --> 00:28:53,610
then you give it those
tools that it needs.

641
00:28:53,610 --> 00:28:54,480
Because again,

642
00:28:54,480 --> 00:28:58,650
the more tools and MCP servers
and tokens that are used,

643
00:28:58,650 --> 00:29:02,760
the more expensive and the
longer it takes to process

644
00:29:02,760 --> 00:29:04,200
or generate a response.

645
00:29:04,200 --> 00:29:05,400
Go ahead.

646
00:29:05,400 --> 00:29:06,233
- [Erik] Good point, good point.

647
00:29:06,233 --> 00:29:07,066
Yeah, definitely,

648
00:29:07,066 --> 00:29:08,850
this is a little bit more
of an advanced example.

649
00:29:08,850 --> 00:29:12,540
Here is also that vibe and spec coding

650
00:29:12,540 --> 00:29:14,160
that I was talking about
where you can just talk

651
00:29:14,160 --> 00:29:14,993
to the chat.

652
00:29:14,993 --> 00:29:17,790
You can also, it's multimodal,
you can put in pictures,

653
00:29:17,790 --> 00:29:19,890
all sorts of great information in there.

654
00:29:19,890 --> 00:29:22,320
I'm just gonna close this
little window here on the side

655
00:29:22,320 --> 00:29:24,120
so we can start looking at the code.

656
00:29:24,120 --> 00:29:25,560
Sounds like we have a
lot of developers here,

657
00:29:25,560 --> 00:29:27,090
I'm sure you guys wanna take a look.

658
00:29:27,090 --> 00:29:31,320
So here, I have it broken
down inside Kiro here

659
00:29:31,320 --> 00:29:33,420
between my back end and front end.

660
00:29:33,420 --> 00:29:35,310
This is the view app here.

661
00:29:35,310 --> 00:29:37,680
And then I have infra and
we'll look at that in a second.

662
00:29:37,680 --> 00:29:39,660
I'm using CDK.

663
00:29:39,660 --> 00:29:42,120
I think the best thing
to do is we can start

664
00:29:42,120 --> 00:29:45,480
with the recipe server.

665
00:29:45,480 --> 00:29:48,660
So let's take a look at
that. I'm using Python.

666
00:29:48,660 --> 00:29:51,420
I'd recommend if you're
using AgentCore right now

667
00:29:51,420 --> 00:29:52,253
to use Python.

668
00:29:52,253 --> 00:29:56,670
I think it's the most simplest
to use. This is very simple.

669
00:29:56,670 --> 00:30:00,570
So we're using FastMCP, this
is a pretty popular MCP library

670
00:30:00,570 --> 00:30:02,520
that you can use on Python.

671
00:30:02,520 --> 00:30:04,410
And then I'm setting up tools,

672
00:30:04,410 --> 00:30:07,590
and tools are kind of the
bread and butter of MCP.

673
00:30:07,590 --> 00:30:10,040
I mean, there's other
things like elicitation

674
00:30:10,040 --> 00:30:12,750
and a whole bunch of other things

675
00:30:12,750 --> 00:30:13,920
and we'll take a look at that.

676
00:30:13,920 --> 00:30:16,230
But this is kinda the way you do it.

677
00:30:16,230 --> 00:30:19,155
What I'm doing here is
to keep this simple,

678
00:30:19,155 --> 00:30:21,690
I have a JSON file with
a bunch of recipes in it

679
00:30:21,690 --> 00:30:26,040
and each recipe has ingredients,
of course instructions,

680
00:30:26,040 --> 00:30:28,290
how many calories it has.

681
00:30:28,290 --> 00:30:30,450
And then I'm exposing
through the recipe server

682
00:30:30,450 --> 00:30:35,130
some nice tools to grab that information.

683
00:30:35,130 --> 00:30:37,290
You can imagine if this
was in a production,

684
00:30:37,290 --> 00:30:42,180
that JSON file might be
in RDS or somewhere else,

685
00:30:42,180 --> 00:30:45,510
an S3 bucket or, however,

686
00:30:45,510 --> 00:30:46,680
though just for the simple example,

687
00:30:46,680 --> 00:30:49,950
it's just hard coded on the file,

688
00:30:49,950 --> 00:30:51,450
and in an AgentCore when it's deployed,

689
00:30:51,450 --> 00:30:53,253
it's actually in the container.

690
00:30:54,660 --> 00:30:55,493
So here it is.

691
00:30:55,493 --> 00:30:57,990
I have recipes by difficulty,
get quick recipes.

692
00:30:57,990 --> 00:31:01,200
One thing I like to do when
I'm working with agents

693
00:31:01,200 --> 00:31:06,030
is I would like to use the Model
Context Protocol inspector.

694
00:31:06,030 --> 00:31:09,333
So I'm gonna go to my recipe server,

695
00:31:10,530 --> 00:31:13,893
and I'm a big fan of UV
so we're gonna use UV.

696
00:31:15,780 --> 00:31:18,483
And I'm going to use run recipe.

697
00:31:20,160 --> 00:31:22,640
And so now it created a new MCP server

698
00:31:22,640 --> 00:31:25,083
so I can test this locally and port 8,000.

699
00:31:26,220 --> 00:31:31,220
And I'm just gonna go back
up to my command here.

700
00:31:32,730 --> 00:31:35,460
This is an NPX command
to run the inspector.

701
00:31:35,460 --> 00:31:36,810
This is an open source tool

702
00:31:36,810 --> 00:31:41,810
that the MCP foundation has
given us to test MCP servers.

703
00:31:45,600 --> 00:31:48,360
So here it is. This is what it looks like.

704
00:31:48,360 --> 00:31:51,840
I'm using 17.2, I'm using Streamable HTTP,

705
00:31:51,840 --> 00:31:56,310
which is, 'cause it is
running on a server locally.

706
00:31:56,310 --> 00:31:57,600
I'm gonna click connect,

707
00:31:57,600 --> 00:31:59,520
and here's all the
different ways you can work

708
00:31:59,520 --> 00:32:00,450
with an MCP server.

709
00:32:00,450 --> 00:32:03,780
You have resources, prompts, tools, ping,

710
00:32:03,780 --> 00:32:05,910
obviously we're gonna use tools.

711
00:32:05,910 --> 00:32:07,830
And here's the ones that we
just saw on that in file,

712
00:32:07,830 --> 00:32:11,460
the get recipes by type,
get recipes by cuisine.

713
00:32:11,460 --> 00:32:12,293
Let's try it.

714
00:32:12,293 --> 00:32:15,540
Let's try, in this case,
we're gonna say pasta.

715
00:32:15,540 --> 00:32:18,120
So it's gonna get all the pasta recipes

716
00:32:18,120 --> 00:32:20,943
and output it into this
schema that I defined.

717
00:32:21,930 --> 00:32:24,172
So really quick, here it
is, classic spaghetti,

718
00:32:24,172 --> 00:32:27,390
carbonara, beef stroganoff.

719
00:32:27,390 --> 00:32:29,730
So here is the list.
So definitely working.

720
00:32:29,730 --> 00:32:32,280
I always liked when I'm working
with agents and MCP servers,

721
00:32:32,280 --> 00:32:33,690
I always like to test locally first

722
00:32:33,690 --> 00:32:35,070
to make sure it's working.

723
00:32:35,070 --> 00:32:36,670
This is a great tool to do that.

724
00:32:38,160 --> 00:32:43,160
Okay, so now we see what the server is,

725
00:32:43,170 --> 00:32:45,420
that remember in that previous slide,

726
00:32:45,420 --> 00:32:47,070
it was those two MCP servers.

727
00:32:47,070 --> 00:32:50,360
This is the one that's
run by runtime AgentCore.

728
00:32:50,360 --> 00:32:52,290
So in control, see it.

729
00:32:52,290 --> 00:32:53,123
- [Du'An] Erik?

730
00:32:53,123 --> 00:32:53,956
- [Erik] Yep.

731
00:32:53,956 --> 00:32:56,040
- [Du'An] I know a lot of you
all are using MCP servers.

732
00:32:56,040 --> 00:32:58,413
How many are building MCP servers?

733
00:32:59,657 --> 00:33:03,660
Okay, so do you understand,
let's take a step back.

734
00:33:03,660 --> 00:33:05,520
When it comes to what Erik is showing you,

735
00:33:05,520 --> 00:33:08,250
he's showing you how to
build an MCP server, right?

736
00:33:08,250 --> 00:33:11,550
That tool decorator that
goes over the Python function

737
00:33:11,550 --> 00:33:16,230
that lists the agent or the
LLM node that this is a tool

738
00:33:16,230 --> 00:33:18,600
from the MCP server, right?

739
00:33:18,600 --> 00:33:21,150
The type, listen, know the parameters,

740
00:33:21,150 --> 00:33:22,257
that should be passed in.

741
00:33:22,257 --> 00:33:25,800
And then the doc string is
actually what goes to an agent.

742
00:33:25,800 --> 00:33:27,900
So when we talk about, or the LLM,

743
00:33:27,900 --> 00:33:31,500
so when we talk about
increasing the amount of tokens,

744
00:33:31,500 --> 00:33:36,500
all of this is created in a
JSON Schema that goes to LLM.

745
00:33:36,690 --> 00:33:39,810
So in order for an agent to
know how to use that tool,

746
00:33:39,810 --> 00:33:42,540
you need a clearly defined dock stream

747
00:33:42,540 --> 00:33:43,950
inside of your function.

748
00:33:43,950 --> 00:33:47,040
And oftentimes if you just
install an MCP server,

749
00:33:47,040 --> 00:33:49,347
sometimes they load a
whole bunch of information

750
00:33:49,347 --> 00:33:51,270
and it could be a whole lot of tools,

751
00:33:51,270 --> 00:33:53,520
and all of those tokens are processed

752
00:33:53,520 --> 00:33:57,210
every time you invoke the LLM, right?

753
00:33:57,210 --> 00:33:59,310
He did it really efficient and strength.

754
00:33:59,310 --> 00:34:03,660
And this is a kind of
simplified version of an agent.

755
00:34:03,660 --> 00:34:05,340
So it's easy for the agent to understand,

756
00:34:05,340 --> 00:34:06,870
but the more tools you have,

757
00:34:06,870 --> 00:34:08,850
the more information you'll
need in that doc stream.

758
00:34:08,850 --> 00:34:12,210
And so what he showed you is
how to build the MCP server

759
00:34:12,210 --> 00:34:15,270
and then use the inspector
to test it out locally

760
00:34:15,270 --> 00:34:16,770
before you actually deploy it.

761
00:34:18,810 --> 00:34:22,500
- [Erik] Let me show you the
Lambda Gateway real quick.

762
00:34:22,500 --> 00:34:27,420
So this is a normal
Lambda function that was,

763
00:34:27,420 --> 00:34:30,180
I have a handler, I have events coming in.

764
00:34:30,180 --> 00:34:33,450
Imagine this, you just
deployed this to Lambda,

765
00:34:33,450 --> 00:34:36,090
and now you wanna make
this into an MCP server.

766
00:34:36,090 --> 00:34:39,090
So it looks for food and a JSON object

767
00:34:39,090 --> 00:34:40,440
and also serving size.

768
00:34:40,440 --> 00:34:43,740
And so this returns a list of ingredients

769
00:34:43,740 --> 00:34:47,130
and then I just have a quick lookup.

770
00:34:47,130 --> 00:34:49,710
I also have another JSON file here,

771
00:34:49,710 --> 00:34:52,290
this nutrition JSON file.

772
00:34:52,290 --> 00:34:55,830
And this is, and I have
a few commented out code.

773
00:34:55,830 --> 00:34:58,020
You could sell this as a demo.

774
00:34:58,020 --> 00:35:00,780
And then it just returns
a JSON object back.

775
00:35:00,780 --> 00:35:04,170
So this one, this is really
nice that Du'An was talking

776
00:35:04,170 --> 00:35:05,970
about before, if we have existing infra,

777
00:35:05,970 --> 00:35:08,400
and we want to convert it
over to MCP, we can do it.

778
00:35:08,400 --> 00:35:10,350
And you're probably
thinking, is this just magic?

779
00:35:10,350 --> 00:35:13,200
We just like, point it to this
and it kind of just turns it.

780
00:35:13,200 --> 00:35:16,470
Well no, there is another
step you have to do.

781
00:35:16,470 --> 00:35:19,890
In my infra, I have a lib folder,

782
00:35:19,890 --> 00:35:22,380
and then I have an infra stack.

783
00:35:22,380 --> 00:35:23,880
And inside here,

784
00:35:23,880 --> 00:35:28,880
is where I defined my
AgentCore Gateway right here,

785
00:35:29,070 --> 00:35:30,780
this Food Tracker Gateway.

786
00:35:30,780 --> 00:35:33,300
I have to obviously put the
name, there's some auth,

787
00:35:33,300 --> 00:35:35,640
we'll talk about that in a second.

788
00:35:35,640 --> 00:35:39,180
And then right down
here, I define a schema.

789
00:35:39,180 --> 00:35:43,500
And this schema tells basically AgentCore

790
00:35:43,500 --> 00:35:45,180
how this Lambda function is.

791
00:35:45,180 --> 00:35:46,800
And this is saying by the way,

792
00:35:46,800 --> 00:35:50,100
we have a properties for
food and serving size.

793
00:35:50,100 --> 00:35:52,470
Those are the two events
that go into that Lambda

794
00:35:52,470 --> 00:35:54,120
and we just define it as a string.

795
00:35:54,120 --> 00:35:56,130
This is a number, this is an object.

796
00:35:56,130 --> 00:36:00,480
So that way, it knows how
to work with the MCP server.

797
00:36:00,480 --> 00:36:03,213
It basically creates it using this way.

798
00:36:04,470 --> 00:36:07,230
I was gonna ask Du'An, I
haven't mentioned this,

799
00:36:07,230 --> 00:36:10,590
but everything that's
deployed to AgentCore runtime

800
00:36:10,590 --> 00:36:14,640
is backed by IM or you can have it backed

801
00:36:14,640 --> 00:36:17,370
by like Cognito using OAuth 2.

802
00:36:17,370 --> 00:36:20,310
Do you have anything
to add to that, Du'An?

803
00:36:20,310 --> 00:36:22,473
- [Du'An] Yeah, so the runtime that,

804
00:36:24,210 --> 00:36:25,770
it's a public service, right?

805
00:36:25,770 --> 00:36:29,184
So if you're trying to connect
to it, you can use Cognito,

806
00:36:29,184 --> 00:36:32,370
extract the JWT token and
connect to the runtime, right?

807
00:36:32,370 --> 00:36:34,557
You also can use third-party
providers with like OAuth.

808
00:36:34,557 --> 00:36:36,780
You can set that up through identity

809
00:36:36,780 --> 00:36:39,030
so that access inbound to the agent,

810
00:36:39,030 --> 00:36:41,340
but then outbound as well
from like the Gateway,

811
00:36:41,340 --> 00:36:44,400
if the Gateway needs to
access third-party APIs,

812
00:36:44,400 --> 00:36:46,860
you can use AgentCore identity to set all

813
00:36:46,860 --> 00:36:49,950
that up to provide the agent
with all the authentication

814
00:36:49,950 --> 00:36:52,300
and needs to be able to
connect to those tools.

815
00:36:53,550 --> 00:36:55,440
- [Erik] And we do have an L2 construct

816
00:36:55,440 --> 00:36:59,403
with AgentCore Gateway for
you CDK fans out there.

817
00:37:00,248 --> 00:37:01,740
And of course, all our libraries,

818
00:37:01,740 --> 00:37:04,920
you can easily connect to AgentCore.

819
00:37:04,920 --> 00:37:07,320
I wanted to show you the recipe agent now.

820
00:37:07,320 --> 00:37:10,380
So this is the orchestration
tool that talks-

821
00:37:10,380 --> 00:37:11,490
- [Du'An] We got a question, Erik.

822
00:37:11,490 --> 00:37:12,990
- [Erik] Oh, sure.

823
00:37:12,990 --> 00:37:13,980
- [Attendee] Just a small one, right?

824
00:37:13,980 --> 00:37:16,680
Like, so in case we are
exposing Lambda function

825
00:37:16,680 --> 00:37:21,060
via Gateway, what is the tool name?

826
00:37:21,060 --> 00:37:24,393
Like, what tools do it
expose? How do I know?

827
00:37:25,710 --> 00:37:28,890
- [Du'An] Oh, that's what you
listed before in the schema.

828
00:37:28,890 --> 00:37:33,840
- [Erik] Yeah, this schema
here describes the tool name

829
00:37:33,840 --> 00:37:37,413
and the tool definition,
the properties of each one,

830
00:37:38,250 --> 00:37:42,510
and it automatically
creates a set of tools,

831
00:37:42,510 --> 00:37:46,560
and I'll show you what that
looks like based on this.

832
00:37:46,560 --> 00:37:49,590
And you can even be more
granular than I did here.

833
00:37:49,590 --> 00:37:51,060
- [Attendee] Okay, got it.

834
00:37:51,060 --> 00:37:55,083
- [Du'An] Yep. Any other
questions before we move on?

835
00:37:55,920 --> 00:37:59,400
- [Erik] So this recipe agent, oh sorry.

836
00:37:59,400 --> 00:38:00,450
- [Du'An] Okay.

837
00:38:00,450 --> 00:38:02,340
- [Erik] All right, so yeah,
this recipe agent is going

838
00:38:02,340 --> 00:38:04,383
to talk to those two MCP servers.

839
00:38:06,360 --> 00:38:10,290
I have a number of tools
in here that do things.

840
00:38:10,290 --> 00:38:12,420
So this is MCP server and agent together

841
00:38:12,420 --> 00:38:14,700
so it's gonna take a
little bit longer to run,

842
00:38:14,700 --> 00:38:16,230
but I have things for,

843
00:38:16,230 --> 00:38:19,380
I have this system prompt
that it's a nutritional coach,

844
00:38:19,380 --> 00:38:21,630
it's gonna filter these
different tools out.

845
00:38:21,630 --> 00:38:22,710
I have different system prompts

846
00:38:22,710 --> 00:38:25,350
depending on which tool you talk to.

847
00:38:25,350 --> 00:38:28,380
I think the best way to
show this is just to run it,

848
00:38:28,380 --> 00:38:29,793
and let's take a look at it,

849
00:38:30,810 --> 00:38:33,480
instead of you guys looking at the code.

850
00:38:33,480 --> 00:38:35,910
So we're gonna do, I'm
in the recipe agent,

851
00:38:35,910 --> 00:38:38,043
I'm gonna UV run the recipe agent.

852
00:38:39,360 --> 00:38:42,060
And since this is also an MCP tool,

853
00:38:42,060 --> 00:38:44,820
it should give us port 8,000,

854
00:38:44,820 --> 00:38:48,150
which means I can run my inspector again,

855
00:38:48,150 --> 00:38:52,227
take a look at it and I'll connect to it.

856
00:38:52,227 --> 00:38:54,993
And this time, if I go
to tools and list tools,

857
00:38:56,310 --> 00:38:57,960
you can see I have lookup
ingredient nutrition,

858
00:38:57,960 --> 00:39:01,980
analyze recipe nutrition,
create weekly meal prep.

859
00:39:01,980 --> 00:39:05,190
So this is all the tools that
are exposed, these four tools,

860
00:39:05,190 --> 00:39:08,040
it's basically taking
all the tools that came

861
00:39:08,040 --> 00:39:10,530
from those two MCP servers
and it's distilling it

862
00:39:10,530 --> 00:39:13,860
down to these like four higher
level ones that you can do.

863
00:39:13,860 --> 00:39:16,920
So I can look up ingredient nutrition,

864
00:39:16,920 --> 00:39:20,700
let's try that, pancetta,
serving size, run tool.

865
00:39:20,700 --> 00:39:23,070
And this is gonna take
a little bit longer,

866
00:39:23,070 --> 00:39:24,810
but if I look here,
I'm running it locally,

867
00:39:24,810 --> 00:39:29,280
you could see it's calling
the Bedrock Gateway AgentCore

868
00:39:29,280 --> 00:39:30,120
that we just created.

869
00:39:30,120 --> 00:39:31,710
I actually have this
deployed on AgentCore,

870
00:39:31,710 --> 00:39:33,390
not just running locally.

871
00:39:33,390 --> 00:39:35,490
It found two tools, this X AW,

872
00:39:35,490 --> 00:39:37,860
Amazon Bedrock AgentCore
search, nutrition lookup,

873
00:39:37,860 --> 00:39:39,600
get nutrition info.

874
00:39:39,600 --> 00:39:41,430
And now, it's invoking the agent

875
00:39:41,430 --> 00:39:44,070
and getting that information back.

876
00:39:44,070 --> 00:39:46,860
So it determined that I needed
to use the nutrition lookup,

877
00:39:46,860 --> 00:39:49,020
get nutrition info tool.

878
00:39:49,020 --> 00:39:52,320
That's what we saw in
that previous MCP server.

879
00:39:52,320 --> 00:39:53,220
It looks like it retrieved it.

880
00:39:53,220 --> 00:39:58,220
So now it's using its
model to kinda update it

881
00:39:58,590 --> 00:40:00,540
and format it for us to display.

882
00:40:00,540 --> 00:40:03,333
Lemme see if it's done.
It's still running.

883
00:40:04,620 --> 00:40:09,620
It's taking a little
extra second here to run.

884
00:40:10,200 --> 00:40:14,553
So let's take a look at the
tool call while it's running.

885
00:40:15,780 --> 00:40:20,780
If I go back to the
recipe or the nutrition,

886
00:40:22,050 --> 00:40:27,050
and we look back at the
nutrition Python file,

887
00:40:27,630 --> 00:40:30,630
this is the different cool tool calls.

888
00:40:30,630 --> 00:40:33,360
Well, we have find nutrition
info, find similar food.

889
00:40:33,360 --> 00:40:37,200
So the one it called was,
here it is, it finished,

890
00:40:37,200 --> 00:40:39,243
was nutrition lookup.

891
00:40:41,850 --> 00:40:42,683
Oops.

892
00:40:45,450 --> 00:40:47,340
So this one right here,
nutrition lookup function.

893
00:40:47,340 --> 00:40:50,820
So it's basically using this
with these tools in the,

894
00:40:50,820 --> 00:40:52,200
well, basically this is a Lambda function.

895
00:40:52,200 --> 00:40:53,820
It was able to convert them into tools,

896
00:40:53,820 --> 00:40:55,830
and it ran this nutrition lookup

897
00:40:55,830 --> 00:40:57,090
based on that schema we saw.

898
00:40:57,090 --> 00:41:00,720
So let's see if we come back
over here. Here it is, success.

899
00:41:00,720 --> 00:41:01,710
So here's pancetta,

900
00:41:01,710 --> 00:41:05,130
and now it kinda gave me a
detailed information about it.

901
00:41:05,130 --> 00:41:07,440
Pancetta is a cured
Italian meat product made

902
00:41:07,440 --> 00:41:08,610
from pork belly.

903
00:41:08,610 --> 00:41:10,020
Great.

904
00:41:10,020 --> 00:41:12,990
- [Du'An] Now, this did
take a little while, right?

905
00:41:12,990 --> 00:41:15,570
We're building an agent,
it's not a chatbot.

906
00:41:15,570 --> 00:41:17,880
You know, agents when they run,

907
00:41:17,880 --> 00:41:19,530
are designed to take a little longer.

908
00:41:19,530 --> 00:41:22,920
Like, if you use OpenAI, ChatGPT,

909
00:41:22,920 --> 00:41:26,551
and you do deep research,
that could take up to 15,

910
00:41:26,551 --> 00:41:28,590
20 minutes, and it runs
like in the background,

911
00:41:28,590 --> 00:41:30,240
and notifies you when you're done.

912
00:41:30,240 --> 00:41:32,250
So when you think about AgentCore runtime,

913
00:41:32,250 --> 00:41:35,970
it's designed to support
workloads up to eight hours.

914
00:41:35,970 --> 00:41:38,730
So if you're building
a deep research agent,

915
00:41:38,730 --> 00:41:41,790
this is the type of platform
you would deploy it to.

916
00:41:41,790 --> 00:41:44,310
So that way when you need
something like deep research

917
00:41:44,310 --> 00:41:48,750
or some deep analysis or some
agentic function to occur,

918
00:41:48,750 --> 00:41:51,300
runtime can handle
that, complete the task,

919
00:41:51,300 --> 00:41:54,513
and then that session is
done, it's ephemeral, right?

920
00:41:55,560 --> 00:41:58,653
- [Erik] Let's take a
look at the food tracker.

921
00:41:58,653 --> 00:42:03,653
This is the agent on
top of everything else.

922
00:42:03,660 --> 00:42:07,350
It calls the recipe agent that
calls those two MCP servers.

923
00:42:07,350 --> 00:42:09,510
It's called NutriTracker.

924
00:42:09,510 --> 00:42:11,820
So it's a friendly nutrition
and meal plan assistant.

925
00:42:11,820 --> 00:42:13,770
This is the system
prompt that I passed in.

926
00:42:13,770 --> 00:42:18,770
It's using Anthropic, I think
3.7, I think, right here.

927
00:42:18,960 --> 00:42:21,060
Anthropic 3.7.

928
00:42:21,060 --> 00:42:24,330
It's also using a few other tools.

929
00:42:24,330 --> 00:42:26,070
It's using our Strands Agent,

930
00:42:26,070 --> 00:42:28,830
which is an open source
tool that AWS released

931
00:42:28,830 --> 00:42:31,020
to help create agents.

932
00:42:31,020 --> 00:42:34,230
Like, Du'An said earlier, you
don't have to use Strands,

933
00:42:34,230 --> 00:42:39,230
it works with pretty much
every other agent framework.

934
00:42:39,960 --> 00:42:44,960
I'm also using the
Bedrock AgentCore library

935
00:42:45,030 --> 00:42:46,800
to put this all together.

936
00:42:46,800 --> 00:42:48,600
All those other ones were MCP servers.

937
00:42:48,600 --> 00:42:50,190
This is gonna be the main entry point

938
00:42:50,190 --> 00:42:52,470
and I'm instantiating
it here with this app,

939
00:42:52,470 --> 00:42:54,120
with this Bedrock AgentCore app.

940
00:42:54,120 --> 00:42:56,400
And then I have some
environmental variables,

941
00:42:56,400 --> 00:42:59,100
some definitions of
where to find everything.

942
00:42:59,100 --> 00:43:01,320
And if I scroll all the way to the bottom,

943
00:43:01,320 --> 00:43:04,170
it's essentially connecting to everything.

944
00:43:04,170 --> 00:43:08,370
It has to use this machine to
machine client authentication

945
00:43:08,370 --> 00:43:11,970
because we're talking to
the, it's already deployed,

946
00:43:11,970 --> 00:43:16,053
it needs to talk to the
recipe agent, MCP server.

947
00:43:16,950 --> 00:43:19,760
I think the best way to
show you this is just

948
00:43:19,760 --> 00:43:23,223
to jump into the demo on
the front end at this time.

949
00:43:25,230 --> 00:43:27,000
So I can't get to the front
end from the back end.

950
00:43:27,000 --> 00:43:29,730
Let's go to the front end,

951
00:43:29,730 --> 00:43:32,070
and I'm just gonna run dev on this.

952
00:43:32,070 --> 00:43:34,863
So I'm running a port 5173.

953
00:43:35,730 --> 00:43:40,290
Okay, so here's the Health
Agent with Authentication.

954
00:43:40,290 --> 00:43:42,700
One thing I wanna show real quick

955
00:43:44,070 --> 00:43:45,750
is that we actually are using memory.

956
00:43:45,750 --> 00:43:47,580
I think someone asked a
memory question earlier.

957
00:43:47,580 --> 00:43:49,830
So this is using short-term memory.

958
00:43:49,830 --> 00:43:51,630
It looks like this, this
is how you set it up.

959
00:43:51,630 --> 00:43:54,870
This agent memory core config is part

960
00:43:54,870 --> 00:43:57,690
of our Strands Agents' library.

961
00:43:57,690 --> 00:43:59,430
We're telling it this retrieval.

962
00:43:59,430 --> 00:44:01,412
Do you wanna talk about
this for a second, Du'An?

963
00:44:01,412 --> 00:44:02,245
- [Du'An] Yes.

964
00:44:02,245 --> 00:44:04,110
So this is the AgentCore
memory configuration.

965
00:44:04,110 --> 00:44:06,600
And so if you see where
it says retrieval config,

966
00:44:06,600 --> 00:44:09,210
that's where we're extracting
from the long-term memory,

967
00:44:09,210 --> 00:44:10,223
right?

968
00:44:10,223 --> 00:44:11,056
The short-term memory

969
00:44:11,056 --> 00:44:12,660
is going to retrieve all the conversation,

970
00:44:12,660 --> 00:44:14,280
the session information, right?

971
00:44:14,280 --> 00:44:17,760
The user assistant messages
along with tool calls

972
00:44:17,760 --> 00:44:18,750
and the state.

973
00:44:18,750 --> 00:44:19,920
That's short-term memory.

974
00:44:19,920 --> 00:44:23,010
But if we want to extract
the user preferences or facts

975
00:44:23,010 --> 00:44:25,590
about the conversations and interactions,

976
00:44:25,590 --> 00:44:28,320
that's what we're actually
using the semantic search

977
00:44:28,320 --> 00:44:31,470
to extract from that long-term memory.

978
00:44:31,470 --> 00:44:33,180
And you can see that listed here.

979
00:44:33,180 --> 00:44:35,250
That's the actual implementation

980
00:44:35,250 --> 00:44:37,137
of the memory abstraction config.

981
00:44:37,137 --> 00:44:40,020
And so we set up the memory config,

982
00:44:40,020 --> 00:44:42,060
and then we pass that into the agent.

983
00:44:42,060 --> 00:44:44,370
So if you look at the session manager,

984
00:44:44,370 --> 00:44:46,950
we pass that into the
session manager of the agent.

985
00:44:46,950 --> 00:44:49,320
So now, when the agent has conversations

986
00:44:49,320 --> 00:44:51,630
during that event loop,
if you know Strands,

987
00:44:51,630 --> 00:44:54,180
Strands Agents uses something
called the event loop.

988
00:44:54,180 --> 00:44:55,740
Normally when you build a chatbot

989
00:44:55,740 --> 00:44:59,250
or some type of integration with an agent,

990
00:44:59,250 --> 00:45:01,503
you have a user message, system message,

991
00:45:02,730 --> 00:45:06,150
assistant response tool,
tool calls, tool results,

992
00:45:06,150 --> 00:45:09,570
all of that needs to be managed
when you write that code.

993
00:45:09,570 --> 00:45:11,760
The Strands Agent actually handles

994
00:45:11,760 --> 00:45:13,317
that through the event loop, right?

995
00:45:13,317 --> 00:45:17,130
And so in there with that
conversation management

996
00:45:17,130 --> 00:45:19,080
or that session management is being stored

997
00:45:19,080 --> 00:45:20,610
in the session manager.

998
00:45:20,610 --> 00:45:22,200
Something we don't show here

999
00:45:22,200 --> 00:45:24,900
is that context can get very large.

1000
00:45:24,900 --> 00:45:27,660
And so we handle the
conversation automatically

1001
00:45:27,660 --> 00:45:29,100
with a conversation manager.

1002
00:45:29,100 --> 00:45:30,360
There's two approaches.

1003
00:45:30,360 --> 00:45:34,650
There's a summarization and
then there's a sliding window.

1004
00:45:34,650 --> 00:45:36,120
Sliding window is the default.

1005
00:45:36,120 --> 00:45:37,830
So after 20 messages,

1006
00:45:37,830 --> 00:45:41,613
the older messages in the
conversation will be removed.

1007
00:45:44,250 --> 00:45:45,256
We got questions.

1008
00:45:45,256 --> 00:45:46,089
- [Erik] I like how
this all works together

1009
00:45:46,089 --> 00:45:47,940
with the Strands Agents pretty well.

1010
00:45:47,940 --> 00:45:49,083
- [Du'An] Yes. Okay.

1011
00:45:51,180 --> 00:45:54,420
- [Erik] I'm logged in here
to my Health Agent app.

1012
00:45:54,420 --> 00:45:56,190
I'm just gonna say hello.

1013
00:45:56,190 --> 00:46:00,300
And what I like to do is
also up on my inspect,

1014
00:46:00,300 --> 00:46:04,110
and then I go to the network
tab just to see it working.

1015
00:46:04,110 --> 00:46:06,840
It's a little slow just
basing on the network

1016
00:46:06,840 --> 00:46:10,650
that we're on and the models
we're using just for our demo.

1017
00:46:10,650 --> 00:46:12,000
But here it is.

1018
00:46:12,000 --> 00:46:12,833
Hello, Erik.

1019
00:46:12,833 --> 00:46:14,100
I'm still here and ready to
help you with your nutrition

1020
00:46:14,100 --> 00:46:15,900
or meal planning questions you might have.

1021
00:46:15,900 --> 00:46:17,100
I actually gave it my name

1022
00:46:17,100 --> 00:46:18,510
before we started this demo today.

1023
00:46:18,510 --> 00:46:19,350
But I wanna show you

1024
00:46:19,350 --> 00:46:21,960
just that AgentCore memory
working real quickly

1025
00:46:21,960 --> 00:46:24,870
before we have it kind
of do some other things.

1026
00:46:24,870 --> 00:46:26,700
So I'm gonna sign out here.

1027
00:46:26,700 --> 00:46:30,030
I built this using,
this is a Cognito login.

1028
00:46:30,030 --> 00:46:31,500
This is something called
the Authenticator.

1029
00:46:31,500 --> 00:46:34,230
It's just a real quick
boilerplate I added to it

1030
00:46:34,230 --> 00:46:36,783
to add in a way to log in.

1031
00:46:37,650 --> 00:46:40,080
And so now I'm logged in here,

1032
00:46:40,080 --> 00:46:44,970
and I'll say hello, my name is Erik.

1033
00:46:44,970 --> 00:46:49,050
And so now this is a new session
basically with a new user.

1034
00:46:49,050 --> 00:46:54,050
So it should talk back to me
as if it was the first time

1035
00:46:54,300 --> 00:46:56,580
I was logged in with a different user,

1036
00:46:56,580 --> 00:46:59,250
the first time when I just said hello.

1037
00:46:59,250 --> 00:47:02,130
And I could see it's
running the invocation here,

1038
00:47:02,130 --> 00:47:05,070
and I can even take a look at the stream.

1039
00:47:05,070 --> 00:47:06,390
So hello, Erik, it's nice to meet you.

1040
00:47:06,390 --> 00:47:07,680
How can I help you with your nutrition

1041
00:47:07,680 --> 00:47:08,830
or meal planning today?

1042
00:47:09,690 --> 00:47:13,953
So if I log out and I log back in,

1043
00:47:18,750 --> 00:47:20,853
and I say, what is my name?

1044
00:47:24,180 --> 00:47:26,520
It should remember that I said it was Erik

1045
00:47:26,520 --> 00:47:29,163
from this new session that I created here.

1046
00:47:31,094 --> 00:47:34,260
And then it'll retrieve
from that short-term memory

1047
00:47:34,260 --> 00:47:37,200
what it saw and then bring it back here.

1048
00:47:37,200 --> 00:47:39,960
And it looks like it's
running this invocation here.

1049
00:47:39,960 --> 00:47:41,250
I always like to kind
of play around with it

1050
00:47:41,250 --> 00:47:45,300
and look at it to see what it's doing.

1051
00:47:45,300 --> 00:47:48,042
The response, you can even see-

1052
00:47:48,042 --> 00:47:50,088
(attendees chattering)

1053
00:47:50,088 --> 00:47:50,940
- [Attendee] Short-term or
would it be from long-term?

1054
00:47:51,780 --> 00:47:53,190
- [Du'An] From long-term.

1055
00:47:53,190 --> 00:47:54,720
It'll be from long term
'cause you signed out,

1056
00:47:54,720 --> 00:47:55,553
signed back in.

1057
00:47:55,553 --> 00:47:57,540
When you sign out, that ends that session.

1058
00:47:57,540 --> 00:47:59,310
When you sign back in, it's a new session.

1059
00:47:59,310 --> 00:48:02,790
So the user preferences will get stored

1060
00:48:02,790 --> 00:48:04,050
to the long-term memory.

1061
00:48:04,050 --> 00:48:05,400
So it should remember his name

1062
00:48:05,400 --> 00:48:07,200
and bring that back into the conversation.

1063
00:48:07,200 --> 00:48:09,000
A key thing to call out here

1064
00:48:09,000 --> 00:48:12,360
and Erik can show you
is that we designed it

1065
00:48:12,360 --> 00:48:16,200
so the system prompt knows that
whenever the user addresses

1066
00:48:16,200 --> 00:48:19,200
or has some type of
personalized interaction,

1067
00:48:19,200 --> 00:48:20,880
that it should address you by name.

1068
00:48:20,880 --> 00:48:22,470
So that way, you'll see,

1069
00:48:22,470 --> 00:48:25,587
and have this personalized user
experience in your app, so.

1070
00:48:25,587 --> 00:48:27,388
- [Attendee] Was that the LLM

1071
00:48:27,388 --> 00:48:29,640
that decided (indistinct)
in the long-term there?

1072
00:48:29,640 --> 00:48:33,480
- [Du'An] Yes, so that's all
the LLM, but the retrieval,

1073
00:48:33,480 --> 00:48:34,980
you saw the memory config,

1074
00:48:34,980 --> 00:48:36,870
that's actually extracting automatically

1075
00:48:36,870 --> 00:48:39,870
from the long-term memory
and appended it to the prompt

1076
00:48:39,870 --> 00:48:42,690
so that way when the
prompt goes into the LLM,

1077
00:48:42,690 --> 00:48:46,170
it has the information
it needs to know, okay,

1078
00:48:46,170 --> 00:48:48,540
the related information
related to the name,

1079
00:48:48,540 --> 00:48:50,730
let me retrieve that,
append it to the prompt,

1080
00:48:50,730 --> 00:48:52,173
and then invoke the model.

1081
00:48:53,190 --> 00:48:54,948
No problem. I got one back here.

1082
00:48:54,948 --> 00:48:56,070
- [Erik] While you're
answering questions, Du'An,

1083
00:48:56,070 --> 00:48:58,590
I asked it, can you create
meal prep plan for a week

1084
00:48:58,590 --> 00:49:00,930
for 1500 calories or under?

1085
00:49:00,930 --> 00:49:04,140
So now, it's going to use these agents

1086
00:49:04,140 --> 00:49:05,130
that are connected to it.

1087
00:49:05,130 --> 00:49:08,070
It's gonna go back and forth,
run that loop a few times,

1088
00:49:08,070 --> 00:49:10,653
and return back and answer for me.

1089
00:49:12,390 --> 00:49:13,555
- [Du'An] Oh, we got one question.

1090
00:49:13,555 --> 00:49:14,388
- [Attendee] I have a question here.

1091
00:49:14,388 --> 00:49:16,290
So basically this agent memory,

1092
00:49:16,290 --> 00:49:19,470
whatever system parameters
that are in the,

1093
00:49:19,470 --> 00:49:21,810
like, is there some set
of system parameters

1094
00:49:21,810 --> 00:49:23,550
that it knows to store itself

1095
00:49:23,550 --> 00:49:25,830
and some kind of customizable parameters

1096
00:49:25,830 --> 00:49:28,473
or it's just basically
all up to how you code it?

1097
00:49:30,360 --> 00:49:31,770
- [Du'An] Erik, you mind going back

1098
00:49:31,770 --> 00:49:33,320
to the memory slide real quick?

1099
00:49:34,290 --> 00:49:36,210
- [Erik] The memory
slide or the memory code?

1100
00:49:36,210 --> 00:49:38,220
- [Du'An] The memory slide.
- [Erik] Okay.

1101
00:49:38,220 --> 00:49:39,750
- [Du'An] Yes. Is that possible?

1102
00:49:39,750 --> 00:49:42,150
- [Erik] Yeah, gimme a
sec while that's working.

1103
00:49:45,600 --> 00:49:47,310
- [Du'An] So we'll go
back to the memory slide

1104
00:49:47,310 --> 00:49:50,073
and I'll show you here what it looks like.

1105
00:49:51,540 --> 00:49:56,540
- [Erik] Let's see here. Let's
see all the way back here.

1106
00:49:59,220 --> 00:50:01,803
This is observability, Gateway.

1107
00:50:02,790 --> 00:50:05,939
- [Du'An] I think it's before
this one. Alright, so here.

1108
00:50:05,939 --> 00:50:07,830
All right, so when we actually create,

1109
00:50:07,830 --> 00:50:11,730
you have to create a
long-term memory strategy.

1110
00:50:11,730 --> 00:50:12,840
And so if you look,

1111
00:50:12,840 --> 00:50:15,090
the short-term memory is
the chat conversations,

1112
00:50:15,090 --> 00:50:18,090
chat messages, the user
assistant messages,

1113
00:50:18,090 --> 00:50:19,920
and the session state.

1114
00:50:19,920 --> 00:50:24,870
That's short-term that can
last up to 30 days per session,

1115
00:50:24,870 --> 00:50:25,703
right?

1116
00:50:25,703 --> 00:50:29,370
The long-term memory, you have
to create these strategies.

1117
00:50:29,370 --> 00:50:31,140
So you can have a semantic

1118
00:50:31,140 --> 00:50:33,480
where you extracting semantic search

1119
00:50:33,480 --> 00:50:36,690
from the actual conversation
of the search on memory,

1120
00:50:36,690 --> 00:50:39,240
the user preferences where
things like your name,

1121
00:50:39,240 --> 00:50:41,970
your birthdate, is
actually being extracted,

1122
00:50:41,970 --> 00:50:43,950
the summary, episodic.

1123
00:50:43,950 --> 00:50:46,410
And then you can create
custom strategies as well.

1124
00:50:46,410 --> 00:50:48,750
So you create these with CDK or something,

1125
00:50:48,750 --> 00:50:50,790
you deploy it inside of memory,

1126
00:50:50,790 --> 00:50:54,630
and then from there, you have
the retrieve memory records.

1127
00:50:54,630 --> 00:50:56,550
That's a function call, right?

1128
00:50:56,550 --> 00:50:59,340
That you use to retrieve the records

1129
00:50:59,340 --> 00:51:01,890
and bring it into context for the agent.

1130
00:51:01,890 --> 00:51:06,840
Now the SDK or the AgentCore SDK,

1131
00:51:07,860 --> 00:51:09,840
when we create the memory config,

1132
00:51:09,840 --> 00:51:11,700
and we added it to the Strands Agent,

1133
00:51:11,700 --> 00:51:15,000
that's handling it all
that for us automatically.

1134
00:51:15,000 --> 00:51:17,820
But you can use something
called an event hook

1135
00:51:17,820 --> 00:51:21,060
where you can extract this
and design it however you want

1136
00:51:21,060 --> 00:51:23,073
and Strands Agent supports that.

1137
00:51:24,060 --> 00:51:27,360
- [Erik] Alright, let's
jump back to the demo.

1138
00:51:27,360 --> 00:51:31,830
So here, I asked it a question
to find the meal prep.

1139
00:51:31,830 --> 00:51:34,080
So I was able to take
those two MCP servers,

1140
00:51:34,080 --> 00:51:36,270
use the agents and come up with a list

1141
00:51:36,270 --> 00:51:40,110
of our daily meal breakdown.

1142
00:51:40,110 --> 00:51:42,420
So it said, I'm happy, a
weekly meal prep for you, Erik.

1143
00:51:42,420 --> 00:51:43,530
I'll design a balanced meal

1144
00:51:43,530 --> 00:51:45,510
with meals total of 1500 calories.

1145
00:51:45,510 --> 00:51:49,950
And it has each meal
breakdown for each day.

1146
00:51:49,950 --> 00:51:51,120
So I think it would be interesting,

1147
00:51:51,120 --> 00:51:52,710
you're probably thinking
like, how did it do this?

1148
00:51:52,710 --> 00:51:55,350
Let's look at the
observability real quick,

1149
00:51:55,350 --> 00:51:58,048
and we'll show you how it works.

1150
00:51:58,048 --> 00:51:58,881
So, Du'An.

1151
00:51:58,881 --> 00:52:00,131
- [Du'An] Yes.

1152
00:52:02,190 --> 00:52:03,870
- [Erik] Can we leave the
question just to the end

1153
00:52:03,870 --> 00:52:05,339
so we can show this observability?

1154
00:52:05,339 --> 00:52:06,180
- [Du'An] All right, I'll show that.

1155
00:52:06,180 --> 00:52:07,013
- [Erik] Yeah,

1156
00:52:07,013 --> 00:52:08,450
I think we're just running
a little bit outta time.

1157
00:52:08,450 --> 00:52:09,390
- [Du'An] 10 minutes.

1158
00:52:09,390 --> 00:52:12,933
Alright, so I'm gonna hop
in and show observability.

1159
00:52:16,140 --> 00:52:17,460
All right, so the first thing we wanna do

1160
00:52:17,460 --> 00:52:20,613
is open up AgentCore,
see if we can zoom in,

1161
00:52:21,450 --> 00:52:23,160
so we all can see this.

1162
00:52:23,160 --> 00:52:25,230
Now, inside of the console,

1163
00:52:25,230 --> 00:52:29,550
and you can get to a lot
of this from the terminal.

1164
00:52:29,550 --> 00:52:31,230
Like, if you are using the starter kit,

1165
00:52:31,230 --> 00:52:34,170
you can view a lot of the CloudWatch logs.

1166
00:52:34,170 --> 00:52:37,020
But a key thing, we'll
go into the runtime,

1167
00:52:37,020 --> 00:52:39,630
and once we're in here,
we'll go down to the agent

1168
00:52:39,630 --> 00:52:44,630
that is running and we have
our food tracker agent.

1169
00:52:47,430 --> 00:52:51,150
Notice that the versions,
so as you launch a new agent

1170
00:52:51,150 --> 00:52:53,940
or update the agent and
launch it into AgentCore,

1171
00:52:53,940 --> 00:52:55,620
it creates a new version.

1172
00:52:55,620 --> 00:52:57,570
And that's important to remember

1173
00:52:57,570 --> 00:53:02,570
because that version will become
the default version, right?

1174
00:53:02,940 --> 00:53:05,040
So the latest version goes to default.

1175
00:53:05,040 --> 00:53:07,020
So whenever you invoke the agent,

1176
00:53:07,020 --> 00:53:09,303
now you're invoking the latest version.

1177
00:53:10,200 --> 00:53:12,240
And so that's something
you have to keep in mind.

1178
00:53:12,240 --> 00:53:14,250
Now, once you're in here,

1179
00:53:14,250 --> 00:53:16,530
you see the endpoint for that agent,

1180
00:53:16,530 --> 00:53:18,150
you have the CloudWatch logs,

1181
00:53:18,150 --> 00:53:22,830
and the CloudWatch gen AI
observability for the agent.

1182
00:53:22,830 --> 00:53:24,880
First thing we'll do is go into the logs.

1183
00:53:26,190 --> 00:53:27,960
The thing I like about the logs

1184
00:53:27,960 --> 00:53:31,980
is that you can actually go in
and look at the log streams.

1185
00:53:31,980 --> 00:53:34,690
So that shows you if we go
into the latest log stream

1186
00:53:35,550 --> 00:53:37,320
with the inputs, with the outputs

1187
00:53:37,320 --> 00:53:40,440
that were actually happening
inside of the agent, right?

1188
00:53:40,440 --> 00:53:42,270
So if you're getting some type of mirrors,

1189
00:53:42,270 --> 00:53:45,090
some type of error, some
type of authentication issue,

1190
00:53:45,090 --> 00:53:46,890
or there's an issue with your code,

1191
00:53:46,890 --> 00:53:48,660
if you go into the log stream,

1192
00:53:48,660 --> 00:53:51,510
you can view all of that here, right?

1193
00:53:51,510 --> 00:53:55,260
Clearly defined line by line
what's happening in an agent,

1194
00:53:55,260 --> 00:53:57,660
you can see that, so you can
put your print statements.

1195
00:53:57,660 --> 00:54:00,120
If you use Lambda function
and you troubleshoot those,

1196
00:54:00,120 --> 00:54:02,973
you can pretty much do the
same thing with the runtime.

1197
00:54:04,230 --> 00:54:06,750
Now, the key thing that we all care

1198
00:54:06,750 --> 00:54:09,090
about is the gen AI observability.

1199
00:54:09,090 --> 00:54:10,890
And once we're in here,

1200
00:54:10,890 --> 00:54:14,190
this takes us into the
default agent, right?

1201
00:54:14,190 --> 00:54:16,500
The agent's default, the latest version.

1202
00:54:16,500 --> 00:54:19,620
And what you'll see when it
comes to gen AI observability,

1203
00:54:19,620 --> 00:54:21,870
you have the session.

1204
00:54:21,870 --> 00:54:24,540
Under the session, you have traces,

1205
00:54:24,540 --> 00:54:27,090
which is beginning to end, right?

1206
00:54:27,090 --> 00:54:30,840
So if you invoke, the
response is one trace.

1207
00:54:30,840 --> 00:54:33,030
Now, inside of a trace, you have spans.

1208
00:54:33,030 --> 00:54:35,280
That's every step that happens inside.

1209
00:54:35,280 --> 00:54:36,840
So if we go into the sessions,

1210
00:54:36,840 --> 00:54:41,010
we'll click the latest session
from when Erik just invoked

1211
00:54:41,010 --> 00:54:43,760
the agent, and then we'll
actually take a look at that.

1212
00:54:50,100 --> 00:54:52,290
- [Erik] It does take a few
moments to load the traces,

1213
00:54:52,290 --> 00:54:54,063
especially on the network we're on.

1214
00:54:56,010 --> 00:54:57,993
Sometimes refresh it there.

1215
00:55:00,660 --> 00:55:01,950
- [Du'An] Yeah, it takes a moment

1216
00:55:01,950 --> 00:55:05,490
for the gen AI observability to populate.

1217
00:55:05,490 --> 00:55:06,753
And so once we have that,

1218
00:55:06,753 --> 00:55:11,753
what we can actually do is go
into the agent and look at,

1219
00:55:11,760 --> 00:55:14,253
this is the recipe agent that's there.

1220
00:55:15,660 --> 00:55:17,163
We'll look at all sessions,

1221
00:55:22,140 --> 00:55:23,790
and we'll click on the latest session.

1222
00:55:23,790 --> 00:55:25,020
Notice we have three traces.

1223
00:55:25,020 --> 00:55:28,020
So that means he's invoked the
agent three different times.

1224
00:55:28,020 --> 00:55:30,190
So we'll go to the most recent one

1225
00:55:35,460 --> 00:55:37,650
for this particular agent.

1226
00:55:37,650 --> 00:55:40,020
And so here we have three different traces

1227
00:55:40,020 --> 00:55:42,690
and we can look at the
average trace latency,

1228
00:55:42,690 --> 00:55:45,030
which is something I could
have called out before,

1229
00:55:45,030 --> 00:55:47,190
but you can actually see if we go back

1230
00:55:47,190 --> 00:55:49,050
and I'll go back 'cause that's important.

1231
00:55:49,050 --> 00:55:52,230
But inside of here, when you
actually look at your agent,

1232
00:55:52,230 --> 00:55:54,360
you could look at the
observability for the agents,

1233
00:55:54,360 --> 00:55:57,810
the memory, the tools, the
gateways, and identity.

1234
00:55:57,810 --> 00:56:00,600
So what this shows you is
not just the information

1235
00:56:00,600 --> 00:56:05,520
about the agents, but
the runtime, the latency,

1236
00:56:05,520 --> 00:56:08,130
everything that you wanna know
about the invocation time,

1237
00:56:08,130 --> 00:56:09,600
the errors, the tokens,

1238
00:56:09,600 --> 00:56:12,150
you can see all of that
when it comes to the agent.

1239
00:56:14,531 --> 00:56:16,913
And so we'll go in here to
all sessions one more time.

1240
00:56:20,340 --> 00:56:21,963
We'll click on one trace.

1241
00:56:25,290 --> 00:56:26,790
- [Erik] I really like this detailed view

1242
00:56:26,790 --> 00:56:28,050
that it gives you here.

1243
00:56:28,050 --> 00:56:30,120
- [Du'An] And this is for
one of the MCP servers.

1244
00:56:30,120 --> 00:56:32,250
So you can see here we have the MCP server

1245
00:56:32,250 --> 00:56:34,320
and we just have one span inside of here.

1246
00:56:34,320 --> 00:56:37,860
So we'll have to go back and
find the actual agent session,

1247
00:56:37,860 --> 00:56:39,510
and we can determine that,

1248
00:56:39,510 --> 00:56:42,720
because it's gonna be a lot
more tokens if we look at that.

1249
00:56:42,720 --> 00:56:44,910
So if we come in here
and go to all sessions,

1250
00:56:44,910 --> 00:56:47,760
you can see the latency for this one.

1251
00:56:47,760 --> 00:56:50,070
So we know this actually took a long time,

1252
00:56:50,070 --> 00:56:52,320
so this had to be a
lot of things going on.

1253
00:56:52,320 --> 00:56:54,690
And there's only four different traces.

1254
00:56:54,690 --> 00:56:56,700
So this took about 44 seconds,

1255
00:56:56,700 --> 00:56:58,890
and there's four different invocations.

1256
00:56:58,890 --> 00:57:02,460
So what we could actually
do is narrow down, wow,

1257
00:57:02,460 --> 00:57:05,310
look at the latency on this
one, and there's 20 spans.

1258
00:57:05,310 --> 00:57:07,740
So that means there were
a lot of tool calls,

1259
00:57:07,740 --> 00:57:09,870
a lot of things happening from the time

1260
00:57:09,870 --> 00:57:12,480
that the agent was invoked to the result,

1261
00:57:12,480 --> 00:57:15,360
and the response from the actual model.

1262
00:57:15,360 --> 00:57:19,400
So we can go into this trace,
and once we're in this span,

1263
00:57:23,340 --> 00:57:25,530
notice that this is another MCP server.

1264
00:57:25,530 --> 00:57:29,100
But what we can actually do
is look at each span as we go

1265
00:57:29,100 --> 00:57:34,100
down and we can see, okay,
what's taking the most time?

1266
00:57:35,190 --> 00:57:38,250
All right, we get down here
and we see this invocation.

1267
00:57:38,250 --> 00:57:42,240
This took 53 seconds, right?

1268
00:57:42,240 --> 00:57:44,910
And we can see everything that happened

1269
00:57:44,910 --> 00:57:47,550
from the time we invoked to
the time that we finished.

1270
00:57:47,550 --> 00:57:50,640
We can see the inputs, the outputs,

1271
00:57:50,640 --> 00:57:53,190
and this is a summarized view over here

1272
00:57:53,190 --> 00:57:54,630
of all the spans that happened.

1273
00:57:54,630 --> 00:57:58,350
But we can see every event
that actually happened, right?

1274
00:57:58,350 --> 00:58:00,360
All of the telemetry is in here,

1275
00:58:00,360 --> 00:58:03,210
but if we come into the chat,
you can actually see, okay,

1276
00:58:03,210 --> 00:58:06,540
here's the system message,
here's the user message,

1277
00:58:06,540 --> 00:58:10,890
the assistant message, the tool calls,

1278
00:58:10,890 --> 00:58:14,400
and you can see all of these JSON inputs

1279
00:58:14,400 --> 00:58:15,810
and outputs from the model,

1280
00:58:15,810 --> 00:58:18,600
the agent and user prompts
that were passed in.

1281
00:58:18,600 --> 00:58:20,760
You can see all of that
along with the time,

1282
00:58:20,760 --> 00:58:21,900
the amount of tokens.

1283
00:58:21,900 --> 00:58:24,480
As you can see, input
tokens here, output tokens.

1284
00:58:24,480 --> 00:58:26,130
So if you're really trying to analyze

1285
00:58:26,130 --> 00:58:28,500
and get observability of your agents,

1286
00:58:28,500 --> 00:58:29,760
you can do that for each trace.

1287
00:58:29,760 --> 00:58:31,140
We got a question back there.

1288
00:58:31,140 --> 00:58:34,650
- [Erik] Okay, let's hold
the questions at the end.

1289
00:58:34,650 --> 00:58:36,210
Du'An, do you have anything more?

1290
00:58:36,210 --> 00:58:39,210
- [Du'An] I think it's good
point to go to questions.

1291
00:58:39,210 --> 00:58:41,903
- [Erik] Okay. Alright, well,
let's get a question in then.

1292
00:58:43,740 --> 00:58:46,143
We got a question? Okay, we got one.

1293
00:58:47,550 --> 00:58:48,660
- [Du'An] Yeah, he had
one in front and then-

1294
00:58:48,660 --> 00:58:49,590
- [Erik] I'm sorry. Yeah, go ahead.

1295
00:58:49,590 --> 00:58:50,490
You can go ahead now.

1296
00:58:50,490 --> 00:58:53,730
- [Attendee] Okay, my question
was when you were saying

1297
00:58:53,730 --> 00:58:56,670
that for the agent, if you
use the semantic search,

1298
00:58:56,670 --> 00:58:59,103
it's gonna avoid using too many tokens.

1299
00:59:00,035 --> 00:59:03,690
That's the part when you
are getting the memory

1300
00:59:03,690 --> 00:59:07,890
for the config and getting
from the long-term memory

1301
00:59:07,890 --> 00:59:11,100
and pass it to the agent
or it's a different thing?

1302
00:59:11,100 --> 00:59:12,960
- [Du'An] So when we talk
about using too many tokens,

1303
00:59:12,960 --> 00:59:15,123
there's a lot of variables in that, right?

1304
00:59:16,800 --> 00:59:18,060
What you'll have to do is actually look

1305
00:59:18,060 --> 00:59:19,260
at the observability.

1306
00:59:19,260 --> 00:59:22,350
And so what this will allow
you to do to look at each span

1307
00:59:22,350 --> 00:59:24,570
to see how many tokens were used, right?

1308
00:59:24,570 --> 00:59:27,780
So right now we're in the span
for the chat with the agent

1309
00:59:27,780 --> 00:59:31,470
and we can see exactly
how long this span took,

1310
00:59:31,470 --> 00:59:34,560
meaning the time we
invoked the actual model,

1311
00:59:34,560 --> 00:59:37,590
the input tokens, how many
tokens were passed in,

1312
00:59:37,590 --> 00:59:40,200
and how many tokens were output.

1313
00:59:40,200 --> 00:59:43,080
Now, what we could actually
do is go in here and look at,

1314
00:59:43,080 --> 00:59:46,590
okay, when it comes to the
tokens that were passed in,

1315
00:59:46,590 --> 00:59:48,060
well, we know the system prompt.

1316
00:59:48,060 --> 00:59:50,130
How many tokens did that take, right?

1317
00:59:50,130 --> 00:59:52,920
We can actually look at
that, the user message.

1318
00:59:52,920 --> 00:59:55,050
How many tokens did that take?

1319
00:59:55,050 --> 00:59:59,430
The tool calls, the tool messages,
how many tokens was that?

1320
00:59:59,430 --> 01:00:00,690
And we can actually analyze

1321
01:00:00,690 --> 01:00:02,760
and get very granular at that point.

1322
01:00:02,760 --> 01:00:05,250
That's what we can do in observability.

1323
01:00:05,250 --> 01:00:06,720
- [Attendee] Okay.

1324
01:00:06,720 --> 01:00:08,940
- [Erik] Alright. All right.

1325
01:00:08,940 --> 01:00:10,173
- [Du'An] We got one more in the back.

1326
01:00:10,173 --> 01:00:13,410
- [Erik] I could, let's, yeah,
we only got two minutes left.

1327
01:00:13,410 --> 01:00:14,398
- [Du'An] Okay.

1328
01:00:14,398 --> 01:00:17,490
- [Erik] So maybe we can,
let's switch it over to the,

1329
01:00:17,490 --> 01:00:19,290
then we can answer some questions,

1330
01:00:19,290 --> 01:00:21,000
submission over to the PowerPoint.

1331
01:00:21,000 --> 01:00:24,600
So I just wanted to say
if you need to contact us,

1332
01:00:24,600 --> 01:00:26,130
our email addresses are here.

1333
01:00:26,130 --> 01:00:28,833
We'd love to talk to you
guys. Thank you so much.

